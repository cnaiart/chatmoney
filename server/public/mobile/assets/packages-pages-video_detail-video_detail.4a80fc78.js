import{_ as e}from"./page-meta.d2ccf398.js";import{d as a,A as t,s as l,ct as s,G as u,Z as r,o as i,k as o,b as n,w as p,g as d,f as c,e as f,t as m,p as _,m as x,n as g,F as y,aC as v,ad as b,z as w,bc as h,r as j,a as k,aD as C,j as I,h as q}from"./index-9f08b835.js";import{_ as L}from"./u-icon.f0423eb2.js";import{_ as O}from"./u-button.cd082997.js";import{F as R}from"./floating-menu.a8f47c3e.js";import{_ as V}from"./u-popup.6c89de8e.js";import{_ as z}from"./page-status.a37f4663.js";import{b as A}from"./video.a7b79a96.js";import{u as N}from"./useCopy.7659937f.js";import{a as S}from"./download.bd561ce2.js";import{c as $,v as D}from"./square.954d0237.js";import{_ as F}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading.15b95fef.js";const G=F(a({__name:"video_detail",setup(a){const F=v.baseUrl,{copy:G}=N(),T=b(),U=w(),B=t(),E=l(s.LOADING),J=l({status_desc:"生成成功",style_desc:"电影镜头",type_desc:"文生视频",id:96,prompt:"",type:1,tags:"电影镜头",image:"",nickname:"",channel:"openai_hk",video_url:"",style_id:"4",status:2,create_time:""}),K=u({id:""}),M=l(!1),Z=async()=>{if(B.isLogin)try{await D({records_id:K.id,status:J.value.is_collect?0:1}),J.value.is_collect=J.value.is_collect?0:1}catch(e){console.error(e),uni.$u.toast(JSON.stringify(e))}else U.navigateTo("/pages/login/login")},H=()=>{B.isLogin?h()?M.value=!0:S(J.value.video_url,"视频"):U.navigateTo("/pages/login/login")},P=async()=>{await G(J.value.video_url),M.value=!1};return r((async()=>{const e=T.query.id;await(async e=>{try{if(T.query.collectId){const a=await $({id:e});J.value=a}else{const a=await A({id:e});J.value=a[0]}E.value=s.NORMAL}catch(a){E.value=s.ERROR}})(e),K.id=T.query.collectId})),(a,t)=>{const l=j(k("page-meta"),e),s=C,u=I,r=q,v=j(k("u-icon"),L),b=j(k("u-button"),O),w=j(k("floating-menu"),R),h=j(k("u-popup"),V),A=j(k("page-status"),z);return i(),o(y,null,[n(l,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),n(A,{class:"h-full",status:E.value},{default:p((()=>[n(u,{class:"h-full flex flex-col"},{default:p((()=>[n(u,{class:"flex-1 min-h-0"},{default:p((()=>[n(u,{class:"px-[20rpx] bg-white",style:{"padding-bottom":"50px"}},{default:p((()=>[d("      视频      "),n(u,{class:"pt-[24rpx]",style:{height:"720rpx"}},{default:p((()=>[n(s,{class:"w-full h-full rounded-[10rpx] overflow-hidden object-cover",preload:"",autoplay:"",muted:"",loop:"","initial-time":"0",playsinline:"","show-progress":!1,"webkit-playsinline":"","x-webkit-airplay":"allow","x5-video-player-fullscreen":"true","x5-video-player-type":"h5",src:J.value.video_url},null,8,["src"])])),_:1}),d("      视频描述词      "),n(u,{class:"mt-[30rpx]"},{default:p((()=>[n(u,{class:"flex items-center justify-between"},{default:p((()=>[n(r,{class:"text-lg font-medium"},{default:p((()=>[c("描述场景词")])),_:1}),n(r,{class:"text-primary text-base",onClick:t[0]||(t[0]=e=>f(G)(J.value.prompt))},{default:p((()=>[c("复制")])),_:1})])),_:1}),n(u,{class:"min-h-[150rpx] mt-[20rpx] p-[20rpx] bg-page rounded-lg"},{default:p((()=>[n(r,{class:"text-base leading-4",style:{"letter-spacing":"1px"}},{default:p((()=>[c(m(J.value.prompt),1)])),_:1})])),_:1})])),_:1}),d("      创作信息      "),n(u,{class:"mt-[30rpx]",style:{"padding-bottom":"100rpx"}},{default:p((()=>[n(u,{class:"text-lg font-medium"},{default:p((()=>[c("创作信息")])),_:1}),n(u,{class:"mt-[20rpx] p-[20rpx] bg-page rounded-lg text-main text-base"},{default:p((()=>[n(u,{class:"flex items-center justify-between"},{default:p((()=>[n(r,null,{default:p((()=>[c("创作者")])),_:1}),n(r,null,{default:p((()=>{var e,a;return[c(m(J.value.nickname||(null==(a=null==(e=f(B))?void 0:e.userInfo)?void 0:a.nickname)),1)]})),_:1})])),_:1}),n(u,{class:"flex items-center justify-between mt-[20rpx]"},{default:p((()=>[n(r,null,{default:p((()=>[c("生成时间")])),_:1}),n(r,null,{default:p((()=>[c(m(J.value.create_time),1)])),_:1})])),_:1}),n(u,{class:"flex items-center justify-between mt-[20rpx]"},{default:p((()=>[n(r,null,{default:p((()=>[c("视频类型")])),_:1}),n(r,null,{default:p((()=>[c(m(J.value.type_desc),1)])),_:1})])),_:1}),n(u,{class:"flex items-center justify-between mt-[20rpx]"},{default:p((()=>[n(r,null,{default:p((()=>[c("视频风格")])),_:1}),n(r,null,{default:p((()=>[c(m(J.value.style_desc),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(u,{class:"video-detail-footer flex justify-between items-center px-[60rpx]"},{default:p((()=>[n(u,{class:"flex text-xs text-[#666]"},{default:p((()=>[n(u,{class:"text-center",onClick:_(Z,["stop"])},{default:p((()=>[n(u,{class:"praise"},{default:p((()=>[n(u,{class:x(["praise-animate",[J.value.is_collect?"praise-entry":"praise-leave"]]),style:g({backgroundImage:`url(${f(F)}resource/image/api/default/praise02.png)`})},null,8,["style","class"])])),_:1}),n(u,{class:"text-[22rpx] text-content"},{default:p((()=>[c("收藏")])),_:1})])),_:1},8,["onClick"]),n(u,{class:"ml-7 text-center",onClick:t[1]||(t[1]=_((e=>H(J.value)),["stop"]))},{default:p((()=>[n(u,{class:"mt-[2rpx] mb-[4rpx]"},{default:p((()=>[n(v,{name:"download",size:"42"})])),_:1}),n(u,{class:"text-[22rpx] text-content"},{default:p((()=>[c("下载")])),_:1})])),_:1})])),_:1}),n(b,{type:"primary",size:"default",customStyle:{padding:"0 30rpx",height:"82rpx",width:"400rpx",margin:"0"},onClick:H},{default:p((()=>[c(" 保存视频 ")])),_:1})])),_:1})])),_:1})])),_:1}),d("    悬浮菜单    "),n(w),n(h,{modelValue:M.value,"onUpdate:modelValue":t[2]||(t[2]=e=>M.value=e),mode:"center","border-radius":"15",closeable:""},{default:p((()=>[n(u,{class:"w-[650rpx] p-[40rpx]"},{default:p((()=>[n(u,{class:"text-lg font-bold text-center mb-[40rpx]"},{default:p((()=>[c(" 下载视频 ")])),_:1}),n(u,{class:"mb-[40rpx]"},{default:p((()=>[c(" 当前环境不支持下载，请复制链接到浏览器打开下载 ")])),_:1}),n(b,{type:"primary",shape:"circle",onClick:P},{default:p((()=>[c(" 复制链接 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["status"])],64)}}}),[["__scopeId","data-v-44aed222"]]);export{G as default};
