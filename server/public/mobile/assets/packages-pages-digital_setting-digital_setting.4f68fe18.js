import{_ as e}from"./page-meta.d2ccf398.js";import{d as l,o as a,c as t,w as u,b as s,f as d,t as i,p as r,g as o,k as m,e as p,F as _,m as n,j as c,r as f,a as v,s as x,M as b,x as y,l as g,I as V,L as w,ax as k,z as h,ad as j}from"./index-9f08b835.js";import{_ as q}from"./u-input.6dc4a2b4.js";import{_ as U}from"./u-form-item.95df05ac.js";import{_ as C}from"./app-upload.vue_vue_type_script_setup_true_lang.dde95d06.js";import{_ as M}from"./u-form.1bf0b756.js";import{_ as P}from"./u-button.cd082997.js";import{a as z,b as I,c as A}from"./digital.cde3f98f.js";import{_ as B}from"./u-popup.6c89de8e.js";import{u as S}from"./index.f8572cdb.js";import{_ as T}from"./u-icon.f0423eb2.js";import{u as F}from"./useAudio.8d04ba62.js";import{_ as H}from"./_plugin-vue_export-helper.1b428a4d.js";import"./emitter.1571a5d9.js";import"./mixin.c6ddb3c1.js";import"./isString.bf535bd9.js";import"./index.73309c03.js";import"./howler.bdae6f69.js";import"./_commonjsHelpers.157f59fb.js";const R=H(l({__name:"item",props:{isActive:{type:Boolean},value:null,url:null,placeholder:null,closeable:{type:Boolean}},emits:["close","click"],setup(e,{emit:l}){const{play:x,pause:b,isPlaying:y}=F();return(g,V)=>{const w=c,k=f(v("u-icon"),T);return a(),t(w,{class:n(["dub-item",{"dub-item--is-active":e.isActive,"dub-item--placeholder":!e.value}]),onClick:V[2]||(V[2]=e=>l("click"))},{default:u((()=>[s(w,{class:"flex-1 min-w-0 line-clamp-1"},{default:u((()=>[d(i(e.value?e.value:e.placeholder),1)])),_:1}),e.value&&e.closeable?(a(),t(w,{key:0,class:"flex mx-[10rpx]",onClick:V[0]||(V[0]=r((e=>l("close")),["stop"]))},{default:u((()=>[s(k,{name:"close-circle",size:36})])),_:1})):o("v-if",!0),e.url?(a(),m(_,{key:1},[p(y)?(a(),t(w,{key:0,class:"flex",onClick:r(p(b),["stop"])},{default:u((()=>[s(k,{name:"pause-circle",size:36})])),_:1},8,["onClick"])):(a(),t(w,{key:1,class:"flex",onClick:V[1]||(V[1]=r((l=>p(x)(e.url)),["stop"]))},{default:u((()=>[s(k,{name:"play-circle",size:36})])),_:1}))],64)):o("v-if",!0)])),_:1},8,["class"])}}}),[["__scopeId","data-v-cb2725b7"]]),J=l({__name:"dub-picker",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const i=e,r=x(""),o=x(!1),n=S(i,"modelValue",l),w=x({}),k=b((()=>w.value[n.value]||{})),h=()=>{n.value=r.value,o.value=!1};return(async()=>{w.value=await z()})(),y(o,(()=>{r.value=i.modelValue})),(e,l)=>{const i=c,x=f(v("u-button"),P),b=V,y=f(v("u-popup"),B);return a(),t(i,{class:"inline-flex items-center"},{default:u((()=>[s(i,{class:"relative w-[500rpx]"},{default:u((()=>[s(R,{closeable:"",value:p(k).name||p(n),url:p(k).example,placeholder:"请选择配音",onClose:l[0]||(l[0]=e=>n.value="")},null,8,["value","url"])])),_:1}),s(i,{class:"ml-[20rpx]",onClick:l[1]||(l[1]=e=>o.value=!0)},{default:u((()=>[s(x,{type:"primary",plain:"",customStyle:{height:"70rpx",lineHeight:"70rpx"}},{default:u((()=>[d(" 选择配音 ")])),_:1})])),_:1}),s(y,{modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value=e),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:u((()=>[s(i,{class:"h-[70vh] flex flex-col"},{default:u((()=>[s(i,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:u((()=>[d(" 选择配音 ")])),_:1}),s(i,{class:"flex-1 min-h-0"},{default:u((()=>[s(b,{class:"h-full","scroll-y":""},{default:u((()=>[s(i,{class:"flex flex-wrap mx-[-10rpx] p-[20rpx]"},{default:u((()=>[(a(!0),m(_,null,g(w.value,((e,l)=>(a(),t(i,{class:"w-[50%] mb-[20rpx] px-[10rpx]",key:l},{default:u((()=>[s(i,{class:"w-full",onClick:e=>r.value=l},{default:u((()=>[s(R,{"is-active":l==r.value,value:e.name,url:e.example},null,8,["is-active","value","url"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),s(i,{class:"p-[20rpx]"},{default:u((()=>[s(x,{type:"primary",onClick:h},{default:u((()=>[d(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),L=H(l({__name:"digital_setting",setup(l){const t=h(),i=j(),r=w(),o=x({name:"",avatar:"",image:"",wide_stay_video:"",wide_talk_video:"",vertical_stay_video:"",vertical_talk_video:"",channel:"",dubbing:"",idle_time:10,idle_reply:""}),p={name:[{required:!0,message:"请输入形象名称"}],avatar:[{required:!0,type:"string",message:"请选择形象头像"}],image:[{required:!0,type:"string",message:"请选择形象封面"}],wide_stay_video:[{required:!0,type:"string",message:"请选择宽屏人物待机视频"}],wide_talk_video:[{required:!0,type:"string",message:"请选择宽屏人物说话视频"}],vertical_stay_video:[{required:!0,type:"string",message:"请选择竖屏人物待机视频"}],vertical_talk_video:[{required:!0,type:"string",message:"请选择竖屏人物说话视频"}],dubbing:[{required:!0,message:"请选择配音角色"}],idle_time:[{required:!0,message:"请输入自定义闲时时间"}],idle_reply:[{required:!0,type:"string",message:"请输入闲时回复内容"}]},n=()=>{r.value.validate((async e=>{e&&(o.value.idle_time=Number(o.value.idle_time),await I(o.value),setTimeout((()=>{t.navigateBack()}),1e3))}))};return k((()=>{(async()=>{o.value=await A({id:i.query.id})})(),setTimeout((()=>{r.value.setRules(p)}),10)})),(l,t)=>{const i=f(v("page-meta"),e),x=f(v("u-input"),q),b=c,y=f(v("u-form-item"),U),g=f(v("app-upload"),C),w=f(v("u-form"),M),k=V,h=f(v("u-button"),P);return a(),m(_,null,[s(i,{"page-style":l.$theme.pageStyle},null,8,["page-style"]),s(b,{class:"h-full flex flex-col bg-white"},{default:u((()=>[s(b,{class:"flex-1 min-h-0"},{default:u((()=>[s(k,{class:"h-full","scroll-y":""},{default:u((()=>[s(b,{class:"px-[20rpx]"},{default:u((()=>[s(w,{ref_key:"uFormRef",ref:r,rules:p,model:o.value,"label-position":"top","border-bottom":!1},{default:u((()=>[s(y,{label:"形象名称",prop:"name",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(x,{modelValue:o.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.name=e),placeholder:"请输入形象名称",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),s(y,{label:"形象头像",prop:"avatar",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(g,{modelValue:o.value.avatar,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.avatar=e)},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 建议尺寸：50*50px ")])),_:1})])),_:1})])),_:1}),s(y,{label:"形象封面",prop:"image",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(g,{modelValue:o.value.image,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.image=e)},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 建议尺寸：280*50px ")])),_:1})])),_:1})])),_:1}),s(y,{label:"宽屏人物待机视频",prop:"wide_stay_video",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(g,{accept:"video",modelValue:o.value.wide_stay_video,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.wide_stay_video=e)},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 格式为MP4，大小不能超过20M ")])),_:1})])),_:1})])),_:1}),s(y,{label:"宽屏人物说话视频",prop:"wide_talk_video",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(g,{accept:"video",modelValue:o.value.wide_talk_video,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.wide_talk_video=e)},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 格式为MP4，大小不能超过20M ")])),_:1})])),_:1})])),_:1}),s(y,{label:"竖屏人物待机视频",prop:"vertical_stay_video",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(g,{accept:"video",modelValue:o.value.vertical_stay_video,"onUpdate:modelValue":t[5]||(t[5]=e=>o.value.vertical_stay_video=e)},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 格式为MP4，大小不能超过20M ")])),_:1})])),_:1})])),_:1}),s(y,{label:"竖屏人物说话视频",prop:"vertical_talk_video",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(g,{accept:"video",modelValue:o.value.vertical_talk_video,"onUpdate:modelValue":t[6]||(t[6]=e=>o.value.vertical_talk_video=e)},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 格式为MP4，大小不能超过20M ")])),_:1})])),_:1})])),_:1}),s(y,{label:"选择配音",prop:"dubbing",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(J,{modelValue:o.value.dubbing,"onUpdate:modelValue":t[7]||(t[7]=e=>o.value.dubbing=e)},null,8,["modelValue"])])),_:1})])),_:1}),s(y,{label:"自定义闲时时间",prop:"idle_time",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(b,{class:"flex border border-solid border-light rounded-[8rpx] pl-[20rpx]"},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(x,{type:"number",modelValue:o.value.idle_time,"onUpdate:modelValue":t[8]||(t[8]=e=>o.value.idle_time=e),placeholder:"请输入自定义闲时时间"},null,8,["modelValue"])])),_:1}),s(b,{class:"bg-[#e5e5e5] px-[25rpx] flex items-center text-content"},{default:u((()=>[d(" 秒 ")])),_:1})])),_:1}),s(b,{class:"text-muted"},{default:u((()=>[d(" 例如：选择5s，每隔5秒就会有一个回复内容，内容是在 闲时回复内容的文案 ")])),_:1})])),_:1})])),_:1}),s(y,{label:"闲时回复内容",prop:"idle_reply",required:""},{default:u((()=>[s(b,{class:"flex-1 min-w-0"},{default:u((()=>[s(x,{modelValue:o.value.idle_reply,"onUpdate:modelValue":t[9]||(t[9]=e=>o.value.idle_reply=e),type:"textarea",height:150,placeholder:"请输入内容",border:!0},null,8,["modelValue"]),s(b,{class:"text-muted"},{default:u((()=>[d(" 根据自定义闲时时间段设置后形象回复的内容 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),s(b,{class:"p-[20rpx]"},{default:u((()=>[s(h,{type:"primary",onClick:n},{default:u((()=>[d(" 确定 ")])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-2f51ebba"]]);export{L as default};
