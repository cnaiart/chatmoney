import{_ as e}from"./page-meta.d2ccf398.js";import{aQ as l,aR as a,aS as t,aT as s,aU as o,d as r,s as u,o as d,c as i,w as n,b as m,e as p,f as c,t as f,g as x,r as _,a as b,j as y,u as h,p as v,h as g,L as w,x as k,N as A,I as V,G as C,B as U,k as I,l as j,F as W,m as B,ax as E,aG as F,aH as G,z as S,T as q,ad as R,i as T,M as H,R as Q,Z as J,aE as z}from"./index-9f08b835.js";import{_ as N}from"./u-navbar.9b578443.js";import{_ as L}from"./u-tabs.3aba862d.js";import{_ as Z}from"./u-form.1bf0b756.js";import{_ as O}from"./u-button.cd082997.js";import{_ as K}from"./app-upload.vue_vue_type_script_setup_true_lang.dde95d06.js";import{_ as P}from"./u-form-item.95df05ac.js";import{_ as D}from"./u-input.6dc4a2b4.js";import{_ as M}from"./app-select.e953affb.js";import{_ as Y}from"./u-switch.2a75b2d9.js";import{u as X,a as $}from"./index.f8572cdb.js";import{g as ee}from"./kb.bf089164.js";import{a as le,h as ae,n as te,o as se,q as oe,s as re,t as ue}from"./robot.8b2fb6bb.js";import{_ as de}from"./u-icon.f0423eb2.js";import{_ as ie}from"./model-picker.dbbe4c90.js";import{_ as ne}from"./app-slider.58a81c69.js";import{_ as me,a as pe}from"./u-radio-group.31ee5ed9.js";import{_ as ce}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as fe,a as xe,b as _e,c as be}from"./uni-table.086414ca.js";import{l as ye}from"./lodash.d83f57d8.js";import{_ as he}from"./u-popup.6c89de8e.js";import{_ as ve}from"./u-avatar.fa3324f6.js";import{g as ge}from"./digital.cde3f98f.js";import{_ as we}from"./u-image.e6fb9592.js";import{_ as ke}from"./u-read-more.a42203b8.js";import{_ as Ae}from"./z-paging.5d396652.js";import{_ as Ve}from"./ua-markdown.f5ba7fba.js";import{_ as Ce}from"./app-upload-file.vue_vue_type_script_setup_true_lang.eeb44517.js";import{T as Ue}from"./text-item.75b27895.js";import{D as Ie}from"./default_avatar.84088887.js";import{c as je}from"./cloneDeep.bc7b0787.js";import"./u-badge.508fc5b2.js";import"./mixin.c6ddb3c1.js";import"./isString.bf535bd9.js";import"./emitter.1571a5d9.js";import"./u-tag.d6be710f.js";import"./u-search.333cf11c.js";import"./u-checkbox.468f126b.js";import"./u-loading.15b95fef.js";import"./index.73309c03.js";import"./u-collapse.3475c9a9.js";import"./_commonjsHelpers.157f59fb.js";import"./katex.30814119.js";import"./mp-html.6ddc2dff.js";import"./uni-file-picker.55c7ce72.js";import"./index.c3709e84.js";import"./icon_copy.36709540.js";import"./chat.05123b79.js";import"./howler.bdae6f69.js";import"./useCopy.7659937f.js";var We="[object Symbol]";function Be(e){return"symbol"==typeof e||l(e)&&a(e)==We}var Ee=1/0,Fe=t?t.prototype:void 0,Ge=Fe?Fe.toString:void 0;function Se(e){if("string"==typeof e)return e;if(s(e))return function(e,l){for(var a=-1,t=null==e?0:e.length,s=Array(t);++a<t;)s[a]=l(e[a],a,e);return s}(e,Se)+"";if(Be(e))return Ge?Ge.call(e):"";var l=e+"";return"0"==l&&1/e==-Ee?"-0":l}var qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/;var Te="Expected a function";function He(e,l){if("function"!=typeof e||null!=l&&"function"!=typeof l)throw new TypeError(Te);var a=function(){var t=arguments,s=l?l.apply(this,t):t[0],o=a.cache;if(o.has(s))return o.get(s);var r=e.apply(this,t);return a.cache=o.set(s,r)||o,r};return a.cache=new(He.Cache||o),a}He.Cache=o;var Qe,Je,ze,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/\\(\\)?/g,Ze=(Qe=function(e){var l=[];return 46===e.charCodeAt(0)&&l.push(""),e.replace(Ne,(function(e,a,t,s){l.push(t?s.replace(Le,"$1"):a||e)})),l},Je=He(Qe,(function(e){return 500===ze.size&&ze.clear(),e})),ze=Je.cache,Je);const Oe=Ze;function Ke(e,l){return s(e)?e:function(e,l){if(s(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!Be(e))||Re.test(e)||!qe.test(e)||null!=l&&e in Object(l)}(e,l)?[e]:Oe(function(e){return null==e?"":Se(e)}(e))}var Pe=1/0;function De(e){if("string"==typeof e||Be(e))return e;var l=e+"";return"0"==l&&1/e==-Pe?"-0":l}function Me(e,l,a){var t=null==e?void 0:function(e,l){for(var a=0,t=(l=Ke(l,e)).length;null!=e&&a<t;)e=e[De(l[a++])];return a&&a==t?e:void 0}(e,l);return void 0===t?a:t}const Ye=r({__name:"base-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const a=X(e,"modelValue",l),t=u([]),s=u([]);return(async()=>{const{lists:e=[]}=await ee({page_type:0});t.value=e})(),(async()=>{s.value=await le(),s.value.unshift({id:0,name:"全部"})})(),(e,l)=>{const s=_(b("app-upload"),K),o=y,r=_(b("u-form-item"),P),u=_(b("u-input"),D),h=_(b("app-select"),M),v=_(b("u-switch"),Y);return d(),i(o,null,{default:n((()=>[m(r,{label:"智能体图标",prop:"image",required:""},{default:n((()=>[m(o,{class:"mx-[-10rpx] flex-1 min-w-0"},{default:n((()=>[m(s,{modelValue:p(a).image,"onUpdate:modelValue":l[0]||(l[0]=e=>p(a).image=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(r,{label:"智能体名称",prop:"name",required:""},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(u,{modelValue:p(a).name,"onUpdate:modelValue":l[1]||(l[1]=e=>p(a).name=e),placeholder:"给你的智能体取个响亮的名字",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),m(r,{label:"智能体简介",prop:"intro"},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(u,{modelValue:p(a).intro,"onUpdate:modelValue":l[2]||(l[2]=e=>p(a).intro=e),type:"textarea",height:150,placeholder:"请简单描述下给你的智能体",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),m(r,{label:"关联知识库",prop:"kb_ids"},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(h,{modelValue:p(a).kb_ids,"onUpdate:modelValue":l[3]||(l[3]=e=>p(a).kb_ids=e),popupTitle:"关联知识库选择",dataLists:t.value,placeholder:"请选择",value:"id",type:"checkbox"},{label:n((({item:e})=>[c(f(e.name),1)])),_:1},8,["modelValue","dataLists"])])),_:1})])),_:1}),m(r,{label:"角色设定",prop:"roles_prompt"},{default:n((()=>[m(o,{class:"flex-1"},{default:n((()=>[m(u,{modelValue:p(a).roles_prompt,"onUpdate:modelValue":l[4]||(l[4]=e=>p(a).roles_prompt=e),type:"textarea",height:200,placeholder:"请输入角色设定",border:!0},null,8,["modelValue"]),m(o,{class:"text-muted"},{default:n((()=>[c(" 引导应用的聊天方向，该内容会被固定在上下文的开头。 ")])),_:1})])),_:1})])),_:1}),m(r,{label:"对话图标",prop:"icons",required:""},{default:n((()=>[m(o,{class:"mx-[-10rpx] flex-1 min-w-0"},{default:n((()=>[m(s,{modelValue:p(a).icons,"onUpdate:modelValue":l[5]||(l[5]=e=>p(a).icons=e)},null,8,["modelValue"]),m(o,{class:"text-muted mx-[10rpx]"},{default:n((()=>[c(" 不设置的话，对话图标默认拿智能体封面 ")])),_:1})])),_:1})])),_:1}),m(r,{label:"对话上下文","label-position":"left","label-width":"150",prop:"is_show_context"},{default:n((()=>[m(o,{class:"flex-1"},{default:n((()=>[m(o,{class:"flex justify-end items-center"},{default:n((()=>[m(v,{modelValue:p(a).is_show_context,"onUpdate:modelValue":l[6]||(l[6]=e=>p(a).is_show_context=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),m(o,{class:"ml-[12rpx]"},{default:n((()=>[c(f(1==p(a).is_show_context?"显示":"隐藏"),1)])),_:1})])),_:1})])),_:1})])),_:1}),m(o,{class:"text-muted"},{default:n((()=>[c("在前台显示对话上下文，默认显示")])),_:1}),m(r,{label:"引用内容","label-position":"left","label-width":"150",prop:"is_show_quote"},{default:n((()=>[m(o,{class:"flex-1"},{default:n((()=>[m(o,{class:"flex justify-end items-center"},{default:n((()=>[m(v,{modelValue:p(a).is_show_quote,"onUpdate:modelValue":l[7]||(l[7]=e=>p(a).is_show_quote=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),m(o,{class:"ml-[12rpx]"},{default:n((()=>[c(f(1==p(a).is_show_quote?"显示":"隐藏"),1)])),_:1})])),_:1})])),_:1})])),_:1}),m(o,{class:"text-muted"},{default:n((()=>[c("在前台显示引用内容，默认显示")])),_:1}),m(r,{label:"问答相似问题推荐",prop:"related_issues_num"},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(u,{modelValue:p(a).related_issues_num,"onUpdate:modelValue":l[8]||(l[8]=e=>p(a).related_issues_num=e),placeholder:"给你的智能体取个响亮的名字",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),m(o,{class:"text-muted"},{default:n((()=>[c("作用于智能体对话问题推荐，填0对话问题推荐不生效")])),_:1}),x("        <u-form-item"),x('            label="公开智能体"'),x('            label-position="left"'),x('            label-width="150"'),x('            prop="is_public"'),x("        >"),x('            <view class="flex-1">'),x('                <view class="flex justify-end items-center">'),x("                    <u-switch"),x('                        v-model="formData.is_public"'),x('                        :active-value="1"'),x('                        :inactive-value="0"'),x('                        :size="40"'),x("                    ></u-switch>"),x('                    <view class="ml-[12rpx]">'),x("                        {{ formData.is_public == 1 ? '公开' : '私有' }}"),x("                    </view>"),x("                </view>"),x("            </view>"),x("        </u-form-item>"),x('        <view class="text-muted">公开智能体后，其他用户都会看到</view>'),x("        <u-form-item"),x('            v-if="formData.is_public == 1"'),x('            label="智能体分类"'),x('            label-width="150"'),x('            prop="cate_id"'),x("            required"),x("        >"),x('            <view class="flex-1">'),x("                <app-select"),x('                    v-model="formData.cate_id"'),x('                    popupTitle="请选择智能体分类"'),x('                    :dataLists="robotCategory"'),x('                    placeholder="请选择"'),x('                    value="id"'),x('                    type="radio"'),x("                >"),x("                </app-select>"),x('                <view class="text-muted">给公开的智能体分类</view>'),x("            </view>"),x("        </u-form-item>")])),_:1})}}}),Xe=ce(r({__name:"search-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,t=h(),s=X(a,"modelValue",l);return(e,l)=>{const a=g,o=y,r=_(b("u-icon"),de),u=_(b("model-picker"),ie),h=_(b("u-form-item"),P),w=_(b("app-slider"),ne),k=_(b("u-radio"),me),A=_(b("u-radio-group"),pe),V=_(b("u-input"),D);return d(),i(o,null,{default:n((()=>[m(h,{label:"AI模型",prop:"model_sub_id",required:""},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(u,{setDefault:!1,id:p(s).model_id,"onUpdate:id":l[1]||(l[1]=e=>p(s).model_id=e),sub_id:p(s).model_sub_id,"onUpdate:sub_id":l[2]||(l[2]=e=>p(s).model_sub_id=e)},{default:n((({item:e})=>[m(o,{class:"input flex"},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(o,{class:"line-clamp-1"},{default:n((()=>[e.alias?(d(),i(a,{key:0},{default:n((()=>[c(f(e.alias),1)])),_:2},1024)):(d(),i(a,{key:1,class:"text-[#888]"},{default:n((()=>[c("请选择")])),_:1})),e.alias&&"0"==e.price?(d(),i(a,{key:2,class:"text-muted"},{default:n((()=>[c(" (免费) ")])),_:1})):e.alias?(d(),i(a,{key:3,class:"text-muted"},{default:n((()=>[c(" ("+f(`消耗${e.price}${p(t).getTokenUnit}/1千字符`)+") ",1)])),_:2},1024)):x("v-if",!0)])),_:2},1024)])),_:2},1024),p(s).model_id?(d(),i(o,{key:0,class:"text-muted flex flex-none mx-[20rpx]",onClick:l[0]||(l[0]=v((e=>{p(s).model_id="",p(s).model_sub_id=""}),["stop"]))},{default:n((()=>[m(r,{name:"close-circle"})])),_:1})):x("v-if",!0),m(o,{class:"text-muted flex"},{default:n((()=>[m(r,{name:"arrow-down"})])),_:1})])),_:2},1024)])),_:1},8,["id","sub_id"])])),_:1})])),_:1}),m(h,{label:"相似度",prop:"search_similarity"},{default:n((()=>[m(o,{class:"flex-1"},{default:n((()=>[m(o,null,{default:n((()=>[m(w,{min:0,max:1,step:.001,activeColor:e.$theme.primaryColor,modelValue:p(s).search_similarity,"onUpdate:modelValue":l[3]||(l[3]=e=>p(s).search_similarity=e)},null,8,["step","activeColor","modelValue"])])),_:1}),m(o,{class:"text-muted"},{default:n((()=>[c(" 输入0-1之间的数值，支持3位小数点；高相似度推荐设置0.8以上 ")])),_:1})])),_:1})])),_:1}),m(h,{label:"单次搜索数量",prop:"search_limits"},{default:n((()=>[m(o,{class:"flex-1 w-full"},{default:n((()=>[m(o,null,{default:n((()=>[m(w,{min:0,max:20,activeColor:e.$theme.primaryColor,modelValue:p(s).search_limits,"onUpdate:modelValue":l[4]||(l[4]=e=>p(s).search_limits=e)},null,8,["activeColor","modelValue"])])),_:1}),m(o,{class:"text-muted"},{default:n((()=>[c(" 默认设置为5，请输入0-20之间的整数数值 ")])),_:1})])),_:1})])),_:1}),m(h,{label:"空搜索回复","label-position":"left","label-width":"150"},{default:n((()=>[m(o,{class:"flex-1 flex justify-end"},{default:n((()=>[m(A,{modelValue:p(s).search_empty_type,"onUpdate:modelValue":l[5]||(l[5]=e=>p(s).search_empty_type=e)},{default:n((()=>[m(k,{name:1},{default:n((()=>[c(" AI回复 ")])),_:1}),m(k,{name:2},{default:n((()=>[c(" 自定义回复 ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),2===p(s).search_empty_type?(d(),i(h,{key:0},{default:n((()=>[m(o,{class:"flex-1 min-w-0"},{default:n((()=>[m(V,{modelValue:p(s).search_empty_text,"onUpdate:modelValue":l[6]||(l[6]=e=>p(s).search_empty_text=e),type:"textarea",height:200,placeholder:"请输入回复内容，当搜索匹配不上内容时，直接回复填写的内容",border:!0},null,8,["modelValue"])])),_:1})])),_:1})):x("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-f27316ec"]]),$e=r({__name:"add-menus",props:{show:{type:Boolean},type:null,data:null},emits:["update:show","update:data","confirm"],setup(e,{emit:l}){const a=e,t=w(),{show:s,data:o}=$(a,l),r={keyword:[{required:!0,message:"请输入关键词"}]},u=()=>{t.value.validate((e=>{e&&(l("confirm",ye.cloneDeep(o.value)),s.value=!1)}))};return k(s,(e=>{e&&setTimeout((()=>{t.value.setRules(r)}))})),(e,l)=>{const a=y,r=_(b("u-input"),D),f=_(b("u-form-item"),P),x=_(b("app-upload"),K),h=_(b("u-form"),Z),v=V,g=_(b("u-button"),O),w=_(b("u-popup"),he);return d(),i(w,{modelValue:p(s),"onUpdate:modelValue":l[3]||(l[3]=e=>A(s)?s.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:n((()=>[m(a,{class:"h-[80vh] flex flex-col"},{default:n((()=>[m(a,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:n((()=>[c(" 添加菜单 ")])),_:1}),m(a,{class:"flex-1 min-h-0"},{default:n((()=>[m(v,{class:"h-full","scroll-y":""},{default:n((()=>[m(a,{class:"p-[20rpx]"},{default:n((()=>[m(h,{model:p(o),ref_key:"uFormRef",ref:t,"label-position":"top","border-bottom":!1},{default:n((()=>[m(f,{label:"关键词",prop:"keyword",required:""},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(r,{modelValue:p(o).keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>p(o).keyword=e),placeholder:"请输入关键词",border:!0},null,8,["modelValue"])])),_:1})])),_:1}),m(f,{label:"回复内容",prop:"content"},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(r,{modelValue:p(o).content,"onUpdate:modelValue":l[1]||(l[1]=e=>p(o).content=e),placeholder:"请输入回复内容，10000个字以内",border:!0,type:"textarea",height:300},null,8,["modelValue"])])),_:1})])),_:1}),m(f,{label:"上传图片"},{default:n((()=>[m(a,{class:"mx-[-10rpx] flex-1 min-w-0"},{default:n((()=>[m(x,{modelValue:p(o).images,"onUpdate:modelValue":l[2]||(l[2]=e=>p(o).images=e),"max-count":9,"return-type":"string-array",disabled:!1},null,8,["modelValue"]),m(a,{class:"text-muted"},{default:n((()=>[c(" 最多支持上传 9 张图 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),m(a,{class:"flex p-[20rpx]"},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(g,{type:"primary",onClick:u},{default:n((()=>[c(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),el=r({__name:"interface-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const a=X(e,"modelValue",l),t=C({show:!1,type:"add",data:{},index:0}),s=(e="add",l={images:[],content:"",keyword:""})=>{var s;t.show=!0,t.type=e,t.data=ye.cloneDeep(l),t.index=null==(s=a.value.menus)?void 0:s.indexOf(l)},o=e=>{var l,s,o;switch(t.type){case"add":(null==(l=a.value.menus)?void 0:l.length)<3&&(null==(s=a.value.menus)||s.push(e));break;case"edit":-1!==t.index&&(null==(o=a.value.menus)||o.splice(t.index,1,e))}};return(e,l)=>{const r=_(b("u-input"),D),u=y,h=_(b("u-form-item"),P),v=_(b("uni-th"),fe),g=_(b("uni-tr"),xe),w=_(b("uni-td"),_e),k=_(b("uni-table"),be),A=_(b("u-button"),O);return d(),i(u,null,{default:n((()=>[m(h,{label:"欢迎语",prop:"welcome_introducer"},{default:n((()=>[m(u,{class:"flex-1"},{default:n((()=>[m(r,{modelValue:p(a).welcome_introducer,"onUpdate:modelValue":l[0]||(l[0]=e=>p(a).welcome_introducer=e),type:"textarea",height:200,placeholder:"",border:!0},null,8,["modelValue"]),m(u,{class:"text-muted"},{default:n((()=>[c(" 打开聊天窗口后会主动发送，添加双井号可添加提问示例，例如：#帮我写一则关于xxx的文案# "),U("br"),c(" 多个问题请用回车换行 ")])),_:1})])),_:1})])),_:1}),m(h,{label:"底部标识",prop:"copyright"},{default:n((()=>[m(u,{class:"flex-1"},{default:n((()=>[m(r,{modelValue:p(a).copyright,"onUpdate:modelValue":l[1]||(l[1]=e=>p(a).copyright=e),placeholder:"",border:!0},null,8,["modelValue"]),m(u,{class:"text-muted"},{default:n((()=>[c(" 不填写不显示 ")])),_:1})])),_:1})])),_:1}),m(h,{label:"菜单设置"},{default:n((()=>[m(u,{class:"flex-1 min-w-0"},{default:n((()=>[m(k,{ref:"table",stripe:"",emptyText:"暂无更多数据"},{default:n((()=>[m(g,null,{default:n((()=>[m(v,{width:"100"},{default:n((()=>[c("关键词")])),_:1}),m(v,{width:"100"},{default:n((()=>[c("回复内容")])),_:1}),m(v,{width:"80"},{default:n((()=>[c("操作")])),_:1})])),_:1}),(d(!0),I(W,null,j(p(a).menus,((e,l)=>(d(),i(g,{key:l},{default:n((()=>[m(w,null,{default:n((()=>[c(f(e.keyword),1)])),_:2},1024),m(w,null,{default:n((()=>[m(u,{class:"flex"},{default:n((()=>{var l,a;return[e.content?(d(),i(u,{key:0},{default:n((()=>[c(" 文字 ")])),_:1})):x("v-if",!0),e.content&&(null==(l=e.images)?void 0:l.length)?(d(),i(u,{key:1},{default:n((()=>[c(" + ")])),_:1})):x("v-if",!0),(null==(a=e.images)?void 0:a.length)?(d(),i(u,{key:2},{default:n((()=>[c(" 图片 ")])),_:1})):x("v-if",!0)]})),_:2},1024)])),_:2},1024),m(w,null,{default:n((()=>[m(u,{class:"flex"},{default:n((()=>[m(u,{class:"text-primary mr-[20rpx]",onClick:l=>s("edit",e)},{default:n((()=>[c(" 编辑 ")])),_:2},1032,["onClick"]),m(u,{class:"text-error",onClick:e=>(e=>{var l;null==(l=a.value.menus)||l.splice(e,1)})(l)},{default:n((()=>[c(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},512),m(u,{class:"inline-flex mt-[20rpx]"},{default:n((()=>[m(A,{type:"primary",size:"medium",disabled:p(a).menus.length>=3,onClick:l[2]||(l[2]=e=>s())},{default:n((()=>[c(" +添加菜单 ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),m($e,{show:t.show,"onUpdate:show":l[3]||(l[3]=e=>t.show=e),type:t.type,data:t.data,"onUpdate:data":l[4]||(l[4]=e=>t.data=e),onConfirm:o},null,8,["show","type","data"])])),_:1})}}}),ll=r({__name:"digital-config",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const a=X(e,"modelValue",l),t=u([]);return(async()=>{const e=await ge({page_type:0});t.value=e.lists||[]})(),(e,l)=>{const s=_(b("u-switch"),Y),o=y,r=_(b("u-form-item"),P),u=_(b("u-avatar"),ve);return d(),i(o,null,{default:n((()=>[m(r,{label:"启用形象","label-position":"left","label-width":"150",prop:"is_digital"},{default:n((()=>[m(o,{class:"flex-1"},{default:n((()=>[m(o,{class:"flex justify-end items-center"},{default:n((()=>[m(s,{modelValue:p(a).is_digital,"onUpdate:modelValue":l[0]||(l[0]=e=>p(a).is_digital=e),"active-value":1,"inactive-value":0,size:40},null,8,["modelValue"]),m(o,{class:"ml-[12rpx]"},{default:n((()=>[c(f(1==p(a).is_digital?"开启":"关闭"),1)])),_:1})])),_:1})])),_:1})])),_:1}),x(' <u-form-item label="形象背景色" prop="digital_bg">\n            <color-picker v-model="formData.digital_bg" />\n        </u-form-item> '),1==p(a).is_digital?(d(),i(r,{key:0,label:"选择形象",prop:"digital_id",required:""},{default:n((()=>[m(o,{class:"flex-1 w-full flex flex-wrap mx-[-10rpx]"},{default:n((()=>[(d(!0),I(W,null,j(t.value,(e=>(d(),i(o,{class:"w-[50%] p-[10rpx]",key:e.id},{default:n((()=>[m(o,{class:B(["rounded-[10rpx] h-[100rpx] flex items-center px-[30rpx] border border-solid border-light",{"!bg-primary-light-7 !border-primary !text-primary":e.id==p(a).digital_id}]),onClick:l=>p(a).digital_id=e.id},{default:n((()=>[m(u,{size:64,src:e.avatar},null,8,["src"]),m(o,{class:"line-clamp-2 ml-[14rpx]"},{default:n((()=>[c(f(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):x("v-if",!0)])),_:1})}}}),al=u(),tl=u({kb_ids:[],icons:"",image:"",name:"",intro:"",model_id:"",model_sub_id:"",roles_prompt:"",search_similarity:.8,search_limits:3,search_empty_type:1,search_empty_text:"",welcome_introducer:"",is_show_context:1,is_show_quote:1,is_enable:1,menus:[]}),sl=u(""),ol=u(""),rl=()=>({robotInfo:tl,currentTab:ol,setRobotId:e=>{al.value=e},getRobotInfo:async()=>{tl.value=await ae({id:al.value}),sl.value=tl.value.name},reset:()=>{al.value=0,tl.value={kb_ids:[],icons:"",image:"",name:"",intro:"",model_id:"",model_sub_id:"",roles_prompt:"",search_similarity:.8,search_limits:3,search_empty_type:1,search_empty_text:"",welcome_introducer:"",is_show_context:1,is_show_quote:1,is_enable:1,menus:[]},sl.value="",ol.value=""},robotName:sl}),ul=ce(r({__name:"index",setup(e){const l=S(),a=C({list:[{name:"基本设置",type:"base"},{name:"AI模型/搜索配置",type:"search"},{name:"界面设置",type:"interface"},{name:"形象设置",type:"digital"}],current:"base"}),t=u(0),s=w(),{robotInfo:o,getRobotInfo:r}=rl(),h={image:[{required:!0,message:"请选择智能体图标"}],name:[{required:!0,message:"请输入智能体名称",trigger:["change"]}],model_sub_id:[{required:!0,message:"请选择AI模型"}],cate_id:[{required:!0,message:"请选择智能体分类"}],digital_id:[{required:!0,message:"请选择形象",validator:(e,l,a)=>l>0}]},v=()=>{s.value.validate((async e=>{e&&(await te(o.value),r(),setTimeout((()=>{l.navigateBack()}),1e3))}))};return E((()=>{setTimeout((()=>{s.value.setRules(h)}),10)})),(e,l)=>{const r=y,u=_(b("u-form"),Z),g=V,w=_(b("u-button"),O);return d(),i(r,{class:"h-full pt-[20rpx]"},{default:n((()=>[m(r,{class:"h-full bg-white flex flex-col py-[20rpx]"},{default:n((()=>[m(r,{class:"flex mb-[20rpx] px-[20rpx]"},{default:n((()=>[m(r,{class:"bg-page p-[8rpx] flex rounded-[8rpx]"},{default:n((()=>[(d(!0),I(W,null,j(a.list,(e=>(d(),i(r,{key:e.type,class:B(["px-[14rpx] py-[9rpx] rounded-[8rpx]",{"tab-active":e.type==a.current}]),onClick:l=>{return s=e.type,a.current=s,t.value=10,void q((()=>{t.value=0}));var s}},{default:n((()=>[c(f(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m(r,{class:"flex-1 min-h-0 relative z-10"},{default:n((()=>[m(g,{class:"h-full","scroll-y":"","scroll-top":t.value},{default:n((()=>[m(r,{class:"px-[20rpx]"},{default:n((()=>[m(u,{model:p(o),ref_key:"uFormRef",ref:s,rules:h,"label-position":"top","border-bottom":!1},{default:n((()=>[F(m(Ye,{modelValue:p(o),"onUpdate:modelValue":l[0]||(l[0]=e=>A(o)?o.value=e:null)},null,8,["modelValue"]),[[G,"base"==a.current]]),F(m(Xe,{modelValue:p(o),"onUpdate:modelValue":l[1]||(l[1]=e=>A(o)?o.value=e:null)},null,8,["modelValue"]),[[G,"search"==a.current]]),"interface"==a.current?(d(),i(el,{key:0,modelValue:p(o),"onUpdate:modelValue":l[2]||(l[2]=e=>A(o)?o.value=e:null)},null,8,["modelValue"])):x("v-if",!0),F(m(ll,{modelValue:p(o),"onUpdate:modelValue":l[3]||(l[3]=e=>A(o)?o.value=e:null)},null,8,["modelValue"]),[[G,"digital"==a.current]])])),_:1},8,["model"])])),_:1})])),_:1},8,["scroll-top"])])),_:1}),m(r,{class:"px-[20rpx] pt-[20rpx]"},{default:n((()=>[m(r,{class:"flex-1"},{default:n((()=>[m(w,{type:"primary","custom-style":{"z-index":0},onClick:v},{default:n((()=>[c(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-9578b13f"]]),dl=r({__name:"index",setup(e){const l=C([{name:"WebAPP",lists:[{name:"网页",icon:"/mobile/assets/light_web-26dd5d21.svg",desc:"用户在此链接可以直接和您的智能体聊天",key:"web",disabled:!1},{name:"JS嵌入",icon:"/mobile/assets/light_js-b05585b4.svg",desc:"可添加到网站的任何位置，将此 iframe 添加到 html 代码中",key:"js",disabled:!1},{name:"微信公众号",icon:"/mobile/assets/light_public_account-88baaf7d.svg",desc:"可在微信公众号后台配置，提供智能体服务",key:"oa",disabled:!1},{name:"朋友圈海报",icon:"/mobile/assets/light_wx-e023cbb5.svg",desc:"用户扫码后，可直接和您的智能体聊天",key:"web",disabled:!1}]},{name:"API对接",lists:[{name:"API调用",icon:"/mobile/assets/light_api-9396e20f.svg",desc:"用户在此链接可以直接和您的智能体聊天",key:"api",disabled:!1},{name:"企业微信",icon:"/mobile/assets/light_enterprise_wechat-c64eea98.svg",desc:"用户在此链接可以直接和您的智能体聊天",key:"qwx",disabled:!1}]}]),a=S(),t=R();return(e,s)=>{const o=y,r=T,u=V;return d(),i(o,{class:"h-full"},{default:n((()=>[m(u,{class:"h-full","scroll-y":""},{default:n((()=>[m(o,{class:"mt-[20rpx] bg-white p-[20rpx]"},{default:n((()=>[(d(!0),I(W,null,j(l,((e,l)=>(d(),i(o,{key:l},{default:n((()=>[m(o,{class:"text-xl font-medium mb-[20rpx]"},{default:n((()=>[c(f(e.name),1)])),_:2},1024),m(o,{class:"flex flex-wrap justify-stretch mx-[-20rpx]"},{default:n((()=>[(d(!0),I(W,null,j(e.lists,((e,l)=>(d(),i(o,{key:l,class:"px-[20rpx] w-full mb-[20rpx]"},{default:n((()=>[m(o,{class:"bg-[#FBFBFC] border border-solid border-light h-full flex items-center rounded-lg px-[40rpx] py-[30rpx] cursor-pointer",onClick:l=>(e=>{e.disabled||a.navigateTo({path:"/packages/pages/release_robot/release_robot",query:{key:e.key,id:t.query.id}})})(e)},{default:n((()=>[x(" eslint-disable-next-line vue/html-self-closing "),m(r,{src:e.icon,class:"w-[88rpx] h-[88rpx] flex-none"},null,8,["src"]),m(o,{class:"ml-[30rpx]"},{default:n((()=>[m(o,{class:"text-tx-primary text-xl font-medium flex items-center"},{default:n((()=>[c(f(e.name)+" ",1),e.disabled?(d(),i(o,{key:0,class:"bg-[#EFF0F1] text-tx-regular text-xs px-[20rpx] py-[4rpx] rounded ml-[20rpx]"},{default:n((()=>[c(" 即将开放 ")])),_:1})):x("v-if",!0)])),_:2},1024),m(o,{class:"text-tx-secondary mt-[12rpx]"},{default:n((()=>[c(f(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}}),il=r({__name:"data",setup(e){const l=u([{title:"今日对话次数",key:"robot.todayChatCount"},{title:"昨日对话次数",key:"robot.yesterdayChatCount"},{title:"本周对话次数",key:"robot.weekChatCount"},{title:"全部对话次数",key:"robot.wholeChatCount"},{title:"今日访问用户/人",key:"visitor.todayVisitorCount"},{title:"昨日访问用户/人",key:"visitor.yesterdayVisitorCount"},{title:"本周访问用户/人",key:"visitor.weekVisitorCount"},{title:"全部用户/人",key:"visitor.wholeVisitorCount"}]),a=R(),t=u([]);return(async()=>{t.value=await se({robot_id:a.query.id})})(),(e,a)=>{const s=y,o=V;return d(),i(s,{class:"h-full w-full overflow-hidden"},{default:n((()=>[m(o,{class:"h-full","scroll-y":""},{default:n((()=>[m(s,{class:"flex flex-wrap px-[20rpx] mx-[-15rpx]"},{default:n((()=>[(d(!0),I(W,null,j(l.value,(e=>(d(),i(s,{class:"w-[50%] px-[15rpx] mb-[30rpx]",key:e.key},{default:n((()=>[m(s,{class:"bg-[#fafafc] flex flex-col items-center rounded-[20rpx] px-[20rpx] py-[30rpx] border border-solid border-light h-full"},{default:n((()=>[m(s,{class:"text-lg"},{default:n((()=>[c(f(e.title),1)])),_:2},1024),m(s,{class:"text-[60rpx] mt-[24rpx]"},{default:n((()=>[c(f(p(Me)(t.value,e.key)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}}),nl=r({__name:"reply-popup",props:{show:{type:Boolean},content:null},emits:["update:show"],setup(e,{emit:l}){const a=e,{show:t}=$(a,l);return(l,a)=>{const s=y,o=_(b("ua-markdown"),Ve),r=V,u=_(b("u-popup"),he);return d(),i(u,{modelValue:p(t),"onUpdate:modelValue":a[0]||(a[0]=e=>A(t)?t.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:n((()=>[m(s,{class:"h-[80vh] flex flex-col"},{default:n((()=>[m(s,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:n((()=>[c(" 查看回复 ")])),_:1}),m(s,{class:"flex-1 min-h-0"},{default:n((()=>[m(r,{class:"h-full","scroll-y":""},{default:n((()=>[m(s,{class:"p-[20rpx]"},{default:n((()=>[m(o,{content:e.content},null,8,["content"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),ml=r({__name:"correct-popup",props:{show:{type:Boolean},data:null},emits:["update:show"],setup(e,{emit:l}){const a=e,t=w(),{show:s}=$(a,l),o=u({kb_id:"",ask:"",reply:"",images:[],files:[],video:[]}),r=H({get:()=>o.value.images.map((({url:e})=>e)),set(e){o.value.images=e.map((e=>({url:e})))}}),f=u([]);(async()=>{const{lists:e=[]}=await ee({page_type:0});f.value=e})();const x={kb_id:[{required:!0,message:"请选择知识库"}],ask:[{required:!0,message:"请输入问题"}],reply:[{required:!0,message:"请输入答案"}]},h=()=>{t.value.validate((async e=>{e&&(await oe(o.value),setTimeout((()=>{s.value=!1}),1e3))}))};return k(s,(e=>{e&&setTimeout((()=>{t.value.setRules(x)}))})),k((()=>a.data),(e=>{Object.assign(o.value,ye.cloneDeep(e))})),(e,l)=>{const a=y,u=_(b("app-select"),M),x=_(b("u-form-item"),P),v=_(b("u-input"),D),g=_(b("app-upload"),K),w=_(b("app-upload-file"),Ce),k=_(b("u-form"),Z),C=V,U=_(b("u-button"),O),I=_(b("u-popup"),he);return d(),i(I,{modelValue:p(s),"onUpdate:modelValue":l[6]||(l[6]=e=>A(s)?s.value=e:null),"safe-area-inset-bottom":"",closeable:"","border-radius":"16",mode:"bottom"},{default:n((()=>[m(a,{class:"h-[80vh] flex flex-col"},{default:n((()=>[m(a,{class:"text-xl mx-[20rpx] py-[28rpx] font-bold border-b border-solid border-light border-0"},{default:n((()=>[c(" 修正问答 ")])),_:1}),m(a,{class:"flex-1 min-h-0"},{default:n((()=>[m(C,{class:"h-full","scroll-y":""},{default:n((()=>[m(a,{class:"p-[20rpx]"},{default:n((()=>[m(k,{model:o.value,ref_key:"uFormRef",ref:t,"label-position":"top","border-bottom":!1},{default:n((()=>[m(x,{label:"选择知识库",prop:"kb_id",required:""},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(u,{modelValue:o.value.kb_id,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.kb_id=e),popupTitle:"知识库选择",dataLists:f.value,placeholder:"请选择知识库",value:"id"},null,8,["modelValue","dataLists"])])),_:1})])),_:1}),m(x,{label:"提问问题",prop:"ask",required:""},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(v,{modelValue:o.value.ask,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.ask=e),placeholder:"请输入问题",border:!0,type:"textarea",height:200},null,8,["modelValue"])])),_:1})])),_:1}),m(x,{label:"问题答案",prop:"reply",required:""},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(v,{modelValue:o.value.reply,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.reply=e),placeholder:"请输入答案",border:!0,type:"textarea",height:300},null,8,["modelValue"])])),_:1})])),_:1}),m(x,{label:"上传图片"},{default:n((()=>[m(a,{class:"flex-1 min-w-0"},{default:n((()=>[m(g,{modelValue:p(r),"onUpdate:modelValue":l[3]||(l[3]=e=>A(r)?r.value=e:null),"max-count":9},null,8,["modelValue"]),m(a,{class:"text-muted"},{default:n((()=>[c(" 最多支持上传 9 张图 ")])),_:1})])),_:1})])),_:1}),m(x,{label:"上传视频"},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(g,{maxCount:1,modelValue:o.value.video,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.video=e),returnType:"object-array",accept:"video"},null,8,["modelValue"]),m(a,{class:"text-info"},{default:n((()=>[c(" 格式为MP4，大小不能超过20M ")])),_:1})])),_:1})])),_:1}),m(x,{label:"上传附件"},{default:n((()=>[m(a,{class:"flex-1 min-w-0"},{default:n((()=>[m(w,{modelValue:o.value.files,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.files=e),fileExtname:["doc","docx","pdf","xls","xlsx"]},null,8,["modelValue"]),m(a,{class:"text-muted"},{default:n((()=>[c(" 支持上传PDF、docx、excel、等文件格式 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),m(a,{class:"flex p-[20rpx]"},{default:n((()=>[m(a,{class:"flex-1"},{default:n((()=>[m(U,{type:"primary",onClick:h},{default:n((()=>[c(" 保存 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),pl=ce(r({__name:"record",props:{isFeedback:{type:[String,Number],default:-1}},setup(e){const l=e,a=R(),t=C({show:!1,content:""}),s=C({show:!1,data:{}}),o=H((()=>a.query.id)),r=u([]),h=w();k((()=>l.isFeedback),(e=>{var l;null==(l=h.value)||l.reload()}));const v=async(e,a)=>{var t,s;try{const{lists:s}=await re({page_no:e,page_size:a,robot_id:o.value,is_feedback:l.isFeedback});s.forEach((e=>{e.show=!1})),null==(t=h.value)||t.complete(s)}catch(r){null==(s=h.value)||s.complete(!1)}},g=e=>{r.value[e].show=!0},A=e=>{r.value[e].show=!1};return(e,l)=>{const a=_(b("u-image"),we),u=y,w=T,k=_(b("u-read-more"),ke),V=_(b("u-icon"),de),C=_(b("z-paging"),Ae);return d(),I(W,null,[m(u,{class:"h-full flex flex-col"},{default:n((()=>[m(u,{class:"flex-1 min-h-0"},{default:n((()=>[m(C,{ref_key:"pagingRef",ref:h,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),"auto-clean-list-when-reload":!1,onQuery:v,fixed:!1},{default:n((()=>[m(u,{class:"px-[30rpx] pt-[10rpx]"},{default:n((()=>[(d(!0),I(W,null,j(r.value,((e,l)=>(d(),i(u,{class:"data-item mb-[30rpx]",key:e.id},{default:n((()=>[m(k,{ref_for:!0,ref:"readmoreRef","close-text":"展开全部",index:l,toggle:!0,"text-indent":"0","show-height":"350",onOpen:g,onClose:A},{default:n((()=>[m(u,{class:"p-[20rpx]"},{default:n((()=>[m(u,{class:"flex mb-[20rpx] items-center justify-between"},{default:n((()=>[m(u,{class:"flex items-center"},{default:n((()=>[m(u,{class:"flex items-center flex-none"},{default:n((()=>[m(a,{width:"44",height:"44",src:e.user.avatar||p(Ie),"border-radius":"50%"},null,8,["src"])])),_:2},1024),m(u,{class:"ml-2 w-[300rpx] line-clamp-1"},{default:n((()=>{var l;return[c(f(null==(l=e.user)?void 0:l.nickname),1)]})),_:2},1024)])),_:2},1024),m(u,{class:"ml-2 text-xs text-muted"},{default:n((()=>[c(f(e.create_time),1)])),_:2},1024)])),_:2},1024),m(u,{class:"flex mb-[20rpx] items-center"},{default:n((()=>[m(u,{class:"flex items-center flex-none"},{default:n((()=>[m(w,{class:"w-[44rpx] h-[44rpx]",src:"data:image/png;base64,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"})])),_:1}),m(u,{class:"line-clamp-2 ml-2"},{default:n((()=>[c(f(e.ask),1)])),_:2},1024)])),_:2},1024),m(u,{class:"flex mb-[20rpx] items-stretch"},{default:n((()=>[m(u,{class:"flex flex-none pt-1"},{default:n((()=>[m(w,{class:"w-[44rpx] h-[44rpx]",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAiXSURBVHic7Z3dSiRJFsd/UWZjgxdVg9ADXtipMAO70Ew17MIO2x/pE6z9BFM+wegTqE+g/QSWT2DvE5haNr0wC9bQsAuz0OZ40TBC75Swgk2Xxl5EplWZlVmVH5GZpeUfpM3sqhPhP0+eOOdExAnBGEG+pc4VJoI6gsdITCQmAIIaUHM/2kHSce+3EXS45megwwNs8T1OCd0PhSizcfkOky8sI3iJoH5DZnZ0ABvJAVPY4q+0NclNjMIJ7iP1B6BeULM2cIBBs2jtLoxgeUjDJdUqqs0I2MCmeI5dRGO5EywPaVBhXePrrwcCh2tec0VTLLn2PJdmcsLYEhuEInpNvOBNPuI1Q77DpMsO5ZuCpLCpsKZ7QKzoFCZbbNDlhNtHLoDFNcfyiC2dQrVosKu1exTnFeQNG4MVHR5HZg2WhzS4Yp+7Qy6ARZdjechyVkGZCJYtNhDsjP1Alg41BHuyxUYWIalNhNvwepbGbxE2xfN0RKciWB6xg6SR5ru3FoKmeMZK8q8lxESS6yEFyYlssGyxMbHkAkgaSW1ybA2eMJs7CrFtciyC5SHLCPYydemuQbIiXtAc9bGRBLtBxDG9ZPc9QOUwplgaFYyMtsEqr3BPbhDyJnodiqEEu3G5patPdxD1UYNepImQb6lzzbH2Lt1FGCxEmYpoDb7Wm1W601BmNBShGpyr1/CHPfjswP9+hv++gW7GyYSqBfPrcNHWJzMNIryKAYLlPjUecJxLAqdqwZP93nW3A//4KpvMxS2YW+1df1iDj9vZZKaBwBHPWAjeHjQRUzRyy449+sF//fG1BpmN3u/dDpw1s8tMA4kpDwej3EGCK/yYSweMGsz2pVe7neyaVrWUXA8X7XLMg4fKYKTrI1i2sHLT3vl1PxlnzexkzAf+ntPNbPKyIkSLfTZYttgnD7932oQ/n/jvXTpqsEuC33Z7JiBozwHO7TS96/XnP4mzkWGwxXOWvAvD+8UNiS0dLQzg2xAv5qGpfpLg/ED9a9TgmxCZVSthx/ow7aT/rh+WfIfp+cU9E9HNKQ05u5ztDw/D3Gryh1MkvvTm8oy+2y+1NzRtDmrapz4/tWr5iTq31asahYs2zNQHbe+ngO/7dcP//6PkAlxpHBzVErFtcAl2w2JLXwsuvt3xD2znNvz7Ve/6UcNvPkbZwWkz3O72ywT4/Kv/IUyb8H6JAlH3zIQyEVc5kDu/4TcN3Q78EiDvrOnXrK8biowwGDX4455f48NkApxu+OU+NFV/ioRrJhTBQrN5mN8Id6HCvIagaxX8Xj+CXsKHtWhPJKix8+vRDy8PuJx6g5ylTfDc6iBJvzWjg4q4WtztKDft/ZL6/Onm8Kjts6Pa7cdigfkroRbiVOQ7THQm1B8+9l9ftOFkbfh3gloc5nXMrcLTY/XwznbjRYFBubPL/jEhT0hM+ZZ6hS+a7e+HtZ6WXTrwr1ejIzbv1T+3lU0NmoKZek/7vOzZMFPiwdPiS0fJ/Wmh2FD6CtMgj+mgcxvaT9WrHida++yorFrYHz9TH/QcQJmLODhZKy8/IahXqPBdLsK7HWUeknw+CI/csNf6yb4/TZlEblEQPK4gx3RCc241mlxQ9xe31GeK9A6SQGJWkGO47HR+Q5HXT+6lo2zoh8CAWbXcwW+juAEsLiSmkIecIMZk+em0qSK7oBdx6aiB07PnVUuF4MF8hBcJZsmq6YTEqbg7KMuH54YFyb1oqwGzf7D0BtGgq/bQVCbjyb7+BFMaCGpCtpCldmLaVCHwTIil+rg9aBKCiNJmUA/idLNUjS6P4GlT+bLBzBfEi9T6YdTCI0gPJRItZIvfKXJp1DBiQQUGUXmLOLLDbLiHS6cXBRbjvnWKG+RGEethVN42DkYl473Z509/z1erJU7+BFctNV0/jNhLJ58Zil9W1EMdJrvbUcsHzm39ZLtehKNXKkpbHzXgTydqRB9mDn5aUK9tHjhrwj8XFNFRb4ZRUw/hyT785ffwwTYtBG0DgaN1mFvchrkRSyuCdvbchlONfQjirKl+ZpdV36Js9MfXycL7URB0hPatAUYN6seDr2W3o+bO0g5gOlG1YPZv6i3zor9zW/+0kmRN5LLQb9pUQYNR67lcZS3KGwajpkiuvlQRoO7+SVZEbuuAZ5dVh8clbC0DBgsCQB5xUuh22LLC2GLXrnXEc75S6yIkbSiQ4LAEehF4v1TkG2WDN+kpOSiq1YmBy6ki+EE+5VQmGlNKgw0A8T2ObNGmjJoPF201MZoHFrf8a5KLw02ttt7aNMmuN5dfKLqd/Pzi8tzCG5PbW115byb0wehthrkh2F3PahffmzsHX+1M/x4NSU5Zl4mCbzmRj2DxgmYu2bVJgcAJlmwc3GV07X8C90iAawb2pRnBG+IFTXlUYElEL+GSB4rcZiBw6A7u9BwgGFBaLKL332rFTD18k8xtwzVrYUVGQzeDu3tu7Zy7dJdgRxUXjd5tbyQvYTWxqBC5eCPcRHATPm+SdyGkPGYSPHyzM3oWOysE28Mqtg6teOJWViqt/vktgC2eRWsvxC2KdMW+Vq+if7npVWf8ppLioYPB01FFkeKW9WoU5lXcFkhexamaHavyn+tV3AcgPWzGLUmeqHblffU/IGEl1vvioEmQojjofXnbuEhZ3jZVBWy3oUmyyZtpyIWMRfInxCanrn4NGk4hcJde3b36luoAk804FVaHi9GAW3w4SRTaGLzSccyD1pNg5BFbSGJsvxxrZDIJQeg/akctJryNVVu1HU7SjzwPi1qmwtbYn7GhydZGi88Rcp8aUzSo8OPYEZ0zsb1mCoJsYaFcOquoNiNgI9nNm1gP5Rw5qWq0vaQ4sttIdnnAmzt75GQY3FNoLbeAkIUuX1pt7GkjOSiDVH9XxgjugaoWUKPCd0hqN+UWoo/9dVxCf0XSZgqnzFNog/g/9KYpesFRQwUAAAAASUVORK5CYII="})])),_:1}),m(u,{class:"ml-2"},{default:n((()=>[e.show?(d(),i(Ue,{key:0,"is-markdown":!0,content:e.reply},null,8,["content"])):(d(),i(u,{key:1,class:"line-clamp-2"},{default:n((()=>[c(f(e.reply),1)])),_:2},1024))])),_:2},1024),x(' \n                                        @load="parseLoaded" ')])),_:2},1024),m(u,{class:"flex items-center"},{default:n((()=>[m(u,{class:"flex items-center flex-none"},{default:n((()=>[m(w,{class:"w-[44rpx] h-[44rpx]",src:"data:image/png;base64,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"})])),_:1}),m(u,{class:"ml-2"},{default:n((()=>[e.show?(d(),i(Ue,{key:0,"is-markdown":!0,content:e.feedback},null,8,["content"])):(d(),i(u,{key:1,class:"line-clamp-2"},{default:n((()=>[c(f(e.feedback||"-"),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["index"]),m(u,{class:"border-t border-0 border-solid border-light p-[25rpx] flex justify-around"},{default:n((()=>[m(u,{class:"flex items-center",onClick:l=>{return a=e,s.show=!0,void(s.data=je(a));var a}},{default:n((()=>[m(V,{name:"edit-pen",size:32}),m(u,{class:"ml-[10rpx]"},{default:n((()=>[c(" 修正 ")])),_:1})])),_:2},1032,["onClick"]),x(' <view\n                                class="flex items-center"\n                                @click="showReply(item.reply)"\n                            >\n                                <u-icon name="eye" :size="32" />\n                                <view class="ml-[10rpx]"> 查看回复 </view>\n                            </view> '),m(u,{class:"flex items-center",onClick:l=>(async e=>{var l;const{cancel:a}=await Q({title:"温馨提示",content:"确定要删除？"});a||(await ue({ids:e,robot_id:o.value}),null==(l=h.value)||l.refresh())})([e.id])},{default:n((()=>[m(V,{name:"trash",size:32}),m(u,{class:"ml-[10rpx]"},{default:n((()=>[c(" 删除 ")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(nl,{show:t.show,"onUpdate:show":l[1]||(l[1]=e=>t.show=e),content:t.content},null,8,["show","content"]),m(ml,{show:s.show,"onUpdate:show":l[2]||(l[2]=e=>s.show=e),data:s.data},null,8,["show","data"])],64)}}}),[["__scopeId","data-v-0c4c2ba3"]]),cl=ce(r({options:{virtualHost:!0,styleIsolation:"shared"},externalClasses:["class"],__name:"index",setup(e){const l=R(),a=u(-1),t=w([{id:-1,alias:"全部"},{id:0,alias:"未反馈"},{id:1,alias:"已反馈"}]),s=C({list:[{name:"对话数据",type:"data"},{name:"对话记录",type:"record"}],current:"data"});return E((()=>{const e=l.query.dialogue;e&&(s.current=e)})),(e,l)=>{const o=y,r=_(b("app-select"),M);return d(),i(o,{class:"h-full pt-[20rpx]"},{default:n((()=>[m(o,{class:"h-full bg-white flex flex-col pt-[20rpx]"},{default:n((()=>[m(o,{class:"flex justify-between items-center mb-[20rpx] px-[20rpx]"},{default:n((()=>[m(o,{class:"bg-page flex p-[8rpx] rounded-[16rpx] flex-none"},{default:n((()=>[(d(!0),I(W,null,j(s.list,(e=>(d(),i(o,{key:e.type,class:B(["px-[34rpx] py-[12rpx] rounded-[16rpx]",{"tab-active":e.type==s.current}]),onClick:l=>{return a=e.type,void(s.current=a);var a}},{default:n((()=>[c(f(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),F(m(o,{class:"w-[250rpx] app-select-style"},{default:n((()=>[m(r,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),popupTitle:"筛选反馈",dataLists:p(t),placeholder:"全部",closeable:!1,name:"alias",value:"id"},null,8,["modelValue","dataLists"])])),_:1},512),[[G,"record"==s.current]])])),_:1}),m(o,{class:"flex-1 min-h-0"},{default:n((()=>["data"==s.current?(d(),i(il,{key:0})):x("v-if",!0),"record"==s.current?(d(),i(pl,{key:1,isFeedback:a.value},null,8,["isFeedback"])):x("v-if",!0)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a568fbbb"]]),fl=ce(r({__name:"robot_info",setup(l){const a=R(),t=S(),{getRobotInfo:s,currentTab:o,setRobotId:r,reset:u,robotName:c}=rl(),f=C({list:[{name:"智能体设置",type:"setting"},{name:"发布智能体",type:"release"},{name:"对话数据",type:"dialogue"},{name:"开始对话",type:"begin"}],current:0}),h=H((()=>f.list[f.current].type)),v=e=>{f.current=e,"begin"!=h.value?o.value=h.value:t.navigateTo({path:"/packages/pages/robot_chat/robot_chat",query:{id:a.query.id}})};return r(a.query.id),J((()=>{s()})),z((()=>{u()})),k((()=>a.query.type),(e=>{const l=f.list.findIndex((l=>l.type==e||l.type==o.value));setTimeout((()=>{f.current=l>-1?l:0}),10)}),{immediate:!0}),(l,a)=>{const t=_(b("page-meta"),e),s=_(b("u-navbar"),N),o=_(b("u-tabs"),L),r=y;return d(),I(W,null,[m(t,{"page-style":l.$theme.pageStyle},null,8,["page-style"]),m(r,{class:"h-full flex flex-col"},{default:n((()=>[m(s,{title:p(c),"title-color":"#333","title-bold":!0},null,8,["title"]),m(o,{"is-scroll":!1,ref:"tabs","active-color":l.$theme.primaryColor,list:f.list,current:f.current,onChange:v},null,8,["active-color","list","current"]),m(r,{class:"flex-1 min-h-0"},{default:n((()=>["setting"==p(h)?(d(),i(ul,{key:0})):x("v-if",!0),"release"==p(h)?(d(),i(dl,{key:1})):x("v-if",!0),"dialogue"==p(h)?(d(),i(cl,{key:2})):x("v-if",!0)])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-7f41c920"]]);export{fl as default};
