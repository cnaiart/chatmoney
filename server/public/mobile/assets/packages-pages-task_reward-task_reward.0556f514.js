import{d as a,s as t,ct as e,u as s,A as l,Y as n,H as i,bd as u,be as r,o,k as c,b as p,w as d,f as m,t as _,e as y,c as f,F as x,l as g,g as b,z as v,r as w,a as k,h,j,cP as T,cv as O,R as S,E as U,cQ as I,aI as N}from"./index-9f08b835.js";import{_ as R}from"./page-meta.d2ccf398.js";import{_ as $}from"./u-icon.f0423eb2.js";import{_ as A}from"./u-button.cd082997.js";import{_ as C}from"./u-empty.765dbffc.js";import{_ as z}from"./page-status.a37f4663.js";import{_ as D}from"./tabbar.vue_vue_type_script_setup_true_lang.da8cbb67.js";import{u as E}from"./useCopy.7659937f.js";import{F as M}from"./floating-menu.a8f47c3e.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading.15b95fef.js";import"./u-badge.508fc5b2.js";const X=W(a({__name:"task_reward",setup(a){const W=t(e.LOADING),{copy:X}=E(),F=v(),H=s(),{resolveOptions:J}=N(),L=t({title:"",subTitle:"",content:[]}),Q={1:{num:"0/1",btn_text:"立即签到",desc:"每天签到，可获得",payload:"每天签到，可获得"},2:{num:"0/10",btn_text:"去分享",desc:"邀请1人，可获得",payload:"邀请1人，可获得"},3:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},4:{num:"0/4",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},5:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},6:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"},7:{num:"0/3",btn_text:"去分享",desc:"分享1次，可获得",payload:"分享1次，可获得"}};t(-1);const B=a=>{O({OA_WEIXIN:()=>{S({title:"温馨提示",content:"点击右上角“...”，分享给好友",showCancel:!1})},H5:async()=>{const a=await J();X(a.path||a.link),S({title:"温馨提示",content:"已经复制到剪贴板，请转发给好友",showCancel:!1})},ANDROID:async()=>{const a=await J();uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:a.path,title:a.title,imageUrl:a.imageUrl,success:a=>{console.log("分享成功")},fail:a=>{uni.$u.toast(a.errMsg)}})},IOS:async()=>{const a=await J();uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:a.path,title:a.title,imageUrl:a.imageUrl,success:a=>{console.log("分享成功")},fail:a=>{uni.$u.toast(a.errMsg)}})}})},G=l(),{userInfo:P}=n(G),V=async()=>{try{await(async()=>{const a=await I(),t=JSON.parse(a.data);L.value.content=t.filter((a=>{var t,e;return a.data.num>=a.data.day_num&&(Q[a.type].btn_text=1===a.type?"已签到":"已分享"),Q[a.type].num=`${null==(t=a.data)?void 0:t.num}/${null==(e=a.data)?void 0:e.day_num}`,Q[a.type].desc=`${Q[a.type].payload}`,1===a.data.is_open}))})(),await(async()=>{var a;const t=await U({id:10}),e=JSON.parse(t.data)[0];L.value.title=null==e?void 0:e.content.title,L.value.subTitle=null==(a=null==e?void 0:e.content)?void 0:a.subTitle})(),W.value=e.NORMAL}catch(a){console.error(a),W.value=e.ERROR}};return i((()=>{V(),G.getUser()})),u((async()=>{try{await V(),await G.getUser()}catch(a){}r()})),(a,t)=>{const e=w(k("page-meta"),R),s=h,l=j,n=w(k("u-icon"),$),i=w(k("u-button"),A),u=w(k("u-empty"),C),r=w(k("page-status"),z),v=w(k("tabbar"),D);return o(),c(x,null,[p(e,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),p(r,{status:W.value},{error:d((()=>[p(u,{text:"加载出错～"})])),default:d((()=>[p(l,{class:"task-center"},{default:d((()=>[p(l,{class:"bg-primary text-white px-[30rpx] pt-[30rpx] pb-[80rpx] mb-[-50rpx]"},{default:d((()=>[p(s,{class:"text-base"},{default:d((()=>[m(_(y(H).getTokenUnit)+"数量",1)])),_:1}),p(s,{class:"text-[48rpx] font-medium"},{default:d((()=>[m(_(y(P).balance||0),1)])),_:1})])),_:1}),p(l,{class:"px-[30rpx] pb-[20rpx]"},{default:d((()=>[L.value.content.length?(o(),f(l,{key:0,class:"daily-tasks"},{default:d((()=>[p(l,{class:"tasks-title"},{default:d((()=>[p(l,{class:"font-medium text-xl"},{default:d((()=>[m(_(L.value.title),1)])),_:1}),p(l,{class:"ml-[14rpx] text-sm"},{default:d((()=>[m(_(L.value.subTitle),1)])),_:1})])),_:1}),p(l,{class:"tasks-content"},{default:d((()=>[(o(!0),c(x,null,g(L.value.content,((a,t)=>(o(),f(l,{class:"tasks-item m-[24rpx] pb-[24rpx] flex",key:t},{default:d((()=>[p(n,{class:"flex-none",name:a.image,size:88},null,8,["name"]),p(l,{class:"flex-1 min-w-0 ml-[20rpx]"},{default:d((()=>[p(l,{class:"text-lg font-medium"},{default:d((()=>[m(_(a.customName||a.name)+" ("+_(Q[a.type].num)+") ",1)])),_:2},1024),p(l,{class:"mt-[10rpx] text-xs text-muted text-justify"},{default:d((()=>[p(s,null,{default:d((()=>[m(_(Q[a.type].desc),1)])),_:2},1024),p(s,{class:"text-error"},{default:d((()=>{var t;return[m(_(null==(t=a.data)?void 0:t.one_award),1)]})),_:2},1024),p(s,null,{default:d((()=>[m(_(y(H).getTokenUnit),1)])),_:1})])),_:2},1024)])),_:2},1024),p(l,{class:"w-[150rpx] flex justify-end items-center"},{default:d((()=>[p(i,{type:"primary",shape:"circle",size:"medium",customStyle:{margin:"0",padding:"0 24rpx",height:"56rpx"},disabled:a.data.num>=a.data.day_num,"open-type":2==a.type||3==a.type?"share":"",onClick:t=>(async a=>{switch(a){case 1:await T(),await V(),await G.getUser();break;case 4:await F.navigateTo("/packages/pages/draw_list/draw_list");break;case 5:await F.navigateTo("/packages/pages/video_list/video_list");break;case 6:await F.navigateTo("/packages/pages/music_list/music_list");break;case 7:await F.navigateTo("/pages/kb/kb");break;default:B()}})(a.type)},{default:d((()=>[m(_(Q[a.type].btn_text),1)])),_:2},1032,["disabled","open-type","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):b("v-if",!0)])),_:1})])),_:1})])),_:1},8,["status"]),b("    悬浮菜单    "),p(M),p(v)],64)}}}),[["__scopeId","data-v-c38c0a9d"]]);export{X as default};
