import{_ as e}from"./u-icon.f0423eb2.js";import{d as l,s as a,v as t,o as s,c as o,w as u,b as r,f as i,k as d,l as n,F as c,g as m,t as p,T as f,j as x,h as A,I as g,i as v,r as k,a as y,m as h,L as C,A as V,M as I,p as w,e as B,N as R,z as _,n as b,R as E}from"./index-9f08b835.js";import{_ as U}from"./l-textarea.5288c032.js";import{_ as j}from"./u-form-item.95df05ac.js";import{_ as q}from"./u-loading.15b95fef.js";import{k as S,h as O,t as z,i as T}from"./draw.0416aa95.js";import{u as K}from"./useLockFn.cde70c0d.js";import{u as Z}from"./index.f8572cdb.js";import{_ as F}from"./u-button.cd082997.js";import{_ as Q}from"./u-popup.6c89de8e.js";import{_ as H}from"./_plugin-vue_export-helper.1b428a4d.js";var X=(e=>(e.SD="sd",e.DALLE="dalle3",e.MJ_GOAPI="mj_goapi",e))(X||{}),D=(e=>(e.TEXT="txt2img",e.IMAGE="img2img",e))(D||{});const M=H(l({__name:"keyword-suggestion",props:{modelValue:{default:""},model:{default:""}},emits:["update:modelValue","close"],setup(e,{expose:l,emit:C}){const V=e,I=a(!1),w=a(-1),B=a([]),R=a({prompt:[],cate_prompt:[]}),_=a([]),b=a([]);t((()=>{""==V.modelValue&&(_.value=[],b.value=[])}));const E=e=>{const l=_.value.findIndex((l=>l==e));if(l>=0)return _.value.splice(l,1),void b.value.splice(l,1);_.value.push(e),b.value.push(w.value)},U=async()=>{try{B.value=await S({model:V.model}),await f(),w.value=0,await j()}catch(e){console.log("获取关键词分类错误",e)}},j=async()=>{try{R.value=await O({model:V.model,id:B.value[w.value].id})}catch(e){console.log("获取关键词错误",e)}};return l({open:()=>{I.value=!0,U()}}),(e,l)=>{const a=x,t=A,f=g,U=v,q=k(y("u-button"),F),S=k(y("u-popup"),Q);return s(),o(S,{modelValue:I.value,"onUpdate:modelValue":l[2]||(l[2]=e=>I.value=e),mode:"bottom",closeable:!0,"border-radius":"20","z-index":99999,safeAreaInsetBottom:"",onClose:l[3]||(l[3]=e=>C("close"))},{default:u((()=>[r(a,{class:"h-[90vh] flex flex-col min-h-0"},{default:u((()=>[r(a,{class:"text-xl font-medium text-black py-[26rpx] mx-[30rpx]",style:{"border-bottom":"1px solid #f3f3f3"}},{default:u((()=>[i(" 描述词推荐 ")])),_:1}),r(a,{class:"flex flex-1 min-h-0"},{default:u((()=>[r(f,{class:"h-full w-[162rpx] bg-page","scroll-y":!0},{default:u((()=>[r(a,{class:"bg-white"},{default:u((()=>[(s(!0),d(c,null,n(B.value,((e,l)=>(s(),o(a,{key:l,class:h(["keyword-cate-item",{"keyword-cate-item-active":l==w.value,"keyword-cate-item-prev":l==w.value-1,"keyword-cate-item-next":l==w.value+1,"keyword-cate-item-has-prompt":b.value.includes(l)}]),onClick:e=>(e=>{w.value!=e&&(w.value=e,j())})(l)},{default:u((()=>[r(t,null,{default:u((()=>[i(p(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),r(f,{class:"flex-1 h-full","scroll-y":!0},{default:u((()=>[R.value.prompt.length||R.value.cate_prompt.length?(s(),d(c,{key:0},[(s(!0),d(c,null,n(R.value.cate_prompt,((e,l)=>(s(),o(a,{key:l,class:"keyword-container"},{default:u((()=>[r(a,{class:"py-[30rpx] text-base font-medium text-[#101010]"},{default:u((()=>[i(p(e.name),1)])),_:2},1024),r(a,{class:"flex flex-wrap"},{default:u((()=>[(s(!0),d(c,null,n(e.prompt,(e=>(s(),o(a,{key:e.text,class:h(["keyword-item",{"keyword-item-active":_.value.includes(e.prompt_en)}]),onClick:l=>E(e.prompt_en)},{default:u((()=>[i(p(e.prompt),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)),R.value.prompt.length?(s(),o(a,{key:0,class:"keyword-container"},{default:u((()=>[r(a,{class:"py-[30rpx] text-base font-medium text-[#101010]"},{default:u((()=>[i(" 其它 ")])),_:1}),r(a,{class:"flex flex-wrap"},{default:u((()=>[(s(!0),d(c,null,n(R.value.prompt,(e=>(s(),o(a,{key:e.text,class:h(["keyword-item",{"keyword-item-active":_.value.includes(e.prompt_en)}]),onClick:l=>E(e.prompt_en)},{default:u((()=>[i(p(e.prompt),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):m("v-if",!0)],64)):(s(),o(a,{key:1,class:"h-full flex flex-col justify-center items-center"},{default:u((()=>[r(U,{class:"w-[300rpx] h-[300rpx]",src:"/mobile/assets/empty-c3070048.png"}),r(a,{class:"text-muted text-center"},{default:u((()=>[i("暂无关键词推荐")])),_:1})])),_:1}))])),_:1})])),_:1}),r(a,{class:"bg-white z-10 w-full px-[30rpx] rounded-tl-md rounded-tr-md",style:{"box-shadow":"0 0 10rpx rgba(0, 0, 0, 0.2)"}},{default:u((()=>[r(a,{class:"pt-[20rpx]"},{default:u((()=>[r(a,{class:"flex justify-center items-center text-muted text-xs"},{default:u((()=>[r(t,null,{default:u((()=>[i(" 已选择 ")])),_:1}),r(t,{class:"mx-1 text-primary"},{default:u((()=>[i(p(_.value.length),1)])),_:1}),r(t,null,{default:u((()=>[i("个Tag")])),_:1})])),_:1})])),_:1}),r(a,{class:"flex py-[20rpx]"},{default:u((()=>[r(a,{class:"flex-1 mr-[10rpx]"},{default:u((()=>[r(q,{type:"primary","custom-style":{width:"100%",border:"none",color:"#333333",background:"#F4F4F8"},onClick:l[0]||(l[0]=e=>(()=>{if(I.value=!1,""==V.modelValue.trim()){const e=_.value.length?_.value.join(","):"";C("update:modelValue",e)}else{const e=_.value.length?_.value.join(","):"",l=`${V.modelValue} ${e?`,${e}`:""}`;C("update:modelValue",l)}_.value=[]})())},{default:u((()=>[i(" 添加到文本描述 ")])),_:1})])),_:1}),r(a,{class:"flex-1 ml-[10rpx]"},{default:u((()=>[r(q,{type:"primary","custom-style":{width:"100%"},onClick:l[1]||(l[1]=e=>(()=>{I.value=!1;const e=_.value.length?_.value.join(","):"";C("update:modelValue",e),_.value=[]})())},{default:u((()=>[i(" 替换当前文本 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-457192de"]]),N=H(l({__name:"prompt",props:{modelValue:{default:""},model:{default:""},negative:{default:""},showTranslate:{type:Boolean,default:!1},isNegative:{type:Boolean,default:!0}},emits:["update:modelValue","update:negative"],setup(l,{emit:t}){const f=l,g=C(),b=_(),E=V(),S=Z(f,"modelValue",t),O=Z(f,"negative",t),F={1:{label:"描述词",placeholder:"请输入英文描述词，生成效果会更好；描述词越详细，生成的图片效果更加真实哦~ ~"},2:{label:"反向词",placeholder:"输入你希望AI绘制的内容，例如：white hair,sit，这样AI尽可能避免绘制白色的毛发和坐着的姿势"}},Q=a(1),H=I((()=>F[Q.value]||{})),X=()=>{E.isLogin||b.navigateTo("/pages/login/login")},{lockFn:D,isLock:N}=K((async()=>{if(!S.value)return uni.$u.toast("请输入描述词");const e=await z({prompt:S.value,model:f.model});S.value=e.result})),G=a(0),Y=a([]),L=async()=>{var e,l;try{if(Y.value.length)return G.value>=Y.value.length-1&&(G.value=-1),G.value+=1,void(S.value=(null==(e=Y.value[G.value])?void 0:e.prompt_en)||"");Y.value=await T({model:f.model}),S.value=(null==(l=Y.value[0])?void 0:l.prompt_en)||""}catch(a){console.log("请求绘画示例失败=>",a)}};return(a,t)=>{const f=k(y("u-icon"),e),C=x,V=k(y("l-textarea"),U),I=k(y("u-form-item"),j),_=v,b=A,E=k(y("u-loading"),q);return s(),d(c,null,[r(I,{prop:"title",style:{padding:"0"}},{default:u((()=>[r(C,{class:"flex flex-1 bg-white rounded-lg overflow-hidden"},{default:u((()=>[r(C,{class:"flex-1"},{default:u((()=>[m("      正面提示次词      "),1==Q.value?(s(),o(V,{key:0,modelValue:B(S),"onUpdate:modelValue":t[1]||(t[1]=e=>R(S)?S.value=e:null),rows:4,"custom-class":{background:"#fff",paddingBottom:"70rpx",fontSize:"28rpx",borderRadius:l.isNegative?"16rpx 0 0 16rpx":"16rpx"},placeholder:B(H).placeholder,onClick:X},{"length-suffix":u((()=>[r(C,{class:"flex length-suffix"},{default:u((()=>[r(C,{class:"flex items-center text-content text-xs ml-auto",onClick:t[0]||(t[0]=w((e=>S.value=""),["stop"]))},{default:u((()=>[r(f,{name:"trash"}),r(C,{class:"ml-[8rpx]"},{default:u((()=>[i(" 清空")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","custom-class","placeholder"])):(s(),d(c,{key:1},[m("      反向提示次词      "),r(V,{modelValue:B(O),"onUpdate:modelValue":t[3]||(t[3]=e=>R(O)?O.value=e:null),rows:4,"custom-class":{background:"#fff",paddingBottom:"70rpx",fontSize:"28rpx",borderRadius:"16rpx 0 0 16rpx"},placeholder:B(H).placeholder,onClick:X},{"length-suffix":u((()=>[r(C,{class:"flex length-suffix"},{default:u((()=>[r(C,{class:"flex items-center text-content text-xs ml-auto",onClick:t[2]||(t[2]=w((e=>O.value=""),["stop"]))},{default:u((()=>[r(f,{name:"trash"}),r(C,{class:"ml-[8rpx]"},{default:u((()=>[i(" 清空")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","placeholder"])],2112))])),_:1}),l.isNegative?(s(),o(C,{key:0,class:"flex-none"},{default:u((()=>[(s(),d(c,null,n(F,((e,l)=>r(C,{key:e.label,class:h([{"!bg-primary !text-white":l==Q.value},"flex justify-center items-center w-[72rpx] h-[150rpx] px-[20rpx] leading-[34rpx] rounded-r-lg text-main bg-[#f0f0f0]"]),onClick:w((e=>Q.value=l),["stop"])},{default:u((()=>[i(p(e.label),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})):m("v-if",!0)])),_:1})])),_:1}),r(C,{class:"mt-[15rpx] p-[20rpx] rounded-lg bg-white"},{default:u((()=>[r(C,{class:"flex-1 flex items-center justify-between"},{default:u((()=>[r(C,{class:"flex items-center text-primary",onClick:t[4]||(t[4]=e=>{var l;return null==(l=B(g))?void 0:l.open()})},{default:u((()=>[r(_,{class:"w-[24rpx] h-[24rpx]",src:B("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABgCAYAAACKa/UAAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAASVSURBVHic7Z3dVeM4GIbfT85ckxK8FSzXu+GsqIChgAFTwSwVMFQwUAFmKQCoAJ8Tdm4nW8F4O8heJ9K7F4TAgG0CUn5MvucukSPrPEfWJzn6EcyAzZiOnP8oRnYAdEGmALqz/LbNiKAkpKTn9YfE5EUuw2fXNGXQy2jF+zMC6dxK2R6GJI7/vkhOHn9ZKdBmTB39EYlsIUVrESLIEzGH97Wx8/QCmzF13t9orauGRObgAeAAeFIDbcZ07P13rEH7FoqQB/2LTj4VaDN2nffftebNhgBlYsz29BEek5eYRZ5IIWBJ4t85lm/piGCDEAtysyqdQOqcswIAvWxk4c1NQ35DAKcdY06qQvl7prfnvgA4qkwUuboTuO9vQNrKayZVtcilnFMZV56tPfejqmkTQWlsxrROHoChM2Z3neUBAARXVV+TSM3I+Y8NPz39lstgTsVqDST+q0szYuSPmrRhx5iTmjRlghFURxmIDNYtYLwFQ1Z3mgVc+0d3FgxqRh1Nz73ygFl2AdqOCgxEBQaiAgNRgYE8e6Eags2YjsmzhqHhchEZiPjjft6pHJq9hWg1cPoydlXlAQC5SS+XW9m4afj6KqIJdPSf0ZI32aT5HCuvtWwDBUxj5RVPoOc/0fKaP6vXBvYvOrkI8lj5zQsBykTMcaz8okbh/nly0MtG53RmU2T12kMxHCRIiphvmaIKBIDb/EMBoIid76qylkEkJiowEBUYiAoMRAUGogIDUYGBqMBAonekexktvLex851ifDHprK8EUQVu7buv9P7PmHk+w5uj3r4vbs/N9lzvMyPRHuGtT+OMxHzl3UPa3z+5xdzrBeK1gfVzbObCZMnF0okmcNEzVgUsF3m/OqIJ7BiT424m60Kg+PNF3auJaAKLXEpvzDZECsxTpMhAyINVicRRo/BkMuZKRMdFoR3pQFRgICowEBUYiAoMRAUGogIDUYGBqMBAVGAgKjAQFRiICgxEBQaiAgNRgYGowEBUYCAqMBAVGIgKDORN/8rZLN5Knzbg6DfI6rQXBdqMqXPO0pidyULC7tj7uCVsMdLbc5VuRXAy2XiiNYsIl0FtDVzYTKuWo0EkEBUYiAoM5HXdGJEByGsxqzE3b1GQZgdk5TYBMwkUoIThYT9Poi1UbhO9PZcCeKNAwSAR3YSxjkaBk9XdKq+B5iBCHqu8ZpoEDvsXnXxRBWkrtQKlZuNV5WdqBb73jbZjoR3pQFRgIAY1azpEsLHgsrQSA6nuphBSvT2y8hO1NRCkXbdX92/B0PO6LtHRV59ioEwxTExRl0gii7lZYVtpiAdDAeqPe5heZHjYz9dzVGIzdsfe/0DF/0IiKO+6MWTTdnBdejnr7fubXjay8ynmajLdE7Zut3dIOT1TqelQlicMJ5H7vR9U0K07DugeEoePD6XS49Bex7BjzC/TkUiRS+mM2V1miVrGaZHL8NnJhr9l3Ey8v9Sa2IDIdNuVZ2Phb7kMkoel+8pTBIOOyO7DxwZ62ciCydeXGtM14vj2r+TL4y8aBd4zOXfOQuRXATcnp+C8+/kyT47Hvar6e+N/Ouiqa1WhTvoAAAAASUVORK5CYII=")},null,8,["src"]),r(b,{class:"ml-[8rpx]"},{default:u((()=>[i("描述词推荐")])),_:1})])),_:1}),l.showTranslate?(s(),o(C,{key:0,class:"inline-flex items-center text-primary",onClick:w(B(D),["stop"])},{default:u((()=>[B(N)?(s(),o(E,{key:0,mode:"flower",size:"24"})):(s(),o(_,{key:1,class:"w-[24rpx] h-[24rpx]",src:B("data:image/png;base64,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")},null,8,["src"])),r(b,{class:"ml-[8rpx]"},{default:u((()=>[i("翻译成英文")])),_:1})])),_:1},8,["onClick"])):m("v-if",!0),r(C,{class:"inline-flex items-center text-primary mr-[10rpx]",onClick:w(L,["stop"])},{default:u((()=>[r(b,{class:"ml-[8rpx]"},{default:u((()=>[i("试试示例")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),r(M,{ref_key:"keywordSuggestionRef",ref:g,model:l.model,modelValue:B(S),"onUpdate:modelValue":t[5]||(t[5]=e=>R(S)?S.value=e:null)},null,8,["model","modelValue"])],64)}}}),[["__scopeId","data-v-2c550a8d"]]),G=l({__name:"item-title",props:{title:{type:String,default:""},tips:{type:String,default:""},required:{type:Boolean,default:!1},fontSize:{type:String,default:"28rpx"},fontWeight:{type:String,default:"500"}},setup:l=>(a,t)=>{const d=A,n=x,c=k(y("u-icon"),e);return s(),o(n,{class:"flex"},{default:u((()=>[l.required?(s(),o(d,{key:0,class:"text-error text-lg"},{default:u((()=>[i("*")])),_:1})):m("v-if",!0),r(n,{style:b({fontSize:l.fontSize,fontWeight:l.fontWeight})},{default:u((()=>[i(p(l.title),1)])),_:1},8,["style"]),l.tips?(s(),o(n,{key:1,class:"flex mx-2",onClick:t[0]||(t[0]=w((e=>{return a=l.title,t=l.tips,void E({title:a,content:t,showCancel:!1});var a,t}),["stop"]))},{default:u((()=>[r(c,{name:"error-circle",color:"#9CA3AF",size:32})])),_:1})):m("v-if",!0)])),_:1})}});export{D,G as _,X as a,N as p};
