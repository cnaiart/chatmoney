import{G as j,H as G,D as H,C as J,t as z,F as Q}from"./element-plus.9458fb52.js";import{a as W,e as X,g as Y,b as Z}from"./ai_key.da56aab8.js";import{P as ee}from"./index.9f63869e.js";import{f as le}from"./index.d9c09296.js";import{d as ae,s as I,r as b,b as S,o,c as V,T as s,K as n,u as l,J as i,S as K,a6 as E,P as k}from"./@vue.7946e41b.js";const ue={class:"edit-popup"},ce=ae({__name:"edit",emits:["success"],setup(te,{expose:D,emit:U}){const M=U,F=I(),_=I(),v=b(""),f=b([]),e=b({id:"",type:"",appid:"",secret:"",channel:"",model_id:"",key:"",remark:"",status:1}),R=S(()=>[1,2].includes(Number(e.value.type))),q=t=>{const a=f.value.find(d=>d.id===t);a&&(e.value.channel=a.channel)},p=S(()=>{switch(e.value.channel){case"hunyuan":return{key:"SecretKey",secret:"SecretId"};case"minimax":return{key:"\u5BC6\u94A5",secret:"SecretId"};case"kdxf":return[4].includes(e.value.type)?{key:"SecretKey"}:{key:"APIKey",secret:"APISecret"};case"tiangong":return{key:"APPKey",secret:"APPSecret"};default:return{key:"APIKey",secret:"APISecret"}}}),L={key:[{required:!0,message:"\u8BF7\u8F93\u5165APIKey",trigger:["blur"]}],appid:[{required:!0,message:"\u8BF7\u8F93\u5165APPID"}],secret:[{required:!0,message:"\u8BF7\u8F93\u5165APISecret"}]},N=async()=>{var t,a;try{await((t=F.value)==null?void 0:t.validate()),e.value.id==""?await W(e.value):e.value.id!=""&&await X(e.value),le.msgSuccess("\u64CD\u4F5C\u6210\u529F"),M("success"),(a=_.value)==null||a.close()}catch(d){return d}},O=async(t,a,d)=>{var m;if(a=="add")e.value={id:"",type:t,channel:"",model_id:"",key:"",appid:"",remark:"",status:1},v.value="\u65B0\u589E\u5BC6\u94A5";else if(a=="edit"){const r=await Y({id:d.id});Object.keys(r).map(c=>{var y;e.value[c]=(y=r[c])!=null?y:""}),e.value.type=t,v.value="\u7F16\u8F91\u5BC6\u94A5"}(m=_.value)==null||m.open(),T(t)},T=async t=>{try{const a=await Z({type:t});f.value=a}catch(a){console.log(a)}};return D({open:O}),(t,a)=>{const d=j,m=G,r=H,c=J,y=z,$=Q;return o(),V("div",ue,[s(ee,{ref_key:"popupRef",ref:_,title:l(v),async:!0,width:"550px",onConfirm:N},{default:n(()=>[s($,{class:"ls-form",ref_key:"formRef",ref:F,rules:L,model:l(e),"label-width":"98px"},{default:n(()=>{var P,x,h,w,g,B,A;return[s(r,{label:"\u63A5\u53E3\u7C7B\u578B"},{default:n(()=>[l(R)?(o(),i(m,{key:1,class:"w-[330px]",modelValue:l(e).model_id,"onUpdate:modelValue":a[1]||(a[1]=u=>l(e).model_id=u),onChange:q},{default:n(()=>[(o(!0),V(K,null,E(l(f),u=>(o(),i(d,{key:u.id,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(o(),i(m,{key:0,class:"w-[330px]",modelValue:l(e).channel,"onUpdate:modelValue":a[0]||(a[0]=u=>l(e).channel=u)},{default:n(()=>[(o(!0),V(K,null,E(l(f),(u,C)=>(o(),i(d,{key:C,label:u,value:C},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),((P=l(e).channel)==null?void 0:P.includes("xunfei"))||((x=l(e).channel)==null?void 0:x.includes("kdxf"))?(o(),i(r,{key:0,label:"APPID",prop:"appid"},{default:n(()=>[s(c,{class:"w-[330px]",modelValue:l(e).appid,"onUpdate:modelValue":a[2]||(a[2]=u=>l(e).appid=u),placeholder:"\u8BF7\u8F93\u5165APPID",clearable:""},null,8,["modelValue"])]),_:1})):k("",!0),(h=l(e).channel)!=null&&h.includes("minimax")?(o(),i(r,{key:1,label:"groupId",prop:"appid"},{default:n(()=>[s(c,{class:"w-[330px]",modelValue:l(e).appid,"onUpdate:modelValue":a[3]||(a[3]=u=>l(e).appid=u),placeholder:"\u8BF7\u8F93\u5165APPID",clearable:""},null,8,["modelValue"])]),_:1})):k("",!0),l(p).key?(o(),i(r,{key:2,label:l(p).key,prop:"key"},{default:n(()=>[s(c,{class:"w-[330px]",modelValue:l(e).key,"onUpdate:modelValue":a[4]||(a[4]=u=>l(e).key=u),placeholder:`\u8BF7\u8F93\u5165${l(p).key}`,rows:4,type:"textarea",clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):k("",!0),l(p).secret&&(((w=l(e).channel)==null?void 0:w.includes("xunfei"))||((g=l(e).channel)==null?void 0:g.includes("baidu"))||((B=l(e).channel)==null?void 0:B.includes("kdxf"))||((A=l(e).channel)==null?void 0:A.includes("tiangong")))?(o(),i(r,{key:3,label:l(p).secret,prop:"secret"},{default:n(()=>[s(c,{class:"w-[330px]",modelValue:l(e).secret,"onUpdate:modelValue":a[5]||(a[5]=u=>l(e).secret=u),placeholder:`\u8BF7\u8F93\u5165${l(p).secret}`,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):k("",!0),s(r,{label:"\u5907\u6CE8"},{default:n(()=>[s(c,{class:"w-[330px]",type:"textarea",rows:"4",modelValue:l(e).remark,"onUpdate:modelValue":a[6]||(a[6]=u=>l(e).remark=u),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u5185\u5BB9",clearable:""},null,8,["modelValue"])]),_:1}),s(r,{label:"\u72B6\u6001"},{default:n(()=>[s(y,{modelValue:l(e).status,"onUpdate:modelValue":a[7]||(a[7]=u=>l(e).status=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]}),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ce as _};
