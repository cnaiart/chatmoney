import{V as ee,C as le,D as ae,G as te,H as ue,w as oe,F as ne,L as se,M as ie,b as re,o as de,t as me,N as pe,B as ce,I as _e,O as fe}from"./element-plus.9458fb52.js";import ve from"./popup.eaa1d8c9.js";import{_ as be}from"./index.vue_vue_type_script_setup_true_lang.bc724294.js";import{d as ke,r as p,s as Fe,_ as ge,i as Ee,a3 as Ce,ag as ye,o as c,c as Be,T as l,K as a,a7 as K,u as r,a as u,Q as d,L as b,J as k,R as C,P as R,j as he,n as Ve}from"./@vue.7946e41b.js";import{u as xe}from"./usePaging.9ff9bac2.js";import{k as De,a as we,b as Pe,t as Ue}from"./manage.1d8a9b85.js";import{f as Te}from"./index.d9c09296.js";import"./@element-plus.7d8ec931.js";import"./lodash-es.0dcbbec0.js";import"./dayjs.34e6308d.js";import"./@iktakahiro.37fa5b2b.js";import"./katex.dbdd07a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./consumer.77e8ff60.js";import"./index.9f63869e.js";import"./vue-drag-resize.1871ee6b.js";import"./lodash.4744e7a5.js";import"./@vueuse.927bd09a.js";import"./axios.978f8ca9.js";import"./vue-router.c4b4a189.js";import"./pinia.83a6d4dd.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.f0ee4d0a.js";import"./color.12f7d1c1.js";import"./clone.65ca8e73.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.6eeb6e12.js";import"./ms.a9ae1d6d.js";import"./nprogress.7152acad.js";import"./vue-clipboard3.fa3fc3ae.js";import"./clipboard.f56f94fd.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.932a13cd.js";const Ae={class:"mt-4"},Ke={class:"flex items-center"},Re=u("span",{class:"mr-4"},"\u5934\u50CF: ",-1),Le={class:"mt-[20px]"},Ie=u("span",{class:"mr-4"}," \u6635\u79F0: ",-1),Ne={class:"mt-[20px]"},Se=u("span",{class:"mr-4"},"\u7F16\u53F7: ",-1),$e={class:"flex justify-end mt-4"},ze=u("div",{class:"w-full text-left"},[u("div",{class:"text-lg font-medium"},"\u6210\u5458\u5904\u7406\u65B9\u5F0F")],-1),Oe={class:"flex justify-end"},Al=ke({__name:"index",setup(je){const y=p(!1),x=Fe(),D=p(""),s=p({name:"",is_enable:"",user:""}),_=p(!1),f=p("all"),B=p(!1),w=ge({id:-1}),{pager:v,getLists:F,resetPage:h,resetParams:L}=xe({fetchFun:De,params:s.value}),I=async n=>{await Te.customConfirm("\u786E\u5B9A\u5220\u9664 "," \u77E5\u8BC6\u5E93\u5417\uFF1F",n.name,"color:red"),await we({id:n.id}),F()},N=async n=>{await Pe({id:n})},S=async n=>{var t;D.value=n.id,y.value=!0,await Ve(),(t=x.value)==null||t.open()},$=async n=>{w.id=n.id,y.value=!1,_.value=!0},z=async()=>{B.value=!0;try{await Ue({id:D.value,user_id:w.id,type:f.value}),F(),_.value=!1}finally{B.value=!1}};return Ee(()=>{F()}),(n,t)=>{const P=le,g=ae,V=te,O=ue,m=oe,j=ne,U=se,i=ie,M=re,q=de,G=ee,H=me,J=Ce("RouterLink"),Q=pe,W=be,X=ve,T=ce,Y=_e,E=ye("perms"),Z=fe;return c(),Be("div",null,[l(U,{class:"!border-none",shadow:"never"},{default:a(()=>[l(j,{ref:"formRef",class:"mb-[-16px]",model:s.value,inline:!0},{default:a(()=>[l(g,{label:"\u77E5\u8BC6\u5E93\u540D\u79F0"},{default:a(()=>[l(P,{class:"w-[280px]",modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.name=e),placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0",clearable:"",onKeyup:K(r(h),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(g,{label:"\u521B\u5EFA\u4EBA"},{default:a(()=>[u("div",null,[l(P,{class:"w-[300px]",modelValue:s.value.user,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.user=e),placeholder:"\u8BF7\u8F93\u5165\u521B\u5EFA\u4EBA\u6635\u79F0/\u7528\u6237\u7F16\u53F7",clearable:"",onKeyup:K(r(h),["enter"])},null,8,["modelValue","onKeyup"])])]),_:1}),l(g,{label:"\u72B6\u6001"},{default:a(()=>[l(O,{class:"w-[280px]",modelValue:s.value.is_enable,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.is_enable=e)},{default:a(()=>[l(V,{label:"\u5168\u90E8",value:""}),l(V,{label:"\u5F00\u542F",value:1}),l(V,{label:"\u5173\u95ED",value:0})]),_:1},8,["modelValue"])]),_:1}),l(g,null,{default:a(()=>[l(m,{type:"primary",onClick:r(h)},{default:a(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"]),l(m,{onClick:r(L)},{default:a(()=>[d("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),l(U,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[u("div",Ae,[b((c(),k(Q,{size:"large",data:r(v).lists},{default:a(()=>[l(i,{label:"ID",prop:"id",width:"80"}),l(i,{label:"\u5C01\u9762",width:"100"},{default:a(({row:e})=>[l(M,{class:"w-[60px] h-[60px]",src:e.image},null,8,["src"])]),_:1}),l(i,{label:"\u77E5\u8BC6\u5E93\u540D\u79F0",prop:"name","min-width":"160"}),l(i,{label:"\u77E5\u8BC6\u5E93\u521B\u5EFA\u8005","min-width":"180"},{default:a(({row:e})=>[u("div",null,C(e.create_user),1)]),_:1}),l(i,{label:"\u5F53\u524D\u6240\u6709\u8005","min-width":"180"},{default:a(({row:e})=>[l(G,{placement:"right",width:"220px",trigger:"hover"},{reference:a(()=>{var o;return[d(C((o=e==null?void 0:e.user)==null?void 0:o.nickname),1)]}),default:a(()=>{var o,A;return[u("div",Ke,[Re,l(q,{size:50,src:(o=e==null?void 0:e.user)==null?void 0:o.avatar},null,8,["src"])]),u("div",Le,[Ie,u("span",null,C((A=e==null?void 0:e.user)==null?void 0:A.nickname),1)]),u("div",Ne,[Se,u("span",null,C(e==null?void 0:e.user.sn),1)])]}),_:2},1024)]),_:1}),l(i,{label:"\u72B6\u6001","min-width":"120"},{default:a(({row:e})=>[b(l(H,{modelValue:e.is_enable,"onUpdate:modelValue":o=>e.is_enable=o,"active-value":1,"inactive-value":0,onChange:o=>N(e.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[E,["kb.know/changeStatus"]]])]),_:1}),l(i,{label:"\u6700\u65B0\u66F4\u65B0\u65F6\u95F4",prop:"create_time","min-width":"150"}),l(i,{label:"\u64CD\u4F5C",prop:"id","min-width":"280",fixed:"right"},{default:a(({row:e})=>[e.create_type!=2?b((c(),k(m,{key:0,type:"primary",link:""},{default:a(()=>[l(J,{to:{path:"/konwledge_base/knowledge_base/study_data",query:{id:e.id,name:e.name}}},{default:a(()=>[d(" \u6570\u636E\u5B66\u4E60 ")]),_:2},1032,["to"])]),_:2},1024)),[[E,["kb.know/files"]]]):R("",!0),b((c(),k(m,{type:"primary",link:"",onClick:o=>S(e)},{default:a(()=>[d(" \u8F6C\u79FB\u6240\u6709\u6743 ")]),_:2},1032,["onClick"])),[[E,["kb.know/del"]]]),b((c(),k(m,{type:"danger",link:"",onClick:o=>I(e)},{default:a(()=>[d(" \u5220\u9664")]),_:2},1032,["onClick"])),[[E,["kb.know/del"]]])]),_:1})]),_:1},8,["data"])),[[Z,r(v).loading]]),u("div",$e,[l(W,{modelValue:r(v),"onUpdate:modelValue":t[3]||(t[3]=e=>he(v)?v.value=e:null),onChange:r(F)},null,8,["modelValue","onChange"])])])]),_:1}),y.value?(c(),k(X,{key:0,ref_key:"userPickerRef",ref:x,type:"single",maxNum:1,disabled:!1,onClose:$},null,512)):R("",!0),l(Y,{modelValue:_.value,"onUpdate:modelValue":t[7]||(t[7]=e=>_.value=e),width:"450px",class:"!rounded-[12px]",center:"",draggable:"","destroy-on-close":"","close-on-click-modal":"false"},{header:a(()=>[ze]),footer:a(()=>[u("div",Oe,[l(m,{onClick:t[6]||(t[6]=e=>_.value=!1)},{default:a(()=>[d("\u53D6\u6D88")]),_:1}),l(m,{type:"primary",loading:B.value,onClick:z},{default:a(()=>[d("\u786E\u8BA4 ")]),_:1},8,["loading"])])]),default:a(()=>[u("div",null,[l(T,{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=e=>f.value=e),"true-label":"all",label:"\u540C\u6B65\u8F6C\u79FB\u6240\u6709\u8005\u7684\u6240\u6709\u6210\u5458\u3002",size:"large"},null,8,["modelValue"]),l(T,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=e=>f.value=e),"true-label":"kb",label:"\u4E0D\u540C\u6B65\u8F6C\u79FB\u6240\u6709\u8005\u7684\u6240\u6709\u6210\u5458\uFF0C\u53EA\u8F6C\u79FB\u77E5\u8BC6\u5E93\u3002",size:"large"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}});export{Al as default};
