import{b}from"./index.d9c09296.js";import{b as V,S,I as $}from"./element-plus.9458fb52.js";import{_ as C}from"./file.vue_vue_type_style_index_0_scoped_ba7daef9_lang.b66d1428.js";import{_ as R}from"./vue-drag-resize.1871ee6b.js";import{o as s,c as r,a as x,J as g,P as n,T as y,G as P,Z as B,d as w,W as I,s as k,_ as z,H as E,u as f,b as T,r as N,w as j,K as F,j as q}from"./@vue.7946e41b.js";import{b as A}from"./vue3-video-play.e85b6285.js";const D=["src"],G={key:2,class:"absolute left-1/2 top-1/2 translate-x-[-50%] translate-y-[-50%] rounded-full w-5 h-5 flex justify-center items-center bg-[rgba(0,0,0,0.3)]"},H={key:3,class:"audio"};function J(e,m,i,p,a,u){const o=V,l=b;return s(),r("div",null,[x("div",{class:"file-item relative",style:B({height:e.fileSize,width:e.fileSize})},[e.type=="image"?(s(),g(o,{key:0,class:"image",fit:"contain",src:e.uri},null,8,["src"])):e.type=="video"?(s(),r("video",{key:1,class:"video",src:e.uri,preload:"","initial-time":"0",playsinline:"","webkit-playsinline":"","show-center-play-btn":!1,controls:!1,"x-webkit-airplay":"allow","x5-video-player-fullscreen":"true","x5-video-player-type":"h5"},null,8,D)):n("",!0),e.type=="video"?(s(),r("div",G,[y(l,{name:"el-icon-CaretRight",size:18,color:"#fff"})])):n("",!0),e.type=="audio"?(s(),r("div",H,[y(o,{class:"w-full h-full",src:"/src/assets/images/musicIcon.png"})])):n("",!0),P(e.$slots,"default",{},void 0,!0)],4)])}const ee=R(C,[["render",J],["__scopeId","data-v-ba7daef9"]]),K=w({__name:"index",props:{src:{type:String,required:!0},width:String,height:String,poster:String},setup(e,{expose:m}){const i=e,p=I(),a=k(),u=z({color:"var(--el-color-primary)",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.5,control:!0,title:"",poster:"",...i,...p}),o=()=>{a.value.play()},l=()=>{a.value.pause()},c=d=>{},t=d=>{},v=d=>{},_=d=>{};return m({play:o,pause:l}),(d,h)=>(s(),g(f(A),E({ref_key:"playerRef",ref:a},u,{src:e.src,onPlay:c,onPause:t,onTimeupdate:v,onCanplay:_}),null,16,["src"]))}}),L={key:0},O={key:0},U={key:1},te=w({__name:"preview",props:{modelValue:{type:Boolean,default:!1},url:{type:String,default:""},type:{type:String,default:"image"}},emits:["update:modelValue"],setup(e,{emit:m}){const i=e,p=m,a=k(),u=T({get(){return i.modelValue},set(c){p("update:modelValue",c)}}),o=()=>{p("update:modelValue",!1)},l=N([]);return j(()=>i.modelValue,c=>{c?setTimeout(()=>{var t;l.value=[i.url],(t=a.value)==null||t.play()},500):setTimeout(()=>{var t;l.value=[],(t=a.value)==null||t.pause()})}),(c,t)=>{const v=S,_=K,d=$;return e.modelValue?(s(),r("div",L,[e.type=="image"?(s(),r("div",O,[f(l).length?(s(),g(v,{key:0,"url-list":f(l),"hide-on-click-modal":"",teleported:!0,onClose:o},null,8,["url-list"])):n("",!0)])):n("",!0),e.type=="video"||e.type=="audio"?(s(),r("div",U,[y(d,{modelValue:f(u),"onUpdate:modelValue":t[0]||(t[0]=h=>q(u)?u.value=h:null),width:"740px",title:`${e.type=="video"?"\u89C6\u9891\u9884\u89C8":"\u97F3\u9891\u9884\u89C8"}`,"before-close":o,"destroy-on-close":!1},{default:F(()=>[y(_,{ref_key:"playerRef",ref:a,src:e.url,width:"100%",height:"450px",autoPlay:""},null,8,["src"])]),_:1},8,["modelValue","title"])])):n("",!0)])):n("",!0)}}});export{ee as _,te as a};
