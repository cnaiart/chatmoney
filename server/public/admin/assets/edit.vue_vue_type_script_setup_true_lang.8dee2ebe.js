import{Y as k,C as A,D as R,t as U,F as P}from"./element-plus.9458fb52.js";import{a as S,e as j}from"./draw_prompt.46d4646a.js";import{g as q}from"./draw_prompt_category.649d4000.js";import{P as L}from"./index.9f63869e.js";import{d as I,s as F,r as d,_ as N,o as c,c as B,T as t,K as p,u as o,J as T,a as m,S as z}from"./@vue.7946e41b.js";const J={class:"edit-popup"},K={class:"w-full"},O=m("div",{class:"form-tips"}," \u6DFB\u52A0\u591A\u4E2A\u5173\u952E\u8BCD\uFF0C\u4E2D\u82F1\u6587\u4EE5&\u9694\u5F00\uFF0C\u6309\u56DE\u8F66\u6362\u884C ",-1),Y={class:"w-full"},G={class:"w-full"},H={class:"w-full"},M=m("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u636E\u8D8A\u5927\u8D8A\u6392\u524D\u9762",-1),oe=I({__name:"edit",emits:["success","close"],setup(Q,{expose:C,emit:v}){const _=v,f=F(),i=F(),n=d(""),E=d([]),g=N({multiple:!1,checkStrictly:!0,label:"name",value:"id",children:"children",emitPath:!1}),e=d({id:"",category_id:"",prompt:"",prompt_en:"",model:"mj_goapi",sort:0,status:"1"}),D={prompt:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",trigger:["blur"]}],prompt_en:[{required:!0,message:"\u8BF7\u8F93\u5165\u82F1\u6587\u5173\u952E\u8BCD",trigger:["blur"]}],category_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7C7B\u76EE",trigger:["blur"]}]},y=async()=>{const r=await q({model:"mj_goapi"});E.value=r},V=async()=>{var r,u;try{await((r=f.value)==null?void 0:r.validate()),e.value.id==""?await S({...e.value,prompt:e.value.prompt.split(`
`)}):e.value.id!=""&&await j(e.value),(u=i.value)==null||u.close(),_("success")}catch(a){return a}},w=()=>{_("close")};return C({open:(r,u)=>{var a;y(),r=="add"?(e.value={id:"",category_id:"",prompt:"",model:"mj_goapi",prompt_en:"",sort:0,status:1},n.value="\u65B0\u589E\u5173\u952E\u8BCD"):r=="edit"&&(Object.keys(e.value).map(s=>{e.value[s]=u[s]}),console.log(e.value,u),n.value="\u7F16\u8F91\u5173\u952E\u8BCD"),(a=i.value)==null||a.open()}}),(r,u)=>{const a=A,s=R,b=k,h=U,x=P;return c(),B("div",J,[t(L,{ref_key:"popupRef",ref:i,title:o(n),async:!0,width:"550px",onConfirm:V,onClose:w},{default:p(()=>[t(x,{ref_key:"formRef",ref:f,rules:D,model:o(e),"label-width":"100px"},{default:p(()=>[o(e).id?(c(),B(z,{key:1},[t(s,{label:"\u82F1\u6587\u5173\u952E\u8BCD",prop:"prompt_en"},{default:p(()=>[m("div",Y,[t(a,{modelValue:o(e).prompt_en,"onUpdate:modelValue":u[1]||(u[1]=l=>o(e).prompt_en=l),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},null,8,["modelValue"])])]),_:1}),t(s,{label:"\u4E2D\u6587\u5173\u952E\u8BCD",prop:"prompt"},{default:p(()=>[m("div",G,[t(a,{modelValue:o(e).prompt,"onUpdate:modelValue":u[2]||(u[2]=l=>o(e).prompt=l),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},null,8,["modelValue"])])]),_:1})],64)):(c(),T(s,{key:0,label:"\u5173\u952E\u8BCD",prop:"prompt"},{default:p(()=>[m("div",K,[t(a,{modelValue:o(e).prompt,"onUpdate:modelValue":u[0]||(u[0]=l=>o(e).prompt=l),type:"textarea",autosize:{minRows:8,maxRows:20},placeholder:`\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF0C\u5982\uFF1ASurrealism&\u8D85\u73B0\u5B9E\u4E3B\u4E49\r
Baroque&\u5DF4\u6D1B\u514B\r
modern&\u73B0\u4EE3`},null,8,["modelValue"]),O])]),_:1})),t(s,{label:"\u6240\u5C5E\u7C7B\u76EE",prop:"category_id"},{default:p(()=>[t(b,{class:"w-full",modelValue:o(e).category_id,"onUpdate:modelValue":u[3]||(u[3]=l=>o(e).category_id=l),options:o(E),props:o(g),clearable:!0,filterable:!0},null,8,["modelValue","options","props"])]),_:1}),t(s,{label:"\u6392\u5E8F",prop:"sort"},{default:p(()=>[m("div",H,[t(a,{type:"text",modelValue:o(e).sort,"onUpdate:modelValue":u[4]||(u[4]=l=>o(e).sort=l),min:0,max:9999},null,8,["modelValue"]),M])]),_:1}),t(s,{label:"\u72B6\u6001",prop:"sort"},{default:p(()=>[t(h,{modelValue:o(e).status,"onUpdate:modelValue":u[5]||(u[5]=l=>o(e).status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{oe as _};
