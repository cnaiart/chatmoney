import{_ as ce,a1 as pe,a2 as _e,L as fe,D as Fe,G as ve,H as he,C as J,c as Ee,a as Be,t as be,M as ge,w as Ve,N as ye,F as Ae}from"./element-plus.9458fb52.js";import{f as K,b as xe}from"./index.d9c09296.js";import{_ as Ce}from"./picker.e7e8a72a.js";import{g as ke}from"./model.de461dbd.js";import{S as we}from"./sortablejs.65032496.js";import{d as De,s as M,b as k,r as W,w as X,i as Ue,a3 as Ie,o as i,c,T as e,K as t,a as n,S as b,a6 as S,J as x,Q as w,R as D,P as g,u as v,n as Me}from"./@vue.7946e41b.js";const Se=n("div",{class:"text-xl font-medium mb-[20px]"},"\u57FA\u7840\u914D\u7F6E",-1),Ne={class:"w-[460px]"},Re={key:0,class:"form-tips"},qe=["href"],Te={class:"w-[460px]"},$e={class:"w-[460px]"},Le={class:"w-[460px]"},Qe={key:0,class:"flex flex-wrap"},Oe={class:"flex items-center text-tx-regular text-xs"},Pe={class:"mr-[4px] mt-[2px]"},je={class:"form-tips"},ze={class:"form-tips"},He={class:"text-xl font-medium mb-[20px]"},Ge={class:"inline-flex text-tx-secondary"},Je={class:"flex-1 min-w-0 max-w-[1000px]"},Ke={class:""},We={class:"move-icon cursor-move"},Xe={class:"flex mt-4"},Ye={class:"w-[460px]"},Ze={class:"w-[460px]"},eu=n("div",{class:"form-tips"}," \u586B\u5199\u524D\u7AEF\u5C31\u663E\u793A\u8BE5\u5B57\u6BB5\uFF0C\u4E0D\u586B\u5199\u9ED8\u8BA4\u663E\u793AAI\u6A21\u578B\u540D\u79F0 ",-1),uu={class:"w-[460px]"},lu=n("div",{class:"form-tips"},"\u586B\u51990\u8868\u793A\u4E0D\u6D88\u8017\u7535\u529B\u503C",-1),mu=De({__name:"form",props:{modelValue:{type:Object,required:!0},type:{type:String},currentId:{type:[Number,String]},headerTitle:{type:String}},emits:["update:modelValue"],setup(C,{expose:Y,emit:Z}){const V=C,ee=Z,N=M(),a=k({get(){return V.modelValue},set(s){ee("update:modelValue",s)}}),R=M(),p=W({alias:"",name:"",status:1,price:""});X(p,s=>{Number(V.type)!=1&&(a.value.models=[s])},{deep:!0}),X(a,s=>{const[l]=s.models;l&&(p.value=l)},{immediate:!0});const ue={logo:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u6807"}],channel:[{required:!0,message:"\u8BF7\u9009\u62E9AI\u901A\u9053"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165AI\u540D\u79F0"}]},q=M(),le=()=>{const s=q.value.$el.querySelector(".el-table__body tbody");we.create(s,{animation:150,handle:".move-icon",onEnd:({newIndex:l,oldIndex:f})=>{const m=a.value.models,F=m.splice(f,1)[0];m.splice(l,0,F),a.value.models=[],Me(()=>{a.value.models=m,a.value.models.forEach((r,U)=>{r.sort=U})})}})},ae=()=>{a.value.models.push({name:"",alias:"",status:1,price:"",sort:a.value.models.length})},te=s=>s.id&&s.status==1?K.confirm("\u8BE5\u6A21\u578B\u53EF\u80FD\u5DF2\u7ECF\u88AB\u4F7F\u7528\uFF0C\u7981\u7528\u540E\u5DF2\u7ECF\u9009\u62E9\u8BE5\u6A21\u578B\u7684\u7528\u6237\u5C06\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"):!0,oe=async(s,l)=>{l&&await K.confirm("\u8BE5\u6A21\u578B\u53EF\u80FD\u5DF2\u7ECF\u88AB\u4F7F\u7528\uFF0C\u5220\u9664\u540E\u5DF2\u7ECF\u9009\u62E9\u8BE5\u6A21\u578B\u7684\u7528\u6237\u5C06\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"),a.value.models.splice(s,1)},y=W({chatModels:{},exampleModels:{chat:[],vector:[]},vectorModels:{}}),T=k(()=>Number(V.type)===1?y.value.chatModels:y.value.vectorModels),$=k(()=>Number(V.type)===1?y.value.exampleModels.chat:y.value.exampleModels.vector),L=(s,l)=>{const f=s?$.value.filter(m=>m.toLowerCase().includes(s.toLowerCase())):$.value;l(f.map(m=>({value:m})))},A=k(()=>T.value[a.value.channel]),se=()=>{const s=f=>{const m={};return f.reduce((F,r)=>(r.type=="group"?Object.assign(F,s(r.config)):F[r.key]=r.default,F),m),m},l=s(A.value.configs);a.value.configs=l};return(async()=>{y.value=await ke()})(),Ue(()=>{setTimeout(()=>{Number(V.type)==1&&le()},100)}),Y({validate:()=>{var s,l;return Promise.all([(s=N.value)==null?void 0:s.validate(),(l=R.value)==null?void 0:l.validate()])}}),(s,l)=>{const f=ce,m=fe,F=Ce,r=Fe,U=ve,ne=he,h=J,de=Ie("QuestionFilled"),re=Ee,Q=Be,ie=pe,I=be,O=xe,E=ge,P=_e,j=J,z=Ve,me=ye,H=Ae;return i(),c("div",null,[e(m,{class:"!border-none",shadow:"never"},{default:t(()=>[e(f,{content:C.headerTitle,onBack:l[0]||(l[0]=o=>s.$router.back())},null,8,["content"])]),_:1}),e(H,{class:"mt-4",ref_key:"formRef",ref:N,model:a.value,"label-width":"120px",rules:ue},{default:t(()=>[e(m,{shadow:"never",class:"!border-none"},{default:t(()=>{var o;return[Se,e(r,{label:"\u56FE\u6807",prop:"logo"},{default:t(()=>[n("div",null,[e(F,{modelValue:a.value.logo,"onUpdate:modelValue":l[1]||(l[1]=u=>a.value.logo=u),limit:1},null,8,["modelValue"])])]),_:1}),e(r,{label:"AI\u901A\u9053",prop:"channel"},{default:t(()=>{var u,d,_;return[n("div",Ne,[e(ne,{class:"w-full",modelValue:a.value.channel,"onUpdate:modelValue":l[2]||(l[2]=B=>a.value.channel=B),disabled:!!C.currentId,placeholder:"\u8BF7\u9009\u62E9AI\u901A\u9053",onChange:se},{default:t(()=>[(i(!0),c(b,null,S(T.value,(B,G)=>(i(),x(U,{value:G,label:B.name,key:G},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"]),(u=A.value)!=null&&u.website?(i(),c("div",Re,[w(" \u5F00\u901A\u7F51\u5740\uFF1A"+D((d=A.value)==null?void 0:d.website)+" ",1),n("a",{class:"text-primary",target:"_blank",href:(_=A.value)==null?void 0:_.website},"\u524D\u5F80\u5F00\u901A",8,qe)])):g("",!0)])]}),_:1}),e(r,{label:"AI\u540D\u79F0",prop:"name"},{default:t(()=>[n("div",Te,[e(h,{modelValue:a.value.name,"onUpdate:modelValue":l[3]||(l[3]=u=>a.value.name=u),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165AI\u540D\u79F0",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u63CF\u8FF0",prop:"remarks"},{default:t(()=>[n("div",$e,[e(h,{modelValue:a.value.remarks,"onUpdate:modelValue":l[4]||(l[4]=u=>a.value.remarks=u),modelModifiers:{trim:!0},placeholder:"\u8BF7\u7528\u4E00\u53E5\u7B80\u77ED\u7684\u8BDD\u63CF\u8FF0\u4E00\u4E0B",type:"textarea",rows:4},null,8,["modelValue"])])]),_:1}),(i(!0),c(b,null,S((o=A.value)==null?void 0:o.configs,u=>(i(),x(r,{label:u.name,prop:u.key,key:u.key,rules:u.require?[{required:u.require,trigger:"change",validator(d,_,B){u.key&&!_?B(new Error(u.placeholder)):B()}}]:[]},{default:t(()=>[n("div",Le,[u.type==="group"?(i(),c("div",Qe,[(i(!0),c(b,null,S(u.config,d=>(i(),c("div",{class:"w-[50%] pr-[20px] pb-[20px]",key:d.key},[n("div",Oe,[n("span",Pe,D(d.name),1),e(Q,{class:"box-item",effect:"dark",content:d.tips,placement:"top"},{default:t(()=>[e(re,{size:"16px"},{default:t(()=>[e(de)]),_:1})]),_:2},1032,["content"])]),d.type==="slider"?(i(),x(ie,{key:0,modelValue:a.value.configs[d.key],"onUpdate:modelValue":_=>a.value.configs[d.key]=_,min:d.range[0],max:d.range[1],step:d.step},null,8,["modelValue","onUpdate:modelValue","min","max","step"])):g("",!0),d.type==="switch"?(i(),x(I,{key:1,modelValue:a.value.configs[d.key],"onUpdate:modelValue":_=>a.value.configs[d.key]=_},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)]))),128))])):g("",!0),u.type==="input"?(i(),c(b,{key:1},[e(h,{modelValue:a.value.configs[u.key],"onUpdate:modelValue":d=>a.value.configs[u.key]=d,modelModifiers:{trim:!0},placeholder:u.placeholder||"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),n("div",je,D(u.tips),1)],64)):g("",!0),u.type==="textarea"?(i(),c(b,{key:2},[e(h,{modelValue:a.value.configs[u.key],"onUpdate:modelValue":d=>a.value.configs[u.key]=d,modelModifiers:{trim:!0},placeholder:u.placeholder||"\u8BF7\u8F93\u5165",type:"textarea",rows:4},null,8,["modelValue","onUpdate:modelValue","placeholder"]),n("div",ze,D(u.tips),1)],64)):g("",!0)])]),_:2},1032,["label","prop","rules"]))),128)),e(r,{label:"\u662F\u5426\u542F\u7528",prop:"is_enable"},{default:t(()=>[e(I,{modelValue:a.value.is_enable,"onUpdate:modelValue":l[5]||(l[5]=u=>a.value.is_enable=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]}),_:1}),e(m,{shadow:"never",class:"!border-none mt-4"},{default:t(()=>[n("div",He,[w(" \u6A21\u578B\u914D\u7F6E "),e(Q,{content:"\u6A21\u578B\u53EF\u81EA\u5B9A\u4E49\u6DFB\u52A0\uFF0C\u70B9\u51FB\u4E0B\u65B9\u7684\u65B0\u589E\u6309\u94AE",placement:"top",effect:"light",teleported:!0},{default:t(()=>[n("span",Ge,[e(O,{name:"el-icon-QuestionFilled"})])]),_:1})]),n("div",Je,[Number(C.type)==1?(i(),c(b,{key:0},[n("div",Ke,[e(me,{ref_key:"tableRef",ref:q,size:"large",class:"mt-4","row-key":"id",data:a.value.models},{default:t(()=>[e(E,{width:"50"},{default:t(()=>[n("div",We,[e(O,{name:"el-icon-Rank"})])]),_:1}),e(E,{label:"\u6A21\u578B\u540D\u79F0","min-width":"120"},{default:t(({row:o})=>[e(P,{class:"w-full",modelValue:o.name,"onUpdate:modelValue":u=>o.name=u,modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165AI\u6A21\u578B",clearable:"","fetch-suggestions":L},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(E,{label:"\u81EA\u5B9A\u4E49\u540D\u79F0","min-width":"120"},{default:t(({row:o})=>[e(j,{modelValue:o.alias,"onUpdate:modelValue":u=>o.alias=u,placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(E,{label:"1000\u5B57\u7B26\u6D88\u8017\u7535\u529B\u503C","min-width":"120"},{default:t(({row:o})=>[e(j,{modelValue:o.price,"onUpdate:modelValue":u=>o.price=u,type:"number",placeholder:"\u4E3A\u7A7A\u4E0D\u6D88\u8017\u7535\u529B\u503C"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(E,{label:"\u72B6\u6001","min-width":"100"},{default:t(({row:o})=>[e(I,{modelValue:o.status,"onUpdate:modelValue":u=>o.status=u,"before-change":()=>te(o),"active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue","before-change"])]),_:1}),e(E,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:t(({row:o,$index:u})=>[e(z,{type:"danger",link:"",onClick:d=>oe(u,o.id)},{default:t(()=>[w(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),n("div",Xe,[e(z,{type:"primary",onClick:ae},{default:t(()=>[w("+ \u65B0\u589E")]),_:1})])],64)):(i(),x(H,{key:1,ref_key:"formRef1",ref:R,model:v(p),"label-width":"120px"},{default:t(()=>[e(r,{label:"AI\u6A21\u578B",rules:[{required:!0,message:"\u8BF7\u8F93\u5165AI\u6A21\u578B"}],prop:"name"},{default:t(()=>[n("div",Ye,[e(P,{class:"w-full",modelValue:v(p).name,"onUpdate:modelValue":l[6]||(l[6]=o=>v(p).name=o),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165AI\u6A21\u578B",clearable:"","fetch-suggestions":L},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u81EA\u5B9A\u4E49\u522B\u540D",prop:"alias"},{default:t(()=>[n("div",Ze,[e(h,{modelValue:v(p).alias,"onUpdate:modelValue":l[7]||(l[7]=o=>v(p).alias=o),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u522B\u540D",maxlength:"30","show-word-limit":""},null,8,["modelValue"]),eu])]),_:1}),e(r,{label:"\u6D88\u8017\u7535\u529B\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6D88\u8017\u7535\u529B\u503C"}],prop:"price"},{default:t(()=>[n("div",uu,[e(h,{modelValue:v(p).price,"onUpdate:modelValue":l[8]||(l[8]=o=>v(p).price=o),modelModifiers:{trim:!0},type:"number"},null,8,["modelValue"]),lu])]),_:1})]),_:1},8,["model"]))])]),_:1})]),_:1},8,["model"])])}}});export{mu as _};
