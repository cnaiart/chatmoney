import{_ as q}from"./index.vue.f6fe58b5.js";import{_ as G}from"./index.vue.403e5f16.js";import{M as ie,aa as ae,b as O,E as M,i as ce,e as de}from"./entry.df16adda.js";import{u as ue}from"./useAudioPlay.49014f22.js";import{aa as pe,n as K,k as F,I as l,J as v,K as u,a4 as Y,a2 as p,_ as J,Z as R,u as g,$,a0 as f,ae as I,a3 as V,Y as N,a as Q,e as X,s as W,r as fe,b as me,ap as H,W as _e,an as ve,ao as ye}from"./swiper-vue.397ea2eb.js";import{g as we}from"./chat.e58126ff.js";import{_ as ee}from"./_plugin-vue_export-helper.c27b6911.js";import{a as he,E as ge}from"./el-tabs.bf76dc43.js";import{E as be}from"./el-empty.941f3aa6.js";import{_ as xe}from"./index.vue.b9ae65fe.js";import{E as P}from"./el-scrollbar.f4d658ff.js";import{E as Ce}from"./el-drawer.a696086e.js";import{u as ke}from"./useCopy.20b5e5cf.js";import{g as Ee}from"./position.a44f3ead.js";import{t as Z}from"./throttle.92cc074e.js";import"./strings.294b5976.js";import"./el-popper.89e34564.js";import"./el-tooltip.4ed993c7.js";import"./use-dialog.825901d5.js";import"./debounce.2369182b.js";const x="ElInfiniteScroll",$e=50,Ie=200,Re=0,Se={delay:{type:Number,default:Ie},distance:{type:Number,default:Re},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},U=(e,r)=>Object.entries(Se).reduce((n,[t,i])=>{var y,a;const{type:d,default:m}=i,o=e.getAttribute(`infinite-scroll-${t}`);let s=(a=(y=r[o])!=null?y:o)!=null?a:m;return s=s==="false"?!1:s,s=d(s),n[t]=Number.isNaN(s)?m:s,n},{}),te=e=>{const{observer:r}=e[x];r&&(r.disconnect(),delete e[x].observer)},Te=(e,r)=>{const{container:n,containerEl:t,instance:i,observer:y,lastScrollTop:a}=e[x],{disabled:d,distance:m}=U(e,i),{clientHeight:o,scrollHeight:s,scrollTop:w}=t,k=w-a;if(e[x].lastScrollTop=w,y||d||k<0)return;let h=!1;if(n===e)h=s-(o+w)<=m;else{const{clientTop:C,scrollHeight:_}=e,b=Ee(e,t);h=w+o>=b+C+_-m}h&&r.call(i)};function L(e,r){const{containerEl:n,instance:t}=e[x],{disabled:i}=U(e,t);i||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?r.call(t):te(e))}const Be={async mounted(e,r){const{instance:n,value:t}=r;pe(t)||ie(x,"'v-infinite-scroll' binding value must be a function"),await K();const{delay:i,immediate:y}=U(e,n),a=ae(e,!0),d=a===window?document.documentElement:a,m=Z(Te.bind(null,e,t),i);if(a){if(e[x]={instance:n,container:a,containerEl:d,delay:i,cb:t,onScroll:m,lastScrollTop:d.scrollTop},y){const o=new MutationObserver(Z(L.bind(null,e,t),$e));e[x].observer=o,o.observe(e,{childList:!0,subtree:!0}),L(e,t)}a.addEventListener("scroll",m)}},unmounted(e){const{container:r,onScroll:n}=e[x];r==null||r.removeEventListener("scroll",n),te(e)},async updated(e){if(!e[x])await K();else{const{containerEl:r,cb:n,observer:t}=e[x];r.clientHeight&&t&&L(e,n)}}},z=Be;z.install=e=>{e.directive("InfiniteScroll",z)};const Ve=z,He={class:"create-record-item"},Ne={class:"flex items-center"},Ae={class:"mr-auto line-clamp-1 text-lg font-medium"},De={class:"flex items-center flex-none mt-[10px]"},Le={class:"text-xs text-tx-secondary mr-auto"},Pe=F({__name:"record-item",props:{typing:{type:Boolean,default:!1},title:{default:""},time:{default:""},content:{default:""},showCopy:{type:Boolean,default:!0},showRewrite:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},showVoice:{type:Boolean,default:!1},recordId:{default:0},index:{default:0}},emits:["copy","rewrite"],setup(e,{emit:r}){O();const n=e,t=r,i=async()=>(await we({records_id:n.recordId,content:n.index})).file,{play:y,audioPlaying:a,pause:d,audioLoading:m}=ue();return(o,s)=>{const w=q,k=G,h=M;return l(),v("div",He,[u("div",Ne,[u("div",Ae,Y(o.title),1)]),u("div",{class:J(["mt-[10px]",{"line-clamp-[8]":o.overflow}])},[p(w,{content:o.content,class:J({"wait-typing":o.typing&&!o.content,typing:o.typing&&o.content})},null,8,["content","class"])],2),u("div",De,[u("div",Le,Y(o.time),1),o.showVoice?(l(),v(R,{key:0},[g(a)?(l(),$(h,{key:0,round:"",size:"small",color:"#fff",onClick:V(g(d),["stop"])},{icon:f(()=>[p(k,{name:"local-icon-audio_voice"})]),default:f(()=>[I(" 停止 ")]),_:1},8,["onClick"])):(l(),$(h,{key:1,round:"",size:"small",color:"#fff",loading:g(m),onClick:s[0]||(s[0]=V(C=>g(y)(i),["stop"]))},{icon:f(()=>[p(k,{name:"local-icon-audio_voice"})]),default:f(()=>[I(" 朗读 ")]),_:1},8,["loading"]))],64)):N("",!0),o.showRewrite?(l(),$(h,{key:1,round:"",size:"small",color:"#fff",onClick:s[1]||(s[1]=V(C=>t("rewrite"),["stop"]))},{default:f(()=>[I(" 重写 ")]),_:1})):N("",!0),o.showCopy?(l(),$(h,{key:2,round:"",size:"small",color:"#fff",onClick:s[2]||(s[2]=V(C=>t("copy",o.content),["stop"]))},{default:f(()=>[I(" 复制 ")]),_:1})):N("",!0)])])}}});const ze=ee(Pe,[["__scopeId","data-v-bb6f917b"]]),Oe={class:"h-full flex flex-col"},Me={class:"flex items-center pb-[16px]"},Fe={class:"text-lg flex-1 min-w-0 font-medium"},Ue=u("span",{class:"ml-[10px]"},"复制",-1),je={class:"flex-1 min-h-0"},Ke={class:"pt-[16px]"},Ye=F({__name:"record-preview",props:{title:{default:""},time:{default:""},content:{default:""},overflow:{type:Boolean,default:!1}},emits:["copy"],setup(e,{expose:r,emit:n}){O();const t=n,i=Q(!1);return r({open:()=>{i.value=!0}}),(a,d)=>{const m=xe,o=G,s=M,w=q,k=P,h=Ce;return l(),$(h,{ref:"drawerRef",modelValue:g(i),"onUpdate:modelValue":d[1]||(d[1]=C=>X(i)?i.value=C:null),title:"创作详情",direction:"rtl",class:"record-preview-drawer",size:"50%","append-to-body":""},{default:f(()=>[u("div",Oe,[u("div",Me,[u("div",Fe,[p(m,{content:a.title},null,8,["content"])]),p(s,{link:"",onClick:d[0]||(d[0]=C=>t("copy",a.content))},{default:f(()=>[p(o,{name:"el-icon-DocumentCopy",size:18}),Ue]),_:1})]),u("div",je,[p(k,null,{default:f(()=>[u("div",Ke,[p(w,{content:a.content},null,8,["content"])])]),_:1})])])]),_:1},8,["modelValue"])}}});const oe=""+new URL("create_record_null.353a2bee.png",import.meta.url).href,j=e=>(ve("data-v-e5f77c72"),e=e(),ye(),e),Je={class:"h-full bg-white creation-result rounded-[20px] overflow-hidden flex-1 min-w-0 sm:ml-[16px]"},We={key:1,class:"h-full flex flex-col items-center justify-center py-[100px]"},Ze=j(()=>u("img",{class:"w-[120px] h-[120px]",src:oe,alt:""},null,-1)),qe=j(()=>u("div",{class:"my-[16px] font-medium"}," AI创作结果会在显示这里，现在你只需要 ",-1)),Ge=j(()=>u("div",{class:"text-tx-regular text-sm"},[I(" 1. 在左侧填好必要的信息，填写越详细，结果越准确哦 "),u("br"),I(" 2.点击智能创作按钮，静待AI妙笔生花，一般在10秒内搞定 ")],-1)),Qe=[Ze,qe,Ge],Xe={"infinite-scroll-distance":"50",class:"h-full px-[16px] pt-[16px]"},et={key:1,class:"h-full flex flex-col items-center justify-center py-[100px]"},tt=F({__name:"create-results",props:{current:{},loading:{type:Boolean},currentCreationHistory:{},pageInfo:{}},emits:["update:current","load","clean","rewrite"],setup(e,{emit:r}){const n=e,t=r,i=ce(n,"current",t),y=Q(),a=W(),d=W(),m=O(),{copy:o}=ke(),s=async _=>{await o(_)},w=fe({title:"",content:""}),k=(_,b)=>{var E;w.title=_,w.content=b,(E=a.value)==null||E.open()},{height:h}=de(d);me(h,_=>{var b,E,S;if(n.loading){const A=(E=(b=y.value)==null?void 0:b.wrapRef)==null?void 0:E.offsetHeight;(S=y.value)==null||S.setScrollTop(A)}});const C=()=>{t("load")};return(_,b)=>{const E=ze,S=he,A=M,ne=be,se=ge,le=Ye,re=Ve;return l(),v("div",Je,[p(se,{modelValue:g(i),"onUpdate:modelValue":b[1]||(b[1]=c=>X(i)?i.value=c:null)},{default:f(()=>[p(S,{label:"本次创作结果",name:"current"},{default:f(()=>[_.currentCreationHistory.length?(l(),$(g(P),{key:0,ref_key:"scrollbarRef",ref:y},{default:f(()=>[_.currentCreationHistory.length?(l(),v("div",{key:0,ref_key:"currentCreationHistoryRef",ref:d,class:"px-[16px] pt-[16px]"},[(l(!0),v(R,null,H(_.currentCreationHistory,(c,T)=>(l(),v(R,{key:T},[(l(!0),v(R,null,H(c.reply,(B,D)=>(l(),$(E,{key:D,class:"mb-[16px]",content:B,typing:_.loading,time:c.create_time,title:c.title,"show-rewrite":!!c.extra&&!_.loading,onCopy:s,onRewrite:ot=>t("rewrite",c)},null,8,["content","typing","time","title","show-rewrite","onRewrite"]))),128))],64))),128))],512)):N("",!0)]),_:1},512)):(l(),v("div",We,Qe))]),_:1}),p(S,{label:"创作历史",name:"history"},{default:f(()=>[_.pageInfo.lists.length?(l(),$(g(P),{key:0,class:"h-full"},{default:f(()=>[_e((l(),v("div",Xe,[u("div",null,[p(A,{onClick:b[0]||(b[0]=c=>t("clean"))},{default:f(()=>[I(" 清空记录 ")]),_:1})]),(l(!0),v(R,null,H(_.pageInfo.lists,c=>(l(),v("div",{key:c.id,class:"mt-[16px]"},[(l(!0),v(R,null,H(c.reply,(T,B)=>(l(),v("div",{key:B,class:"mb-[16px]"},[p(E,{class:"cursor-pointer",content:T,time:c.create_time,title:c.title,overflow:!0,"show-rewrite":!!c.extra,"show-voice":g(m).getIsVoiceOpen,"record-id":c.id,index:B,onClick:D=>k(c.title,T),onCopy:s,onRewrite:D=>t("rewrite",c)},null,8,["content","time","title","show-rewrite","show-voice","record-id","index","onClick","onRewrite"])]))),128))]))),128))])),[[re,C]])]),_:1})):(l(),v("div",et,[p(ne,{image:g(oe)},null,8,["image"])]))]),_:1})]),_:1},8,["modelValue"]),p(le,{ref_key:"createRecordPreviewRef",ref:a,content:g(w).content,title:g(w).title,onCopy:s},null,8,["content","title"])])}}});const Ct=ee(tt,[["__scopeId","data-v-e5f77c72"]]);export{Ct as default};
