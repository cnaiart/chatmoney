import{a as F,b as I}from"./el-select.b349f79d.js";import{E as q,a as z}from"./el-form-item.f85b8636.js";import{g as N,E as S}from"./entry.df16adda.js";import{_ as $}from"./index.vue.403e5f16.js";import{_ as K}from"./index.7225eed5.js";import{E as L}from"./el-scrollbar.f4d658ff.js";import"./el-tag.7a8069da.js";import"./el-popper.89e34564.js";/* empty css                */import{u as O}from"./useDictOptions.e4ac7936.js";import{r as P}from"./my_database.5da0ead6.js";import{_ as J}from"./index.34adc8c7.js";import{k as T,s as f,a as Z,I as m,$ as c,a0 as t,a2 as o,u as n,J as j,ap as A,Z as G,K as r,ae as H}from"./swiper-vue.397ea2eb.js";const M={class:"flex-1"},Q=r("div",{class:"form-tips"},"最多支持上传 9 张图",-1),W={class:"flex-1"},X={class:"max-w-[600px]"},Y=r("div",{class:"el-upload__tip"}," 支持上传PDF、docx、excel、等文件格式 ",-1),fe=T({__name:"correct-popup",emits:["confirm"],setup(ee,{expose:k,emit:b}){const x=b,_=f(),p=f(),e=Z({name:"",kb_id:"",ask:"",reply:"",images:[],files:[]}),y={kb_id:[{required:!0,message:"选择知识库"}],ask:[{required:!0,message:"请输入问题"}],reply:[{required:!0,message:"请输入答案"}]},w=a=>{var l;e.value={...e.value,ask:a.ask,reply:a.reply,name:a.name},(l=p.value)==null||l.open()},v=()=>{var a;(a=p.value)==null||a.close()},g=async()=>{var a;await((a=_.value)==null?void 0:a.validate()),x("confirm",e.value)},{optionsData:E}=O({knowledge:{api:P,params:{page_type:0},transformData(a){return a.lists||[]}}});return k({open:w,close:v}),(a,l)=>{const V=I,h=F,i=q,u=N,R=$,d=K,U=S,B=z,D=L;return m(),c(J,{ref_key:"popupRef",ref:p,center:"",title:"修正问答",async:"",width:"900px",onConfirm:g},{default:t(()=>[o(D,null,{default:t(()=>[o(B,{ref_key:"formRef",ref:_,model:n(e),rules:y,"label-width":"120px"},{default:t(()=>[o(i,{label:"选择知识库",prop:"kb_id"},{default:t(()=>[o(h,{modelValue:n(e).kb_id,"onUpdate:modelValue":l[0]||(l[0]=s=>n(e).kb_id=s),class:"w-[240px]"},{default:t(()=>[(m(!0),j(G,null,A(n(E).knowledge,(s,C)=>(m(),c(V,{key:C,label:`${s.name}`,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(i,{label:"提问问题",prop:"ask"},{default:t(()=>[o(u,{modelValue:n(e).ask,"onUpdate:modelValue":l[1]||(l[1]=s=>n(e).ask=s),placeholder:"请输入问题",type:"textarea",resize:"none",rows:4,maxlength:"600","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),o(i,{label:"问题答案",prop:"reply"},{default:t(()=>[o(u,{modelValue:n(e).reply,"onUpdate:modelValue":l[2]||(l[2]=s=>n(e).reply=s),placeholder:"请输入答案",type:"textarea",resize:"none",rows:15,clearable:""},null,8,["modelValue"])]),_:1}),o(i,{label:"上传图片"},{default:t(()=>[r("div",M,[r("div",null,[o(d,{files:n(e).images,"onUpdate:files":l[3]||(l[3]=s=>n(e).images=s),type:"image","list-type":"picture-card",limit:9,multiple:"","show-file-list":""},{default:t(()=>[o(R,{name:"el-icon-Plus",size:20})]),_:1},8,["files"])]),Q])]),_:1}),o(i,{label:"上传附件"},{default:t(()=>[r("div",W,[r("div",X,[o(d,{files:n(e).files,"onUpdate:files":l[4]||(l[4]=s=>n(e).files=s),type:"file","show-file-list":""},{tip:t(()=>[Y]),default:t(()=>[o(U,null,{default:t(()=>[H("上传附件")]),_:1})]),_:1},8,["files"])])])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},512)}}});export{fe as _};
