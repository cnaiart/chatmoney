import{E as U}from"./el-page-header.84cac8c8.js";import{E as q,v as A,f as j}from"./entry.df16adda.js";import{E as z,a as H}from"./el-checkbox.033475fe.js";import{_ as J}from"./index.vue.403e5f16.js";import{E as K,a as M,b as W}from"./el-dropdown.becf1ea9.js";import{u as Z,_ as G}from"./index.vue.1307e7a7.js";import"./el-tag.7a8069da.js";import"./el-popper.89e34564.js";import"./el-scrollbar.f4d658ff.js";/* empty css                 */import"./el-tooltip.4ed993c7.js";import{u as O}from"./useCopy.20b5e5cf.js";import{_ as Q}from"./create-share.vue.74cda496.js";import{_ as X}from"./usage-settings.vue.764b0d95.js";import{s as Y,t as ee,u as te,q as ae}from"./robot.5da26683.js";import{k as oe,s as w,A as ne,r as se,b as le,I as k,J as ie,a2 as t,K as d,a0 as o,ae as c,u as p,W as re,$ as me,e as ce,Z as pe}from"./swiper-vue.397ea2eb.js";const de={class:"mt-4"},_e=d("div",{class:"text-xs text-tx-secondary"}," 可以直接分享该模型给其他用户去进行对话，对方无需登录即可直接进行对话。注意，这个功能会消耗你账号的问答条数。请保管好链接和密码。 ",-1),fe={class:"mt-4"},ue={class:"flex items-center"},ge={class:"flex justify-end mt-4"},Le=oe({__name:"web",props:{appId:{}},emits:["back"],setup(b,{emit:v}){const y=b,C=v,{copy:$}=O(),g=w(),_=w(),{appId:x}=ne(y),f=se({robot_id:x,type:1}),{pager:l,getLists:n}=Z({fetchFun:te,params:f});n();const E=async a=>{await j.confirm("确定删除？"),await ae({id:a,type:f.type}),n()},R=(a,e)=>{switch(a){case"delete":E(e.id);break;case"usage":B(e)}},D=async a=>{var e;await Y({...a,...f}),(e=g.value)==null||e.close(),n()},S=async a=>{const e=`${location.origin}/chat/${a.apikey} #${a.name} ${a.secret?`密码: ${a.secret}`:""}`;await $(e)},B=a=>{var e,u;(e=_.value)==null||e.open(),(u=_.value)==null||u.setFormData(a)},I=async a=>{var e;await ee({...a,...f}),(e=_.value)==null||e.close(),n()};return le(()=>y.appId,()=>{n()}),(a,e)=>{const u=U,i=q,r=z,V=J,h=K,L=M,F=W,N=H,P=G,T=A;return k(),ie(pe,null,[t(u,{content:"发布网页",onBack:e[0]||(e[0]=s=>C("back"))}),d("div",de,[t(i,{class:"mb-4",type:"primary",onClick:e[1]||(e[1]=s=>{var m;return(m=p(g))==null?void 0:m.open()})},{default:o(()=>[c(" 创建链接 ")]),_:1}),_e]),d("div",fe,[re((k(),me(N,{data:p(l).lists,size:"large"},{default:o(()=>[t(r,{label:"apikey",prop:"apikey","min-width":"200"}),t(r,{label:"分享名称",prop:"name","min-width":"180","show-tooltip-when-overflow":""}),t(r,{label:"访问密码",prop:"secret","min-width":"120"}),t(r,{label:"最后使用时间",prop:"use_time","min-width":"180"}),t(r,{label:"操作","min-width":"150",fixed:"right"},{default:o(({row:s})=>[d("div",ue,[t(i,{type:"primary",link:"",onClick:m=>S(s)},{default:o(()=>[c(" 复制链接 ")]),_:2},1032,["onClick"]),t(F,{class:"ml-[10px]",onCommand:m=>R(m,s)},{dropdown:o(()=>[t(L,null,{default:o(()=>[t(h,{command:"usage"},{default:o(()=>[t(i,{type:"primary",link:""},{default:o(()=>[c(" 用量设置 ")]),_:1})]),_:1}),t(h,{command:"delete"},{default:o(()=>[t(i,{type:"danger",link:""},{default:o(()=>[c(" 删除 ")]),_:1})]),_:1})]),_:1})]),default:o(()=>[t(i,{type:"primary",link:""},{default:o(()=>[c(" 更多 "),t(V,{name:"el-icon-ArrowDown"})]),_:1})]),_:2},1032,["onCommand"])])]),_:1})]),_:1},8,["data"])),[[T,p(l).loading]]),d("div",ge,[t(P,{modelValue:p(l),"onUpdate:modelValue":e[2]||(e[2]=s=>ce(l)?l.value=s:null),onChange:p(n)},null,8,["modelValue","onChange"])])]),t(Q,{ref_key:"createShareRef",ref:g,onConfirm:D},null,512),t(X,{ref_key:"usageSettingsRef",ref:_,onConfirm:I},null,512)],64)}}});export{Le as _};
