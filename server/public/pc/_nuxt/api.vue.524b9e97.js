import{E as q}from"./el-page-header.84cac8c8.js";import{f as j,E as w,v as z}from"./entry.df16adda.js";import{E as H,a as J}from"./el-checkbox.033475fe.js";import{u as K,_ as W}from"./index.vue.1307e7a7.js";import"./el-tag.7a8069da.js";/* empty css                 */import"./el-tooltip.4ed993c7.js";import"./el-popper.89e34564.js";import"./el-scrollbar.f4d658ff.js";import{u as Y}from"./useCopy.20b5e5cf.js";import{_ as Z}from"./create-api.vue.48bec528.js";import{_ as G}from"./usage-settings.vue.764b0d95.js";import{_ as C}from"./call-description.vue.bf67ecb1.js";import{q as M,s as O,t as Q,u as X}from"./robot.5da26683.js";import{k as ee,s as b,A as te,r as ae,l as se,a as oe,b as ne,I as y,J as ie,a2 as a,u as s,K as n,a0 as l,ae as p,$ as h,Y as x,a4 as le,W as re,e as pe,Z as ce}from"./swiper-vue.397ea2eb.js";const me={class:"flex items-center mt-4"},de={class:"flex"},_e={class:"ml-4 flex items-center"},fe={class:"mt-4"},ue={class:"flex items-center"},ye={class:"flex justify-end mt-4"},Pe=ee({__name:"api",props:{appId:{},type:{}},emits:["back"],setup(R,{emit:$}){const c=R,E=$,{copy:A}=Y(),g=b(),m=b(),{appId:B}=te(c),d=ae({robot_id:B,type:c.type}),{pager:r,getLists:i}=K({fetchFun:X,params:d});i();const I=async t=>{await j.confirm("确定删除？"),await M({id:t,type:d.type}),i()},V=se(()=>{switch(c.type){case 5:return"发布企业微信";default:return"发布API"}}),P=async t=>{var e;await O({...t,...d}),(e=g.value)==null||e.close(),i()},S=async t=>{var e;await Q({...t,...d}),(e=m.value)==null||e.close(),i()},k=oe("");k.value=`${window.location.origin}/api`;const D=async t=>{await A(t)},N=t=>{var e,_;(e=m.value)==null||e.open(),(_=m.value)==null||_.setFormData(t)};return ne(()=>c.appId,()=>{i()}),(t,e)=>{const _=q,v=w,F=w,f=H,L=J,T=W,U=z;return y(),ie(ce,null,[a(_,{content:s(V),onBack:e[0]||(e[0]=o=>E("back"))},null,8,["content"]),n("div",me,[n("div",de,[a(v,{type:"primary",onClick:e[1]||(e[1]=o=>{var u;return(u=s(g))==null?void 0:u.open()})},{default:l(()=>[p(" 创建API ")]),_:1}),t.type==4?(y(),h(C,{key:0,type:"app",class:"ml-[10px]"})):x("",!0),t.type==5?(y(),h(C,{key:1,type:"wx",class:"ml-[10px]"})):x("",!0)]),n("div",_e,[p(" API根地址： "),n("span",null,le(s(k)),1),a(F,{onClick:e[2]||(e[2]=o=>D(s(k))),type:"primary",link:""},{default:l(()=>[p("复制")]),_:1})])]),n("div",fe,[re((y(),h(L,{data:s(r).lists,size:"large"},{default:l(()=>[a(f,{label:"apikey",prop:"apikey","min-width":"200"}),a(f,{label:"名称",prop:"name","min-width":"180","show-tooltip-when-overflow":""}),a(f,{label:"最后使用时间",prop:"use_time","min-width":"180"}),a(f,{label:"操作",width:"150",fixed:"right"},{default:l(({row:o})=>[n("div",ue,[a(v,{type:"primary",link:"",onClick:u=>N(o)},{default:l(()=>[p(" 用量设置 ")]),_:2},1032,["onClick"]),a(v,{type:"danger",link:"",onClick:u=>I(o.id)},{default:l(()=>[p(" 删除 ")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[U,s(r).loading]]),n("div",ye,[a(T,{modelValue:s(r),"onUpdate:modelValue":e[3]||(e[3]=o=>pe(r)?r.value=o:null),onChange:s(i)},null,8,["modelValue","onChange"])])]),a(Z,{ref_key:"createApiRef",ref:g,onConfirm:P},null,512),a(G,{ref_key:"usageSettingsRef",ref:m,onConfirm:S},null,512)],64)}}});export{Pe as _};
