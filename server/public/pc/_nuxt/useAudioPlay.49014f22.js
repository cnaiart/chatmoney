import{f as p}from"./entry.df16adda.js";import{s as y,a as i,o as m}from"./swiper-vue.397ea2eb.js";const n=new Set,w=()=>{const e=y(null),u=i(!1),l=i(!1),v=async(a,d=!0)=>{var t;let s;if(typeof a=="string"?s=()=>a:s=a,o(),e.value||c(),d&&((t=e.value)!=null&&t.src)){e.value.play();return}u.value=!0;try{const r=await Promise.resolve(s());e.value.src=r,e.value.play()}catch(r){console.error(r),p.msgError("播放失败")}finally{u.value=!1}},f=()=>{var a;(a=e.value)==null||a.pause(),l.value=!1},o=()=>{n.forEach(a=>{a.pause(),a.currentTime=0,a.audioPlaying.value=!1})},c=()=>{e.value=new Audio,e.value.audioPlaying=l,n.add(e.value),e.value.onplay=()=>{l.value=!0},e.value.onended=()=>{l.value=!1},e.value.onerror=()=>{l.value=!1}};return m(()=>{var a;(a=e.value)!=null&&a.src&&o(),e.value&&(n.delete(e.value),e.value=null)}),{play:v,audioLoading:u,audioPlaying:l,pause:f,pauseAll:o}};export{w as u};
