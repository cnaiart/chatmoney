import{E as fe}from"./el-image-viewer.ad15677e.js";import{E as ge}from"./el-dialog.64289190.js";import{c as P,cW as te,cX as E,cP as Z,cQ as B,cY as le,g as A,E as N,b as J,cE as q,cZ as se,c_ as ye,c$ as xe}from"./entry.df16adda.js";import{E as ne,a as ae}from"./el-tabs.bf76dc43.js";import{_ as re}from"./nuxt-link.ee69c354.js";import{b as K,a as Q}from"./el-select.b349f79d.js";import{E as M,a as j}from"./el-form-item.f85b8636.js";import{_ as H}from"./index.e706d27a.js";import"./el-tag.7a8069da.js";import"./el-scrollbar.f4d658ff.js";import"./el-popper.89e34564.js";/* empty css                */import{u as z}from"./useLockFn.a803ddfa.js";import{k as G,s as T,r as X,l as h,I as i,J as S,K as c,a2 as o,a0 as t,u as e,$ as _,Y as f,ae as b,Z as ie,ap as de,b as Y,e as we}from"./swiper-vue.397ea2eb.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";const ve={class:"pt-[10px]"},ke={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},Ee={class:"flex"},be={class:"flex-1 flex"},Ve=G({__name:"mobile-login",setup(U){const a=P(),g=T(),k={mobile:[{required:!0,message:"请输入手机号"}],password:[{required:!0,message:"请输入密码"}],code:[{required:!0,message:"请输入验证码"}]},r=X({code:"",mobile:"",password:"",scene:1,terminal:te}),y=h(()=>r.scene===3),p=h(()=>r.scene===1),s=v=>{r.scene=v},u=T(),x=async()=>{var v,l;await((v=g.value)==null?void 0:v.validateField(["account"])),await Z({scene:B.LOGIN,mobile:r.mobile}),(l=u.value)==null||l.start()},{lockFn:V,isLock:O}=z(async()=>{var l;await((l=g.value)==null?void 0:l.validate());const v=await le(r);a.login(v.token),location.reload(),await a.getUser(),a.toggleShowLogin(!1)});return(v,l)=>{const d=K,I=Q,F=A,L=M,n=H,m=N,$=j;return i(),S("div",ve,[c("div",null,[o($,{ref_key:"formRef",ref:g,size:"large",model:e(r),rules:k},{default:t(()=>[o(L,{prop:"mobile"},{default:t(()=>[o(F,{modelValue:e(r).mobile,"onUpdate:modelValue":l[0]||(l[0]=C=>e(r).mobile=C),placeholder:"请输入手机号"},{prepend:t(()=>[o(I,{"model-value":"+86",style:{width:"80px"}},{default:t(()=>[o(d,{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p)?(i(),_(L,{key:0,prop:"password"},{default:t(()=>[o(F,{modelValue:e(r).password,"onUpdate:modelValue":l[1]||(l[1]=C=>e(r).password=C),type:"password","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})):f("",!0),e(y)?(i(),_(L,{key:1,prop:"code"},{default:t(()=>[o(F,{modelValue:e(r).code,"onUpdate:modelValue":l[2]||(l[2]=C=>e(r).code=C),placeholder:"请输入验证码"},{suffix:t(()=>[c("div",ke,[o(n,{ref_key:"verificationCodeRef",ref:u,onClickGet:x},null,512)])]),_:1},8,["modelValue"])]),_:1})):f("",!0),c("div",Ee,[c("div",be,[e(p)?(i(),_(m,{key:0,type:"primary",link:"",onClick:l[3]||(l[3]=C=>s(3))},{default:t(()=>[b(" 手机验证码登录 ")]),_:1})):f("",!0),e(y)?(i(),_(m,{key:1,type:"primary",link:"",onClick:l[4]||(l[4]=C=>s(1))},{default:t(()=>[b(" 手机密码登录 ")]),_:1})):f("",!0)]),e(p)?(i(),_(m,{key:0,link:"",onClick:l[5]||(l[5]=C=>e(a).setLoginPopupType(e(E).FORGOT_PWD_MOBILE))},{default:t(()=>[b(" 忘记密码？ ")]),_:1})):f("",!0)]),o(L,{class:"my-[30px]"},{default:t(()=>[o(m,{class:"w-full",type:"primary",loading:e(O),onClick:e(V)},{default:t(()=>[b(" 登录 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])])}}}),Le={class:"pt-[10px]"},Ce={class:"flex justify-end"},Re=G({__name:"mailbox-login",setup(U){const a=P(),g=T(),k={email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],password:[{required:!0,message:"请输入密码"}]},r=X({email:"",password:"",scene:2,terminal:te}),{lockFn:y,isLock:p}=z(async()=>{var u;await((u=g.value)==null?void 0:u.validate());const s=await le(r);a.login(s.token),location.reload(),await a.getUser(),a.toggleShowLogin(!1)});return(s,u)=>{const x=A,V=M,O=N,v=j;return i(),S("div",Le,[c("div",null,[o(v,{ref_key:"formRef",ref:g,size:"large",model:e(r),rules:k},{default:t(()=>[o(V,{prop:"email"},{default:t(()=>[o(x,{modelValue:e(r).email,"onUpdate:modelValue":u[0]||(u[0]=l=>e(r).email=l),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1}),o(V,{prop:"password"},{default:t(()=>[o(x,{modelValue:e(r).password,"onUpdate:modelValue":u[1]||(u[1]=l=>e(r).password=l),type:"password","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),c("div",Ce,[o(O,{link:"",onClick:u[2]||(u[2]=l=>e(a).setLoginPopupType(e(E).FORGOT_PWD_MAILBOX))},{default:t(()=>[b(" 忘记密码？ ")]),_:1})]),o(V,{class:"my-[30px]"},{default:t(()=>[o(O,{class:"w-full",type:"primary",loading:e(p),onClick:e(y)},{default:t(()=>[b(" 登录 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])])}}}),he={class:"flex flex-col h-[400px]"},Ie={class:"flex-1 pt-[20px] px-[30px] min-h-0"},Oe={class:"bg-[#f4f4f4] px-[20px] py-[15px] flex"},$e={key:0,class:"flex-1 text-tx-secondary"},Se=["href"],Fe=["href"],Pe=G({__name:"index",setup(U){const a=J(),g=P(),k=[{name:"手机号登录",type:"1"},{name:"邮箱登录",type:"2"}],r=h(()=>k.filter(x=>y.value.includes(x.type))),y=h(()=>{var x;return((x=a.getLoginConfig)==null?void 0:x.login_way)||[]}),p=h(()=>{var x;return((x=a.getLoginConfig)==null?void 0:x.register_way)||[]}),s=h(()=>{if(y.value.includes("1"))return"1";const[x]=y.value;return x||""}),u=h(()=>a.getLoginConfig.is_agreement===1);return(x,V)=>{const O=ae,v=ne,l=re;return i(),S("div",he,[c("div",Ie,[o(v,{"model-value":e(s)},{default:t(()=>[(i(!0),S(ie,null,de(e(r),(d,I)=>(i(),_(O,{key:I,label:d.name,name:d.type},{default:t(()=>[d.type==="1"?(i(),_(Ve,{key:0})):f("",!0),d.type==="2"?(i(),_(Re,{key:1})):f("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["model-value"])]),c("div",Oe,[e(u)?(i(),S("div",$e,[b(" 您登录即同意 "),o(l,{to:`/policy/${e(q).SERVICE}`,custom:""},{default:t(({href:d})=>[c("a",{class:"text-tx-primary",href:d,target:"_blank"}," 用户协议 ",8,Se)]),_:1},8,["to"]),b(" 和 "),o(l,{class:"text-tx-primary",to:`/policy/${e(q).PRIVACY}`,custom:""},{default:t(({href:d})=>[c("a",{class:"text-tx-primary",href:d,target:"_blank"}," 隐私政策 ",8,Fe)]),_:1},8,["to"])])):f("",!0),e(p).length?(i(),_(e(N),{key:1,type:"primary",link:"",onClick:V[0]||(V[0]=d=>e(g).setLoginPopupType(e(E).REGISTER))},{default:t(()=>[b(" 注册新账号 ")]),_:1})):f("",!0)])])}}});const Te=pe(Pe,[["__scopeId","data-v-0b1b1e7a"]]),We={class:"flex-1 flex flex-col"},Ge={class:"flex flex-1 flex-col pt-[30px] px-[30px] min-h-0"},Ue=c("span",{class:"text-2xl font-medium text-tx-primary"},"更换密码",-1),De={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},Be={class:"flex justify-center flex-1"},Ne=G({__name:"forgot-pwd",setup(U){const a=P(),{setLoginPopupType:g}=P(),k=T(),r=T(),y={mobile:[{required:!0,message:"请输入手机号码"}],email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],code:[{required:!0,message:"请输入验证码",trigger:["change","blur"]}],password:[{required:!0,message:"请输入6-20位数字+字母或符号组合",trigger:["change","blur"]},{min:6,max:20,message:"密码长度应为6-20",trigger:["change","blur"]}],password_confirm:[{validator(l,d,I){d===""?I(new Error("请再次输入密码")):d!==p.password?I(new Error("两次输入的密码不一致")):I()},trigger:["change","blur"]}]},p=X({email:"",mobile:"",password:"",code:"",password_confirm:""}),s=async()=>{var l;a.loginPopupType===E.FORGOT_PWD_MOBILE?await u():await x(),(l=r.value)==null||l.start()},u=async()=>{var l;await((l=k.value)==null?void 0:l.validateField(["mobile"])),await Z({scene:B.FIND_PASSWORD,mobile:p.mobile})},x=async()=>{var l;await((l=k.value)==null?void 0:l.validateField(["email"])),await se({scene:B.FIND_PASSWORD,email:p.email})},V=async()=>{var l;await((l=k.value)==null?void 0:l.validate()),await ye({...p,scene:a.loginPopupType===E.FORGOT_PWD_MOBILE?1:2}),a.logout(),g(E.LOGIN)},{lockFn:O,isLock:v}=z(V);return(l,d)=>{const I=K,F=Q,L=A,n=M,m=H,$=N,C=j;return i(),S("div",We,[c("div",Ge,[Ue,o(C,{ref_key:"formRef",ref:k,class:"mt-[35px]",size:"large",model:e(p),rules:y},{default:t(()=>[e(a).loginPopupType===e(E).FORGOT_PWD_MOBILE?(i(),_(n,{key:0,prop:"mobile"},{default:t(()=>[o(L,{modelValue:e(p).mobile,"onUpdate:modelValue":d[0]||(d[0]=R=>e(p).mobile=R),placeholder:"请输入手机号"},{prepend:t(()=>[o(F,{"model-value":"+86",style:{width:"80px"}},{default:t(()=>[o(I,{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1})):f("",!0),e(a).loginPopupType===e(E).FORGOT_PWD_MAILBOX?(i(),_(n,{key:1,prop:"email"},{default:t(()=>[o(L,{modelValue:e(p).email,"onUpdate:modelValue":d[1]||(d[1]=R=>e(p).email=R),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1})):f("",!0),o(n,{prop:"code"},{default:t(()=>[o(L,{modelValue:e(p).code,"onUpdate:modelValue":d[2]||(d[2]=R=>e(p).code=R),placeholder:"请输入验证码"},{suffix:t(()=>[c("div",De,[o(m,{ref_key:"verificationCodeRef",ref:r,onClickGet:s},null,512)])]),_:1},8,["modelValue"])]),_:1}),o(n,{prop:"password"},{default:t(()=>[o(L,{modelValue:e(p).password,"onUpdate:modelValue":d[3]||(d[3]=R=>e(p).password=R),placeholder:"请输入6-20位数字+字母或符号组合",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(n,{prop:"password_confirm"},{default:t(()=>[o(L,{modelValue:e(p).password_confirm,"onUpdate:modelValue":d[4]||(d[4]=R=>e(p).password_confirm=R),placeholder:"请再次输入密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(n,{class:"mt-[30px]"},{default:t(()=>[o($,{class:"w-full",type:"primary",loading:e(v),onClick:e(O)},{default:t(()=>[b(" 确认 ")]),_:1},8,["loading","onClick"])]),_:1}),o(n,{class:"mt-[20px]"},{default:t(()=>[c("div",Be,[e(a).isLogin?f("",!0):(i(),_($,{key:0,type:"primary",link:"",onClick:d[5]||(d[5]=R=>e(g)(e(E).LOGIN))},{default:t(()=>[b(" 返回登录 ")]),_:1}))])]),_:1})]),_:1},8,["model"])])])}}}),qe={class:"flex-1 flex flex-col"},Ae={class:"flex flex-1 flex-col py-[20px] px-[30px] min-h-0"},Me={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},je={class:"flex justify-center"},ze={key:0,class:"bg-[#f4f4f4] px-[20px] py-[15px] flex"},Xe={class:"flex-1 text-tx-secondary"},Ye=["href"],Ze=["href"],Je=G({__name:"index",setup(U){const a=[{name:"手机号注册",type:"1"},{name:"邮箱注册",type:"2"}],g=h(()=>{var n;return((n=v.getLoginConfig)==null?void 0:n.register_way)||[]}),k=h(()=>a.filter(n=>g.value.includes(n.type))),{setLoginPopupType:r}=P(),y=T(),p={mobile:[{required:!0,message:"请输入手机号"}],email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],code:[{required:!0,message:"请输入验证码"}],password:[{required:!0,message:"请输入6-20位数字+字母或符号组合"},{min:6,max:20,message:"密码长度应为6-20"}],password_confirm:[{validator(n,m,$){m===""?$(new Error("请再次输入密码")):m!==s.password?$(new Error("两次输入的密码不一致")):$()}}]},s=X({scene:"",mobile:"",code:"",email:"",password:"",password_confirm:""}),u=T(),x=async()=>{var n;s.scene==="1"?await V():O(),(n=u.value)==null||n.start()},V=async()=>{var n;await((n=y.value)==null?void 0:n.validateField(["mobile"])),await Z({scene:B.REGISTER,mobile:s.mobile})},O=async()=>{var n;await((n=y.value)==null?void 0:n.validateField(["email"])),await se({scene:B.REGISTER,email:s.email})},v=J(),l=h(()=>{var n;return((n=v.getLoginConfig)==null?void 0:n.register_sms_verify)===1}),d=h(()=>v.getLoginConfig.is_agreement===1),I=async()=>{var n;await((n=y.value)==null?void 0:n.validate()),await xe(s),r(E.LOGIN)},{lockFn:F,isLock:L}=z(I);return Y(()=>s.scene,()=>{var n;s.password="",s.code="",s.password="",(n=y.value)==null||n.clearValidate()}),Y(g,n=>{if(n.includes("1")){s.scene="1";return}const[m]=n;s.scene=m||""},{immediate:!0}),(n,m)=>{const $=ae,C=ne,R=K,me=Q,D=A,W=M,ce=H,ee=N,ue=j,oe=re;return i(),S("div",qe,[c("div",Ae,[o(C,{modelValue:e(s).scene,"onUpdate:modelValue":m[0]||(m[0]=w=>e(s).scene=w)},{default:t(()=>[(i(!0),S(ie,null,de(e(k),(w,_e)=>(i(),_($,{key:_e,label:w.name,name:w.type},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),e(g).length?(i(),_(ue,{key:0,ref_key:"formRef",ref:y,class:"mt-[10px]",size:"large",model:e(s),rules:p},{default:t(()=>[e(s).scene==="1"?(i(),_(W,{key:0,prop:"mobile"},{default:t(()=>[o(D,{modelValue:e(s).mobile,"onUpdate:modelValue":m[1]||(m[1]=w=>e(s).mobile=w),placeholder:"请输入手机号"},{prepend:t(()=>[o(me,{"model-value":"+86",style:{width:"80px"}},{default:t(()=>[o(R,{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1})):f("",!0),e(s).scene==="2"?(i(),_(W,{key:1,prop:"email"},{default:t(()=>[o(D,{modelValue:e(s).email,"onUpdate:modelValue":m[2]||(m[2]=w=>e(s).email=w),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1})):f("",!0),e(l)?(i(),_(W,{key:2,prop:"code"},{default:t(()=>[o(D,{modelValue:e(s).code,"onUpdate:modelValue":m[3]||(m[3]=w=>e(s).code=w),placeholder:"请输入验证码"},{suffix:t(()=>[c("div",Me,[o(ce,{ref_key:"verificationCodeRef",ref:u,onClickGet:x},null,512)])]),_:1},8,["modelValue"])]),_:1})):f("",!0),o(W,{prop:"password"},{default:t(()=>[o(D,{modelValue:e(s).password,"onUpdate:modelValue":m[4]||(m[4]=w=>e(s).password=w),type:"password","show-password":"",placeholder:"请输入6-20位数字+字母或符号组合"},null,8,["modelValue"])]),_:1}),o(W,{prop:"password_confirm"},{default:t(()=>[o(D,{modelValue:e(s).password_confirm,"onUpdate:modelValue":m[5]||(m[5]=w=>e(s).password_confirm=w),type:"password","show-password":"",placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1}),o(W,{class:"mt-[30px]"},{default:t(()=>[o(ee,{class:"w-full",type:"primary",loading:e(L),onClick:e(F)},{default:t(()=>[b(" 注册 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])):f("",!0),c("div",je,[b(" 已有账号？"),o(ee,{type:"primary",link:"",onClick:m[6]||(m[6]=w=>e(r)(e(E).LOGIN))},{default:t(()=>[b(" 立即登录 ")]),_:1})])]),e(d)?(i(),S("div",ze,[c("div",Xe,[b(" 您注册即同意 "),o(oe,{to:`/policy/${e(q).SERVICE}`,custom:""},{default:t(({href:w})=>[c("a",{class:"text-tx-primary",href:w,target:"_blank"}," 用户协议 ",8,Ye)]),_:1},8,["to"]),b(" 和 "),o(oe,{class:"text-tx-primary",to:`/policy/${e(q).PRIVACY}`,custom:""},{default:t(({href:w})=>[c("a",{class:"text-tx-primary",href:w,target:"_blank"}," 隐私政策 ",8,Ze)]),_:1},8,["to"])])])):f("",!0)])}}});const Ke=pe(Je,[["__scopeId","data-v-811133f8"]]),Qe={class:"flex"},He={key:0},eo={class:"flex-1 text-tx-primary flex flex-col w-[400px]"},yo=G({__name:"index",setup(U){const a=P(),g=J(),k=h({get(){return a.showLogin},set(r){a.showLogin=r}});return Y(()=>a.showLogin,r=>{r||(a.temToken=null)}),(r,y)=>{const p=fe,s=ge;return i(),_(s,{modelValue:e(k),"onUpdate:modelValue":y[0]||(y[0]=u=>we(k)?k.value=u:null),width:"auto",class:"login-popup","append-to-body":"","close-on-click-modal":!1},{default:t(()=>[c("div",Qe,[e(g).getWebsiteConfig.pc_login_image&&e(a).loginPopupType==e(E).LOGIN&&!e(g).isMobile?(i(),S("div",He,[o(p,{class:"w-[320px] h-full",fit:"cover",src:e(g).getWebsiteConfig.pc_login_image},null,8,["src"])])):f("",!0),c("div",eo,[e(a).loginPopupType==e(E).LOGIN?(i(),_(Te,{key:0})):f("",!0),e(a).loginPopupType==e(E).FORGOT_PWD_MAILBOX||e(a).loginPopupType==e(E).FORGOT_PWD_MOBILE?(i(),_(Ne,{key:1})):f("",!0),e(a).loginPopupType==e(E).REGISTER?(i(),_(Ke,{key:2})):f("",!0)])])]),_:1},8,["modelValue"])}}});export{yo as _};
