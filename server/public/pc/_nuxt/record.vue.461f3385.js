import{f as N,E as C,v as j}from"./entry.df16adda.js";import{E as A,a as L}from"./el-checkbox.033475fe.js";import{_ as q}from"./index.vue.b9ae65fe.js";import{u as z,_ as F}from"./index.vue.1307e7a7.js";import"./el-tag.7a8069da.js";/* empty css                 */import"./el-tooltip.4ed993c7.js";import"./el-popper.89e34564.js";import"./el-scrollbar.f4d658ff.js";import{_ as J}from"./reply-popup.vue.53a4013f.js";import{_ as K}from"./correct-popup.vue.2c6feb70.js";import{l as O,m as U,n as W}from"./robot.5da26683.js";import{k as G,A as H,r as M,s as w,a as Q,b as X,I as y,J as Y,K as r,a2 as e,a0 as a,ae as p,u as s,W as Z,$ as ee,a4 as R,e as te}from"./swiper-vue.397ea2eb.js";const oe={class:"p-main h-full flex flex-col"},ae={class:"flex-1 min-h-0"},ne={class:"flex items-center"},le=["onClick"],se={class:"flex justify-end mt-4"},ge=G({__name:"record",props:{appId:{}},setup(x){const u=x,{appId:h}=H(u),$=M({robot_id:h}),k=w(),d=w(),v=n=>{k.value.open(n)},{pager:c,getLists:m,resetPage:E}=z({fetchFun:W,params:$}),_=Q([]),B=n=>{_.value=n.map(o=>o.id)},b=async n=>{await N.confirm("确定要删除？"),await O({ids:n,robot_id:h.value}),m()},D=async n=>{var o;await U(n),(o=d.value)==null||o.close()};return m(),X(()=>u.appId,()=>{E()}),(n,o)=>{const V=C,l=A,I=q,f=C,P=L,S=F,T=j;return y(),Y("div",oe,[r("div",null,[e(V,{disabled:s(_).length<=0,class:"!mb-4",onClick:o[0]||(o[0]=t=>b(s(_)))},{default:a(()=>[p(" 批量删除 ")]),_:1},8,["disabled"])]),r("div",ae,[Z((y(),ee(P,{height:"100%",size:"large",data:s(c).lists,onSelectionChange:B},{default:a(()=>[e(l,{type:"selection",width:"55"}),e(l,{label:"ID",prop:"id","min-width":"80"}),e(l,{label:"用户信息","min-width":"180"},{default:a(({row:t})=>{var i;return[r("div",ne,[r("span",null,R((i=t.user)==null?void 0:i.nickname),1)])]}),_:1}),e(l,{label:"提问",prop:"ask","min-width":"300"},{default:a(({row:t})=>[e(I,{content:t.ask,line:2,teleported:!0,effect:"light"},null,8,["content"])]),_:1}),e(l,{label:"回答",prop:"answer","min-width":"300"},{default:a(({row:t})=>[r("span",{class:"line-clamp-2 cursor-pointer",onClick:i=>v(t.reply)},R(t.reply),9,le)]),_:1}),e(l,{label:"提问时间",prop:"create_time","min-width":"180","show-tooltip-when-overflow":""}),e(l,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[e(f,{type:"primary",link:"",onClick:i=>{var g;return(g=s(d))==null?void 0:g.open(t)}},{default:a(()=>[p(" 修正 ")]),_:2},1032,["onClick"]),e(f,{type:"primary",link:"",onClick:i=>v(t.reply)},{default:a(()=>[p(" 查看回复 ")]),_:2},1032,["onClick"]),e(f,{type:"danger",link:"",onClick:i=>b([t.id])},{default:a(()=>[p(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,s(c).loading]])]),r("div",se,[e(S,{modelValue:s(c),"onUpdate:modelValue":o[1]||(o[1]=t=>te(c)?c.value=t:null),onChange:s(m)},null,8,["modelValue","onChange"])]),e(J,{ref_key:"popRef",ref:k},null,512),e(K,{ref_key:"correctRef",ref:d,onConfirm:D},null,512)])}}});export{ge as _};
