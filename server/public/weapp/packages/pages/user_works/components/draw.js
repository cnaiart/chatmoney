"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../api/draw.js");require("../../../../utils/client.js");const s=require("../../../../hooks/useCopy.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-image")+e.resolveComponent("u-checkbox")+e.resolveComponent("u-button")+e.resolveComponent("z-paging")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-checkbox/u-checkbox.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const i=e.defineComponent({__name:"draw",props:{isBatch:{type:Boolean}},setup(i){const a=i,t=e.useRouter(),o=e.shallowRef(),{copy:n}=s.useCopy(),r=e.ref([]),l=e.ref([]),c=e.computed({get:()=>l.value.length===r.value.length,set(){l.value.length===r.value.length?l.value=[]:l.value=r.value.map((e=>e.id))}});e.watch((()=>a.isBatch),(()=>{l.value=[]}));const p=e.reactive({show:!1,item:{}}),d=async()=>{await n(p.item.video_url),p.show=!1},h=async(e,s)=>{try{const{lists:i}=await u.drawingRecord({page_no:e,page_size:s,status:3});o.value.complete(i)}catch(i){o.value.complete(!1)}},m=()=>{var e;null==(e=o.value)||e.refresh()};return(s,n)=>e.e({a:e.f(r.value,((u,s,o)=>e.e({a:"98794274-1-"+o+",98794274-0",b:e.p({src:u.image,width:"100%",height:"340"})},i.isBatch?{c:"98794274-2-"+o+",98794274-0",d:e.p({"model-value":l.value.includes(u.id),shape:"circle"})}:{},{e:i.isBatch&&l.value.includes(u.id)?1:"",f:e.o((e=>(e=>{a.isBatch||t.navigateTo({path:"/packages/pages/draw_detail/draw_detail",query:{id:e.id}})})(u)),u.id),g:u.id,h:e.o((e=>(e=>{if(a.isBatch){const u=l.value.findIndex((u=>u===e));u>-1?l.value.splice(u,1):l.value.push(e)}})(u.id)),u.id)}))),b:i.isBatch,c:i.isBatch},i.isBatch?{d:e.o((u=>e.isRef(c)?c.value=u:null)),e:e.p({shape:"circle",modelValue:e.unref(c)}),f:e.t(l.value.length),g:e.t(r.value.length),h:e.o((s=>(async s=>{const{cancel:i}=await e.index.showModal({title:"温馨提示",content:"确定删除？"});i||(await u.drawingDelete({ids:s}),l.value=[],m())})(l.value))),i:e.p({size:"medium",type:"error",disabled:!l.value.length})}:{},{j:e.sr(o,"98794274-0",{k:"pagingRef"}),k:e.o(h),l:e.o((e=>r.value=e)),m:e.p({"auto-clean-list-when-reload":!1,"safe-area-inset-bottom":!0,fixed:!1,height:"100%",modelValue:r.value}),n:e.o(d),o:e.p({type:"primary",shape:"circle"}),p:e.o((e=>p.show=e)),q:e.p({mode:"center","border-radius":"15",closeable:!0,modelValue:p.show})})}});wx.createComponent(i);
