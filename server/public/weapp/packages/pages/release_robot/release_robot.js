"use strict";const e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+n+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+i+t+o+a+s)();const n=()=>"./components/release-web.js",t=()=>"./components/release-api.js",o=()=>"./components/js-embedding.js",a=()=>"./components/oa-config.js",i=()=>"./components/call-description.js",s=()=>"./components/poster.js",p=e.defineComponent({__name:"release_robot",setup(n){const t=e.useRoute(),o=e.shallowRef(),a=e.computed((()=>t.query.key)),i=e.computed((()=>t.query.id)),s=e.reactive({show:!1,apikey:""}),p=e.reactive({show:!1,apikey:""}),c=e.reactive({show:!1,url:"",apikey:"",shareId:""});return(n,t)=>e.e({a:n.$theme.navColor,b:n.$theme.navBgColor,c:n.$theme.pageStyle,d:"web"===e.unref(a)},"web"===e.unref(a)?{e:e.w((({item:n},t,o)=>({a:"5685a3db-1-"+o+",5685a3db-0",b:e.o((e=>{return t=n,c.show=!0,c.url=t.share_bg,c.apikey=t.apikey,void(c.shareId=t.id);var t})),c:o,d:t})),{name:"actions",path:"e",vueId:"5685a3db-0"}),f:e.p({name:"photo",size:32}),g:e.sr(o,"5685a3db-0",{k:"releaseWebRef"}),h:e.p({title:"发布为网页/朋友圈海报",type:1,"robot-id":e.unref(i),"show-more-action":!0})}:{},{i:"js"===e.unref(a)},"js"===e.unref(a)?{j:e.w((({item:n},t,o)=>({a:"5685a3db-3-"+o+",5685a3db-2",b:e.o((e=>(e=>{s.show=!0,s.apikey=e.apikey})(n))),c:o,d:t})),{name:"actions",path:"j",vueId:"5685a3db-2"}),k:e.p({name:"eye",size:32}),l:e.p({title:"发布为JS",type:2,"robot-id":e.unref(i)})}:{},{m:"oa"===e.unref(a)},"oa"===e.unref(a)?{n:e.w((({item:n},t,o)=>({a:"5685a3db-5-"+o+",5685a3db-4",b:e.o((e=>(e=>{p.show=!0,p.apikey=e.apikey})(n))),c:o,d:t})),{name:"actions",path:"n",vueId:"5685a3db-4"}),o:e.p({name:"chat",size:32}),p:e.p({title:"发布为公众号",type:3,"robot-id":e.unref(i)})}:{},{q:"api"===e.unref(a)},"api"===e.unref(a)?{r:e.p({size:"medium"}),s:e.p({title:"API调用说明",content:"\n【接口地址】\n请求方式: POST\n接口地址: /api/v1/chat/completions\n调用示例: http(s)://yourdomain.com/api/v1/chat/completions\n\n【Body参数】\n``` json\n{\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"你要提问的问题\"\n        }\n    ]\n}\n```\n\n【Header参数】\nAuthorization: 此参数是发布渠道的 apikey (必须的)\n\n【PHP代码示例】\n``` php\npublic function chat()\n{\n    // 设置SSE响应\n    header('Access-Control-Allow-Origin: *');\n    header('Connection: keep-alive');\n    header('Content-Type: text/event-stream');\n    header('Cache-Control: no-cache');\n    header('X-Accel-Buffering: no');\n    \n    // 处理响应回调\n    $response = true;\n    $callback = function ($ch, $data) use (&$response, &$total) {\n        if (str_starts_with($data, 'data:')) {\n            echo $data;\n        }\n\n        if(!connection_aborted()){\n            return strlen($data);\n        } else {\n            return 1;\n        }\n    };\n\n    // 请求的参数\n    $data = [\n        'messages'  => [\n            ['role'=>'user', 'content'=>'你好吗?']\n        ]\n    ];\n\n    // 请求头参数\n    $headers  = [\n        'Accept: application/json',\n        'Content-Type: application/json',\n        'Authorization: web-8b582192d72b20931b9142155d1476cc7Fnmp' // 此参数是 apikey (必须的)\n    ];\n\n    // 发起接口请求\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, 'http(s)://【你自己的域名】/api/v1/chat/completions');\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);\n    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n    curl_setopt($ch, CURLOPT_POST, 1);\n    curl_setopt($ch, CURLOPT_TIMEOUT, 100);\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));\n    curl_setopt($ch, CURLOPT_WRITEFUNCTION, $callback);\n    curl_exec($ch);\n    curl_close($ch);\n\n    if(true !== $response){\n        throw new Exception($response);\n    }\n\n    exit();\n}\n```\n"}),t:e.p({title:"发布为API",type:4,"robot-id":e.unref(i)})}:{},{v:"qwx"===e.unref(a)},"qwx"===e.unref(a)?{w:e.p({size:"medium"}),x:e.p({title:"微信调用说明",content:'\n【接口地址】\n请求方式: POST\n接口地址: /api/v1/chat/completions\n调用示例: http(s)://yourdomain.com/api/v1/chat/completions\n\n【参数说明】\nopen_ai_api_key:  apiKey密钥\nopen_ai_api_base: 请求的域名\n\n```\n{\n  "channel_type": "wx", // 渠道类型: wx=个人微信的意思\n  "open_ai_api_key": "wx-f228079c92d0ab83548067bba13967d1xR1cu",          // 修改此处密钥\n  "open_ai_api_base": "http(s)://yourdomain.com/api/v1", // 修改此处域名\n    "model": "gpt-3.5-turbo",\n    "text_to_image": "dall-e-2",\n    "voice_to_text": "openai",\n    "text_to_voice": "openai",\n    "proxy": "",\n    "hot_reload": false,\n    "single_chat_prefix": [\n        "bot",\n        "@bot"\n    ],\n    "single_chat_reply_prefix": "[bot] ",\n    "group_chat_prefix": [\n        "@bot"\n    ]\n    ......\n}\n```\n\n【更详细的接入文档】\n文档地址: https://www.mddai.cn/docs/cw/deployment/wechat.html\n\n【chatgpt-on-wechat 的使用请自行看官方文档】\n文档地址: https://github.com/zhayujie/chatgpt-on-wechat\n'}),y:e.p({title:"发布为企业微信",type:5,"robot-id":e.unref(i)})}:{},{z:e.o((e=>s.show=e)),A:e.p({apikey:s.apikey,show:s.show}),B:e.o((e=>p.show=e)),C:e.p({apikey:p.apikey,show:p.show}),D:e.o((n=>e.unref(o).refresh())),E:e.o((e=>c.show=e)),F:e.p({...c,show:c.show})})}});wx.createPage(p);
