"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../api/robot.js"),s=require("../../../../hooks/useCopy.js"),o=require("../../../../config/index.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-button")+e.resolveComponent("u-icon")+e.resolveComponent("z-paging")+e.resolveComponent("u-action-sheet"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+i+n+(()=>"../../../../uni_modules/vk-uview-ui/components/u-action-sheet/u-action-sheet.js"))();const i=()=>"./create-share.js",n=()=>"./usage-settings.js",a=e.defineComponent({options:{multipleSlots:!0},__name:"release-web",props:{title:null,type:null,robotId:null,showMoreAction:{type:Boolean,default:!1}},setup(i,{expose:n}){const a=i,r=e.ref(!1),u=e.reactive({lists:[{text:"用量设置",type:"setting"},{text:"删除",color:"#FA5151",type:"delete"}],show:!1,item:{}}),l=e=>{switch(u.lists[e].type){case"setting":v(u.item);break;case"delete":d(u.item.id)}},p=e.ref([]),c=e.shallowRef(),m=async(e,s)=>{var o,i;try{const{lists:i}=await t.getReleaseList({page_no:e,page_size:s,type:a.type,robot_id:a.robotId});null==(o=c.value)||o.complete(i)}catch(n){null==(i=c.value)||i.complete(!1)}},d=async s=>{var o;const{cancel:i}=await e.index.showModal({title:"温馨提示",content:"确定要删除？"});i||(await t.delRelease({id:s,type:a.type}),null==(o=c.value)||o.refresh())},h=e.reactive({show:!1,data:{}}),v=e=>{h.show=!0,h.data=e},y=async e=>{var s;await t.postRelease({...e,type:a.type,robot_id:a.robotId}),null==(s=c.value)||s.refresh()},{copy:w}=s.useCopy(),j=async e=>{var s;await t.putRelease({...e,type:a.type,robot_id:a.robotId}),null==(s=c.value)||s.reload()};return n({refresh:()=>{var e;null==(e=c.value)||e.refresh()}}),(t,s)=>({a:e.p({"back-text":i.title}),b:e.o((e=>r.value=!0)),c:e.p({type:"primary",size:"medium"}),d:e.f(p.value,((t,s,n)=>e.e({a:e.t(t.apikey),b:e.t(t.name),c:e.t(t.secret||"-")},1===i.type?{d:e.t(1==t.chat_type?"文本":"形象")}:{},{e:e.t(t.use_time),f:"actions-"+n,g:e.r("actions",{item:t},n)},1==i.type?{h:"0363983c-3-"+n+",0363983c-2",i:e.p({name:"file-text",size:32}),j:e.o((e=>(e=>{const t=`${o.config.baseUrl}chat/${e.apikey} #${e.name} ${e.secret?`密码: ${e.secret}`:""}`;w(t)})(t)),t.id)}:{},i.showMoreAction?{k:"0363983c-4-"+n+",0363983c-2",l:e.p({name:"more-dot-fill",size:32}),m:e.o((e=>(e=>{u.item=e,u.show=!0})(t)),t.id)}:{n:"0363983c-5-"+n+",0363983c-2",o:e.p({name:"setting",size:32}),p:e.o((e=>v(t)),t.id),q:"0363983c-6-"+n+",0363983c-2",r:e.p({name:"trash",size:32}),s:e.o((e=>d(t.id)),t.id)},{t:t.id}))),e:1===i.type,f:1==i.type,g:i.showMoreAction,h:e.sr(c,"0363983c-2",{k:"pagingRef"}),i:e.o(m),j:e.o((e=>p.value=e)),k:e.p({"auto-clean-list-when-reload":!1,fixed:!1,modelValue:p.value}),l:e.o(j),m:e.o((e=>r.value=e)),n:e.p({type:i.type,show:r.value}),o:e.o(y),p:e.o((e=>h.show=e)),q:e.p({data:h.data,show:h.show}),r:e.o(l),s:e.o((e=>u.show=e)),t:e.p({list:u.lists,modelValue:u.show})})}});wx.createComponent(a);
