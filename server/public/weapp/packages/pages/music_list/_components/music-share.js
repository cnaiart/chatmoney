"use strict";const e=require("../../../../common/vendor.js"),s=require("../../../../stores/app.js"),u=require("../../../../api/task_reward.js"),r=require("../../../../hooks/useLockFn.js");if(require("../../../../api/app.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),require("../../../../api/shop.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button")+e.resolveComponent("u-popup")+e.resolveComponent("u-select"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-select/u-select.js"))();const o=e.defineComponent({__name:"music-share",emits:["success","close"],setup(o,{expose:i,emit:t}){s.useAppStore();const n=e.ref(!1),a=e.ref(!1),l=e.ref([]),c=e.reactive({style_id:"",records_id:"",style_name:""}),{lockFn:p,isLock:m}=r.useLockFn((async()=>{await u.shareMusic(c),n.value=!1,t("success",c.records_id)})),d=e=>{c.style_id=e[0].value,c.style_name=e[0].label},j=()=>{t("close")};return i({open:e=>{(async()=>{try{const e=await u.getMusicStyle();e.shift(),l.value=e}catch(e){console.log("获取音乐分类失败=>",e)}})(),n.value=!0,c.records_id=e}}),(s,u)=>({a:e.t(c.style_name?c.style_name:"全部"),b:e.p({name:"arrow-right"}),c:e.o((e=>a.value=!0)),d:e.o(e.unref(p)),e:e.p({type:"primary",customStyle:{width:"220rpx"},loading:e.unref(m)}),f:e.o(j),g:e.o((e=>n.value=e)),h:e.p({mode:"center","border-radius":"14",duration:"16",modelValue:n.value}),i:e.o(d),j:e.o((e=>a.value=e)),k:e.p({list:l.value,valueName:"id",labelName:"name",confirmColor:s.$theme.primaryColor,modelValue:a.value})})}});wx.createComponent(o);
