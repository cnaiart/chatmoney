"use strict";const e=require("../../../common/vendor.js"),t=require("../../../api/app.js"),i=require("../../../common/assets.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../stores/user.js"),require("../../../api/user.js"),require("../../../enums/constantEnums.js"),require("../../../utils/auth.js"),require("../../../utils/cache.js"),require("../../../utils/unique-id.js"),require("../../../router/index.js"),require("../../../config/index.js"),require("../../../utils/client.js"),require("../../../enums/appEnums.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-image")+e.resolveComponent("u-badge")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-badge/u-badge.js")+(()=>"../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const a=e.defineComponent({__name:"notification",setup(a){const o=e.useRouter(),r=e.shallowRef(),s=e.ref([]),n=async()=>{var e;await t.noticeAllRead(),null==(e=r.value)||e.reload()},u=async(e,i)=>{try{const{lists:a}=await t.noticeLists({page_no:e,page_size:i});r.value.complete(a)}catch(a){r.value.complete(!1),console.log("请求消息通知列表失败",a)}};return(a,c)=>({a:a.$theme.navColor,b:a.$theme.navBgColor,c:a.$theme.pageStyle,d:e.o(n),e:e.p({"is-fixed":!1,"back-text":`消息通知(${s.value.length})`}),f:e.f(s.value,((i,a,s)=>e.e({a:"95dc0ac8-2-"+s+",95dc0ac8-1",b:e.p({width:74,height:74,src:i.avatar,"border-radius":"50%"}),c:!i.read},i.read?{}:{d:"95dc0ac8-3-"+s+",95dc0ac8-1",e:e.p({"is-dot":!0,type:"error",offset:[-8,-8]})},{f:e.t(i.nickname),g:e.t(i.create_time),h:e.t(i.robot),i:e.t(i.content),j:i.id,k:e.o((e=>(async e=>{var i;o.navigateTo({path:"/packages/pages/robot_info/robot_info",query:{id:e.robot_id,type:"dialogue",dialogue:"record"}}),e.read||(await t.noticeRead({id:e.id}),null==(i=r.value)||i.reload())})(i)),i.id)}))),g:e.sr(r,"95dc0ac8-1",{k:"paging"}),h:e.o(u),i:e.o((e=>s.value=e)),j:e.p({fixed:!1,height:"100%","empty-view-text":"暂无消息通知～","empty-view-img":e.unref(i.EmptyNoticeImage),"empty-view-style":{"margin-top":"100px"},"empty-view-center":!1,"auto-clean-list-when-reload":!1,"show-loading-more-no-more-view":!1,"auto-scroll-to-top-when-reload":!1,"empty-view-img-style":{width:"360rpx",height:"360rpx"},modelValue:s.value})})}}),o=e._export_sfc(a,[["__scopeId","data-v-95dc0ac8"]]);wx.createPage(o);
