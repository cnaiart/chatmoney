"use strict";const e=require("../../../common/vendor.js"),u=require("../../../stores/user.js"),t=require("../../../api/video.js"),s=require("../../../hooks/useCopy.js"),r=require("../../../api/square.js"),o=require("../../../enums/appEnums.js");if(require("../../../api/user.js"),require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../router/index.js"),require("../../../utils/cache.js"),require("../../../enums/constantEnums.js"),require("../../../config/index.js"),require("../../../utils/client.js"),require("../../../utils/auth.js"),require("../../../utils/unique-id.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-icon")+e.resolveComponent("u-button")+e.resolveComponent("u-popup")+e.resolveComponent("page-status"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js")+(()=>"../../../components/page-status/page-status.js"))();const a=e.defineComponent({__name:"video_detail",setup(a){const{copy:i}=s.useCopy(),n=e.useRoute(),l=e.useRouter(),c=u.useUserStore(),p=e.ref(o.PageStatusEnum.LOADING),v=e.ref({status_desc:"生成成功",style_desc:"电影镜头",type_desc:"文生视频",id:96,prompt:"",type:1,tags:"电影镜头",image:"",channel:"openai_hk",video_url:"",style_id:"4",status:2,create_time:""}),d=e.reactive({id:""}),m=e.ref(!1),q=async()=>{if(c.isLogin)try{await r.videoSquareCollect({records_id:d.id,status:v.value.is_collect?0:1}),v.value.is_collect=v.value.is_collect?0:1}catch(u){console.error(u),e.index.$u.toast(JSON.stringify(u))}else l.navigateTo("/pages/login/login")},_=()=>{m.value=!0},y=async()=>{await i(v.value.video_url),m.value=!1};return e.onLoad((async()=>{const e=n.query.id;await(async e=>{try{const u=await t.getVideoDetail({id:e});v.value=u[0],p.value=o.PageStatusEnum.NORMAL}catch(u){p.value=o.PageStatusEnum.ERROR}})(e),d.id=n.query.collectId})),(u,t)=>{var s,r;return{a:u.$theme.navColor,b:u.$theme.navBgColor,c:u.$theme.pageStyle,d:e.p({"back-text":"视频详情"}),e:v.value.video_url,f:e.o((u=>e.unref(i)(v.value.prompt))),g:e.t(v.value.prompt),h:e.t(null==(r=null==(s=e.unref(c))?void 0:s.userInfo)?void 0:r.nickname),i:e.t(v.value.create_time),j:e.t(v.value.type_desc),k:e.t(v.value.style_desc),l:e.n(v.value.is_collect?"praise-entry":"praise-leave"),m:e.o(q),n:e.p({name:"download",size:"42"}),o:e.o((e=>_(v.value))),p:e.o(_),q:e.p({type:"primary",size:"default",customStyle:{padding:"0 30rpx",height:"82rpx",width:"400rpx",margin:"0"}}),r:e.o(y),s:e.p({type:"primary",shape:"circle"}),t:e.o((e=>m.value=e)),v:e.p({mode:"center","border-radius":"15",closeable:!0,modelValue:m.value}),w:e.p({status:p.value})}}}}),i=e._export_sfc(a,[["__scopeId","data-v-5c1a1b35"]]);wx.createPage(i);
