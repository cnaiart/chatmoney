"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../stores/app.js"),s=require("../../../../api/task_reward.js"),u=require("../../../../hooks/useLockFn.js");if(require("../../../../api/app.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/auth.js"),require("../../../../utils/cache.js"),require("../../../../utils/unique-id.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../utils/client.js"),require("../../../../enums/appEnums.js"),require("../../../../api/shop.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button")+e.resolveComponent("u-popup")+e.resolveComponent("u-select"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-select/u-select.js"))();const o=e.defineComponent({__name:"draw-share",emits:["success","close"],setup(o,{expose:i,emit:t}){r.useAppStore();const n=e.ref(!1),a=e.ref(!1),c=e.ref([]),p=e.reactive({image:"",prompts:"",category_id:"",category_name:"",records_id:""}),{lockFn:l,isLock:m}=u.useLockFn((async()=>{await s.shareDraw(p),n.value=!1,t("success",p.records_id)})),d=e=>{p.category_id=e[0].value,p.category_name=e[0].label},j=()=>{t("close")};return i({open:e=>{(async()=>{try{const e=await s.getDrawCategoryList();e.shift(),c.value=e}catch(e){console.log("获取绘画分类失败=>",e)}})(),n.value=!0,p.image=e.image,p.records_id=e.records_id,p.prompts=e.prompt_en||e.prompt}}),(r,s)=>({a:e.t(p.category_name?p.category_name:"全部"),b:e.p({name:"arrow-right"}),c:e.o((e=>a.value=!0)),d:e.o(e.unref(l)),e:e.p({type:"primary",customStyle:{width:"220rpx"},loading:e.unref(m)}),f:e.o(j),g:e.o((e=>n.value=e)),h:e.p({mode:"center","border-radius":"14",duration:"16",modelValue:n.value}),i:e.o(d),j:e.o((e=>a.value=e)),k:e.p({list:c.value,valueName:"id",labelName:"name",confirmColor:r.$theme.primaryColor,modelValue:a.value})})}});wx.createComponent(o);
