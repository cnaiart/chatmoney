import{P as A,_ as W,a as $,p as H,b as K}from"./index.c5d8dec3.js";import{E as X}from"./index.17567b0d.js";import{h as q,a as J,m as M,df as O,dg as Z,dh as k,d as G,j as F,di as Q}from"./entry.dfbfd4fd.js";/* empty css                     */import{u as Y}from"./useLockFn.619a13da.js";import{g as ee,r as te}from"./recharge.4d39a1d7.js";import{k as se,a as g,l as I,E as oe,H as o,I as a,X as d,V as S,J as e,u as s,Z as n,S as C,aj as U,e as ae,a7 as w,R as u,T as D,ag as ne,ah as ce}from"./swiper-vue.2eb6bd20.js";import{_ as re}from"./_plugin-vue_export-helper.c27b6911.js";import"./el-image-viewer.d5621b18.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./index.vue.7f39d825.js";import"./usePolling.de4d6c35.js";import"./vue-qr.c50d30e8.js";const f=x=>(ne("data-v-494a1cbe"),x=x(),ce(),x),ie={class:"relative flex flex-col min-h-0 h-full"},le={class:"grid grid-cols-3 md:grid-cols-3 gap-4 h-[150px] bg-[#EEF2FF] py-[20px] rounded-[12px] flex-none dark:bg-body"},de={class:"flex flex-col pl-[30px] items-start justify-center"},_e={class:"flex flex-col items-center"},pe=["src"],ue={class:"mt-[10px] text-sm"},xe={class:"flex flex-col items-center justify-center"},me={class:"font-medium text-[25px] text-[#0256FF]"},he={class:"mt-[4px]"},ge={class:"flex flex-col items-end justify-center pr-[30px]"},fe={class:"flex flex-col items-center"},ve={class:"font-medium text-[25px] text-[#0256FF]"},ye=f(()=>e("div",{class:"mt-[4px]"},"智能体数量",-1)),be={key:0,class:"bg-[#EEF2FF] mt-[16px] rounded-[12px] flex-1 min-h-0 dark:bg-body"},ke={class:"p-[26px] pb-[120px] bg-[#EEF2FF] dark:bg-[#1D2025]"},Fe={class:"flex flex-col"},we=f(()=>e("div",{class:"text-2xl font-medium"},"选择套餐",-1)),Ee={class:"recharge-lists flex flex-wrap"},Ie=["onClick"],Se={key:0,class:"absolute top-[-8px] left-[-1px] bg-[#FF7272] px-[12px] py-[2px] text-white rounded-tl-[10px] rounded-br-[10px] text-xs"},Ce={class:"text-xl font-medium mb-[10px] line-clamp-1"},Ue={class:"border-t border-solid border-br-light pt-[10px]"},De={class:"flex"},Re={class:"text-tx-secondary mr-auto"},Ve={class:"relative"},je={key:0},ze={key:1},Ne={key:0,class:"py-[8px] text-primary text-sm"},Te={key:0},Be={key:1},Le={class:"mt-[10px]"},Pe=f(()=>e("div",{class:"text-2xl font-medium mb-[5px]"}," 支付方式 ",-1)),Ae={key:1,class:"w-full h-full bg-[#EEF2FF] mt-[16px] p-[26px] rounded-[12px] flex items-center justify-center"},We=f(()=>e("div",{class:"text-xl"},"功能未开启!",-1)),$e=[We],He={key:0,class:"absolute left-0 bottom-0 w-full px-[26px]"},Ke={class:"mt-[40px] flex justify-between rounded-[12px] bg-white py-[15px] px-[20px] dark:bg-page"},Xe=se({__name:"recharge",setup(x){const R=q(),l=J(),v=M(),m=g([]),V=I(()=>[{key:"chat_balance",giveKey:"give_chat_balance",label:`${l.getTokenUnit}数量`,unit:l.getTokenUnit},{key:"robot_number",giveKey:"give_robot_number",label:"智能体个数",unit:"个"}]),y=g({balance:"",robot_num:"",video_num:""}),h=g(0),j=Q(),r=g(A.WECHAT),b=I(()=>m.value[h.value]||{});(async()=>{const c=await ee();m.value=c.lists,y.value=c.extend;const i=m.value.findIndex(_=>_.is_recommend);h.value=i===-1?0:i})();const{lockFn:z,isLock:N}=Y(async()=>{b.value.id||F.msgError("请选择充值套餐"),r.value||F.msgError("请选择支付方式");const c=await te({package_id:b.value.id,pay_way:r.value}),i=await H({...c,pay_way:r.value,redirect:`${j.app.baseURL}user/record?type=recharge`,code:k.getAuthData().code});await K.run({payWay:r.value,orderId:c.order_id,from:c.from,config:i.config}),await v.getUser(),await F.alertSuccess("支付成功"),R.push({path:"/user/record",query:{id:c.order_id,type:"recharge"}})});return oe(async()=>{O()==Z.WEIXIN_OA&&k.getAuthData().code==""&&await k.getUrl()}),(c,i)=>{const _=W,T=$,B=X,L=G;return o(),a("div",ie,[d(B,{class:"scrollbar rounded-[12px]"},{default:S(()=>[e("div",le,[e("div",de,[e("div",_e,[e("img",{src:s(v).userInfo.avatar,class:"w-[64px] h-[64px] rounded-full"},null,8,pe),e("div",ue," 用户ID: "+n(s(v).userInfo.sn),1)])]),e("div",xe,[e("div",me,n(s(y).balance),1),e("div",he,"剩余"+n(s(l).getTokenUnit),1)]),e("div",ge,[e("div",fe,[e("div",ve,n(s(y).robot_num),1),ye])])]),s(l).getIsShowRecharge?(o(),a("div",be,[e("div",ke,[e("div",Fe,[we,e("div",Ee,[(o(!0),a(C,null,U(s(m),(t,E)=>(o(),a("div",{key:t.id,class:D(["recharge-item relative",{active:E===s(h)}]),onClick:p=>h.value=E},[t.tags!=""?(o(),a("div",Se,n(t.tags),1)):u("",!0),e("div",null,[e("div",null,[e("div",Ce,n(t.name),1),d(_,{content:t.sell_price,"main-size":"28px","minor-size":"16px"},null,8,["content"]),e("div",{class:D([{"opacity-0":t.line_price==="0.00"},"mb-[20px]"])},[d(_,{prefix:"原价",content:t.line_price,"main-size":"14px","line-through":"",color:"#999"},null,8,["content"])],2)]),e("div",Ue,[(o(!0),a(C,null,U(s(V),(p,P)=>(o(),a("div",{class:"text-sm py-[8px]",key:P},[e("div",De,[e("span",Re,n(p.label),1),e("div",Ve,[t[p.key]>0?(o(),a("span",je,n(Number(t[p.key]))+n(p.unit),1)):(o(),a("span",ze,"-"))])])]))),128)),t.is_give?(o(),a("div",Ne,[w(" 赠: "),t.give_chat_balance?(o(),a("span",Te,n(t.give_chat_balance)+n(s(l).getTokenUnit)+" "+n(t.give_robot_number?"，":""),1)):u("",!0),t.give_robot_number?(o(),a("span",Be,n(t.give_robot_number)+"智能体 ",1)):u("",!0)])):u("",!0)])])],10,Ie))),128))])]),e("div",Le,[Pe,d(T,{modelValue:s(r),"onUpdate:modelValue":i[0]||(i[0]=t=>ae(r)?r.value=t:null),from:"recharge"},null,8,["modelValue"])])])])):(o(),a("div",Ae,$e))]),_:1}),s(l).getIsShowRecharge?(o(),a("div",He,[e("div",Ke,[e("div",null,[w(" 实付金额： "),d(_,{content:s(b).sell_price,"main-size":"24px","minor-size":"14px",color:"#FF7021"},null,8,["content"])]),d(L,{type:"primary",size:"large",loading:s(N),onClick:s(z),style:{border:"none","border-radius":"6px",padding:"0 54px"}},{default:S(()=>[w(" 立即购买 ")]),_:1},8,["loading","onClick"])])])):u("",!0)])}}});const it=re(Xe,[["__scopeId","data-v-494a1cbe"]]);export{it as default};
