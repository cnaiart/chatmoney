import{E as N}from"./el-page-header.a55518b4.js";import{d as z,v as H,j as J}from"./entry.dfbfd4fd.js";import{E as q,a as M}from"./el-table-column.ac121129.js";import{_ as X}from"./index.vue.7f39d825.js";import{E as G,a as K,b as O}from"./el-dropdown.b4c59a57.js";import{_ as Q}from"./index.vue.e0bcb29b.js";/* empty css                   *//* empty css                    *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip.4ed993c7.js";import{u as W}from"./usePaging.b2b97b82.js";import{_ as Y}from"./create-share.vue.91c25dc8.js";import{_ as Z}from"./js-embedding.vue.7e440a2d.js";import{_ as ee}from"./usage-settings.vue.86a14f39.js";import{w as ae,y as te,A as ne,z as oe,x as se}from"./robot.b9f1d754.js";import{k as le,s as h,a as ie,A as re,r as me,b as de,H as C,I as pe,X as t,J as f,V as n,a7 as r,$ as ce,u as p,U as _e,e as fe,S as ue}from"./swiper-vue.2eb6bd20.js";const ge={class:"mt-4"},he={class:"mt-4"},we={class:"flex items-center"},ye={class:"flex justify-end mt-4"},Le=le({__name:"js",props:{appId:{}},emits:["back"],setup(E,{emit:R}){const w=E,u=h(),y=h(),c=h(),k=ie({}),{appId:S}=re(w),_=me({robot_id:S,type:2}),{pager:m,getLists:s}=W({fetchFun:ae,params:_});s();const x=async a=>{await J.confirm("确定删除？"),await se({id:a,type:_.type}),s()},$=(a,e)=>{switch(a){case"delete":x(e.id);break;case"edit":b(e);break;case"usage":B(e)}},b=a=>{var o;let e=null;a&&(e={id:a.id,name:a.name,password:a.secret}),(o=u.value)==null||o.open(e)},I=async(a,e)=>{var o;await(e=="add"?te({...a,..._}):ne({id:a.id,name:a.name,password:a.password})),(o=u.value)==null||o.close(),s()},V=a=>{k.value=a},j=a=>{var e;V(a),(e=y.value)==null||e.open()},B=a=>{var e,o;(e=c.value)==null||e.open(),(o=c.value)==null||o.setFormData(a)},D=async a=>{var e;await oe({...a,..._}),(e=c.value)==null||e.close(),s()};return de(()=>w.appId,()=>{s()}),(a,e)=>{const o=N,l=z,d=q,P=X,g=G,T=K,U=O,A=M,F=Q,L=H;return C(),pe(ue,null,[t(o,{content:"发布JS嵌入",onBack:e[0]||(e[0]=i=>R("back"))}),f("div",ge,[t(l,{type:"primary",onClick:e[1]||(e[1]=i=>b())},{default:n(()=>[r(" 创建链接 ")]),_:1})]),f("div",he,[ce((C(),_e(A,{data:p(m).lists,size:"large"},{default:n(()=>[t(d,{label:"apikey",prop:"apikey","min-width":"200"}),t(d,{label:"分享名称",prop:"name","min-width":"180","show-tooltip-when-overflow":""}),t(d,{label:"访问密码",prop:"secret","min-width":"120"}),t(d,{label:"最后使用时间",prop:"use_time","min-width":"180"}),t(d,{label:"操作","min-width":"150",fixed:"right"},{default:n(({row:i})=>[f("div",we,[t(l,{type:"primary",link:"",onClick:v=>j(i)},{default:n(()=>[r(" 查看代码 ")]),_:2},1032,["onClick"]),t(U,{class:"ml-[10px]",onCommand:v=>$(v,i)},{dropdown:n(()=>[t(T,null,{default:n(()=>[t(g,{command:"edit"},{default:n(()=>[t(l,{type:"primary",link:""},{default:n(()=>[r(" 编辑 ")]),_:1})]),_:1}),t(g,{command:"usage"},{default:n(()=>[t(l,{type:"primary",link:""},{default:n(()=>[r(" 用量设置 ")]),_:1})]),_:1}),t(g,{command:"delete"},{default:n(()=>[t(l,{type:"danger",link:""},{default:n(()=>[r(" 删除 ")]),_:1})]),_:1})]),_:1})]),default:n(()=>[t(l,{type:"primary",link:""},{default:n(()=>[r(" 更多 "),t(P,{name:"el-icon-ArrowDown"})]),_:1})]),_:2},1032,["onCommand"])])]),_:1})]),_:1},8,["data"])),[[L,p(m).loading]]),f("div",ye,[t(F,{modelValue:p(m),"onUpdate:modelValue":e[2]||(e[2]=i=>fe(m)?m.value=i:null),onChange:p(s)},null,8,["modelValue","onChange"])])]),t(Y,{ref_key:"createShareRef",ref:u,isShowChatType:!1,onConfirm:I},null,512),t(Z,{ref_key:"jsEmbeddingRef",ref:y,"channel-id":p(k).apikey},null,8,["channel-id"]),t(ee,{ref_key:"usageSettingsRef",ref:c,onConfirm:D},null,512)],64)}}});export{Le as _};
