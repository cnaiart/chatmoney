import{E as g,d as k}from"./entry.dfbfd4fd.js";import{_ as P}from"./index.vue.7f39d825.js";import{_ as U}from"./index.6cda5009.js";import{_ as b}from"./index.a373f374.js";import{P as h}from"./index.e94bc8a7.js";import{u as D}from"./useLockFn.619a13da.js";import{l as C,m as B,n as E}from"./my_database.3adef370.js";import{k as R,s as q,a as r,b as F,H as I,U as N,V as d,J as a,X as i,u as l,e as $,a7 as j}from"./swiper-vue.2eb6bd20.js";const z={class:"grid grid-cols-2 gap-x-[20px]"},M={class:"mt-4"},O={class:"flex flex-col items-center justify-center"},H=a("div",{class:"text-info mt-2 text-sm"},"上传图片",-1),J=a("div",{class:"form-tips"},"最多上传9张",-1),L={class:"mt-4"},T=a("div",{class:"form-tips"},"格式为MP4，大小不能超过20M",-1),X={class:"mt-4"},A=a("div",{class:"el-upload__tip"}," 支持上传PDF、docx、excel、等文件格式 ",-1),se=R({__name:"editPop",emits:["success","close"],setup(G,{expose:_,emit:c}){const m=q(),n=r(""),e=r({kb_id:"",fd_id:"",question:"",answer:"",files:[],images:[],video:[],uuid:""});F(n,t=>{e.value.video=[{url:t,name:""}]});const{lockFn:f}=D(async()=>{console.log(e.value),e.value.uuid?await C({...e.value}):await B({...e.value}),c("success")}),v=async()=>{var o;const t=await E({uuid:e.value.uuid});Object.keys(e.value).map(u=>{e.value[u]=t[u]}),n.value=((o=t.video[0])==null?void 0:o.url)||"",console.log(e.value)};return _({open:t=>{m.value.open(),[e.value.kb_id,e.value.fd_id,e.value.uuid]=[t.kb_id,t.fd_id,t.uuid||""],t.hasOwnProperty("uuid")&&v()}}),(t,o)=>{const u=g,x=P,p=U,w=b,V=k,y=h;return I(),N(y,{ref_key:"popRef",ref:m,title:"录入数据",width:"800px",async:"",onConfirm:l(f),onClose:o[5]||(o[5]=s=>t.$emit("close"))},{default:d(()=>[a("div",null,[a("div",z,[i(u,{modelValue:l(e).question,"onUpdate:modelValue":o[0]||(o[0]=s=>l(e).question=s),type:"textarea",placeholder:"请输入文档内容，你可以理解为提问的问题（必填）",rows:"10"},null,8,["modelValue"]),i(u,{modelValue:l(e).answer,"onUpdate:modelValue":o[1]||(o[1]=s=>l(e).answer=s),type:"textarea",placeholder:"请填入补充内容，你可以理解为问题的答案",rows:"10"},null,8,["modelValue"])]),a("div",M,[i(p,{files:l(e).images,"onUpdate:files":o[2]||(o[2]=s=>l(e).images=s),type:"image","list-type":"picture-card",limit:9,multiple:"","show-file-list":""},{default:d(()=>[a("div",O,[i(x,{name:"el-icon-Plus",size:20}),H])]),_:1},8,["files"]),J]),a("div",L,[i(w,{modelValue:l(n),"onUpdate:modelValue":o[3]||(o[3]=s=>$(n)?n.value=s:null),size:"80px"},null,8,["modelValue"]),T]),a("div",X,[i(p,{files:l(e).files,"onUpdate:files":o[4]||(o[4]=s=>l(e).files=s),type:"file","show-file-list":""},{tip:d(()=>[A]),default:d(()=>[i(V,null,{default:d(()=>[j("上传附件")]),_:1})]),_:1},8,["files"])])])]),_:1},8,["onConfirm"])}}});export{se as _};
