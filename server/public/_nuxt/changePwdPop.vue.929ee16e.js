import{E as D,a as N}from"./el-select.b7a2650e.js";import{m as b,dp as O,dq as g,ds as B,E as L,dt as A}from"./entry.dfbfd4fd.js";import{E as W,a as $}from"./index.883ed08b.js";import{_ as j}from"./index.e708d765.js";import{P as z}from"./index.e94bc8a7.js";/* empty css               *//* empty css                     *//* empty css                  */import"./el-form-item.4ed993c7.js";/* empty css                */import{u as G}from"./useLockFn.619a13da.js";import{k as H,s as u,r as J,b as V,H as f,U as c,V as t,J as E,X as s,u as l,R as v}from"./swiper-vue.2eb6bd20.js";const M={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},ne=H({__name:"changePwdPop",props:{mobile:{},email:{}},emits:["close"],setup(y,{expose:C,emit:X}){const _=y,p=u();b(),b();const d=u(),w=u(),k={mobile:[{required:!0,message:"请输入手机号码"}],email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],code:[{required:!0,message:"请输入验证码",trigger:["change","blur"]}],password:[{required:!0,message:"请输入6-20位数字+字母或符号组合",trigger:["change","blur"]},{min:6,max:20,message:"密码长度应为6-20",trigger:["change","blur"]}],password_confirm:[{validator(o,a,m){a===""?m(new Error("请再次输入密码")):a!==e.password?m(new Error("两次输入的密码不一致")):m()},trigger:["change","blur"]}]},e=J({email:"",mobile:"",password:"",code:"",password_confirm:""});V(()=>_.mobile,o=>{o&&(e.mobile=o)},{immediate:!0}),V(()=>_.email,o=>{o&&(e.email=o)},{immediate:!0});const R=async()=>{var o;e.mobile?await S():await x(),(o=w.value)==null||o.start()},S=async()=>{var o;await((o=d.value)==null?void 0:o.validateField(["mobile"])),await O({scene:g.FIND_PASSWORD,mobile:e.mobile})},x=async()=>{var o;await((o=d.value)==null?void 0:o.validateField(["email"])),await B({scene:g.FIND_PASSWORD,email:e.email})},F=async()=>{var o;await((o=d.value)==null?void 0:o.validate()),await A({...e,scene:e.mobile?1:2}),p.value.close()},{lockFn:h,isLock:K}=G(F);return C({open:()=>{p.value.open()}}),(o,a)=>{const m=D,P=N,i=L,n=W,U=j,I=$,q=z;return f(),c(q,{ref_key:"popRef",ref:p,title:"设置登录密码",async:!0,"confirm-button-text":"确认",onConfirm:l(h),onClose:a[5]||(a[5]=r=>o.$emit("close"))},{default:t(()=>[E("div",null,[s(I,{ref_key:"formRef",ref:d,size:"large",model:l(e),rules:k},{default:t(()=>[l(e).mobile?(f(),c(n,{key:0,prop:"mobile"},{default:t(()=>[s(i,{modelValue:l(e).mobile,"onUpdate:modelValue":a[0]||(a[0]=r=>l(e).mobile=r),placeholder:"请输入手机号",disabled:""},{prepend:t(()=>[s(P,{"model-value":"+86",style:{width:"80px"},disabled:""},{default:t(()=>[s(m,{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1})):v("",!0),l(e).email?(f(),c(n,{key:1,prop:"email",disabled:""},{default:t(()=>[s(i,{modelValue:l(e).email,"onUpdate:modelValue":a[1]||(a[1]=r=>l(e).email=r),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1})):v("",!0),s(n,{prop:"code"},{default:t(()=>[s(i,{modelValue:l(e).code,"onUpdate:modelValue":a[2]||(a[2]=r=>l(e).code=r),placeholder:"请输入验证码"},{suffix:t(()=>[E("div",M,[s(U,{ref_key:"verificationCodeRef",ref:w,onClickGet:R},null,512)])]),_:1},8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:t(()=>[s(i,{modelValue:l(e).password,"onUpdate:modelValue":a[3]||(a[3]=r=>l(e).password=r),placeholder:"请输入6-20位数字+字母或符号组合",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{prop:"password_confirm"},{default:t(()=>[s(i,{modelValue:l(e).password_confirm,"onUpdate:modelValue":a[4]||(a[4]=r=>l(e).password_confirm=r),placeholder:"请再次输入密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["onConfirm"])}}});export{ne as _};
