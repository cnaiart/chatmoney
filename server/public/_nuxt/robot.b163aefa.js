import{E as ee,a as oe}from"./el-select.b7a2650e.js";import{m as te,h as se,a as ae,E as ne,d as re,v as ie,j as E}from"./entry.dfbfd4fd.js";import{_ as le}from"./index.vue.7f39d825.js";import{E as ce}from"./index.e979a1ab.js";import{E as pe}from"./index.828bffd0.js";import{_ as de}from"./index.vue.c62cb732.js";import{_ as _e}from"./nuxt-link.42058260.js";import{E as me}from"./index.17567b0d.js";/* empty css               *//* empty css                     *//* empty css                  *//* empty css                   */import{k as ue,a as A,s as xe,r as D,aa as fe,H as i,I as d,J as e,X as o,V as l,u as n,a7 as R,Y as m,$ as T,S as he,aj as ge,R as b,U as I,Z as ve,ag as be,ah as ye,n as ke}from"./swiper-vue.2eb6bd20.js";import{u as we}from"./asyncData.eaddccf2.js";import{u as Se}from"./useLockFn.619a13da.js";import{_ as Ce}from"./tologin.vue.2e7a83df.js";import{u as Ee}from"./robot.ea6c8ba0.js";import Re from"./robot-share.edd4d9f2.js";import{E as Ie}from"./index.a258b1c6.js";import{_ as Le}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.8ad94f19.js";import"./isUndefined.aa0326a0.js";import"./strings.ceb81673.js";import"./isEqual.0df0ab2c.js";import"./_getTag.83294aff.js";import"./debounce.8cbe4cfc.js";import"./_baseIteratee.5e0c38c1.js";import"./index.071e9281.js";import"./castArray.c741e965.js";import"./dropdown.cd5c481a.js";import"./el-tooltip.4ed993c7.js";import"./el-image-viewer.d5621b18.js";import"./throttle.d40f833a.js";import"./position.4bcf7430.js";import"./robot.b9f1d754.js";import"./task_reward.d02f9b86.js";import"./index.e94bc8a7.js";import"./index.6c069afb.js";import"./use-dialog.7d399731.js";import"./refs.cabac943.js";/* empty css                  */const c=h=>(be("data-v-c45c9d82"),h=h(),ye(),h),Ne={class:"h-full flex flex-col"},Ve={class:"flex px-[20px] py-[16px]"},$e=c(()=>e("div",{class:"font-medium text-xl"},"我的智能体",-1)),Pe={class:"flex items-center flex-none ml-auto"},qe=c(()=>e("div",{class:"flex-none mr-[10px]"},"筛选",-1)),ze={class:"flex-1 min-h-0"},je={class:"px-[20px]","infinite-scroll-distance":"50"},Be={key:0},Ue={class:"flex flex-wrap items-stretch mx-[-10px]"},Ae={class:"w-1/4 2xl:w-1/5 sm:mb-[20px] mb-[10px] app-item"},De=c(()=>e("div",{class:"mt-[10px]"},"新增智能体",-1)),Te={class:"flex px-[15px] py-[12px]"},Fe={class:"flex-1 text-tx-secondary"},Me=["onClick"],Oe=c(()=>e("span",{class:"ml-2"},"发布智能体",-1)),He=["onClick"],Je=c(()=>e("span",{class:"ml-2"},"对话数据",-1)),Xe=["onClick"],Ye=c(()=>e("span",{class:"ml-2"},"取消发布至广场",-1)),Ze=["onClick"],Ge=c(()=>e("span",{class:"ml-2"},"发布至广场",-1)),Ke=["onClick"],Qe=c(()=>e("span",{class:"ml-2"},"删除",-1)),We={class:"px-[15px] flex flex-col items-center text-center flex-1"},eo=["src"],oo={class:"text-2xl mt-[6px] mb-[12px]"},to={class:"text-tx-secondary leading-5 h-[60px] line-clamp-3"},so={class:"flex mt-4 items-center border-t border-solid border-br-light"},ao={class:"flex-1 text-tx-regular border-r border-solid border-br-light flex items-center justify-center h-[50px] cursor-pointer hover:text-primary"},no=c(()=>e("div",{class:"ml-[8px]"}," 设置智能体 ",-1)),ro=c(()=>e("div",{class:"ml-[8px]"},"开始对话",-1)),io={key:1},lo=ue({__name:"robot",async setup(h){let L,N;const _=te(),y=se(),k=ae(),u=Ee(),w=A(!1),V=xe(null),$=A([]),F=async(a,s)=>{($.value.includes(a)||s)&&await E.confirm("该视频已分享过，是否确认重复分享？"),w.value=!0,await ke(),V.value.open(a)},M=a=>{$.value.push(a),u.getRobot(),g()},{isLock:O,lockFn:P}=Se(async()=>{if(!_.isLogin)return _.toggleShowLogin();if(_.userInfo.robot_num<=0)return k.getIsShowRecharge?(await E.confirm("智能体数量已用完，请前往充值"),y.push({path:"/user/recharge"})):E.msgError("智能体数量已用完。请联系客服增加"),Promise.reject();const a=await u.addRobot();_.getUser(),y.push({path:"/application/robot/setting",query:{id:a}})}),x=D({type:" ",keyword:""}),r=D({pageNo:1,count:0,pageSize:15,lists:[]}),S=async()=>{const a=await u.getRobot({...x,page_no:r.pageNo,page_size:r.pageSize});r.count=a.count,r.pageNo===1&&(r.lists=[]),r.lists.push(...a.lists)},H=()=>{_.isLogin&&r.count>=r.pageNo*r.pageSize&&(r.pageNo++,S())},g=()=>{r.pageNo=1,S()};[L,N]=fe(()=>we(()=>S(),{lazy:!0},"$Iyd8pwcMuC")),await L,N();const f=async(a,s)=>{switch(a){case"delete":await u.delRobot(s.id),_.getUser(),g();break;case"release":case"dialogue":y.push({path:"/application/robot/setting",query:{id:s.id,currentTab:a}});case"share":F(s.id,s.is_share);break;case"cancelPublic":await u.cancelShareRobot(s.id),g()}};return(a,s)=>{const C=ee,J=oe,X=ne,q=re,p=le,z=ce,Y=pe,Z=de,j=_e,G=me,K=ie,Q=Ie;return i(),d("div",Ne,[e("div",Ve,[$e,e("div",Pe,[qe,o(J,{class:"!w-[100px] flex-none",modelValue:n(x).type,"onUpdate:modelValue":s[0]||(s[0]=t=>n(x).type=t)},{default:l(()=>[o(C,{label:"全部",value:" "}),o(C,{label:"公开",value:1}),o(C,{label:"私有",value:0})]),_:1},8,["modelValue"]),o(X,{class:"mx-[10px]",modelValue:n(x).keyword,"onUpdate:modelValue":s[1]||(s[1]=t=>n(x).keyword=t),placeholder:"请输入"},null,8,["modelValue"]),e("div",null,[o(q,{onClick:m(g,["stop"]),type:"primary"},{default:l(()=>[R("搜索")]),_:1},8,["onClick"])])])]),e("div",ze,[o(G,null,{default:l(()=>[T((i(),d("div",je,[n(_).isLogin?(i(),d("div",Be,[e("div",Ue,[e("div",Ae,[T((i(),d("div",{class:"mx-[10px] bg-body h-full rounded-[12px] p-[20px] overflow-hidden flex flex-col justify-center items-center cursor-pointer min-h-[200px]",onClick:s[2]||(s[2]=(...t)=>n(P)&&n(P)(...t))},[o(p,{name:"el-icon-Plus",size:24}),De])),[[K,n(O)]])]),(i(!0),d(he,null,ge(n(r).lists,(t,W)=>(i(),d("div",{key:W,class:"w-1/4 2xl:w-1/5 sm:mb-[20px] mb-[10px] app-item"},[o(j,{to:{path:"/application/robot/setting",query:{id:t.id}},class:"mx-[10px] bg-body h-full rounded-[12px] overflow-hidden relative flex flex-col"},{default:l(()=>[e("div",Te,[e("div",Fe,[t.is_public?(i(),I(z,{key:0,type:"warning"},{default:l(()=>[R("公开")]),_:1})):(i(),I(z,{key:1,type:"primary"},{default:l(()=>[R("私有")]),_:1}))]),o(Y,{placement:"bottom",trigger:"hover",offset:"12",teleported:!0,"show-arrow":!1,transition:"custom-popover","popper-class":"cursor-pointer",width:190},{reference:l(()=>[o(q,{link:"",class:"el-dropdown-link"},{default:l(()=>[o(p,{name:"el-icon-MoreFilled"})]),_:1})]),default:l(()=>{var B,U;return[e("div",{class:"flex items-center dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-[12px] px-[12px] py-[10px]",onClick:m(v=>f("release",t),["stop"])},[o(p,{name:"el-icon-Position"}),Oe],8,Me),e("div",{class:"flex items-center dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-[12px] px-[12px] py-[10px]",onClick:m(v=>f("dialogue",t),["stop"])},[o(p,{name:"el-icon-ChatDotRound"}),Je],8,He),t.is_public&&((B=n(k).getSquareConfig.robot_award)!=null&&B.is_open)?(i(),d("div",{key:0,class:"flex items-center dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-[12px] px-[12px] py-[10px]",onClick:m(v=>f("cancelPublic",t),["stop"])},[o(p,{name:"el-icon-Share"}),Ye],8,Xe)):(U=n(k).getSquareConfig.draw_award)!=null&&U.is_open?(i(),d("div",{key:1,class:"flex items-center dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-[12px] px-[12px] py-[10px]",onClick:m(v=>f("share",t),["stop"])},[o(p,{name:"el-icon-Share"}),Ge],8,Ze)):b("",!0),e("div",{class:"flex items-center dark:hover:bg-[rgba(255,255,255,0.05)] hover:bg-[rgba(0,0,0,0.05)] rounded-[12px] px-[12px] py-[10px]",onClick:m(v=>f("delete",t),["stop"])},[o(p,{name:"el-icon-Delete"}),Qe],8,Ke)]}),_:2},1024)]),e("div",We,[e("img",{class:"flex-none w-[74px] h-[74px] rounded-full",src:t.image,alt:""},null,8,eo),e("div",oo,[o(Z,{content:t.name},null,8,["content"])]),e("div",to,ve(t.intro||"这个智能体还没介绍呢～"),1)]),e("div",so,[e("div",ao,[o(p,{name:"el-icon-Position",size:18}),no]),o(j,{to:{path:"/application/chat",query:{id:t.id}},class:"flex-1 text-tx-regular flex items-center justify-center h-[50px] cursor-pointer hover:text-primary"},{default:l(()=>[o(p,{name:"el-icon-ChatLineSquare",size:18}),ro]),_:2},1032,["to"])])]),_:2},1032,["to"])]))),128))])])):b("",!0),n(_).isLogin?b("",!0):(i(),d("div",io,[o(Ce)]))])),[[Q,H]])]),_:1})]),n(w)?(i(),I(Re,{key:0,ref_key:"shareRef",ref:V,onClose:s[3]||(s[3]=t=>w.value=!1),onSuccess:M},null,512)):b("",!0)])}}});const Ko=Le(lo,[["__scopeId","data-v-c45c9d82"]]);export{Ko as default};
