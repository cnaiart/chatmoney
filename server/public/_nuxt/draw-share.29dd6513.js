import{a as v,E as S}from"./el-select.b7a2650e.js";import{m as C,d as B,c$ as V}from"./entry.dfbfd4fd.js";/* empty css               *//* empty css                     *//* empty css                  */import{a as w,b as E}from"./task_reward.d02f9b86.js";import{P as D}from"./index.e94bc8a7.js";import{u as L}from"./useLockFn.619a13da.js";import{k as R,s as T,a as U,r as F,H as c,I as _,X as i,V as r,J as d,u as t,a7 as N,S as j,aj as q,U as I}from"./swiper-vue.2eb6bd20.js";import{_ as P}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.8ad94f19.js";import"./isUndefined.aa0326a0.js";import"./index.17567b0d.js";import"./index.e979a1ab.js";import"./strings.ceb81673.js";import"./isEqual.0df0ab2c.js";import"./_getTag.83294aff.js";import"./debounce.8cbe4cfc.js";import"./_baseIteratee.5e0c38c1.js";import"./index.071e9281.js";import"./castArray.c741e965.js";import"./index.6c069afb.js";import"./use-dialog.7d399731.js";import"./refs.cabac943.js";/* empty css                  */const z={class:"share-popup"},A={class:"h-[100px]"},H={class:"dialog-footer flex justify-center pb-2"},J=R({__name:"draw-share",emits:["success","close"],setup(O,{expose:u,emit:p}){const f=C(),n=T(),l=U([]),o=F({is_base64:0,base64:"",image:"",prompts:"",category_id:"",records_id:""}),h=async()=>{try{const e=await w({type:V.DRAW,share:1});e.unshift({name:"全部",id:""}),l.value=e}catch(e){console.log("获取绘画分类失败=>",e)}},{lockFn:m,isLock:y}=L(async()=>{var e;await E(o),await f.getUser(),(e=n.value)==null||e.close(),p("success",o.records_id)}),g=()=>{p("close")};return u({open:e=>{var s;h(),(s=n.value)==null||s.open(),o.base64=e.base64,o.is_base64=e.is_base64,o.image=e.image,o.records_id=e.records_id,o.prompts=e.prompt_en||e.prompt}}),(e,s)=>{const b=S,x=v,k=B;return c(),_("div",z,[i(D,{ref_key:"popupRef",ref:n,title:"分享至广场",async:!0,width:"400px",center:!0,cancelButtonText:"",confirmButtonText:"",appendToBody:!1,onConfirm:t(m),onClose:g},{footer:r(()=>[d("div",H,[i(k,{type:"primary",loading:t(y),class:"!rounded-md",onClick:t(m)},{default:r(()=>[N(" 分享至广场 ")]),_:1},8,["loading","onClick"])])]),default:r(()=>[d("div",A,[i(x,{size:"large",class:"w-[360px]",modelValue:t(o).category_id,"onUpdate:modelValue":s[0]||(s[0]=a=>t(o).category_id=a),placeholder:"全部",style:{"--el-fill-color-blank":"#f7f7fb"}},{default:r(()=>[(c(!0),_(j,null,q(t(l),a=>(c(),I(b,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["onConfirm"])])}}});const ye=P(J,[["__scopeId","data-v-33ac0b85"]]);export{ye as default};
