import{_ as C}from"./index.vue.7f39d825.js";import{E as b}from"./el-upload.5844c619.js";import{a as k,bq as w,v as V}from"./entry.dfbfd4fd.js";import"./el-progress.8f5e9f30.js";import{k as I,a as v,l as S,s as z,E as B,u as n,H as i,I as r,$ as E,X as m,V as D,N,R as u,J as _,_ as R,Y as $,ag as F,ah as U}from"./swiper-vue.2eb6bd20.js";import{_ as j}from"./_plugin-vue_export-helper.c27b6911.js";const M=e=>(F("data-v-ba6ae763"),e=e(),U(),e),q={key:0},A={"element-loading-text":"上传中..."},H={key:0,class:"el-upload flex-col bg-fill-lighter"},J=M(()=>_("div",{class:"text-tx-secondary mt-[2px]"},"添加图片",-1)),L={key:1,class:"imgContiner relative"},P=["src"],X=I({__name:"index",props:{modelValue:{type:String,default:""},excludeDomain:{type:Boolean,default:!1},canClose:{type:Boolean,default:!0},size:{type:String,default:"100px"}},emits:["change","update:modelValue"],setup(e,{emit:f}){const d=e,{getImageUrl:h}=k(),c=v(!1),g=v(!1),t=S({get(){return d.excludeDomain?h(d.modelValue):d.modelValue},set(o){f("update:modelValue",o)}}),p=z(),x=async({raw:o})=>{var s,l;try{c.value=!0;const a=await w({file:o});c.value=!1,t.value=d.excludeDomain?a.url:a.uri,f("change",a.uri),(s=p.value)==null||s.clearFiles()}catch{c.value=!1,(l=p.value)==null||l.clearFiles()}};return B(()=>{g.value=!0}),(o,s)=>{const l=C,a=b,y=V;return n(g)?(i(),r("div",q,[E((i(),r("div",A,[m(a,{ref_key:"uploadRef",ref:p,class:"avatar-uploader","show-file-list":!1,limit:1,"on-change":x,"auto-upload":!1,accept:".jpg,.png,.gif,.jpeg"},{default:D(()=>[N(o.$slots,"default",{},()=>[n(t)?u("",!0):(i(),r("div",H,[m(l,{name:"el-icon-Plus",size:20}),J])),n(t)?(i(),r("div",L,[_("div",{class:"border border-solid border-br-light rounded-[6px] relative cursor-pointer",style:R({width:e.size,height:e.size})},[_("img",{class:"rounded-lg w-full h-full",src:n(t)},null,8,P)],4),e.canClose?(i(),r("div",{key:0,class:"icon absolute top-[-10px] right-[-10px] text-tx-secondary",onClick:s[0]||(s[0]=$(Y=>t.value="",["stop"]))},[m(l,{size:"20",name:"el-icon-CircleCloseFilled"})])):u("",!0)])):u("",!0)],!0)]),_:3},512)])),[[y,n(c)]])])):u("",!0)}}});const Z=j(X,[["__scopeId","data-v-ba6ae763"]]);export{Z as _};
