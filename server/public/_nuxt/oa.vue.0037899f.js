import{E as L}from"./el-page-header.a55518b4.js";import{d as N,v as j,j as z}from"./entry.dfbfd4fd.js";import{E as H,a as q}from"./el-table-column.ac121129.js";import{_ as J}from"./index.vue.7f39d825.js";import{E as M,a as X,b as G}from"./el-dropdown.b4c59a57.js";import{_ as K}from"./index.vue.e0bcb29b.js";/* empty css                   *//* empty css                    *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip.4ed993c7.js";import{u as O}from"./usePaging.b2b97b82.js";import{_ as Q}from"./create-share.vue.91c25dc8.js";import{_ as W}from"./usage-settings.vue.86a14f39.js";import{_ as Y}from"./oa-config.vue.6d671a37.js";import{w as Z,y as ee,A as ae,z as te,x as oe}from"./robot.b9f1d754.js";import{k as ne,s as h,A as se,r as le,b as ie,H as C,I as re,X as e,J as f,V as o,a7 as r,$ as me,u as d,U as pe,e as de,S as ce}from"./swiper-vue.2eb6bd20.js";const _e={class:"mt-4"},fe={class:"mt-4"},ue={class:"flex items-center"},ge={class:"flex justify-end mt-4"},Ae=ne({__name:"oa",props:{appId:{}},emits:["back"],setup(R,{emit:E}){const w=R,u=h(),c=h(),y=h(),{appId:x}=se(w),_=le({robot_id:x,type:3}),{pager:m,getLists:s}=O({fetchFun:Z,params:_});s();const S=async t=>{await z.confirm("确定删除？"),await oe({id:t,type:_.type}),s()},$=(t,a)=>{switch(t){case"delete":S(a.id);break;case"edit":k(a);break;case"usage":V(a)}},k=t=>{var n;let a=null;t&&(a={id:t.id,name:t.name,password:t.secret}),(n=u.value)==null||n.open(a)},I=async(t,a)=>{var n;await(a=="add"?ee({...t,..._}):ae({id:t.id,name:t.name,password:t.password})),(n=u.value)==null||n.close(),s()},V=t=>{var a,n;(a=c.value)==null||a.open(),(n=c.value)==null||n.setFormData(t)},B=async t=>{var a;await te({...t,..._}),(a=c.value)==null||a.close(),s()};return ie(()=>w.appId,()=>{s()}),(t,a)=>{const n=L,l=N,p=H,D=J,g=M,P=X,T=G,U=q,A=K,F=j;return C(),re(ce,null,[e(n,{content:"发布微信公众号",onBack:a[0]||(a[0]=i=>E("back"))}),f("div",_e,[e(l,{type:"primary",onClick:a[1]||(a[1]=i=>k())},{default:o(()=>[r(" 创建链接 ")]),_:1})]),f("div",fe,[me((C(),pe(U,{data:d(m).lists,size:"large"},{default:o(()=>[e(p,{label:"apikey",prop:"apikey","min-width":"200"}),e(p,{label:"分享名称",prop:"name","min-width":"180","show-tooltip-when-overflow":""}),e(p,{label:"访问密码",prop:"secret","min-width":"120"}),e(p,{label:"最后使用时间",prop:"use_time","min-width":"180"}),e(p,{label:"操作","min-width":"150",fixed:"right"},{default:o(({row:i})=>[f("div",ue,[e(l,{type:"primary",link:"",onClick:v=>{var b;return(b=d(y))==null?void 0:b.open(i.apikey)}},{default:o(()=>[r(" 公众号配置 ")]),_:2},1032,["onClick"]),e(T,{class:"ml-[10px]",onCommand:v=>$(v,i)},{dropdown:o(()=>[e(P,null,{default:o(()=>[e(g,{command:"edit"},{default:o(()=>[e(l,{type:"primary",link:""},{default:o(()=>[r(" 编辑 ")]),_:1})]),_:1}),e(g,{command:"usage"},{default:o(()=>[e(l,{type:"primary",link:""},{default:o(()=>[r(" 用量设置 ")]),_:1})]),_:1}),e(g,{command:"delete"},{default:o(()=>[e(l,{type:"danger",link:""},{default:o(()=>[r(" 删除 ")]),_:1})]),_:1})]),_:1})]),default:o(()=>[e(l,{type:"primary",link:""},{default:o(()=>[r(" 更多 "),e(D,{name:"el-icon-ArrowDown"})]),_:1})]),_:2},1032,["onCommand"])])]),_:1})]),_:1},8,["data"])),[[F,d(m).loading]]),f("div",ge,[e(A,{modelValue:d(m),"onUpdate:modelValue":a[2]||(a[2]=i=>de(m)?m.value=i:null),onChange:d(s)},null,8,["modelValue","onChange"])])]),e(Q,{ref_key:"createShareRef",ref:u,isShowChatType:!1,onConfirm:I},null,512),e(W,{ref_key:"usageSettingsRef",ref:c,onConfirm:B},null,512),e(Y,{ref_key:"oaConfigRef",ref:y},null,512)],64)}}});export{Ae as _};
