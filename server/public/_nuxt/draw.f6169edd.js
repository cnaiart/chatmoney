import{E as j}from"./el-empty.6e01cec2.js";import{_ as B}from"./index.vue.7f39d825.js";import{a as L,m as R,ck as H,H as N}from"./entry.dfbfd4fd.js";import{E as U}from"./index.17567b0d.js";/* empty css                     */import{W as q}from"./index.36f10986.js";import{h as A,z as J}from"./useDrawEffect.259be699.js";import{I as O}from"./index.38e9448d.js";import{_ as T}from"./image-preview.vue.c3d67383.js";import{D as W}from"./empty-image.07b83606.js";import{E as F}from"./index.a258b1c6.js";import{k as M,s as x,r as w,a as k,H as a,I as n,J as i,S as C,aj as X,u as s,X as r,U as Z,V as h,$ as G,R as D,T as K,Z as Q,ag as Y,ah as ee}from"./swiper-vue.2eb6bd20.js";import{_ as oe}from"./_plugin-vue_export-helper.c27b6911.js";import"./usePaging.b2b97b82.js";import"./usePolling.de4d6c35.js";import"./DrawEnum.ea2da3f6.js";import"./el-image-viewer.d5621b18.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./index.6c069afb.js";import"./use-dialog.7d399731.js";import"./isUndefined.aa0326a0.js";import"./refs.cabac943.js";/* empty css                  */import"./useCopy.5611cfa5.js";import"./download.f61d7233.js";const te=m=>(Y("data-v-5e9ea1e6"),m=m(),ee(),m),se={class:"square h-full flex flex-col"},ae={class:"nav flex px-4 pt-4"},ie={class:"category-list flex-1"},ne=["onClick"],re={class:"flex-1 min-w-0"},le={key:0,class:"h-full flex flex-col justify-center"},ce={class:"main"},de=["infinite-scroll-disabled"],me={class:"image-payload h-full w-full relative text-sm"},pe={class:"image-bg"},_e=["onClick"],fe={key:0,class:"flex justify-center items-center mt-[50px]"},ue=te(()=>i("span",{class:"mt-[4px] ml-[10px] text-tx-secondary"},"加载中...",-1)),ge=M({__name:"draw",setup(m){L(),R(),x();const p=x(null),l=w({status:3,page_no:0,page_size:20,model:"sd"}),e=w({more:!0,loading:!1,lists:[]}),E=k([{name:"SD绘画",type:"sd"},{name:"DALLE绘画",type:"dalle3"},{name:"MJ绘画",type:"mj_goapi"}]);k([]);const c=w({show:!1,data:{}}),S=t=>{c.show=!0,c.data=t},P={4e3:{rowPerView:8},2e3:{rowPerView:6},1800:{rowPerView:6},1600:{rowPerView:5},1440:{rowPerView:5},1360:{rowPerView:5},1280:{rowPerView:4},1024:{rowPerView:4}},V=()=>{var t;(t=p==null?void 0:p.value)==null||t.renderer()},y=()=>{e.more=!0,l.page_no=0},b=async t=>{await A(t),y()},I=t=>{l.model!==t&&(l.model=t,y(),f())},f=async()=>{if(!e.loading){if(e.more)l.page_no+=1;else return;e.loading=!0;try{const t=await J(l),{lists:d,page_no:_,page_size:u,count:g}=t;_*u>g&&(e.more=!1),_==1?e.lists=d:e.lists=[...e.lists,...d],setTimeout(()=>e.loading=!1,500)}catch(t){e.loading=!1,console.log("获取绘画广场列表错误=>",t)}}};return f(),(t,d)=>{const _=j,u=B,g=N,z=U,$=F;return a(),n("div",se,[i("div",ae,[i("div",ie,[(a(!0),n(C,null,X(s(E),o=>(a(),n("div",{key:o.type,class:K(["category-item",{"category-item--active":o.type===s(l).model}]),onClick:v=>I(o.type)},Q(o.name),11,ne))),128))])]),i("div",re,[!s(e).lists.length&&!s(e).loading?(a(),n("div",le,[r(_,{"image-size":150,image:s(W),description:"暂时没有绘画哦，快去生成试试吧"},null,8,["image"])])):(a(),Z(z,{key:1},{default:h(()=>[i("div",ce,[G((a(),n("div",{"infinite-scroll-delay":200,"infinite-scroll-distance":400,"infinite-scroll-disabled":!s(e).more},[s(e).lists.length?(a(),n(C,{key:0},[r(q,{ref_key:"waterFull",ref:p,delay:100,list:s(e).lists,width:326,gutter:20,animationDelay:0,animationDuration:0,backgroundColor:"none",animationPrefix:"none",animated:"none",animationEffect:"none",breakpoints:P},{item:h(({item:o})=>[i("div",me,[i("div",pe,[r(O,{thumbnail:o.thumbnail,image:(o==null?void 0:o.image)||(o==null?void 0:o.image_url),onRefresh:V,onOnClick:v=>S(o)},null,8,["thumbnail","image","onOnClick"])]),i("div",{class:"image-del",onClick:v=>b(o.id)},[r(u,{class:"cursor-pointer rounded-md p-1 box-content",name:"el-icon-Delete",size:"18",color:"#fff"})],8,_e)])]),_:1},8,["list"]),s(e).loading?(a(),n("div",fe,[r(g,{size:"25",class:"is-loading"},{default:h(()=>[r(s(H))]),_:1}),ue])):D("",!0)],64)):D("",!0)],8,de)),[[$,f]])])]),_:1}))]),r(T,{show:s(c).show,"onUpdate:show":d[0]||(d[0]=o=>s(c).show=o),data:s(c).data},null,8,["show","data"])])}}});const Te=oe(ge,[["__scopeId","data-v-5e9ea1e6"]]);export{Te as default};
