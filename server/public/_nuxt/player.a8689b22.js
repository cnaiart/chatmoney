import{_ as D}from"./index.vue.7f39d825.js";import{cF as p,d as j}from"./entry.dfbfd4fd.js";import{E as F}from"./el-slider.211113d2.js";import"./el-input-number.a67590b7.js";import"./el-tooltip.4ed993c7.js";/* empty css                  */import{b as J}from"./music.f06b2c3d.js";import{l as $,o as K,b as P,k as O,H as M,I as S,J as l,u as t,S as W,Z as w,R as N,X as v,V as E}from"./swiper-vue.2eb6bd20.js";import{_ as A}from"./_plugin-vue_export-helper.c27b6911.js";const U=e=>{let a=parseInt(String(e/60)),o=Math.round(e%60)+"";const i=":";return a==0?a="00":a<10&&(a="0"+a),o.length==1&&(o="0"+o),a+i+o},G=()=>{const e=p(()=>new Audio,"$DJSMRhR2S7"),a=p(()=>0,"$GS6UDXwhYk"),o=p(()=>0,"$PUrgbX7hfL"),i=p(()=>!1,"$0vj7SXLRdo"),d=p(()=>new Map,"$8PwyUKyd2j"),c=p(()=>-1,"$1LKcW0IhcI"),s=p(()=>[],"$ff4BoCp0CW"),T=async()=>{const n=await J({page_type:0,status:2});d.value.clear(),n.lists.forEach((r,u)=>{d.value.set(r.id,{...r,index:u})}),s.value=n.lists},k=n=>{d.value.clear(),n.forEach((r,u)=>{d.value.set(r.id,{...r,index:u})}),s.value=n},C=()=>{e.value.paused||(i.value=!0)},I=()=>{i.value?_():f()},_=()=>{e.value.pause()},f=()=>{e.value.play()},y=()=>{i.value=!1},m=()=>{y()},g=()=>{o.value=e.value.duration},x=()=>{a.value=e.value.currentTime},b=n=>{e.value.currentTime=n},h=n=>{c.value=n,setTimeout(()=>{f()})},z=n=>{let r=B.value.index;r===void 0&&(r=0);let u=r+n;u<=0&&(u=0),u>=s.value.length-1&&(u=s.value.length-1),i.value=!1;const X=s.value[u];h(X.id)},R=$(()=>U(o.value)),V=$(()=>U(a.value)),B=$(()=>d.value.get(c.value)||{});K(()=>{_(),y(),o.value=0,e.value.src=""}),e.value.onplay||(e.value.onloadedmetadata=g,e.value.onplay=C,e.value.onpause=y,e.value.ontimeupdate=x,e.value.onseeking=x,e.value.onended=y,e.value.onerror=m);const L=()=>{const n=d.value.get(c.value);n&&e.value.src!==n.audio_url&&(e.value.src=n.audio_url)};return P(c,n=>{n==-1?(e.value.src="",o.value=0):L()}),P(s,L),{audioCtx:e,currentTime:a,duration:o,durationTrans:R,currentTimeTrans:V,currentId:c,currentMusic:B,playing:i,musicList:s,pause:_,play:f,getMusic:T,setMusic:k,setCurrentTime:b,prevOrNext:z,togglePlay:I,setCurrentId:h}},H={class:"flex items-center p-[13px]"},Y=["src"],Z={class:"flex-1 min-w-0 ml-[15px]"},q={class:"font-bold line-clamp-1"},Q={key:0,class:"line-clamp-1 text-tx-secondary text-sm"},ee={class:"mx-[20px] flex items-center"},te={class:"text-tx-regular"},se={class:"mx-[20px]"},ne={class:"text-tx-regular"},ae={class:"flex items-center text-tx-secondary mx-[30px]"},oe={class:"w-[50px]"},le={class:"mx-[20px] w-[250px]"},ie={class:"w-[50px]"},ce=O({__name:"player",emits:["title"],setup(e,{emit:a}){const{playing:o,duration:i,musicList:d,currentId:c,currentMusic:s,currentTime:T,currentTimeTrans:k,setCurrentTime:C,durationTrans:I,prevOrNext:_,togglePlay:f}=G();return(y,m)=>{const g=D,x=j,b=F;return M(),S("div",H,[l("div",{class:"flex items-center w-[200px] h-[55px] cursor-pointer",onClick:m[0]||(m[0]=h=>a("title",t(s)))},[t(s).title?(M(),S(W,{key:0},[l("img",{src:t(s).image_url,class:"w-[55px] h-full rounded-[8px]"},null,8,Y),l("div",Z,[l("div",q,w(t(s).title),1),t(s).style_desc?(M(),S("div",Q,w(t(s).style_desc),1)):N("",!0)])],64)):N("",!0)]),l("div",ee,[l("div",te,[v(x,{link:"",disabled:t(c)<=0||t(s).index<=0,onClick:m[1]||(m[1]=h=>t(_)(-1))},{icon:E(()=>[v(g,{name:"local-icon-up",size:24})]),_:1},8,["disabled"])]),l("div",se,[v(x,{type:"primary",circle:"",onClick:t(f),disabled:t(c)<=0},{icon:E(()=>[v(g,{name:`local-icon-${t(o)?"pause1":"play"}`,size:14},null,8,["name"])]),_:1},8,["onClick","disabled"])]),l("div",ne,[v(x,{link:"",disabled:t(c)<=0||t(s).index>=t(d).length-1,onClick:m[2]||(m[2]=h=>t(_)(1))},{icon:E(()=>[v(g,{name:"local-icon-down",size:24})]),_:1},8,["disabled"])])]),l("div",ae,[l("div",oe,w(t(k)),1),l("div",le,[v(b,{"model-value":t(T),disabled:!t(s).audio_url,size:"small","show-tooltip":!1,min:0,max:t(i),onInput:t(C)},null,8,["model-value","disabled","max","onInput"])]),l("div",ie,w(t(I)),1)])])}}});const ye=A(ce,[["__scopeId","data-v-53183250"]]);export{ye as _,G as u};
