import{E as A}from"./index.17567b0d.js";import{E as K}from"./el-image-viewer.d5621b18.js";import{E as z}from"./el-result.4bbc7c45.js";import{d as F}from"./entry.dfbfd4fd.js";import{E as H}from"./index.6c069afb.js";/* empty css                     *//* empty css                  */import{b as J,k as M,f as j,i as X}from"./useDrawEffect.259be699.js";import{k as Z,a as d,w as q,E as G,H as s,I as r,J as a,N as O,X as i,V as c,Z as f,a7 as b,S as y,aj as g,R as Q,u as W,n as Y,T as E,ag as ee,ah as te}from"./swiper-vue.2eb6bd20.js";import{_ as oe}from"./_plugin-vue_export-helper.c27b6911.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./use-dialog.7d399731.js";import"./isUndefined.aa0326a0.js";import"./refs.cabac943.js";import"./usePaging.b2b97b82.js";import"./usePolling.de4d6c35.js";import"./DrawEnum.ea2da3f6.js";const ae=""+new URL("drawing_empty.c3070048.png",import.meta.url).href,w=m=>(ee("data-v-7f6d7181"),m=m(),te(),m),le={class:"keyword-dialog"},se=w(()=>a("div",{class:"text-xl font-medium text-[#101010] dark:text-white"}," 描述词推荐 ",-1)),re={class:"flex"},ne={class:"bg-[var(--el-bg-color)]"},ce=["onClick"],pe={class:"py-[15px] text-base font-medium text-[#101010] dark:text-white"},ie=["onClick"],ue={key:0,class:"keyword-container"},de=w(()=>a("div",{class:"py-[15px] text-base font-medium text-[#101010] dark:text-white"}," 其它 ",-1)),me=["onClick"],_e={key:1,class:"flex items-center justify-center w-full h-full"},ve={class:"flex justify-between"},fe={class:"flex justify-center items-center text-tx-secondary text-base"},ye=w(()=>a("span",null," 已选择 ",-1)),he={class:"mx-1 text-primary"},ke=w(()=>a("span",null,"个Tag",-1)),ge={class:"dialog-footer"},we=Z({__name:"prompt-selector",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(m,{emit:x}){const C=m,_=d(!1),p=d(-1),V=d([]),u=d({prompt:[],cate_prompt:[]}),t=d([]),h=d([]);q(()=>{C.modelValue==""&&(t.value=[],h.value=[])});const S=e=>{const l=t.value.findIndex(k=>k==e);if(l>=0){t.value.splice(l,1),h.value.splice(l,1);return}t.value.push(e),h.value.push(p.value)},I=()=>{if(_.value=!1,C.modelValue.trim()==""){const e=t.value.length?t.value.join(","):"";x("update:modelValue",e)}else{const e=t.value.length?t.value.join(","):"",l=`${C.modelValue} ${e?`,${e}`:""}`;x("update:modelValue",l)}t.value=[]},N=()=>{_.value=!1;const e=t.value.length?t.value.join(","):"";x("update:modelValue",e),t.value=[]},B=()=>{J()||(_.value=!0)},D=e=>{p.value!=e&&(console.log(e),p.value=e,P())},L=async()=>{try{await Y(),V.value=await M({model:j.value.draw_api}),p.value=0,await P()}catch(e){console.log("获取关键词分类错误",e)}},P=async()=>{try{u.value=await X({model:j.value.draw_api,id:V.value[p.value].id})}catch(e){console.log("获取关键词错误",e)}};return G(()=>{L()}),(e,l)=>{const k=A,T=K,R=z,$=F,U=H;return s(),r("div",le,[a("div",{class:"dialog__trigger",onClick:B},[O(e.$slots,"trigger",{},void 0,!0)]),i(U,{modelValue:_.value,"onUpdate:modelValue":l[2]||(l[2]=o=>_.value=o),width:"870px","align-center":!0,style:{"border-radius":"12px"}},{header:c(()=>[se]),footer:c(()=>[a("div",ve,[a("div",fe,[ye,a("span",he,f(t.value.length),1),ke]),a("div",ge,[i($,{type:"primary",onClick:l[0]||(l[0]=o=>I())},{default:c(()=>[b(" 添加到文本描述 ")]),_:1}),i($,{type:"primary",class:"ml-[10px]",plain:!0,onClick:l[1]||(l[1]=o=>N())},{default:c(()=>[b(" 替换当前文本描述 ")]),_:1})])])]),default:c(()=>[a("div",re,[i(k,{class:"w-[110px] bg-page-base",height:"500px"},{default:c(()=>[a("div",ne,[(s(!0),r(y,null,g(V.value,(o,n)=>(s(),r("div",{key:n,class:E(["keyword-cate-item",{"keyword-cate-item-active":n==p.value,"keyword-cate-item-prev":n==p.value-1,"keyword-cate-item-next":n==p.value+1,"keyword-cate-item-has-prompt":h.value.includes(n)}]),onClick:v=>D(n)},[a("span",null,f(o.name),1)],10,ce))),128))])]),_:1}),i(k,{class:"flex-1",height:"500px"},{default:c(()=>[u.value.prompt.length||u.value.cate_prompt.length?(s(),r(y,{key:0},[(s(!0),r(y,null,g(u.value.cate_prompt,(o,n)=>(s(),r("div",{key:n,class:"keyword-container"},[a("div",pe,f(o.name),1),(s(!0),r(y,null,g(o.prompt,v=>(s(),r("div",{key:v.text,class:E(["keyword-item",{"keyword-item-active":t.value.includes(v.prompt_en)}]),onClick:xe=>S(v.prompt_en)},f(v.prompt),11,ie))),128))]))),128)),u.value.prompt.length?(s(),r("div",ue,[de,(s(!0),r(y,null,g(u.value.prompt,o=>(s(),r("div",{key:o.text,class:E(["keyword-item",{"keyword-item-active":t.value.includes(o.prompt_en)}]),onClick:n=>S(o.prompt_en)},f(o.prompt),11,me))),128))])):Q("",!0)],64)):(s(),r("div",_e,[i(R,{title:"","sub-title":"暂无关键词推荐"},{icon:c(()=>[i(T,{class:"w-[200px] h-[200px]",src:W(ae)},null,8,["src"])]),default:c(()=>[b("> ")]),_:1})]))]),_:1})])]),_:1},8,["modelValue"])])}}});const Fe=oe(we,[["__scopeId","data-v-7f6d7181"]]);export{Fe as default};
