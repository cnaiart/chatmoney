import{P as A,_ as W,a as K,p as $,b as j}from"./index.c5d8dec3.js";import{m as H,a as X,h as q,df as J,dg as M,dh as f,d as O,j as y,di as Z}from"./entry.dfbfd4fd.js";import{u as G}from"./useLockFn.619a13da.js";import{g as Q,r as Y}from"./recharge.4d39a1d7.js";import{k as ee,a as x,l as k,E as te,H as a,I as o,J as e,Z as n,u as s,S as w,aj as C,X as p,e as se,V as ae,a7 as F,T as E,R as S,ag as oe,ah as ne}from"./swiper-vue.2eb6bd20.js";import{_ as re}from"./_plugin-vue_export-helper.c27b6911.js";import"./el-image-viewer.d5621b18.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./index.vue.7f39d825.js";import"./usePolling.de4d6c35.js";import"./vue-qr.c50d30e8.js";const I=_=>(oe("data-v-d8fdce6d"),_=_(),ne(),_),ce={class:"bg-white"},ie={class:"text-tx-primary sm:py-[40px] sm:px-[60px] p-[20px]"},le={class:"py-4 px-5 rounded-[16px] bg-[#FFF5ED] mb-5"},de=I(()=>e("div",{class:"font-medium"},"我的账户",-1)),pe={class:"flex mt-4"},_e={class:"flex-1"},ue={class:"flex-1"},me={class:"recharge-lists flex flex-wrap"},xe=["onClick"],ge={key:0,class:"absolute top-[-1px] left-[-1px] bg-[#FF7021] px-[12px] py-[2px] text-white rounded-tl-[15px] rounded-br-[15px]"},ve={class:"text-xl font-medium mb-[10px] line-clamp-1"},he={class:"border-t border-solid border-br-light pt-[10px]"},fe={class:"text-tx-secondary mr-auto"},ye={class:"relative"},be={key:0},ke={key:1},we={key:2,class:"absolute right-0 top-0 translate-y-[-100%] translate-x-[100%] bg-[#FF7021] px-[8px] py-[1px] rounded-r-full rounded-tl-full whitespace-nowrap text-white text-xs"},Ce={class:"mt-[30px]"},Fe=I(()=>e("div",{class:"text-lg mb-[5px]"},"支付方式",-1)),Ee={class:"mt-[20px] flex"},Se={class:"ml-[20px]"},Ie=ee({__name:"recharge",setup(_){const N=H(),g=X(),U=q(),u=x([]),v=x({balance:"",robot_num:"",video_num:""}),V=k(()=>[{key:"chat_balance",giveKey:"give_chat_balance",label:`${g.getTokenUnit}数量`,unit:g.getTokenUnit},{key:"robot_number",giveKey:"give_robot_number",label:"智能体个数",unit:"个"}]),m=x(0),z=async()=>{const r=await Q();u.value=r.lists,v.value=r.extend;const i=u.value.findIndex(d=>d.is_recommend);m.value=i===-1?0:i},R=Z(),c=x(A.WECHAT),h=k(()=>u.value[m.value]||{}),{lockFn:B,isLock:D}=G(async()=>{h.value.id||y.msgError("请选择充值套餐"),c.value||y.msgError("请选择支付方式");const r=await Y({package_id:h.value.id,pay_way:c.value}),i=await $({...r,pay_way:c.value,redirect:`${R.app.baseURL}user/record`,code:f.getAuthData().code});await j.run({payWay:c.value,orderId:r.order_id,from:r.from,config:i.config}),await y.alertSuccess("支付成功"),N.getUser(),U.push({path:"/user/record",query:{id:r.order_id}})});return z(),te(async()=>{J()==M.WEIXIN_OA&&f.getAuthData().code==""&&await f.getUrl()}),(r,i)=>{const d=W,L=K,P=O;return a(),o("div",ce,[e("div",ie,[e("div",le,[de,e("div",pe,[e("div",_e," 剩余"+n(s(g).getTokenUnit)+"："+n(s(v).balance),1),e("div",ue," 智能体数量："+n(s(v).robot_num),1)])]),e("div",me,[(a(!0),o(w,null,C(s(u),(t,b)=>(a(),o("div",{key:t.id,class:E(["recharge-item relative",{active:b===s(m)}]),onClick:l=>m.value=b},[t.tags!=""?(a(),o("div",ge,n(t.tags),1)):S("",!0),e("div",null,[e("div",null,[e("div",ve,n(t.name),1),p(d,{content:t.sell_price,"main-size":"28px","minor-size":"16px"},null,8,["content"]),e("div",{class:E([{"opacity-0":t.line_price==="0.00"},"mb-[20px]"])},[p(d,{prefix:"原价",content:t.line_price,"main-size":"14px","line-through":"",color:"#999"},null,8,["content"])],2)]),e("div",he,[(a(!0),o(w,null,C(s(V),(l,T)=>(a(),o("div",{class:"text-sm flex py-[8px]",key:T},[e("span",fe,n(l.label),1),e("div",ye,[t[l.key]>0?(a(),o("span",be,n(Number(t[l.key]))+n(l.unit),1)):(a(),o("span",ke,"-")),t.is_give&&Number(t[l.giveKey])?(a(),o("div",we," 赠"+n(t[l.giveKey]),1)):S("",!0)])]))),128))])])],10,xe))),128))]),e("div",Ce,[Fe,p(L,{modelValue:s(c),"onUpdate:modelValue":i[0]||(i[0]=t=>se(c)?c.value=t:null),from:"recharge"},null,8,["modelValue"])]),e("div",Ee,[p(P,{type:"primary",size:"large",loading:s(D),onClick:s(B),style:{background:`linear-gradient(
                            90deg,
                            #ffcb58 0%,
                            #f7630e 100%
                        )`,border:"none",padding:"0 54px"}},{default:ae(()=>[F(" 立即购买 ")]),_:1},8,["loading","onClick"]),e("div",Se,[F(" 实付金额： "),p(d,{content:s(h).sell_price,"main-size":"24px","minor-size":"14px",color:"#FF7021"},null,8,["content"])])])])])}}});const $e=re(Ie,[["__scopeId","data-v-d8fdce6d"]]);export{$e as default};
