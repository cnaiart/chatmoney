import{a as C}from"./index.883ed08b.js";import{E}from"./index.17567b0d.js";import{a as S,m as L,d as B,_ as $,j as f}from"./entry.dfbfd4fd.js";/* empty css                *//* empty css                     */import{u as N}from"./asyncData.eaddccf2.js";import{u as z}from"./useLockFn.619a13da.js";import{a as A,p as D}from"./video.14e78cb7.js";import{_ as F}from"./video-type.vue.8a795c8f.js";import G from"./video-size.34a4bb95.js";import{_ as T}from"./prompt.vue.3dc0556c.js";import{_ as j}from"./video-style.vue.1e232e16.js";import X from"./uploader-picture.d335789c.js";import q from"./video-result.0af4a52f.js";import{k as H,s as I,r as J,b as M,l as O,H as i,I as n,X as l,V as p,J as s,u as o,U as _,R as d,Z as y}from"./swiper-vue.2eb6bd20.js";import"./castArray.c741e965.js";import"./_baseClone.20563df6.js";import"./_getTag.83294aff.js";import"./el-segmented.5d590d1a.js";import"./el-form-item.4ed993c7.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./index.vue.7f39d825.js";import"./index.a47f7f49.js";import"./el-image-viewer.d5621b18.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./el-upload.5844c619.js";import"./el-progress.8f5e9f30.js";import"./cloneDeep.4e82bacf.js";import"./isEqual.0df0ab2c.js";import"./uploader.b31ee9fb.js";import"./index.e979a1ab.js";import"./index.8ad94f19.js";import"./isUndefined.aa0326a0.js";import"./index.vue.79ff26cb.js";import"./index.f647f618.js";import"./___vite-browser-external.5512611b.js";import"./index.9c8f8f3a.js";import"./index.828bffd0.js";import"./dropdown.cd5c481a.js";import"./el-result.4bbc7c45.js";/* empty css               */import"./el-tooltip.4ed993c7.js";/* empty css                  *//* empty css                   */import"./download.f61d7233.js";import"./video_empty.69222421.js";import"./error.77075b9a.js";import"./video-share.478cbcbe.js";import"./el-select.b7a2650e.js";import"./strings.ceb81673.js";import"./_baseIteratee.5e0c38c1.js";import"./index.071e9281.js";import"./task_reward.d02f9b86.js";import"./index.e94bc8a7.js";import"./index.6c069afb.js";import"./use-dialog.7d399731.js";import"./refs.cabac943.js";/* empty css                  */import"./index.a258b1c6.js";const P={class:"h-full p-[16px] flex"},Z={class:"bg-body w-[355px] h-full rounded-[12px] flex flex-col"},K={class:"p-4"},Q={class:"flex-1 min-h-0"},W={class:"p-4"},Y=s("span",{class:"text-base font-bold"},"立即生成",-1),ee={key:0,class:"text-sm ml-[4px]"},oe={key:1,class:"text-sm ml-[4px]"},te={class:"ml-4 flex-1 min-w-0 h-full"},uo=H({__name:"index",setup(re){const V=S(),g=L(),u=I(),e=J({type:1,prompt:"",scale:"1:1",image:"",style_id:[],channel:""}),{data:m,refresh:x}=N(()=>A(),{default(){return{model:{},style:[],example:{}}},lazy:!0},"$xAqLrLrbXd");M(m,a=>{e.channel=a.channel});const h=a=>{Object.assign(e,a)},c=O(()=>m.value.model[e.channel]||{}),{lockFn:k,isLock:v}=z(async()=>{var a;try{if(!e.prompt){f.msgError(`请输入${e.type===1?"视频场景":"描述词"}`);return}if(e.type===2&&!e.image)return f.msgError("请上传上传参考图");await D({...e}),e.prompt="",e.style_id=[],(a=u.value)==null||a.refresh(),g.getUser(),x()}catch{}finally{}});return(a,t)=>{const b=C,w=E,U=B,R=$;return i(),n("div",null,[l(R,{name:"default"},{default:p(()=>[s("div",P,[s("div",Z,[s("div",K,[l(F,{modelValue:o(e).type,"onUpdate:modelValue":t[0]||(t[0]=r=>o(e).type=r)},null,8,["modelValue"])]),s("div",Q,[l(w,null,{default:p(()=>[l(b,{class:"px-4",ref:"formRef",model:o(e),"label-position":"top","show-message":!1},{default:p(()=>[o(e).type===2?(i(),_(X,{key:0,modelValue:o(e).image,"onUpdate:modelValue":t[1]||(t[1]=r=>o(e).image=r)},null,8,["modelValue"])):d("",!0),l(T,{type:o(e).type,modelValue:o(e).prompt,"onUpdate:modelValue":t[2]||(t[2]=r=>o(e).prompt=r),config:o(m).example,showTranslate:!!o(m).translate_switch},null,8,["type","modelValue","config","showTranslate"]),l(G,{modelValue:o(e).scale,"onUpdate:modelValue":t[3]||(t[3]=r=>o(e).scale=r)},null,8,["modelValue"]),o(m).style.length?(i(),_(j,{key:1,"style-list":o(m).style,modelValue:o(e).style_id,"onUpdate:modelValue":t[4]||(t[4]=r=>o(e).style_id=r)},null,8,["style-list","modelValue"])):d("",!0)]),_:1},8,["model"])]),_:1})]),s("div",W,[l(U,{size:"large",class:"w-full",type:"primary",loading:o(v),onClick:o(k)},{default:p(()=>[s("div",null,[Y,o(m).is_member?(i(),n("span",ee," 会员免费 ")):o(c).price>0?(i(),n("span",oe," 消耗 "+y(o(c).price)+" "+y(o(V).getTokenUnit),1)):d("",!0)])]),_:1},8,["loading","onClick"])])]),s("div",te,[l(q,{ref_key:"videoResultRef",ref:u,onRegenerate:h},null,512)])])]),_:1})])}}});export{uo as default};
