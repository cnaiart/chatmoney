import{_ as j}from"./index.vue.7f39d825.js";import{f as A,l as L,j as T,d as z,v as M}from"./entry.dfbfd4fd.js";import{E as U}from"./el-upload.5844c619.js";import{E as X}from"./index.17567b0d.js";import"./el-progress.8f5e9f30.js";/* empty css                     */import{k as H,a as v,s as J,H as n,I as i,J as e,$ as O,u as o,X as r,V as f,a7 as Y,Z as d,Y as Z,S as b,aj as I,R as G,T as K,ag as P,ah as Q}from"./swiper-vue.2eb6bd20.js";import{c as W,d as ee}from"./fileReader.454730c0.js";import{isSameFile as se}from"./hook.050168d8.js";import{_ as te}from"./_plugin-vue_export-helper.c27b6911.js";import"./cloneDeep.4e82bacf.js";import"./_baseClone.20563df6.js";import"./_getTag.83294aff.js";import"./isEqual.0df0ab2c.js";import"./___vite-browser-external.5512611b.js";import"./index.9c8f8f3a.js";const x=m=>(P("data-v-274a83cf"),m=m(),Q(),m),oe={class:"h-full flex flex-col"},ae={class:"py-[16px]"},le={class:"el-upload__text"},ce=x(()=>e("em",null," 选择文件 ",-1)),ne={class:"el-upload__text"},ie={class:"el-upload__text"},re=x(()=>e("a",{href:"/static/xlsxTemplate.xlsx",target:"_blank"},"点击下载模版",-1)),de=x(()=>e("div",{class:"el-upload__tip"}," 先完成填写后再上传，问题总数建议不要超过1000条，否则上传会卡顿 ",-1)),pe=x(()=>e("div",{class:"el-upload__tip"}," 导入前会进行去重，如果问题和答案完全相同，则不会被导入，所以最终导入的内容可能会比文件的内容少。但是，对于带有换行的内容，目前无法去重。 ",-1)),_e={key:0,class:"grid grid-cols-2 gap-4 flex-1 min-h-[500px]"},me={style:{"border-right":"1px solid #eeeeee"}},ue={class:"mt-4 max-w-[500px]"},he=["onClick"],ve={class:"ml-2"},fe={class:"closeIcon ml-auto opacity-0 transition duration-300 flex items-center"},xe={class:"flex flex-col"},ge={class:"text-lg"},we={class:"flex-auto mt-2 h-[100px]"},ke={class:"flex items-center"},ye={class:"bg-white px-4 rounded"},Ce={class:"mx-2 text-[#000] flex-1 line-clamp-1"},be={class:"mt-2"},Ie={class:"whitespace-pre-line"},Ve={class:"whitespace-pre-line"},Fe=H({__name:"cvs",props:{modelValue:{}},emits:["update:modelValue"],setup(m,{expose:V,emit:F}){const a=A(m,"modelValue",F),w=[".csv",".xlsx"].join(", "),p=v([]),k=J(),g=v(!1),_=v(-1);v([{question:"什么是知识库",answer:"知识库是指一个集中存储和管理知识的系统或平..."},{question:"如何创建知识库",answer:"1.确定目标和范围：明确知识库的目标和用途，确定..."}]);const S=async({raw:s})=>{var l;try{if(s){g.value=!0,await se(s,p.value);const t=await D(s);if(!t||!t.length)throw"解析结果为空，已自动忽略";if(!L(t))throw"解析失败";s.data=t,a.value.push({name:s.name,path:"",data:t}),p.value.push(s),console.log(p.value[0].name),y(p.value.length-1)}}catch(t){T.msgError(t)}finally{g.value=!1,(l=k.value)==null||l.clearFiles()}},E=async s=>{a.value[_.value].data.splice(s,1)},D=async s=>{const l=s.name.substring(s.name.lastIndexOf(".")+1);let t="";switch(l){case"csv":t=await ee(s);break;case"xlsx":t=await W(s);break}return t},y=s=>{_.value=s},$=s=>{a.value.splice(s,1),p.value.splice(s,1)};return V({clearFiles:()=>{p.value=[]}}),(s,l)=>{var C;const t=j,q=z,B=U,N=X,R=M;return n(),i("div",null,[e("div",oe,[O((n(),i("div",ae,[r(B,{ref_key:"uploadRef",ref:k,drag:"","on-change":S,"auto-upload":!1,"show-file-list":!1,accept:o(w),multiple:!0,limit:50},{tip:f(()=>[de,pe]),default:f(()=>[e("div",le,[r(t,{name:"el-icon-Upload"}),Y(" 拖拽文件至此，或点击"),ce]),e("div",ne,"支持 "+d(o(w))+" 文件",1),e("div",ie,[r(q,{type:"primary",class:"ml-2",link:"",onClick:l[0]||(l[0]=Z(()=>{},["stop"]))},{default:f(()=>[re]),_:1})])]),_:1},8,["accept"])])),[[R,o(g)]]),o(a).length>0?(n(),i("div",_e,[e("div",me,[e("div",ue,[(n(!0),i(b,null,I(o(a),(h,c)=>(n(),i("div",{key:c,class:K(["fileItem flex items-center p-2 rounded-lg mt-1 hover:cursor-pointer hover:bg-page transition duration-300",{"bg-page":o(_)==c}]),onClick:u=>y(c)},[r(t,{name:"el-icon-Folder",size:16,color:"#ffc94d"}),e("div",ve,d(h.name),1),e("div",fe,[r(t,{name:"el-icon-DeleteFilled",onClick:u=>$(c)},null,8,["onClick"])])],10,he))),128))])]),e("div",xe,[e("div",ge," 分段预览（"+d((C=o(a)[o(_)])==null?void 0:C.data.length)+"组） ",1),e("div",we,[r(N,{height:"100%"},{default:f(()=>{var h;return[(n(!0),i(b,null,I((h=o(a)[o(_)])==null?void 0:h.data,(c,u)=>(n(),i("div",{class:"bg-page rounded p-[10px] mt-2",key:u},[e("div",ke,[e("span",ye," #"+d(u+1),1),e("span",Ce,d(o(a)[o(_)].name),1),r(t,{class:"icon-delete text-primary cursor-pointer",name:"el-icon-Delete",onClick:De=>E(u)},null,8,["onClick"])]),e("div",be,[e("div",Ie," q:"+d(c.q),1),e("div",Ve," a:"+d(c.a),1)])]))),128))]}),_:1})])])])):G("",!0)])])}}});const Ye=te(Fe,[["__scopeId","data-v-274a83cf"]]);export{Ye as default};
