import{E as T}from"./el-page-header.a55518b4.js";import{j,d as w,v as z}from"./entry.dfbfd4fd.js";import{E as H,a as q}from"./el-table-column.ac121129.js";import{_ as J}from"./index.vue.e0bcb29b.js";/* empty css                   *//* empty css                    *//* empty css               *//* empty css                 */import"./el-tooltip.4ed993c7.js";/* empty css                  *//* empty css                     */import{u as X}from"./useCopy.5611cfa5.js";import{u as Z}from"./usePaging.b2b97b82.js";import{_ as G}from"./create-api.vue.d083a241.js";import{_ as K}from"./usage-settings.vue.86a14f39.js";import{_ as C}from"./call-description.vue.370b3591.js";import{w as M,x as O,y as Q,z as W}from"./robot.b9f1d754.js";import{k as Y,s as b,A as ee,r as te,l as ae,a as oe,b as se,H as y,I as ne,X as a,u as o,J as n,V as l,a7 as p,U as h,R as x,Z as ie,$ as le,e as re,S as pe}from"./swiper-vue.2eb6bd20.js";const ce={class:"flex items-center mt-4"},me={class:"flex"},de={class:"ml-4 flex items-center"},_e={class:"mt-4"},fe={class:"flex items-center"},ue={class:"flex justify-end mt-4"},De=Y({__name:"api",props:{appId:{},type:{}},emits:["back"],setup(R,{emit:$}){const c=R,{copy:E}=X(),g=b(),m=b(),{appId:V}=ee(c),d=te({robot_id:V,type:c.type}),{pager:r,getLists:i}=Z({fetchFun:M,params:d});i();const A=async t=>{await j.confirm("确定删除？"),await O({id:t,type:d.type}),i()},B=ae(()=>{switch(c.type){case 5:return"发布企业微信";default:return"发布API"}}),I=async t=>{var e;await Q({...t,...d}),(e=g.value)==null||e.close(),i()},P=async t=>{var e;await W({...t,...d}),(e=m.value)==null||e.close(),i()},k=oe("");k.value=`${window.location.origin}/api`;const S=async t=>{await E(t)},D=t=>{var e,_;(e=m.value)==null||e.open(),(_=m.value)==null||_.setFormData(t)};return se(()=>c.appId,()=>{i()}),(t,e)=>{const _=T,v=w,N=w,f=H,U=q,F=J,L=z;return y(),ne(pe,null,[a(_,{content:o(B),onBack:e[0]||(e[0]=s=>$("back"))},null,8,["content"]),n("div",ce,[n("div",me,[a(v,{type:"primary",onClick:e[1]||(e[1]=s=>{var u;return(u=o(g))==null?void 0:u.open()})},{default:l(()=>[p(" 创建API ")]),_:1}),t.type==4?(y(),h(C,{key:0,type:"app",class:"ml-[10px]"})):x("",!0),t.type==5?(y(),h(C,{key:1,type:"wx",class:"ml-[10px]"})):x("",!0)]),n("div",de,[p(" API根地址： "),n("span",null,ie(o(k)),1),a(N,{onClick:e[2]||(e[2]=s=>S(o(k))),type:"primary",link:""},{default:l(()=>[p("复制")]),_:1})])]),n("div",_e,[le((y(),h(U,{data:o(r).lists,size:"large"},{default:l(()=>[a(f,{label:"apikey",prop:"apikey","min-width":"200"}),a(f,{label:"名称",prop:"name","min-width":"180","show-tooltip-when-overflow":""}),a(f,{label:"最后使用时间",prop:"use_time","min-width":"180"}),a(f,{label:"操作",width:"150",fixed:"right"},{default:l(({row:s})=>[n("div",fe,[a(v,{type:"primary",link:"",onClick:u=>D(s)},{default:l(()=>[p(" 用量设置 ")]),_:2},1032,["onClick"]),a(v,{type:"danger",link:"",onClick:u=>A(s.id)},{default:l(()=>[p(" 删除 ")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[L,o(r).loading]]),n("div",ue,[a(F,{modelValue:o(r),"onUpdate:modelValue":e[3]||(e[3]=s=>re(r)?r.value=s:null),onChange:o(i)},null,8,["modelValue","onChange"])])]),a(G,{ref_key:"createApiRef",ref:g,onConfirm:I},null,512),a(K,{ref_key:"usageSettingsRef",ref:m,onConfirm:P},null,512)],64)}}});export{De as _};
