import{E as $q}from"./el-segmented.5d590d1a.js";import{E as Iq}from"./index.e979a1ab.js";import{c as Fq,p as Hj,_ as hq}from"./index.vue.74e23ebc.js";import{k as HC,Q as Lq,l as zj,a as Eu,H as eo,U as bi,X as ba,V as cr,$ as Wj,u as Wt,J as xr,O as Hq,Y as Bg,T as Ng,I as Sr,N as TF,Z as $D,R as $c,a0 as pq,a1 as zq,ak as Vq,E as bq,s as Vj,i as Uq,r as vq,b as Zj,j as Wq,o as Zq,e as jj,n as yq,a7 as xu,_ as jq,S as H0,aj as _F,ag as Gq,ah as qq}from"./swiper-vue.2eb6bd20.js";import{_ as Cq}from"./index.vue.7f39d825.js";import{x as Kq,at as Yq,F as Xq,D as Jq,ab as Qq,au as eK,av as tK,H as nK,I as oK,P as sK,T as rK,g as aK,e as cK,h as iK,a as kF,m as lK,j as Lp,cC as uK,d as Gj,f as dK,a6 as mK}from"./entry.dfbfd4fd.js";/* empty css               */import{u as fK}from"./useAudioPlay.fe45c428.js";import{c as gK,a as hK,d as pK,g as bK}from"./chat.01f4dab8.js";import{_ as wq}from"./_plugin-vue_export-helper.c27b6911.js";import{E as vK}from"./el-empty.6e01cec2.js";import{_ as yK}from"./index.vue.c62cb732.js";import{E as Uj}from"./index.17567b0d.js";import{b as CK,c as wK,u as SK}from"./use-dialog.7d399731.js";/* empty css                     */import{u as xK}from"./useCopy.5611cfa5.js";import{c as Sq}from"./create_record_null.e42f56ab.js";import{E as EK}from"./index.a258b1c6.js";const TK=Kq({...CK,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),_K=wK,kK=["aria-label","aria-labelledby","aria-describedby"],OK=["id","aria-level"],AK=["aria-label"],RK=["id"],DK=HC({name:"ElDrawer",inheritAttrs:!1}),MK=HC({...DK,props:TK,emits:_K,setup(to,{expose:fo}){const go=to,Bo=Lq();Yq({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},zj(()=>!!Bo.title));const wo=Eu(),zn=Eu(),Pn=Xq("drawer"),{t:Yt}=Jq(),{afterEnter:So,afterLeave:_s,beforeLeave:Sn,visible:co,rendered:no,titleId:io,bodyId:dn,zIndex:St,onModalClick:Ye,onOpenAutoFocus:Zn,onCloseAutoFocus:mt,onFocusoutPrevented:Z,onCloseRequested:kt,handleClose:Un}=SK(go,wo),Vt=zj(()=>go.direction==="rtl"||go.direction==="ltr"),q=zj(()=>Qq(go.size));return fo({handleClose:Un,afterEnter:So,afterLeave:_s}),(gt,tt)=>(eo(),bi(Vq,{to:"body",disabled:!gt.appendToBody},[ba(zq,{name:Wt(Pn).b("fade"),onAfterEnter:Wt(So),onAfterLeave:Wt(_s),onBeforeLeave:Wt(Sn),persisted:""},{default:cr(()=>[Wj(ba(Wt(eK),{mask:gt.modal,"overlay-class":gt.modalClass,"z-index":Wt(St),onClick:Wt(Ye)},{default:cr(()=>[ba(Wt(tK),{loop:"",trapped:Wt(co),"focus-trap-el":wo.value,"focus-start-el":zn.value,onFocusAfterTrapped:Wt(Zn),onFocusAfterReleased:Wt(mt),onFocusoutPrevented:Wt(Z),onReleaseRequested:Wt(kt)},{default:cr(()=>[xr("div",Hq({ref_key:"drawerRef",ref:wo,"aria-modal":"true","aria-label":gt.title||void 0,"aria-labelledby":gt.title?void 0:Wt(io),"aria-describedby":Wt(dn)},gt.$attrs,{class:[Wt(Pn).b(),gt.direction,Wt(co)&&"open"],style:Wt(Vt)?"width: "+Wt(q):"height: "+Wt(q),role:"dialog",onClick:tt[1]||(tt[1]=Bg(()=>{},["stop"]))}),[xr("span",{ref_key:"focusStartRef",ref:zn,class:Ng(Wt(Pn).e("sr-focus")),tabindex:"-1"},null,2),gt.withHeader?(eo(),Sr("header",{key:0,class:Ng(Wt(Pn).e("header"))},[gt.$slots.title?TF(gt.$slots,"title",{key:1},()=>[$c(" DEPRECATED SLOT ")]):TF(gt.$slots,"header",{key:0,close:Wt(Un),titleId:Wt(io),titleClass:Wt(Pn).e("title")},()=>[gt.$slots.title?$c("v-if",!0):(eo(),Sr("span",{key:0,id:Wt(io),role:"heading","aria-level":gt.headerAriaLevel,class:Ng(Wt(Pn).e("title"))},$D(gt.title),11,OK))]),gt.showClose?(eo(),Sr("button",{key:2,"aria-label":Wt(Yt)("el.drawer.close"),class:Ng(Wt(Pn).e("close-btn")),type:"button",onClick:tt[0]||(tt[0]=(...Dt)=>Wt(Un)&&Wt(Un)(...Dt))},[ba(Wt(nK),{class:Ng(Wt(Pn).e("close"))},{default:cr(()=>[ba(Wt(oK))]),_:1},8,["class"])],10,AK)):$c("v-if",!0)],2)):$c("v-if",!0),Wt(no)?(eo(),Sr("div",{key:1,id:Wt(dn),class:Ng(Wt(Pn).e("body"))},[TF(gt.$slots,"default")],10,RK)):$c("v-if",!0),gt.$slots.footer?(eo(),Sr("div",{key:2,class:Ng(Wt(Pn).e("footer"))},[TF(gt.$slots,"footer")],2)):$c("v-if",!0)],16,kK)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[pq,Wt(co)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var BK=sK(MK,[["__file","drawer.vue"]]);const NK=rK(BK),PK=HC({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(to,{slots:fo,attrs:go}){const Bo=Eu(!1);return bq(()=>{Bo.value=!0}),wo=>{var So;if(Bo.value)return(So=fo.default)==null?void 0:So.call(fo);const zn=fo.fallback||fo.placeholder;if(zn)return zn();const Pn=wo.fallback||wo.placeholder||"",Yt=wo.fallbackTag||wo.placeholderTag||"span";return Sr(Yt,go,Pn)}}});var xq={exports:{}};(function(to){(function(){var fo=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},go=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Bo=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},wo=function(e,n){return zn(function(o,r){return e.eq(n(o),n(r))})},zn=function(e){return{eq:e}},Pn=zn(function(e,n){return e===n}),Yt=Pn,So=function(e){return zn(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},_s=function(e,n){return wo(So(e),function(o){return Bo(o,n)})},Sn=function(e){return zn(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!_s(Yt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},co=zn(function(e,n){if(e===n)return!0;var o=fo(e),r=fo(n);return o!==r?!1:go(o)?e===n:o==="array"?So(co).eq(e,n):o==="object"?Sn(co).eq(e,n):!1});const no=Object.getPrototypeOf,io=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},dn=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&io(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},St=e=>n=>dn(n)===e,Ye=e=>n=>typeof n===e,Zn=e=>n=>e===n,mt=(e,n)=>kt(e)&&io(e,n,(o,r)=>no(o)===r),Z=St("string"),kt=St("object"),Un=e=>mt(e,Object),Vt=St("array"),q=Zn(null),gt=Ye("boolean"),tt=Zn(void 0),Dt=e=>e==null,he=e=>!Dt(e),Y=Ye("function"),Ls=Ye("number"),$n=(e,n)=>{if(Vt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},ht=()=>{},_=(e,n)=>(...o)=>e(n.apply(null,o)),Uo=(e,n)=>o=>e(n(o)),Fe=e=>()=>e,ho=e=>e,At=(e,n)=>e===n;function Ee(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const po=e=>n=>!e(n),va=e=>()=>{throw new Error(e)},ts=e=>e(),ra=e=>{e()},xe=Fe(!1),Qe=Fe(!0);class N{constructor(n,o){this.tag=n,this.value=o}static some(n){return new N(!0,n)}static none(){return N.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?N.some(n(this.value)):N.none()}bind(n){return this.tag?n(this.value):N.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:N.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return he(n)?N.some(n):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const Qm=Array.prototype.slice,lo=Array.prototype.indexOf,ps=Array.prototype.push,bo=(e,n)=>lo.call(e,n),O_=(e,n)=>{const o=bo(e,n);return o===-1?N.none():N.some(o)},$t=(e,n)=>bo(e,n)>-1,oo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Ht=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},fe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Tu=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Er=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Et=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Bd=(e,n,o)=>(Tu(e,(r,c)=>{o=n(o,r,c)}),o),Wo=(e,n,o)=>(fe(e,(r,c)=>{o=n(o,r,c)}),o),Pg=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return N.some(u);if(o(u,r))break}return N.none()},ns=(e,n)=>Pg(e,n,xe),ya=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return N.some(o)}return N.none()},Hp=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Vt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ps.apply(n,e[o])}return n},dc=(e,n)=>Hp(Ht(e,n)),Ys=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},No=e=>{const n=Qm.call(e,0);return n.reverse(),n},zp=(e,n)=>Et(e,o=>!$t(n,o)),ks=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Po=(e,n)=>{const o=Qm.call(e,0);return o.sort(n),o},ef=(e,n)=>n>=0&&n<e.length?N.some(e[n]):N.none(),Tr=e=>ef(e,0),Fl=e=>ef(e,e.length-1),Ca=Y(Array.from)?Array.from:e=>Qm.call(e),Nd=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return N.none()},$g=(e,n)=>{const o=[],r=Y(n)?c=>oo(o,u=>n(u,c)):c=>$t(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Lr=Object.keys,V0=Object.hasOwnProperty,Xe=(e,n)=>{const o=Lr(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},_n=(e,n)=>mc(e,(o,r)=>({k:r,v:n(o,r)})),mc=(e,n)=>{const o={};return Xe(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},za=e=>(n,o)=>{e[o]=n},Vp=(e,n,o,r)=>{Xe(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Pd=(e,n)=>{const o={},r={};return Vp(e,n,za(o),za(r)),{t:o,f:r}},xo=(e,n)=>{const o={};return Vp(e,n,za(o),ht),o},_u=(e,n)=>{const o=[];return Xe(e,(r,c)=>{o.push(n(r,c))}),o},tf=e=>_u(e,ho),uo=(e,n)=>Rt(e,n)?N.from(e[n]):N.none(),Rt=(e,n)=>V0.call(e,n),wa=(e,n)=>Rt(e,n)&&e[n]!==void 0&&e[n]!==null,$d=(e,n,o=co)=>Sn(o).eq(e,n),Up=e=>{const n={};return fe(e,o=>{n[o]={}}),Lr(n)},U0=e=>e.length!==void 0,aa=Array.isArray,_r=e=>{if(aa(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},bs=(e,n,o)=>{if(!e)return!1;if(o=o||e,U0(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Rt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},tl=(e,n)=>{const o=[];return bs(e,(r,c)=>{o.push(n(r,c,e))}),o},Wp=(e,n)=>{const o=[];return bs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Ll=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Va=(e,n,o,r)=>{let c=tt(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Mo=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Ic=e=>e[e.length-1],nl=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},A_=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,O=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,A=!x&&!y&&!O;return{isiPad:Fe(c),isiPhone:Fe(u),isTablet:Fe(y),isPhone:Fe(x),isTouch:Fe(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Fe(O),isDesktop:Fe(A)}},R_=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Hl=(e,n)=>{const o=R_(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Sa(r(1),r(2))},OF=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ne():Hl(e,o)},ne=()=>Sa(0,0),Sa=(e,n)=>({major:e,minor:n}),nf={nu:Sa,detect:OF,unknown:ne},zC=(e,n)=>Nd(n.brands,o=>{const r=o.brand.toLowerCase();return ns(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:nf.nu(parseInt(o.version,10),0)}))}),W0=(e,n)=>{const o=String(n).toLowerCase();return ns(e,r=>r.search(o))},vo=(e,n)=>W0(e,n).map(o=>{const r=nf.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Z0=(e,n)=>W0(e,n).map(o=>{const r=nf.detect(o.versionRegexes,n);return{current:o.name,version:r}}),D_=(e,n)=>e.substring(n),Ig=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,of=(e,n)=>ls(e,n)?D_(e,n.length):e,ir=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?tt(r)?!0:c+n.length<=r:!1},ls=(e,n)=>Ig(e,n,0),zl=(e,n)=>Ig(e,n,e.length-n.length),Fc=e=>n=>n.replace(e,""),Id=Fc(/^\s+|\s+$/g),Fg=Fc(/^\s+/g),sf=Fc(/\s+$/g),jn=e=>e.length>0,Ua=e=>!jn(e),M_=(e,n)=>n<=0?"":new Array(n+1).join(e),Fd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?N.none():N.some(o)},ku=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ca=e=>n=>ir(n,e),Xo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ir(e,"edge/")&&ir(e,"chrome")&&ir(e,"safari")&&ir(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ku],search:e=>ir(e,"chrome")&&!ir(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ir(e,"msie")||ir(e,"trident")},{name:"Opera",versionRegexes:[ku,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ca("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ca("firefox")},{name:"Safari",versionRegexes:[ku,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ir(e,"safari")||ir(e,"mobile/"))&&ir(e,"applewebkit")}],B_=[{name:"Windows",search:ca("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ir(e,"iphone")||ir(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ca("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ca("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ca("linux"),versionRegexes:[]},{name:"Solaris",search:ca("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ca("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ca("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],j0={browsers:Fe(Xo),oses:Fe(B_)},Fn="Edge",fc="Chromium",Wa="IE",lr="Opera",Zp="Firefox",Ld="Safari",Lc=()=>Hd({current:void 0,version:nf.unknown()}),Hd=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Fn),isChromium:r(fc),isIE:r(Wa),isOpera:r(lr),isFirefox:r(Zp),isSafari:r(Ld)}},vi={unknown:Lc,nu:Hd,edge:Fe(Fn),chromium:Fe(fc),ie:Fe(Wa),opera:Fe(lr),firefox:Fe(Zp),safari:Fe(Ld)},VC="Windows",G0="iOS",UC="Android",Hc="Linux",Ou="macOS",jp="Solaris",Gp="FreeBSD",q0="ChromeOS",K0=()=>Lg({current:void 0,version:nf.unknown()}),Lg=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(VC),isiOS:r(G0),isAndroid:r(UC),isMacOS:r(Ou),isLinux:r(Hc),isSolaris:r(jp),isFreeBSD:r(Gp),isChromeOS:r(q0)}},WC={unknown:K0,nu:Lg,windows:Fe(VC),ios:Fe(G0),android:Fe(UC),linux:Fe(Hc),macos:Fe(Ou),solaris:Fe(jp),freebsd:Fe(Gp),chromeos:Fe(q0)},zc={detect:(e,n,o)=>{const r=j0.browsers(),c=j0.oses(),u=n.bind(y=>zC(r,y)).orThunk(()=>vo(r,e)).fold(vi.unknown,vi.nu),f=Z0(c,e).fold(WC.unknown,WC.nu),b=A_(f,u,e,o);return{browser:u,os:f,deviceType:b}}},N_=e=>window.matchMedia(e).matches;let Y0=nl(()=>zc.detect(navigator.userAgent,N.from(navigator.userAgentData),N_));const yi=()=>Y0(),P_=navigator.userAgent,qp=yi(),Hs=qp.browser,Hr=qp.os,zd=qp.deviceType,ZC=P_.indexOf("Windows Phone")!==-1,Ue={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Hs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Hs.isIE(),windowsPhone:ZC,browser:{current:Hs.current,version:Hs.version,isChromium:Hs.isChromium,isEdge:Hs.isEdge,isFirefox:Hs.isFirefox,isIE:Hs.isIE,isOpera:Hs.isOpera,isSafari:Hs.isSafari},os:{current:Hr.current,version:Hr.version,isAndroid:Hr.isAndroid,isChromeOS:Hr.isChromeOS,isFreeBSD:Hr.isFreeBSD,isiOS:Hr.isiOS,isLinux:Hr.isLinux,isMacOS:Hr.isMacOS,isSolaris:Hr.isSolaris,isWindows:Hr.isWindows},deviceType:{isDesktop:zd.isDesktop,isiPad:zd.isiPad,isiPhone:zd.isiPhone,isPhone:zd.isPhone,isTablet:zd.isTablet,isTouch:zd.isTouch,isWebView:zd.isWebView}},jC=/^\s*|\s*$/g,To=e=>Dt(e)?"":(""+e).replace(jC,""),Xs=(e,n)=>n?n==="array"&&aa(e)?!0:typeof e===n:e!==void 0,X0=(e,n,o={})=>{const r=Z(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},$o=Rt,$_=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(Rt(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Hg=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),bs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Hg(c,n,o,r),!0)))},Me={trim:To,isArray:aa,is:Xs,toArray:_r,makeMap:X0,each:bs,map:tl,grep:Wp,inArray:Ll,hasOwn:$o,extend:$_,walk:Hg,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Vt(e)?e:e===""?[]:tl(e.split(n||","),To),_addCacheSuffix:e=>{const n=Ue.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Zo=(e,n,o=At)=>e.exists(r=>o(r,n)),Vg=(e,n,o=At)=>ur(e,n,o).getOr(e.isNone()&&n.isNone()),Js=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},ur=(e,n,o)=>e.isSome()&&n.isSome()?N.some(o(e.getOrDie(),n.getOrDie())):N.none(),Au=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?N.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):N.none(),gn=(e,n)=>e?N.some(n):N.none(),Vl=typeof window<"u"?window:Function("return this;")(),Qs=(e,n)=>{let o=n??Vl;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},rf=(e,n)=>{const o=e.split(".");return Qs(o,n)},vs=(e,n)=>rf(e,n),Ru=(e,n)=>{const o=vs(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},J0=Object.getPrototypeOf,GC=e=>Ru("HTMLElement",e),_o=e=>{const n=rf("ownerDocument.defaultView",e);return kt(e)&&(GC(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(J0(e).constructor.name))},qC=8,kr=9,ia=11,Ci=1,Kp=3,pn=e=>e.dom.nodeName.toLowerCase(),la=e=>e.dom.nodeType,Ul=e=>n=>la(n)===e,af=e=>la(e)===qC||pn(e)==="#comment",Vc=e=>Za(e)&&_o(e.dom),Za=Ul(Ci),yo=Ul(Kp),Ug=Ul(kr),Vd=Ul(ia),cf=e=>n=>Za(n)&&pn(n)===e,lf=(e,n,o)=>{if(Z(o)||gt(o)||Ls(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},so=(e,n,o)=>{lf(e.dom,n,o)},Wl=(e,n)=>{const o=e.dom;Xe(n,(r,c)=>{lf(o,c,r)})},ys=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},wi=(e,n)=>N.from(ys(e,n)),Ud=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Os=(e,n)=>{e.dom.removeAttribute(n)},Uc=e=>{const n=e.dom.attributes;return n==null||n.length===0},uf=e=>Wo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Yp=(e,n)=>{const o=ys(e,n);return o===void 0||o===""?[]:o.split(" ")},Wg=(e,n,o)=>{const c=Yp(e,n).concat([o]);return so(e,n,c.join(" ")),!0},Xp=(e,n,o)=>{const r=Et(Yp(e,n),c=>c!==o);return r.length>0?so(e,n,r.join(" ")):Os(e,n),!1},df=e=>e.dom.classList!==void 0,Jp=e=>Yp(e,"class"),Du=(e,n)=>Wg(e,"class",n),Zg=(e,n)=>Xp(e,"class",n),Ea=(e,n)=>$t(Jp(e),n)?Zg(e,n):Du(e,n),Wd=(e,n)=>{df(e)?e.dom.classList.add(n):Du(e,n)},Qp=e=>{(df(e)?e.dom.classList:Jp(e)).length===0&&Os(e,"class")},Zd=(e,n)=>{df(e)?e.dom.classList.remove(n):Zg(e,n),Qp(e)},KC=(e,n)=>{const o=df(e)?e.dom.classList.toggle(n):Ea(e,n);return Qp(e),o},jg=(e,n)=>df(e)&&e.dom.classList.contains(n),YC=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return ff(r.childNodes[0])},mf=(e,n)=>{const r=(n||document).createElement(e);return ff(r)},XC=(e,n)=>{const r=(n||document).createTextNode(e);return ff(r)},ff=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},j={fromHtml:YC,fromTag:mf,fromText:XC,fromDom:ff,fromPoint:(e,n,o)=>N.from(e.dom.elementFromPoint(n,o)).map(ff)},Q0=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},ja=(e,n)=>{const o=e.dom;if(o.nodeType!==Ci)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},jd=e=>e.nodeType!==Ci&&e.nodeType!==kr&&e.nodeType!==ia||e.childElementCount===0,ID=(e,n)=>{const o=n===void 0?document:n.dom;return jd(o)?[]:Ht(o.querySelectorAll(e),j.fromDom)},JC=(e,n)=>{const o=n===void 0?document:n.dom;return jd(o)?N.none():N.from(o.querySelector(e)).map(j.fromDom)},Dn=(e,n)=>e.dom===n.dom,Si=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Ga=e=>j.fromDom(e.dom.ownerDocument),zr=e=>Ug(e)?e:Ga(e),QC=e=>j.fromDom(zr(e).dom.documentElement),Gg=e=>j.fromDom(zr(e).dom.defaultView),gc=e=>N.from(e.dom.parentNode).map(j.fromDom),qg=e=>N.from(e.dom.parentElement).map(j.fromDom),ev=(e,n)=>{const o=Y(n)?n:xe;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=j.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},ew=e=>{const n=o=>Et(o,r=>!Dn(e,r));return gc(e).map(dr).map(n).getOr([])},Wc=e=>N.from(e.dom.previousSibling).map(j.fromDom),gf=e=>N.from(e.dom.nextSibling).map(j.fromDom),tv=e=>No(Q0(e,Wc)),hc=e=>Q0(e,gf),dr=e=>Ht(e.dom.childNodes,j.fromDom),Mu=(e,n)=>{const o=e.dom.childNodes;return N.from(o[n]).map(j.fromDom)},hf=e=>Mu(e,0),Zc=e=>Mu(e,e.dom.childNodes.length-1),Vr=e=>e.dom.childNodes.length,e1=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return j.fromDom(n)},t1=e=>Vd(e)&&he(e.dom.host),n1=Y(Element.prototype.attachShadow)&&Y(Node.prototype.getRootNode),o1=Fe(n1),xi=n1?e=>j.fromDom(e.dom.getRootNode()):zr,s1=e=>t1(e)?e:e1(zr(e)),tw=e=>t1(e)?e:j.fromDom(zr(e).dom.body),F_=e=>{const n=xi(e);return t1(n)?N.some(n):N.none()},AF=e=>j.fromDom(e.dom.host),nw=e=>{if(o1()&&he(e.target)){const n=j.fromDom(e.target);if(Za(n)&&nv(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Tr(o)}}return N.from(e.target)},nv=e=>he(e.dom.shadowRoot),pf=e=>{const n=yo(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return F_(j.fromDom(n)).fold(()=>o.body.contains(n),Uo(pf,AF))};var ov=(e,n,o,r,c)=>e(o,r)?N.some(o):Y(c)&&c(o)?N.none():n(o,r,c);const ko=(e,n,o)=>{let r=e.dom;const c=Y(o)?o:xe;for(;r.parentNode;){r=r.parentNode;const u=j.fromDom(r);if(n(u))return N.some(u);if(c(u))break}return N.none()},jo=(e,n,o)=>ov((c,u)=>u(c),ko,e,n,o),jc=(e,n)=>{const o=e.dom;return o.parentNode?sv(j.fromDom(o.parentNode),r=>!Dn(e,r)&&n(r)):N.none()},sv=(e,n)=>{const o=c=>n(j.fromDom(c));return ns(e.dom.childNodes,o).map(j.fromDom)},ow=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=j.fromDom(r.childNodes[c]);if(n(u))return N.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return N.none()};return o(e.dom)},zs=(e,n,o)=>ko(e,r=>ja(r,n),o),pt=(e,n)=>JC(n,e),Bu=(e,n,o)=>ov((c,u)=>ja(c,u),zs,e,n,o),sw=e=>Bu(e,"[contenteditable]"),er=(e,n=!1)=>pf(e)?e.dom.isContentEditable:sw(e).fold(Fe(n),o=>Vn(o)==="true"),Vn=e=>e.dom.contentEditable,Gd=e=>e.style!==void 0&&Y(e.style.getPropertyValue),rv=(e,n,o)=>{if(!Z(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Gd(e)&&e.style.setProperty(n,o)},r1=(e,n)=>{Gd(e)&&e.style.removeProperty(n)},rw=(e,n,o)=>{const r=e.dom;rv(r,n,o)},Ut=(e,n)=>{const o=e.dom;Xe(n,(r,c)=>{rv(o,c,r)})},Cs=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!pf(e)?a1(o,n):c},a1=(e,n)=>Gd(e)?e.style.getPropertyValue(n):"",Ta=(e,n)=>{const o=e.dom,r=a1(o,n);return N.from(r).filter(c=>c.length>0)},ua=e=>{const n={},o=e.dom;if(Gd(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},pc=(e,n)=>{const o=e.dom;r1(o,n),Zo(wi(e,"style").map(Id),"")&&Os(e,"style")},tr=e=>e.dom.offsetWidth,da=(e,n)=>{gc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},bc=(e,n)=>{gf(e).fold(()=>{gc(e).each(c=>{Io(c,n)})},r=>{da(r,n)})},c1=(e,n)=>{hf(e).fold(()=>{Io(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Io=(e,n)=>{e.dom.appendChild(n.dom)},av=(e,n)=>{da(e,n),Io(n,e)},os=(e,n)=>{fe(n,(o,r)=>{const c=r===0?e:n[r-1];bc(c,o)})},Nu=(e,n)=>{fe(n,o=>{Io(e,o)})},qd=e=>{e.dom.textContent="",fe(dr(e),n=>{ro(n)})},ro=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Zl=e=>{const n=dr(e);n.length>0&&os(e,n),ro(e)},FD=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,dr(j.fromDom(r))},cv=e=>Ht(e,j.fromDom),Fo=e=>e.dom.innerHTML,i1=(e,n)=>{const r=Ga(e).dom,c=j.fromDom(r.createDocumentFragment()),u=FD(n,r);Nu(c,u),qd(e),Io(e,c)},ol=e=>{const n=j.fromTag("div"),o=j.fromDom(e.dom.cloneNode(!0));return Io(n,o),Fo(n)},nn=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),bf=e=>{const n=j.fromDom(nw(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=_(r,o);return nn(n,e.clientX,e.clientY,o,r,c,e)},l1=(e,n)=>o=>{e(o)&&n(bf(o))},u1=(e,n,o,r,c)=>{const u=l1(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ee(aw,e,n,u,c)}},L_=(e,n,o,r)=>u1(e,n,o,r,!1),aw=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},iv=(e,n)=>({left:e,top:n,translate:(r,c)=>iv(e+r,n+c)}),vf=iv,d1=e=>{const n=e.getBoundingClientRect();return vf(n.left,n.top)},yf=(e,n)=>e!==void 0?e:n!==void 0?n:0,lv=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return vf(o.offsetLeft,o.offsetTop);const u=yf(r==null?void 0:r.pageYOffset,c.scrollTop),f=yf(r==null?void 0:r.pageXOffset,c.scrollLeft),b=yf(c.clientTop,o.clientTop),y=yf(c.clientLeft,o.clientLeft);return m1(e).translate(f-y,u-b)},m1=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?vf(r.offsetLeft,r.offsetTop):pf(e)?d1(n):vf(0,0)},_a=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return vf(o,r)},cw=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Kg=(e,n)=>{yi().browser.isSafari()&&Y(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Yg=e=>{const n=e===void 0?window:e;return yi().browser.isFirefox()?N.none():N.from(n.visualViewport)},iw=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),uv=e=>{const n=e===void 0?window:e,o=n.document,r=_a(j.fromDom(o));return Yg(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return iw(r.left,r.top,u,f)},c=>iw(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Kd=(e,n)=>Et(dr(e),n),f1=(e,n)=>{let o=[];return fe(dr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(f1(r,n))}),o},mr=(e,n)=>ID(n,e),g1=(e,n,o)=>ko(e,n,o).isSome(),lw=(e,n)=>jc(e,n).isSome(),h1=(e,n)=>ow(e,n).isSome();class Vs{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Xg="\uFEFF",us=" ",dv=e=>e===Xg,Ur=e=>e.replace(/\uFEFF/g,""),_t=/^[ \t\r\n]*$/,Gc=e=>_t.test(e),Jg=e=>{for(const n of e)if(!dv(n))return!1;return!0},p1=e=>" \f	\v".indexOf(e)!==-1,uw=e=>e===`
`||e==="\r",mv=(e,n)=>n<e.length&&n>=0?uw(e[n]):!1,qc=(e,n=4,o=!0,r=!0)=>{const c=M_(" ",n),u=e.replace(/\t/g,c);return Wo(u,(b,y)=>p1(y)||y===us?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||mv(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+us}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:uw(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},sl=e=>n=>!!n&&n.nodeType===e,Pu=e=>!!e&&!Object.getPrototypeOf(e),je=sl(1),vc=e=>je(e)&&Vc(j.fromDom(e)),fv=e=>je(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Yd=e=>{const n=e.toLowerCase();return o=>he(o)&&o.nodeName.toLowerCase()===n},Kc=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return $t(n,r)}return!1}},Qg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(je(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},$u=e=>n=>je(n)&&n.hasAttribute(e),Xd=e=>je(e)&&e.hasAttribute("data-mce-bogus"),eh=e=>je(e)&&e.getAttribute("data-mce-bogus")==="all",Ei=e=>je(e)&&e.tagName==="TABLE",dw=e=>n=>!!(vc(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Oo=Kc(["textarea","input"]),_e=sl(3),Wr=sl(4),Ti=sl(7),As=sl(8),Cf=sl(9),ws=sl(11),bn=Yd("br"),b1=Yd("img"),be=dw("true"),vn=dw("false"),v1=Kc(["td","th"]),ds=Kc(["td","th","caption"]),Or=Kc(["video","audio","object","embed"]),H_=Yd("li"),qa=Yd("details"),z_=Yd("summary"),jl={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},mw=(e,n,o)=>{const r=j.fromDom(n),c=j.fromDom(e),u=o.getWhitespaceElements();return g1(c,b=>Rt(u,pn(b)),Ee(Dn,r))},Ka=e=>je(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),hn=(e,n)=>je(e)&&Rt(n.getNonEmptyElements(),e.nodeName),rl=$u("data-mce-bookmark"),Jd=e=>qg(j.fromDom(e)).exists(n=>!er(n)),Ss=(e,n,o)=>Gc(e.data)&&!mw(e,n,o),gv=(e,n,o,r)=>_e(e)&&!Ss(e,n,o)&&(!r.includeZwsp||!Jg(e.data)),al=(e,n,o,r)=>Y(r.isContent)&&r.isContent(n)||hn(n,e)||rl(n)||Ka(n)||gv(n,o,e,r)||vn(n)||be(n)&&Jd(n),cl=(e,n,o)=>{const r={...jl,...o};if(r.checkRootAsContent&&al(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new Vs(c,n);do{if(r.skipBogus&&je(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(As(c)){c=f.next(!0);continue}if(bn(c)){u++,c=f.next();continue}if(al(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},ao=(e,n,o)=>cl(e,n.dom,{checkRootAsContent:!0,...o}),hv=(e,n,o)=>al(e,n,n,{includeZwsp:jl.includeZwsp,...o}),te=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},yc=e=>{const n=te(N.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(b))}}},wf=e=>{const n=te(N.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(setInterval(b,e)))}}},Ar=()=>{const e=yc(ht);return{...e,on:o=>e.get().each(o)}},Yc=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Jo=e=>Yc(e)!=="html",Go=e=>Jo(e.nodeName),V_=e=>Yc(e.nodeName),Xc=["svg","math"],pv=()=>{const e=Ar(),n=()=>e.get().map(V_).getOr("html");return{track:c=>(Go(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},bv="data-mce-block",Jc=e=>Et(Lr(e),n=>!/[A-Z]/.test(n)),vv=e=>Ht(Jc(e),n=>{const o=CSS.escape(n);return`${o}:`+Ht(Xc,r=>`not(${r} ${o})`).join(":")}).join(","),fw=(e,n)=>he(n.querySelector(e))?(n.setAttribute(bv,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(bv),!1),gw=(e,n)=>{const o=vv(e.getTransparentElements()),r=vv(e.getBlockElements());return Et(n.querySelectorAll(o),c=>fw(r,c))},hw=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(cl(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},U_=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();hw(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();hw(e,f,!1),cl(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),cl(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),cl(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},Sf=(e,n,o)=>{const r=e.getBlockElements(),c=j.fromDom(n),u=b=>pn(b)in r,f=b=>Dn(b,c);fe(cv(o),b=>{ko(b,u,f).each(y=>{const x=Kd(b,O=>u(O)&&!e.isValidChild(pn(y),pn(O)));if(x.length>0){const O=qg(y);fe(x,A=>{ko(A,u,f).each(D=>{U_(e,D.dom,A.dom)})}),O.each(A=>gw(e,A.dom))}})})},Iu=(e,n,o)=>{fe([...o,...Fu(e,n)?[n]:[]],r=>fe(mr(j.fromDom(r),r.nodeName.toLowerCase()),c=>{bw(e,c.dom)&&Zl(c)}))},th=(e,n)=>{const o=gw(e,n);Sf(e,n,o),Iu(e,n,o)},pw=(e,n)=>{if(xf(e,n)){const o=vv(e.getBlockElements());fw(o,n)}},W_=(e,n,o)=>{const r=u=>Dn(u,j.fromDom(n)),c=ev(j.fromDom(o),r);ef(c,c.length-2).filter(Za).fold(()=>th(e,n),u=>th(e,u.dom))},_i=e=>e.hasAttribute(bv),y1=(e,n)=>Rt(e.getTransparentElements(),n),xf=(e,n)=>je(n)&&y1(e,n.nodeName),Fu=(e,n)=>xf(e,n)&&_i(n),bw=(e,n)=>xf(e,n)&&!_i(n),Gl=(e,n)=>n.type===1&&y1(e,n.name)&&Z(n.attr(bv)),vw=yi().browser,yw=e=>ns(e,Za),Z_=e=>vw.isFirefox()&&pn(e)==="table"?yw(dr(e)).filter(n=>pn(n)==="caption").bind(n=>yw(hc(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,C1=(e,n)=>e.children&&$t(e.children,n),Rs=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Cs(j.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!C1(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!C1(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Z_(j.fromDom(n))}return{x:r,y:c}},ki=(e,n={})=>{let o=0;const r={},c=j.fromDom(e),u=zr(c),f=K=>{n.referrerPolicy=K},b=K=>{n.contentCssCors=K},y=K=>{Io(s1(c),K)},x=K=>{const Q=s1(c);pt(Q,"#"+K).each(ro)},O=K=>uo(r,K).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),A=K=>new Promise((Q,X)=>{let re;const we=Me._addCacheSuffix(K),De=O(we);r[we]=De,De.count++;const Ge=(nt,lt)=>{fe(nt,ra),De.status=lt,De.passed=[],De.failed=[],re&&(re.onload=null,re.onerror=null,re=null)},ge=()=>Ge(De.passed,2),ue=()=>Ge(De.failed,3);if(Q&&De.passed.push(Q),X&&De.failed.push(X),De.status===1)return;if(De.status===2){ge();return}if(De.status===3){ue();return}De.status=1;const Ce=j.fromTag("link",u.dom);Wl(Ce,{rel:"stylesheet",type:"text/css",id:De.id}),n.contentCssCors&&so(Ce,"crossOrigin","anonymous"),n.referrerPolicy&&so(Ce,"referrerpolicy",n.referrerPolicy),re=Ce.dom,re.onload=ge,re.onerror=ue,y(Ce),so(Ce,"href",we)}),D=(K,Q)=>{const X=O(K);r[K]=X,X.count++;const re=j.fromTag("style",u.dom);Wl(re,{rel:"stylesheet",type:"text/css",id:X.id}),re.dom.innerHTML=Q,y(re)},$=K=>Promise.allSettled(Ht(K,X=>A(X).then(Fe(X)))).then(X=>{const re=Er(X,we=>we.status==="fulfilled");return re.fail.length>0?Promise.reject(Ht(re.fail,we=>we.reason)):Ht(re.pass,we=>we.value)}),z=K=>{const Q=Me._addCacheSuffix(K);uo(r,Q).each(X=>{--X.count===0&&(delete r[Q],x(X.id))})};return{load:A,loadRawCss:D,loadAll:$,unload:z,unloadRawCss:K=>{uo(r,K).each(Q=>{--Q.count===0&&(delete r[K],x(Q.id))})},unloadAll:K=>{fe(K,Q=>{z(Q)})},_setReferrerPolicy:f,_setContentCssCors:b}},Lu=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=xi(o).dom;return N.from(e.get(u)).getOrThunk(()=>{const f=ki(u,r);return e.set(u,f),f})}}})(),Cw=e=>e.nodeName.toLowerCase()==="span",ka=(e,n)=>he(e)&&(hv(n,e)||n.isInline(e.nodeName.toLowerCase())),w1=(e,n,o)=>{const r=new Vs(e,n).prev(!1),c=new Vs(e,n).next(!1),u=tt(r)||ka(r,o),f=tt(c)||ka(c,o);return u&&f},Qd=e=>Cw(e)&&e.getAttribute("data-mce-type")==="bookmark",S1=(e,n,o)=>_e(e)&&e.data.length>0&&w1(e,n,o),il=e=>je(e)?e.childNodes.length>0:!1,Oi=e=>ws(e)||Cf(e),ll=(e,n,o,r)=>{var c;const u=r||n;if(je(n)&&Qd(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)ll(e,f[b],o,u);if(je(n)){const b=n.childNodes;b.length===1&&Qd(b[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(b[0],n))}return!Oi(n)&&!hv(o,n)&&!il(n)&&!S1(n,u,o)&&e.remove(n),n},Qc=Me.makeMap,oh=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ul=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ef=/[<>&\"\']/g,em=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ww={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Ai={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Sw={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},yv=e=>{const n=j.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Lo=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Ai[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},x1=Lo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ri=(e,n)=>e.replace(n?oh:ul,o=>Ai[o]||o),Hu=e=>(""+e).replace(Ef,n=>Ai[n]||n),ql=(e,n)=>e.replace(n?oh:ul,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Ai[o]||"&#"+o.charCodeAt(0)+";"),Cc=(e,n,o)=>{const r=o||x1;return e.replace(n?oh:ul,c=>Ai[c]||r[c]||c)},Di={encodeRaw:Ri,encodeAllRaw:Hu,encodeNumeric:ql,encodeNamed:Cc,getEncodeFunc:(e,n)=>{const o=Lo(n)||x1,r=(f,b)=>f.replace(b?oh:ul,y=>Ai[y]!==void 0?Ai[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>Cc(f,b,o),u=Qc(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Cc:u.numeric?ql:Ri},decode:e=>e.replace(em,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):ww[o]||String.fromCharCode(o)):Sw[n]||x1[n]||yv(n))},fr=(e,n)=>(e=Me.trim(e),e?e.split(n||" "):[]),rh=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Cv=e=>kt(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",ah=e=>{const n=o=>Vt(o)?Ht(o,n):Cv(o)?new RegExp(o.source,o.flags):kt(o)?_n(o,n):o;return n(e)},ch=e=>{const n=/^(~)?(.+)$/;return dc(fr(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},wv=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),tm=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Mi=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=tm(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Zr={html4:nl(()=>Mi("html4")),html5:nl(()=>Mi("html5")),"html5-strict":nl(()=>Mi("html5-strict"))},Sc=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Zr[e]();return n==="blocks"?N.some(o):n==="phrasing"?N.some(r):n==="flow"?N.some(c):N.none()},zu=e=>{const n=wv(e),{phrasingContent:o,flowContent:r}=tm(e),c={},u=(y,x,O)=>{c[y]={attributes:ks(x,Fe({})),attributesOrder:x,children:ks(O,Fe({}))}},f=(y,x="",O="")=>{const A=fr(O),D=fr(y);let $=D.length;const z=[...n,...fr(x)];for(;$--;)u(D[$],z.slice(),A)},b=(y,x)=>{const O=fr(y),A=fr(x);let D=O.length;for(;D--;){const $=c[O[D]];for(let z=0,L=A.length;z<L;z++)$.attributes[A[z]]={},$.attributesOrder.push(A[z])}};return e!=="html5-strict"&&(fe(fr("acronym applet basefont big font strike tt"),O=>{f(O,"",o)}),fe(fr("center dir isindex noframes"),O=>{f(O,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&fe([c.video,c.audio],y=>{delete y.children.audio,delete y.children.video}),fe(fr("a form meter progress dfn"),y=>{c[y]&&delete c[y].children[y]}),delete c.caption.children.table,delete c.script,c},Sv=e=>e==="-"?"remove":"add",nm=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return N.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},xv=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return dc(fr(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?Sv(c):"replace",f=r[2],b=dc(fr(r[3],"|"),y=>nm(y).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},xw=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return fe(fr(e,"|"),f=>{const b=o.exec(f);if(b){const y={},x=b[1],O=b[2].replace(/[\\:]:/g,":"),A=b[3],D=b[4];if(x==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(O),y.required=!0),x==="-"){delete c[O],u.splice(Me.inArray(u,O),1);return}if(A&&(A==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:O,value:D}),y.defaultValue=D):A==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:O,value:D}),y.forcedValue=D):A==="<"&&(y.validValues=Me.makeMap(D,"?"))),r.test(O)){const $=y;n.attributePatterns=n.attributePatterns||[],$.pattern=rh(O),n.attributePatterns.push($)}else c[O]||u.push(O),c[O]=y}})},Ew=(e,n)=>{Xe(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Tw=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return dc(fr(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],y=c[4],x=c[5],O={attributes:{},attributesOrder:[]};if(e.each(A=>Ew(A,O)),u==="#"?O.paddEmpty=!0:u==="-"&&(O.removeEmpty=!0),y==="!"&&(O.removeEmptyAttrs=!0),x&&xw(x,O),b&&(O.outputName=f),f==="@")if(e.isNone())e=N.some(O);else return[];return[b?{name:f,element:O,aliasName:b}:{name:f,element:O}]}else return[]})},Vu={},om=Me.makeMap,Zt=Me.each,ft=Me.extend,Uu=Me.explode,ih=(e,n={})=>{const o=om(e," ",om(e.toUpperCase()," "));return ft(o,n)},E1=e=>ih("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Ev=(e,n)=>{if(e){const o={};return Z(e)&&(e={"*":e}),Zt(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?om(r,/[, ]/):Uu(r,/[, ]/)}),o}else return},dl=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(ut,cn,Ro)=>{const Yo=e[ut];if(Yo)return om(Yo,/[, ]/,om(Yo.toUpperCase(),/[, ]/));{let is=Vu[ut];return is||(is=ih(cn,Ro),Vu[ut]=is),is}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=zu(y);e.verify_html===!1&&(e.valid_elements="*[*]");const O=Ev(e.valid_styles),A=Ev(e.invalid_styles,"map"),D=Ev(e.valid_classes,"map"),$=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),z=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),L=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),V=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),K="td th iframe video audio object script code",Q=b("non_empty_elements",K+" pre svg textarea summary",L),X=b("move_caret_before_on_enter_elements",K+" table",L),re="h1 h2 h3 h4 h5 h6",we=b("text_block_elements",re+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),De=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",we),Ge=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ge=b("transparent_elements","a ins del canvas map"),ue=b("wrap_block_elements","pre "+re);Zt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ut=>{f[ut]=new RegExp("</"+ut+"[^>]*>","gi")});const Ce=ut=>{const cn=N.from(o["@"]),Ro=/[*?+]/;fe(Tw(cn,ut??""),({name:Yo,element:is,aliasName:Ks})=>{if(Ks&&(o[Ks]=is),Ro.test(Yo)){const Qo=is;Qo.pattern=rh(Yo),c.push(Qo)}else o[Yo]=is})},nt=ut=>{c=[],fe(Lr(o),cn=>{delete o[cn]}),Ce(ut)},lt=(ut,cn)=>{var Ro,Yo;delete Vu.text_block_elements,delete Vu.block_elements;const is=cn.extends?!cc(cn.extends):!1,Ks=cn.extends;if(r[ut]=Ks?r[Ks]:{},u[ut]=Ks??ut,Q[ut.toUpperCase()]={},Q[ut]={},is||(De[ut.toUpperCase()]={},De[ut]={}),Ks&&!o[ut]&&o[Ks]){const Qo=ah(o[Ks]);delete Qo.removeEmptyAttrs,delete Qo.removeEmpty,o[ut]=Qo}else o[ut]={attributesOrder:[],attributes:{}};if(Vt(cn.attributes)){const Qo=Ir=>{es.attributesOrder.push(Ir),es.attributes[Ir]={}},es=(Ro=o[ut])!==null&&Ro!==void 0?Ro:{};delete es.attributesDefault,delete es.attributesForced,delete es.attributePatterns,delete es.attributesRequired,es.attributesOrder=[],es.attributes={},fe(cn.attributes,Ir=>{const fi=wv(y);nm(Ir).each(({preset:Pc,name:Ji})=>{Pc?Ji==="global"&&fe(fi,Qo):Qo(Ji)})}),o[ut]=es}if(gt(cn.padEmpty)){const Qo=(Yo=o[ut])!==null&&Yo!==void 0?Yo:{};Qo.paddEmpty=cn.padEmpty,o[ut]=Qo}if(Vt(cn.children)){const Qo={},es=fi=>{Qo[fi]={}},Ir=fi=>{Sc(y,fi).each(Pc=>{fe(Pc,es)})};fe(cn.children,fi=>{nm(fi).each(({preset:Pc,name:Ji})=>{Pc?Ir(Ji):es(Ji)})}),r[ut]=Qo}Ks&&Xe(r,(Qo,es)=>{Qo[Ks]&&(r[es]=Qo=ft({},r[es]),Qo[ut]=Qo[Ks])})},qt=ut=>{fe(ch(ut??""),({name:cn,cloneName:Ro})=>{lt(cn,{extends:Ro})})},jt=ut=>{kt(ut)?Xe(ut,(cn,Ro)=>lt(Ro,cn)):Z(ut)&&qt(ut)},wn=ut=>{fe(xv(ut??""),({operation:cn,name:Ro,validChildren:Yo})=>{const is=cn==="replace"?{"#comment":{}}:r[Ro],Ks=es=>{cn==="remove"?delete is[es]:is[es]={}},Qo=es=>{Sc(y,es).each(Ir=>{fe(Ir,Ks)})};fe(Yo,({preset:es,name:Ir})=>{es?Qo(Ir):Ks(Ir)}),r[Ro]=is})},Nn=ut=>{const cn=o[ut];if(cn)return cn;let Ro=c.length;for(;Ro--;){const Yo=c[Ro];if(Yo.pattern.test(ut))return Yo}},Vo=()=>{e.valid_elements?(nt(e.valid_elements),Zt(x,(ut,cn)=>{r[cn]=ut.children})):(Zt(x,(ut,cn)=>{o[cn]={attributes:ut.attributes,attributesOrder:ut.attributesOrder},r[cn]=ut.children}),Zt(fr("strong/b em/i"),ut=>{const cn=fr(ut,"/");o[cn[1]].outputName=cn[0]}),Zt(Ge,(ut,cn)=>{o[cn]&&(e.padd_empty_block_inline_children&&(o[cn].paddInEmptyBlock=!0),o[cn].removeEmpty=!0)}),Zt(fr("ol ul blockquote a table tbody"),ut=>{o[ut]&&(o[ut].removeEmpty=!0)}),Zt(fr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ut=>{o[ut]&&(o[ut].paddEmpty=!0)}),Zt(fr("span"),ut=>{o[ut].removeEmptyAttrs=!0})),delete o.svg,jt(e.custom_elements),wn(e.valid_children),Ce(e.extended_valid_elements),wn("+ol[ul|ol],+ul[ul|ol]"),Zt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ut,cn)=>{o[cn]&&(o[cn].parentsRequired=fr(ut))}),e.invalid_elements&&Zt(Uu(e.invalid_elements),ut=>{o[ut]&&delete o[ut]}),Nn("span")||Ce("span[!data-mce-type|*]")},Cr=Fe(O),In=Fe(A),$e=Fe(D),at=Fe(V),mn=Fe(De),Ve=Fe(we),vt=Fe(Ge),Xt=Fe(Object.seal(L)),Ze=Fe(z),Kt=Fe(Q),en=Fe(X),Fs=Fe($),Rn=Fe(ge),gs=Fe(ue),ui=Fe(Object.seal(f)),Il=(ut,cn)=>{const Ro=r[ut.toLowerCase()];return!!(Ro&&Ro[cn.toLowerCase()])},na=(ut,cn)=>{const Ro=Nn(ut);if(Ro)if(cn){if(Ro.attributes[cn])return!0;const Yo=Ro.attributePatterns;if(Yo){let is=Yo.length;for(;is--;)if(Yo[is].pattern.test(cn))return!0}}else return!0;return!1},cc=ut=>Rt(mn(),ut),di=ut=>!ls(ut,"#")&&na(ut)&&!cc(ut),Ha=ut=>Rt(gs(),ut)||di(ut),mi=Fe(u);return Vo(),{type:y,children:r,elements:o,getValidStyles:Cr,getValidClasses:$e,getBlockElements:mn,getInvalidStyles:In,getVoidElements:Xt,getTextBlockElements:Ve,getTextInlineElements:vt,getBoolAttrs:at,getElementRule:Nn,getSelfClosingElements:Ze,getNonEmptyElements:Kt,getMoveCaretBeforeOnEnterElements:en,getWhitespaceElements:Fs,getTransparentElements:Rn,getSpecialElements:ui,isValidChild:Il,isValid:na,isBlock:cc,isInline:di,isWrapper:Ha,getCustomElements:mi,addValidElements:Ce,setValidElements:nt,addCustomElements:jt,addValidChildren:wn}},Gn=e=>({value:_w(e)}),_w=e=>of(e,"#").toUpperCase(),Tv=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},T1=e=>{const n=Tv(e.red)+Tv(e.green)+Tv(e.blue);return Gn(n)},ve=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,sm=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,j_=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Wu=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return j_(c,u,f,b)},G_=e=>ve.test(e)?"rgb":sm.test(e)?"rgba":"other",rm=e=>{const n=ve.exec(e);if(n!==null)return N.some(Wu(n[1],n[2],n[3],"1"));const o=sm.exec(e);return o!==null?N.some(Wu(o[1],o[2],o[3],o[4])):N.none()},_v=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Bi=e=>rm(e).map(T1).map(n=>"#"+n.value).getOr(e),kv=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=Xg;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let A=0;A<x.length;A++)u[x[A]]=y+A,u[y+A]=x[A];const O={parse:A=>{const D={};let $=!1;const z=e.url_converter,L=e.url_converter_scope||O,V=(ge,ue,Ce)=>{const nt=D[ge+"-top"+ue];if(!nt)return;const lt=D[ge+"-right"+ue];if(!lt)return;const qt=D[ge+"-bottom"+ue];if(!qt)return;const jt=D[ge+"-left"+ue];if(!jt)return;const wn=[nt,lt,qt,jt];let Nn=wn.length-1;for(;Nn--&&wn[Nn]===wn[Nn+1];);Nn>-1&&Ce||(D[ge+ue]=Nn===-1?wn[0]:wn.join(" "),delete D[ge+"-top"+ue],delete D[ge+"-right"+ue],delete D[ge+"-bottom"+ue],delete D[ge+"-left"+ue])},K=ge=>{const ue=D[ge];if(!ue)return;const Ce=ue.indexOf(",")>-1?[ue]:ue.split(" ");let nt=Ce.length;for(;nt--;)if(Ce[nt]!==Ce[0])return!1;return D[ge]=Ce[0],!0},Q=(ge,ue,Ce,nt)=>{K(ue)&&K(Ce)&&K(nt)&&(D[ge]=D[ue]+" "+D[Ce]+" "+D[nt],delete D[ue],delete D[Ce],delete D[nt])},X=ge=>($=!0,u[ge]),re=(ge,ue)=>($&&(ge=ge.replace(/\uFEFF[0-9]/g,Ce=>u[Ce])),ue||(ge=ge.replace(/\\([\'\";:])/g,"$1")),ge),we=ge=>String.fromCharCode(parseInt(ge.slice(1),16)),De=ge=>ge.replace(/\\[0-9a-f]+/gi,we),Ge=(ge,ue,Ce,nt,lt,qt)=>{if(lt=lt||qt,lt)return lt=re(lt),"'"+lt.replace(/\'/g,"\\'")+"'";if(ue=re(ue||Ce||nt||""),!e.allow_script_urls){const jt=ue.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(jt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(jt))return""}return z&&(ue=z.call(L,ue,"style")),"url('"+ue.replace(/\'/g,"\\'")+"')"};if(A){A=A.replace(/[\u0000-\u001F]/g,""),A=A.replace(/\\[\"\';:\uFEFF]/g,X).replace(/\"[^\"]+\"|\'[^\']+\'/g,ue=>ue.replace(/[;:]/g,X));let ge;for(;ge=r.exec(A);){r.lastIndex=ge.index+ge[0].length;let ue=ge[1].replace(c,"").toLowerCase(),Ce=ge[2].replace(c,"");if(ue&&Ce){if(ue=De(ue),Ce=De(Ce),ue.indexOf(y)!==-1||ue.indexOf('"')!==-1||!e.allow_script_urls&&(ue==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ce)))continue;ue==="font-weight"&&Ce==="700"?Ce="bold":(ue==="color"||ue==="background-color")&&(Ce=Ce.toLowerCase()),G_(Ce)==="rgb"&&rm(Ce).each(nt=>{Ce=Bi(_v(nt)).toLowerCase()}),Ce=Ce.replace(o,Ge),D[ue]=$?re(Ce,!0):Ce}}V("border","",!0),V("border","-width"),V("border","-color"),V("border","-style"),V("padding",""),V("margin",""),Q("border","border-width","border-style","border-color"),D.border==="medium none"&&delete D.border,D["border-image"]==="none"&&delete D["border-image"]}return D},serialize:(A,D)=>{let $="";const z=(V,K)=>{const Q=K[V];if(Q)for(let X=0,re=Q.length;X<re;X++){const we=Q[X],De=A[we];De&&($+=($.length>0?" ":"")+we+": "+De+";")}},L=(V,K)=>{if(!b||!K)return!0;let Q=b["*"];return Q&&Q[V]?!1:(Q=b[K],!(Q&&Q[V]))};return D&&f?(z("*",f),z(D,f)):Xe(A,(V,K)=>{V&&L(K,D)&&($+=($.length>0?" ":"")+K+": "+V+";")}),$}};return O},Tf={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Jn=e=>e instanceof Event||Y(e.initEvent),ml=e=>e.isDefaultPrevented===Qe||e.isDefaultPrevented===xe,kw=e=>Dt(e.preventDefault)||Jn(e),ei=(e,n)=>{const o=n??{};for(const r in e)Rt(Tf,r)||(o[r]=e[r]);return he(e.composedPath)&&(o.composedPath=()=>e.composedPath()),he(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),he(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Ov=(e,n,o,r)=>{var c;const u=ei(n,r);return u.type=e,Dt(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),kw(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Qe,Y(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Qe,Y(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Qe,u.stopPropagation()},ml(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Qe:xe,u.isPropagationStopped=u.cancelBubble===!0?Qe:xe,u.isImmediatePropagationStopped=xe)),u},lh="mce-data-",_f=/^(?:mouse|contextmenu)|click/,uh=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Oa=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Ow=e=>he(e)&&_f.test(e.type),dh=(e,n)=>{const o=Ov(e.type,e,document,n);if(Ow(e)&&tt(e.pageX)&&!tt(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Av=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Oa(e,"DOMContentLoaded",f),Oa(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():uh(e,"DOMContentLoaded",f),o.domLoaded||uh(e,"load",f)};class Zu{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=lh+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=D=>{u.executeHandlers(dh(D||b.event),x)};if(!n||_e(n)||As(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const O=o.split(" ");let A=O.length;for(;A--;){let D=O[A],$=y,z=!1,L=!1;if(D==="DOMContentLoaded"&&(D="ready"),u.domLoaded&&D==="ready"&&n.readyState==="complete"){r.call(c,dh({type:D}));continue}!u.hasFocusIn&&(D==="focusin"||D==="focusout")&&(z=!0,L=D==="focusin"?"focus":"blur",$=V=>{const K=dh(V||b.event);K.type=K.type==="focus"?"focusin":"focusout",u.executeHandlers(K,x)}),f=u.events[x][D],f?D==="ready"&&u.domLoaded?r(dh({type:D})):f.push({func:r,scope:c}):(u.events[x][D]=f=[{func:r,scope:c}],f.fakeName=L,f.capture=z,f.nativeHandler=$,D==="ready"?Av(n,$,u):uh(n,L||D,$,z))}return n=f=null,r}unbind(n,o,r){if(!n||_e(n)||As(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let O=x.length;for(;O--;)if(x[O].func===r){const A=x.nativeHandler,D=x.fakeName,$=x.capture,z=x.slice(0,O).concat(x.slice(O+1));z.nativeHandler=A,z.fakeName=D,z.capture=$,u[y]=z}}(!r||x.length===0)&&(delete u[y],Oa(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else Xe(u,(f,b)=>{Oa(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Rt(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||_e(n)||As(n))return this;const c=dh({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||_e(n)||As(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Zu.Event=new Zu;const Rv=Me.each,Aw=Me.grep,Dv="data-mce-style",Rw=Me.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Rr=(e,n,o)=>{Dt(o)||o===""?Os(e,n):so(e,n,o)},Aa=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Oe=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&_e(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},_1=(e,n)=>{const o=ys(n,"style"),r=e.serialize(e.parse(o),pn(n));Rr(n,Dv,r)},Us=(e,n)=>Ls(e)?Rt(Rw,n)?e+"":e+"px":e,k1=(e,n,o)=>{const r=Aa(n);Dt(o)||o===""?pc(e,r):rw(e,r,Us(o,r))},Dw=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const x=j.fromDom(f);Y(n.url_converter)&&he(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const O="data-mce-"+y;Rr(x,O,b),Rr(x,y,b)},get:(f,b)=>{const y=j.fromDom(f);return ys(y,"data-mce-"+b)||ys(y,b)}},u={style:{set:(f,b)=>{const y=j.fromDom(f);r&&Rr(y,Dv,b),Os(y,"style"),Z(b)&&Ut(y,e.parse(b))},get:f=>{const b=j.fromDom(f),y=ys(b,Dv)||ys(b,"style");return e.serialize(e.parse(y),pn(b))}}};return r&&(u.href=u.src=c),u},Qn=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Lu.forElement(j.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],O=n.schema?n.schema:dl({}),A=kv({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),D=n.ownEvents?new Zu:Zu.Event,$=O.getBlockElements(),z=ae=>Z(ae)?Rt($,ae):je(ae)&&(Rt($,ae.nodeName)||Fu(O,ae)),L=ae=>ae&&e&&Z(ae)?e.getElementById(ae):ae,V=ae=>{const le=L(ae);return he(le)?j.fromDom(le):null},K=(ae,le,Ie="")=>{let Re;const wt=V(ae);if(he(wt)&&Za(wt)){const on=Mg[le];on&&on.get?Re=on.get(wt.dom,le):Re=ys(wt,le)}return he(Re)?Re:Ie},Q=ae=>{const le=L(ae);return Dt(le)?[]:le.attributes},X=(ae,le,Ie)=>{at(ae,Re=>{if(je(Re)){const wt=j.fromDom(Re),on=Ie===""?null:Ie,Do=ys(wt,le),Qi=Mg[le];Qi&&Qi.set?Qi.set(wt.dom,on,le):Rr(wt,le,on),Do!==on&&n.onSetAttrib&&n.onSetAttrib({attrElm:wt.dom,attrName:le,attrValue:on})}})},re=(ae,le)=>ae.cloneNode(le),we=()=>n.root_element||e.body,De=ae=>{const le=uv(ae);return{x:le.x,y:le.y,w:le.width,h:le.height}},Ge=(ae,le)=>Rs(e.body,L(ae),le),ge=(ae,le,Ie)=>{at(ae,Re=>{const wt=j.fromDom(Re);k1(wt,le,Ie),n.update_styles&&_1(A,wt)})},ue=(ae,le)=>{at(ae,Ie=>{const Re=j.fromDom(Ie);Xe(le,(wt,on)=>{k1(Re,on,wt)}),n.update_styles&&_1(A,Re)})},Ce=(ae,le,Ie)=>{const Re=L(ae);if(!(Dt(Re)||!vc(Re)&&!fv(Re)))return Ie?Cs(j.fromDom(Re),Aa(le)):(le=le.replace(/-(\D)/g,(wt,on)=>on.toUpperCase()),le==="float"&&(le="cssFloat"),Re.style?Re.style[le]:void 0)},nt=ae=>{const le=L(ae);if(!le)return{w:0,h:0};let Ie=Ce(le,"width"),Re=Ce(le,"height");return(!Ie||Ie.indexOf("px")===-1)&&(Ie="0"),(!Re||Re.indexOf("px")===-1)&&(Re="0"),{w:parseInt(Ie,10)||le.offsetWidth||le.clientWidth,h:parseInt(Re,10)||le.offsetHeight||le.clientHeight}},lt=ae=>{const le=L(ae),Ie=Ge(le),Re=nt(le);return{x:Ie.x,y:Ie.y,w:Re.w,h:Re.h}},qt=(ae,le)=>{if(!ae)return!1;const Ie=Vt(ae)?ae:[ae];return oo(Ie,Re=>ja(j.fromDom(Re),le))},jt=(ae,le,Ie,Re)=>{const wt=[];let on=L(ae);Re=Re===void 0;const Do=Ie||(we().nodeName!=="BODY"?we().parentNode:null);if(Z(le))if(le==="*")le=je;else{const Qi=le;le=w_=>qt(w_,Qi)}for(;on&&!(on===Do||Dt(on.nodeType)||Cf(on)||ws(on));){if(!le||le(on))if(Re)wt.push(on);else return[on];on=on.parentNode}return Re?wt:null},wn=(ae,le,Ie)=>{const Re=jt(ae,le,Ie,!1);return Re&&Re.length>0?Re[0]:null},Nn=(ae,le,Ie)=>{let Re=le;if(ae){Z(le)&&(Re=wt=>qt(wt,le));for(let wt=ae[Ie];wt;wt=wt[Ie])if(Y(Re)&&Re(wt))return wt}return null},Vo=(ae,le)=>Nn(ae,le,"nextSibling"),Cr=(ae,le)=>Nn(ae,le,"previousSibling"),In=ae=>Y(ae.querySelectorAll),$e=(ae,le)=>{var Ie,Re;const wt=(Re=(Ie=L(le))!==null&&Ie!==void 0?Ie:n.root_element)!==null&&Re!==void 0?Re:e;return In(wt)?Ca(wt.querySelectorAll(ae)):[]},at=function(ae,le,Ie){const Re=Ie??this;if(Vt(ae)){const wt=[];return Rv(ae,(on,Do)=>{const Qi=L(on);Qi&&wt.push(le.call(Re,Qi,Do))}),wt}else{const wt=L(ae);return wt?le.call(Re,wt):!1}},mn=(ae,le)=>{at(ae,Ie=>{Xe(le,(Re,wt)=>{X(Ie,wt,Re)})})},Ve=(ae,le)=>{at(ae,Ie=>{const Re=j.fromDom(Ie);i1(Re,le)})},vt=(ae,le,Ie,Re,wt)=>at(ae,on=>{const Do=Z(le)?e.createElement(le):le;return he(Ie)&&mn(Do,Ie),Re&&(!Z(Re)&&Re.nodeType?Do.appendChild(Re):Z(Re)&&Ve(Do,Re)),wt?Do:on.appendChild(Do)}),Xt=(ae,le,Ie)=>vt(e.createElement(ae),ae,le,Ie,!0),Ze=Di.decode,Kt=Di.encodeAllRaw,en=(ae,le,Ie="")=>{let Re="<"+ae;for(const wt in le)wa(le,wt)&&(Re+=" "+wt+'="'+Kt(le[wt])+'"');return Ua(Ie)&&Rt(O.getVoidElements(),ae)?Re+" />":Re+">"+Ie+"</"+ae+">"},Fs=ae=>{const le=e.createElement("div"),Ie=e.createDocumentFragment();Ie.appendChild(le),ae&&(le.innerHTML=ae);let Re;for(;Re=le.firstChild;)Ie.appendChild(Re);return Ie.removeChild(le),Ie},Rn=(ae,le)=>at(ae,Ie=>{const Re=j.fromDom(Ie);return le&&fe(dr(Re),wt=>{yo(wt)&&wt.dom.length===0?ro(wt):da(Re,wt)}),ro(Re),Re.dom}),gs=ae=>at(ae,le=>{const Ie=le.attributes;for(let Re=Ie.length-1;Re>=0;Re--)le.removeAttributeNode(Ie.item(Re))}),ui=ae=>A.parse(ae),Il=(ae,le)=>A.serialize(ae,le),na=ae=>{if(Cu!==Qn.DOM&&e===document){if(o[ae])return;o[ae]=!0}let le=e.getElementById("mceDefaultStyles");if(!le){le=e.createElement("style"),le.id="mceDefaultStyles",le.type="text/css";const Ie=e.head;Ie.firstChild?Ie.insertBefore(le,Ie.firstChild):Ie.appendChild(le)}le.styleSheet?le.styleSheet.cssText+=ae:le.appendChild(e.createTextNode(ae))},cc=ae=>{ae||(ae=""),fe(ae.split(","),le=>{c[le]=!0,y.load(le).catch(ht)})},di=(ae,le,Ie)=>{at(ae,Re=>{if(je(Re)){const wt=j.fromDom(Re),on=le.split(" ");fe(on,Do=>{he(Ie)?(Ie?Wd:Zd)(wt,Do):KC(wt,Do)})}})},Ha=(ae,le)=>{di(ae,le,!0)},mi=(ae,le)=>{di(ae,le,!1)},ut=(ae,le)=>{const Ie=V(ae),Re=le.split(" ");return he(Ie)&&Ys(Re,wt=>jg(Ie,wt))},cn=ae=>{at(ae,le=>pc(j.fromDom(le),"display"))},Ro=ae=>{at(ae,le=>rw(j.fromDom(le),"display","none"))},Yo=ae=>{const le=V(ae);return he(le)&&Zo(Ta(le,"display"),"none")},is=ae=>(ae||"mce_")+u++,Ks=ae=>{const le=V(ae);return he(le)?je(le.dom)?le.dom.outerHTML:ol(le):""},Qo=(ae,le)=>{at(ae,Ie=>{je(Ie)&&(Ie.outerHTML=le)})},es=(ae,le)=>{const Ie=L(le);return at(ae,Re=>{const wt=Ie==null?void 0:Ie.parentNode,on=Ie==null?void 0:Ie.nextSibling;return wt&&(on?wt.insertBefore(Re,on):wt.appendChild(Re)),Re})},Ir=(ae,le,Ie)=>at(le,Re=>{var wt;const on=Vt(le)?ae.cloneNode(!0):ae;return Ie&&Rv(Aw(Re.childNodes),Do=>{on.appendChild(Do)}),(wt=Re.parentNode)===null||wt===void 0||wt.replaceChild(on,Re),Re}),fi=(ae,le)=>{if(ae.nodeName!==le.toUpperCase()){const Ie=Xt(le);return Rv(Q(ae),Re=>{X(Ie,Re.nodeName,K(ae,Re.nodeName))}),Ir(Ie,ae,!0),Ie}else return ae},Pc=(ae,le)=>{let Ie=ae;for(;Ie;){let Re=le;for(;Re&&Ie!==Re;)Re=Re.parentNode;if(Ie===Re)break;Ie=Ie.parentNode}return!Ie&&ae.ownerDocument?ae.ownerDocument.documentElement:Ie},Ji=(ae,le,Ie)=>Un(le)?cl(O,ae,{...Ie,isContent:wt=>{const on=wt.nodeName.toLowerCase();return!!le[on]}}):cl(O,ae,Ie),gi=()=>e.createRange(),Ym=(ae,le,Ie)=>{let Re=gi(),wt,on;if(ae&&le&&ae.parentNode&&le.parentNode){const Do=ae.parentNode;return Re.setStart(Do,Oe(ae)),Re.setEnd(le.parentNode,Oe(le)),wt=Re.extractContents(),Re=gi(),Re.setStart(le.parentNode,Oe(le)+1),Re.setEnd(Do,Oe(ae)+1),on=Re.extractContents(),Do.insertBefore(ll(Cu,wt,O),ae),Ie?Do.insertBefore(Ie,ae):Do.insertBefore(le,ae),Do.insertBefore(ll(Cu,on,O),ae),Rn(ae),Ie||le}else return},Dg=(ae,le,Ie,Re)=>{if(Vt(ae)){let wt=ae.length;const on=[];for(;wt--;)on[wt]=Dg(ae[wt],le,Ie,Re);return on}else return n.collect&&(ae===e||ae===r)&&x.push([ae,le,Ie,Re]),D.bind(ae,le,Ie,Re||Cu)},Np=(ae,le,Ie)=>{if(Vt(ae)){let Re=ae.length;const wt=[];for(;Re--;)wt[Re]=Np(ae[Re],le,Ie);return wt}else{if(x.length>0&&(ae===e||ae===r)){let Re=x.length;for(;Re--;){const[wt,on,Do]=x[Re];ae===wt&&(!le||le===on)&&(!Ie||Ie===Do)&&D.unbind(wt,on,Do)}}return D.unbind(ae,le,Ie)}},C_=(ae,le,Ie)=>D.dispatch(ae,le,Ie),Xm=(ae,le,Ie)=>D.dispatch(ae,le,Ie),IC=ae=>{if(ae&&vc(ae)){const le=ae.getAttribute("data-mce-contenteditable");return le&&le!=="inherit"?le:ae.contentEditable!=="inherit"?ae.contentEditable:null}else return null},Cu={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:A,schema:O,events:D,isBlock:z,root:null,clone:re,getRoot:we,getViewPort:De,getRect:lt,getSize:nt,getParent:wn,getParents:jt,get:L,getNext:Vo,getPrev:Cr,select:$e,is:qt,add:vt,create:Xt,createHTML:en,createFragment:Fs,remove:Rn,setStyle:ge,getStyle:Ce,setStyles:ue,removeAllAttribs:gs,setAttrib:X,setAttribs:mn,getAttrib:K,getPos:Ge,parseStyle:ui,serializeStyle:Il,addStyle:na,loadCSS:cc,addClass:Ha,removeClass:mi,hasClass:ut,toggleClass:di,show:cn,hide:Ro,isHidden:Yo,uniqueId:is,setHTML:Ve,getOuterHTML:Ks,setOuterHTML:Qo,decode:Ze,encode:Kt,insertAfter:es,replace:Ir,rename:fi,findCommonAncestor:Pc,run:at,getAttribs:Q,isEmpty:Ji,createRng:gi,nodeIndex:Oe,split:Ym,bind:Dg,unbind:Np,fire:Xm,dispatch:C_,getContentEditable:IC,getContentEditableParent:ae=>{const le=we();let Ie=null;for(let Re=ae;Re&&Re!==le&&(Ie=IC(Re),Ie===null);Re=Re.parentNode);return Ie},isEditable:ae=>{if(he(ae)){const le=je(ae)?ae:ae.parentElement;return he(le)&&vc(le)&&er(j.fromDom(le))}else return!1},destroy:()=>{if(x.length>0){let ae=x.length;for(;ae--;){const[le,Ie,Re]=x[ae];D.unbind(le,Ie,Re)}}Xe(c,(ae,le)=>{y.unload(le),delete c[le]})},isChildOf:(ae,le)=>ae===le||le.contains(ae),dumpRng:ae=>"startContainer: "+ae.startContainer.nodeName+", startOffset: "+ae.startOffset+", endContainer: "+ae.endContainer.nodeName+", endOffset: "+ae.endOffset},Mg=Dw(A,n,Fe(Cu));return Cu};Qn.DOM=Qn(document),Qn.nodeIndex=Oe;const Kl=Qn.DOM,O1=0,q_=1,Yl=2,A1=3;class Ni{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=Kl;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Me._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Yl}markDone(n){this.states[n]=Yl}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=O1),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{uo(o.scriptLoadedCallbacks,x).each(O=>{fe(O,A=>A[y](x))}),delete o.scriptLoadedCallbacks[x]},c=y=>{const x=Et(y,O=>O.status==="rejected");return x.length>0?Promise.reject(dc(x,({reason:O})=>Vt(O)?O:[O])):Promise.resolve()},u=y=>Promise.allSettled(Ht(y,x=>o.states[x]===Yl?(r("resolve",x),Promise.resolve()):o.states[x]===A1?(r("reject",x),Promise.reject(x)):(o.states[x]=q_,o.loadScript(x).then(()=>{o.states[x]=Yl,r("resolve",x);const O=o.queue;return O.length>0?(o.queue=[],u(O).then(c)):Promise.resolve()},()=>(o.states[x]=A1,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const O=o.queueLoadedCallbacks.shift();return N.from(O).each(ra),c(x)})),b=Up(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,x)})}):f(b)}}Ni.ScriptLoader=new Ni;const Mw=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Mv=e=>kt(e)&&Rt(e,"raw"),qn=e=>Vt(e)&&e.length>1,kf={},Ao=te("en"),Bw=()=>uo(kf,Ao.get()),Ds={getData:()=>_n(kf,e=>({...e})),setCode:e=>{e&&Ao.set(e)},getCode:()=>Ao.get(),add:(e,n)=>{let o=kf[e];o||(kf[e]=o={});const r=Ht(Lr(n),c=>c.toLowerCase());Xe(n,(c,u)=>{const f=u.toLowerCase();f!==u&&Mw(r,f)?(Rt(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=Bw().getOr({}),o=f=>Y(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return Rt(n,b)?o(n[b]):uo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Mv(e))return o(e.raw);if(qn(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>Rt(f,x)?o(f[x]):y);return u(b)}return u(c(e))},isRtl:()=>Bw().bind(e=>uo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Rt(kf,e)},jr=()=>{const e=[],n={},o={},r=[],c=(L,V)=>{const K=Et(r,Q=>Q.name===L&&Q.state===V);fe(K,Q=>Q.resolve())},u=L=>Rt(n,L),f=L=>Rt(o,L),b=L=>{if(o[L])return o[L].instance},y=(L,V)=>{const K=Ds.getCode(),Q=","+(V||"")+",";!K||V&&Q.indexOf(","+K+",")===-1||Ni.ScriptLoader.add(n[L]+"/langs/"+K+".js")},x=(L,V)=>{jr.languageLoad!==!1&&(u(L)?y(L,V):z(L,"loaded").then(()=>y(L,V)))},O=(L,V)=>(e.push(V),o[L]={instance:V},c(L,"added"),V),A=L=>{delete n[L],delete o[L]},D=(L,V)=>Z(V)?Z(L)?{prefix:"",resource:V,suffix:""}:{prefix:L.prefix,resource:V,suffix:L.suffix}:V,$=(L,V)=>{if(n[L])return Promise.resolve();let K=Z(V)?V:V.prefix+V.resource+V.suffix;K.indexOf("/")!==0&&K.indexOf("://")===-1&&(K=jr.baseURL+"/"+K),n[L]=K.substring(0,K.lastIndexOf("/"));const Q=()=>(c(L,"loaded"),Promise.resolve());return o[L]?Q():Ni.ScriptLoader.add(K).then(Q)},z=(L,V="added")=>V==="added"&&f(L)||V==="loaded"&&u(L)?Promise.resolve():new Promise(K=>{r.push({name:L,state:V,resolve:K})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:O,remove:A,createUrl:D,load:$,waitFor:z}};jr.languageLoad=!0,jr.baseURL="",jr.PluginManager=jr(),jr.ThemeManager=jr(),jr.ModelManager=jr();const mh=(e,n)=>{let o=null;return{cancel:()=>{q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},ju=(e,n)=>{let o=null;const r=()=>{q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Bv=(e,n,o)=>zs(e,n,o).isSome(),Af=Fe("mce-annotation"),fl=Fe("data-mce-annotation"),Rf=Fe("data-mce-annotation-uid"),am=Fe("data-mce-annotation-active"),Gu=Fe("data-mce-annotation-classes"),gl=Fe("data-mce-annotation-attrs"),cm=e=>n=>Dn(n,e),im=(e,n)=>{const o=e.selection.getRng(),r=j.fromDom(o.startContainer),c=j.fromDom(e.getBody()),u=n.fold(()=>"."+Af(),y=>`[${fl()}="${y}"]`),f=Mu(r,o.startOffset).getOr(r);return Bu(f,u,cm(c)).bind(y=>wi(y,`${Rf()}`).bind(x=>wi(y,`${fl()}`).map(O=>{const A=R1(e,x);return{uid:x,name:O,elements:A}})))},Q_=e=>Za(e)&&jg(e,Af()),Nv=(e,n)=>Ud(e,"data-mce-bogus")||Bv(e,'[data-mce-bogus="all"]',cm(n)),R1=(e,n)=>{const o=j.fromDom(e.getBody()),r=mr(o,`[${Rf()}="${n}"]`);return Et(r,c=>!Nv(c,o))},Nw=(e,n)=>{const o=j.fromDom(e.getBody()),r=mr(o,`[${fl()}="${n}"]`),c={};return fe(r,u=>{if(!Nv(u,o)){const f=ys(u,Rf()),b=uo(c,f).getOr([]);c[f]=b.concat([u])}}),c},Pv=(e,n)=>{const o=te({}),r=()=>({listeners:[],previous:Ar()}),c=(A,D)=>{u(A,$=>(D($),$))},u=(A,D)=>{const $=o.get(),z=uo($,A).getOrThunk(r),L=D(z);$[A]=L,o.set($)},f=(A,D,$)=>{c(A,z=>{fe(z.listeners,L=>L(!0,A,{uid:D,nodes:Ht($,V=>V.dom)}))})},b=A=>{c(A,D=>{fe(D.listeners,$=>$(!1,A))})},y=(A,D)=>{fe(R1(e,A),$=>{D?so($,am(),"true"):Os($,am())})},x=ju(()=>{const A=Po(n.getNames());fe(A,D=>{u(D,$=>{const z=$.previous.get();return im(e,N.some(D)).fold(()=>{z.each(L=>{b(D),$.previous.clear(),y(L,!1)})},({uid:L,name:V,elements:K})=>{Zo(z,L)||(z.each(Q=>y(Q,!1)),f(V,L,K),$.previous.set(L),y(L,!0))}),{previous:$.previous,listeners:$.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(A,D)=>{u(A,$=>({previous:$.previous,listeners:$.listeners.concat([D])}))}}},D1=(e,n)=>{const o=fl(),r=u=>N.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Rf(),null),u.attr(fl(),null),u.attr(am(),null);const y=N.from(u.attr(gl())).map(D=>D.split(",")).getOr([]),x=N.from(u.attr(Gu())).map(D=>D.split(",")).getOr([]);fe(y,D=>u.attr(D,null));const O=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],A=zp(O,[Af()].concat(x));u.attr("class",A.length>0?A.join(" "):null),u.attr(Gu(),null),u.attr(gl(),null)};e.serializer.addTempAttr(am()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},$v=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>uo(e,c).map(u=>u.settings),getNames:()=>Lr(e)}};let M1=0;const Df=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return M1++,e+"_"+r+M1+String(o)},B1=(e,n)=>{fe(n,o=>{Wd(e,o)})},LD=(e,n)=>{fe(n,o=>{Zd(e,o)})},ek=(e,n)=>j.fromDom(e.dom.cloneNode(n)),Pi=e=>ek(e,!1),Mf=e=>ek(e,!0),Pw=(e,n)=>{const o=j.fromTag(n),r=uf(e);return Wl(o,r),o},$w=(e,n)=>{const o=Pw(e,n);bc(e,o);const r=dr(e);return Nu(o,r),ro(e),o},N1=(e,n,o=xe)=>{const r=new Vs(e,n),c=u=>{let f;do f=r[u]();while(f&&!_e(f)&&!o(f));return N.from(f).filter(_e)};return{current:()=>N.from(r.current()).filter(_e),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},qu=(e,n)=>{const o=n||(f=>e.isBlock(f)||bn(f)||vn(f)),r=(f,b,y,x)=>{if(_e(f)){const O=x(f,b,f.data);if(O!==-1)return N.some({container:f,offset:O})}return y().bind(O=>r(O.container,O.offset,y,x))};return{backwards:(f,b,y,x)=>{const O=N1(f,x??e.getRoot(),o);return r(f,b,()=>O.prev().map(A=>({container:A,offset:A.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const O=N1(f,x??e.getRoot(),o);return r(f,b,()=>O.next().map(A=>({container:A,offset:0})),y).getOrNull()}}},Iv=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?N.from(u.dom.nodeValue):N.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(yo,"text"),fh=e=>Iv.get(e),nk=e=>Iv.getOption(e),P1=(e,n)=>Iv.set(e,n),Bf=["td","th"],Iw=["thead","tbody","tfoot"],$1=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Fv=["li","dd","dt"],Fw=["ul","ol","dl"],gr=["pre","script","textarea","style"],gh=e=>{let n;return o=>(n=n||ks(e,Qe),Rt(n,pn(o)))},Lv=e=>pn(e)==="table",Nf=e=>Za(e)&&pn(e)==="br",Lw=gh($1),$i=gh(Fw),ma=gh(Fv),Pf=gh(Iw),$f=gh(Bf),hh=gh(gr),ok=e=>{const n=[];let o=e.dom;for(;o;)n.push(j.fromDom(o)),o=o.lastChild;return n},sk=e=>{const n=mr(e,"br"),o=Et(ok(e).slice(-1),Nf);n.length===o.length&&fe(o,ro)},lm=()=>{const e=j.fromTag("br");return so(e,"data-mce-bogus","1"),e},Ma=e=>{qd(e),Io(e,lm())},Hw=(e,n)=>{Zc(e).each(o=>{Wc(o).each(r=>{n.isBlock(pn(e))&&Nf(o)&&n.isBlock(pn(r))&&ro(o)})})},qo=Xg,um=dv,Ba=Ur,HD=e=>e.insertContent(qo,{preserve_zwsp:!0}),I1=je,If=_e,dm=e=>(If(e)&&(e=e.parentNode),I1(e)&&e.hasAttribute("data-mce-caret")),Ii=e=>If(e)&&um(e.data),Na=e=>dm(e)||Ii(e),Hv=e=>e.firstChild!==e.lastChild||!bn(e.firstChild),zv=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(qo),u=e.parentNode;if(n){const f=e.previousSibling;if(If(f)){if(Na(f))return f;if(hl(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(If(f)){if(Na(f))return f;if(fm(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Vv=e=>{const n=e.container();return _e(n)?n.data.charAt(e.offset())===qo||e.isAtStart()&&Ii(n.previousSibling):!1},mm=e=>{const n=e.container();return _e(n)?n.data.charAt(e.offset()-1)===qo||e.isAtEnd()&&Ii(n.nextSibling):!1},rk=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(lm().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},fm=e=>If(e)&&e.data[0]===qo,hl=e=>If(e)&&e.data[e.data.length-1]===qo,ph=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Xd(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},rn=e=>e&&e.hasAttribute("data-mce-caret")?(ph(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Gr=e=>dm(e.startContainer),xc=Math.round,Xl=e=>e?{left:xc(e.left),top:xc(e.top),bottom:xc(e.bottom),right:xc(e.right),width:xc(e.width),height:xc(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Kn=(e,n)=>(e=Xl(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),zw=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,F1=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,bh=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:F1(n.top-e.bottom,e,n)},L1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:F1(n.bottom-e.top,e,n),ak=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Co=e=>Wo(e,(n,o)=>n.fold(()=>N.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return N.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),N.none()),Uv=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},ck=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),ik=(e,n,o)=>Math.min(Math.max(e,n),o),Ff=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},qe=(e,n)=>{if(je(e)&&e.hasChildNodes()){const o=e.childNodes,r=ik(n,0,o.length-1);return o[r]}else return e},lk=(e,n)=>{if(!(n<0&&je(e)&&e.hasChildNodes()))return qe(e,n)},Vw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),H1=e=>Z(e)&&e.charCodeAt(0)>=768&&Vw.test(e),Wv=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},uk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},vh=be,yh=vn,gm=bn,zD=_e,pl=Kc(["script","style","textarea"]),dk=Kc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Jl=Kc(["table"]),Uw=Na,Fi=e=>Uw(e)?!1:zD(e)?!pl(e.parentNode):dk(e)||gm(e)||Jl(e)||Lf(e),Ww=e=>je(e)&&e.getAttribute("unselectable")==="true",Lf=e=>!Ww(e)&&yh(e),mk=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Lf(o))return!1;if(vh(o))return!0}return!0},fk=e=>Lf(e)?!Wo(Ca(e.getElementsByTagName("*")),(n,o)=>n||vh(o),!1):!1,gk=e=>dk(e)||fk(e),Zv=(e,n)=>Fi(e)&&mk(e,n),z1=je,Zw=Fi,jv=Qg("display","block table"),hk=Qg("float","left right"),Ch=uk(z1,Zw,po(hk)),Ku=po(Qg("white-space","pre pre-line pre-wrap")),Hf=_e,V1=bn,Gv=Qn.nodeIndex,U1=lk,qv=e=>e?e.createRange():Qn.DOM.createRng(),Kv=e=>Z(e)&&/[\r\n\t ]/.test(e),Yv=e=>!!e.setStart&&!!e.setEnd,jw=e=>{const n=e.startContainer,o=e.startOffset;if(Kv(e.toString())&&Ku(n.parentNode)&&_e(n)){const r=n.data;if(Kv(r[o-1])||Kv(r[o+1]))return!0}return!1},Ws=e=>{const n=e.ownerDocument,o=qv(n),r=n.createTextNode(us),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Xl(o.getBoundingClientRect());return c.removeChild(r),u},pk=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&_e(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Yu(u)}else return null},Gw=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Yu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Xl(r[0]):o=Xl(e.getBoundingClientRect()),!Yv(e)&&V1(e)&&Gw(o)?Ws(e):Gw(o)&&Yv(e)&&(n=pk(e))!==null&&n!==void 0?n:o},hm=(e,n)=>{const o=Kn(e,n);return o.width=1,o.right=o.left+1,o},Xv=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&zw(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=qv(f.ownerDocument);if(b<f.data.length){if(H1(f.data[b]))return;if(H1(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!jw(y))){o(hm(Yu(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),jw(y)||o(hm(Yu(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),jw(y)||o(hm(Yu(y),!0)))},c=e.container(),u=e.offset();if(Hf(c))return r(c,u),n;if(z1(c))if(e.isAtEnd()){const f=U1(c,u);Hf(f)&&r(f,f.data.length),Ch(f)&&!V1(f)&&o(hm(Yu(f),!1))}else{const f=U1(c,u);if(Hf(f)&&r(f,0),Ch(f)&&e.isAtEnd())return o(hm(Yu(f),!1)),n;const b=U1(e.container(),e.offset()-1);Ch(b)&&!V1(b)&&(jv(b)||jv(f)||!Ch(f))&&o(hm(Yu(b),!1)),Ch(f)&&o(hm(Yu(f),!0))}return n},ie=(e,n,o)=>{const r=()=>(Hf(e),n===0),c=()=>Hf(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const O=qv(e.ownerDocument);return O.setStart(e,n),O.setEnd(e,n),O},f=()=>(o||(o=Xv(ie(e,n))),o),b=()=>f().length>0,y=O=>O&&e===O.container()&&n===O.offset(),x=O=>U1(e,O?n-1:n);return{container:Fe(e),offset:Fe(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:x}};ie.fromRangeStart=e=>ie(e.startContainer,e.startOffset),ie.fromRangeEnd=e=>ie(e.endContainer,e.endOffset),ie.after=e=>ie(e.parentNode,Gv(e)+1),ie.before=e=>ie(e.parentNode,Gv(e)),ie.isAbove=(e,n)=>ur(Tr(n.getClientRects()),Fl(e.getClientRects()),bh).getOr(!1),ie.isBelow=(e,n)=>ur(Fl(n.getClientRects()),Tr(e.getClientRects()),L1).getOr(!1),ie.isAtStart=e=>e?e.isAtStart():!1,ie.isAtEnd=e=>e?e.isAtEnd():!1,ie.isTextPosition=e=>e?_e(e.container()):!1,ie.isElementPosition=e=>!ie.isTextPosition(e);const bl=(e,n)=>{_e(n)&&n.data.length===0&&e.remove(n)},bk=(e,n,o)=>{n.insertNode(o),bl(e,o.previousSibling),bl(e,o.nextSibling)},qw=(e,n,o)=>{const r=N.from(o.firstChild),c=N.from(o.lastChild);n.insertNode(o),r.each(u=>bl(e,u.previousSibling)),c.each(u=>bl(e,u.nextSibling))},wh=(e,n,o)=>{ws(o)?qw(e,n,o):bk(e,n,o)},Ec=_e,Sh=Xd,Kw=Qn.nodeIndex,Jv=e=>{const n=e.parentNode;return Sh(n)?Jv(n):n},Dr=e=>e?Va(e.childNodes,(n,o)=>(Sh(o)&&o.nodeName!=="BR"?n=n.concat(Dr(o)):n.push(o),n),[]):[],W1=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Ec(o);)n+=o.data.length;return n},Yw=e=>n=>e===n,vk=e=>{let n,o;n=Dr(Jv(e)),o=Mo(n,Yw(e),e),n=n.slice(0,o+1);const r=Va(n,(c,u,f)=>(Ec(u)&&Ec(n[f-1])&&c++,c),0);return n=Wp(n,Kc([e.nodeName])),o=Mo(n,Yw(e),e),o-r},Xw=e=>(Ec(e)?"text()":e.nodeName.toLowerCase())+"["+vk(e)+"]",yk=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Jw=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(Ec(r))u=W1(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Xw(r));let f=yk(e,r);return f=Wp(f,po(Xd)),o=o.concat(tl(f,b=>Xw(b))),o.reverse().join("/")+","+u},Ck=(e,n,o)=>{let r=Dr(e);return r=Wp(r,(c,u)=>!Ec(c)||!Ec(r[u-1])),r=Wp(r,Kc([n])),r[o]},wk=(e,n)=>{let o=e,r=0;for(;Ec(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!Ec(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return Ec(e)&&n>e.data.length&&(n=e.data.length),ie(e,n)},Qw=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Va(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),Ck(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!Ec(u)&&u.parentNode){let f;return c==="after"?f=Kw(u)+1:f=Kw(u),ie(u.parentNode,f)}return wk(u,parseInt(c,10))},zf=vn,Sk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&_e(c);c=c.previousSibling)r+=e(c.data).length;return r},eS=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(_e(u))b.push(o?Sk(n,u,f):f);else{let x=0;const O=u.childNodes;f>=O.length&&O.length&&(x=1,f=Math.max(0,O.length-1)),b.push(e.nodeIndex(O[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},Ho=(e,n,o,r)=>{const c=n.dom,u=eS(c,e,o,r,!0),f=n.isForward(),b=Gr(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=eS(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Z1=(e,n,o)=>{let r=0;return Me.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},tS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(je(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},nS=e=>(tS(e,!0),tS(e,!1),e),j1=(e,n)=>{if(je(e)&&(e=qe(e,n),zf(e)))return e;if(Na(e)){_e(e)&&dm(e)&&(e=e.parentNode);let o=e.previousSibling;if(zf(o)||(o=e.nextSibling,zf(o)))return o}},hr=e=>j1(e.startContainer,e.startOffset)||j1(e.endContainer,e.endOffset),Mr=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||zf(r)){const f=r.nodeName;return{name:f,index:Z1(o.dom,f,r)}}const u=hr(c);if(u){const f=u.tagName;return{name:f,index:Z1(o.dom,f,u)}}return Ho(e,o,n,c)},oS=e=>{const n=e.getRng();return{start:Jw(e.dom.getRoot(),ie.fromRangeStart(n)),end:Jw(e.dom.getRoot(),ie.fromRangeEnd(n)),forward:e.isForward()}},sS=e=>({rng:e.getRng(),forward:e.isForward()}),Qv=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},rS=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Z1(o,b,f)};const x=nS(r.cloneRange());if(!u){x.collapse(!1);const A=Qv(o,c+"_end",n);wh(o,x,A)}r=nS(r),r.collapse(!0);const O=Qv(o,c+"_start",n);return wh(o,r,O),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},aS=(e,n,o=!1)=>n===2?Mr(Ba,o,e):n===3?oS(e):n?sS(e):rS(e,!1),ey=Ee(Mr,ho,!0),ty=e=>{const n=u=>u(e),o=Fe(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Qe,isError:xe,map:u=>qr.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>N.some(e)};return c},G1=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:xe,isError:Qe,map:n,mapError:r=>qr.error(r(e)),bind:n,exists:xe,forall:Qe,getOr:ho,or:ho,getOrThunk:ts,orThunk:ts,getOrDie:va(String(e)),each:ht,toOptional:N.none};return o},qr={value:ty,error:G1,fromOption:(e,n)=>e.fold(()=>G1(n),ty)},xn={generate:e=>{if(!Vt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return fe(e,(r,c)=>{const u=Lr(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Vt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...A)=>{if(A.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+A.length);return A[c].apply(null,y)},match:A=>{const D=Lr(A);if(n.length!==D.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+D.join(","));if(!Ys(n,z=>$t(D,z)))throw new Error("Not all branches were specified when using match. Specified: "+D.join(", ")+`
Required: `+n.join(", "));return A[f].apply(null,y)},log:A=>{console.log(A,{constructors:n,constructor:f,params:y})}}}}),o}};xn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Li=e=>{const n=[],o=[];return fe(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},xh=e=>e.type==="inline-command"||e.type==="inline-format",cS=e=>e.type==="block-command"||e.type==="block-format",q1=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,K1=e=>{var n;const o=c=>qr.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let b;if(Vt(e.format)){if(!Ys(e.format,Z))return o(c+" pattern has non-string items in the `format` array");b=e.format}else if(Z(e.format))b=[e.format];else return o(c+" pattern has non-string `format` parameter");return qr.value(u(b))}else return e.cmd!==void 0?Z(e.cmd)?qr.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!kt(e))return o("Raw pattern is not an object");if(!Z(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Z(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,b)=>({type:"inline-command",start:c,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return Z(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):qr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},Xu=e=>Et(e,cS),Zs=e=>Et(e,xh),Ju=(e,n)=>({inlinePatterns:Zs(e),blockPatterns:Xu(e),dynamicPatternsLookup:n}),oy=(e,n)=>({...e,blockPatterns:Et(e.blockPatterns,o=>q1(o,n))}),iS=e=>{const n=Li(Ht(e,K1));return fe(n.errors,o=>console.error(o.message,o.pattern)),n.values},xk=e=>n=>{const o=e(n);return iS(o)},Vf=yi().deviceType,sy=Vf.isTouch(),ry=Qn.DOM,ay=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Wo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Id(u)]=Id(f),o},{})},cy=e=>mt(e,RegExp),et=e=>n=>n.options.get(e),Eh=e=>Z(e)||kt(e),iy=(e,n="")=>o=>{const r=Z(o);if(r)if(o.indexOf("=")!==-1){const c=ay(o);return{value:uo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Uf=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:iy(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:iy(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=Z(o)&&jn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=$t(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>gt(o)?{valid:!0,value:o}:Z(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||Z(o)||$n(o,Z);return r?Z(o)?{value:Ht(o.split(","),Id),valid:r}:Vt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ym(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=Z(o)||$n(o,Z);return r?{value:Vt(o)?o:Ht(o.split(","),Id),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=gt(o)||Z(o);return r?o===!1||Vf.isiPhone()||Vf.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!sy}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||Z(o)||Y(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||Z(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Eh}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Eh}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Eh}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Eh}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>Z(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>$n(o,kt)||o===!1?{value:iS(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>Y(o)?{value:xk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>$n(o,cy)?{value:o,valid:!0}:cy(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=$t(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=$t(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ds.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:ry.getAttrib(e.getElement(),"placeholder")})})},ti=et("iframe_attrs"),Ek=et("doctype"),js=et("document_base_url"),Tk=et("body_id"),Qu=et("body_class"),ly=et("content_security_policy"),lS=et("br_in_pre"),pr=et("forced_root_block"),ed=et("forced_root_block_attrs"),Y1=et("newline_behavior"),td=et("br_newline_selector"),_k=et("no_newline_selector"),kk=et("keep_styles"),ms=et("end_container_on_empty_block"),ss=et("automatic_uploads"),fs=et("images_reuse_filename"),Mn=et("images_replace_blob_uris"),xs=et("icons"),rs=et("icons_url"),uy=et("images_upload_url"),X1=et("images_upload_base_path"),dy=et("images_upload_credentials"),uS=et("images_upload_handler"),dS=et("content_css_cors"),J1=et("referrer_policy"),Q1=et("language"),pm=et("language_url"),my=et("indent_use_margin"),RF=et("indentation"),bm=et("content_css"),Ok=et("content_style"),fa=et("font_css"),VD=et("directionality"),Ak=et("inline_boundaries_selector"),Ya=et("object_resizing"),Th=et("resize_img_proportional"),_h=et("placeholder"),Hi=et("event_root"),Kr=et("service_message"),nd=et("theme"),fy=et("theme_url"),eb=et("model"),mS=et("model_url"),vm=et("inline_boundaries"),gy=et("formats"),hy=et("preview_styles"),fS=et("format_empty_lines"),gS=et("format_noneditable_selector"),kh=et("custom_ui_selector"),ym=et("inline"),py=et("hidden_input"),by=et("submit_patch"),hS=et("add_form_submit_trigger"),pS=et("add_unload_trigger"),Rk=et("custom_undo_redo_levels"),tb=et("disable_nodechange"),bS=et("readonly"),Dk=et("editable_root"),vS=et("content_css_cors"),Oh=et("plugins"),Mk=et("external_plugins"),yS=et("block_unsupported_drop"),Yr=et("visual"),vy=et("visual_table_class"),yy=et("visual_anchor_class"),Cy=et("iframe_aria_text"),nb=et("setup"),Bk=et("init_instance_callback"),Nk=et("urlconverter_callback"),ob=et("auto_focus"),CS=et("browser_spellcheck"),wy=et("protect"),Sy=et("paste_block_drop"),Ah=et("paste_data_images"),xy=et("paste_preprocess"),wS=et("paste_postprocess"),SS=et("newdocument_content"),xS=et("paste_webkit_styles"),Pk=et("paste_remove_styles_if_webkit"),ES=et("paste_merge_formats"),TS=et("smart_paste"),_S=et("paste_as_text"),sb=et("paste_tab_spaces"),Wf=et("allow_html_data_urls"),kS=et("text_patterns"),$k=et("text_patterns_lookup"),rb=et("noneditable_class"),Ik=et("editable_class"),ni=et("noneditable_regexp"),ab=et("preserve_cdata"),cb=et("highlight_on_focus"),ib=et("xss_sanitization"),Xr=et("init_content_sync"),od=e=>e.options.isSet("text_patterns_lookup"),sd=e=>Me.explode(e.options.get("font_size_style_values")),Fk=e=>Me.explode(e.options.get("font_size_classes")),rd=e=>e.options.get("encoding")==="xml",Rh=e=>Me.explode(e.options.get("images_file_types")),Lk=et("table_tab_navigation"),Hk=et("details_initial_state"),OS=et("details_serialized_state"),lb=et("sandbox_iframes"),ub=e=>e.options.get("sandbox_iframes_exclusions"),zk=et("convert_unsafe_embeds"),Dh=et("license_key"),Ey=et("api_key"),Vk=je,Ty=_e,_y=e=>{const n=e.parentNode;n&&n.removeChild(e)},db=e=>{const n=Ba(e);return{count:e.length-n.length,text:n}},Uk=e=>{let n;for(;(n=e.data.lastIndexOf(qo))!==-1;)e.deleteData(n,1)},Cm=(e,n)=>(ad(e),n),AS=(e,n)=>{const o=db(e.data.substr(0,n.offset())),r=db(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Uk(e),ie(e,n.offset()-o.count)):n},ky=(e,n)=>{const o=n.container(),r=O_(Ca(o.childNodes),e).map(c=>c<n.offset()?ie(o,n.offset()-1):n).getOr(n);return ad(e),r},RS=(e,n)=>Ty(e)&&n.container()===e?AS(e,n):Cm(e,n),mb=(e,n)=>n.container()===e.parentNode?ky(e,n):Cm(e,n),Wk=(e,n)=>ie.isTextPosition(n)?RS(e,n):mb(e,n),ad=e=>{Vk(e)&&Na(e)&&(Hv(e)?e.removeAttribute("data-mce-caret"):_y(e)),Ty(e)&&(Uk(e),e.data.length===0&&_y(e))},UD=vn,Zf=Or,fb=v1,jf="*[contentEditable=false],video,audio,embed,object",Gf=(e,n,o)=>{const r=Kn(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Zk=e=>{var n,o;const r=mr(j.fromDom(e),jf);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(hl(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,fm(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},DS=(e,n,o,r)=>{const c=Ar();let u,f;const b=pr(e),y=e.dom,x=(L,V)=>{let K;if(O(),fb(V))return null;if(o(V)){const Q=rk(b,V,L),X=Gf(n,V,L);y.setStyle(Q,"top",X.top),y.setStyle(Q,"caret-color","transparent"),f=Q;const re=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(re,{...X}),y.add(n,re),c.set({caret:re,element:V,before:L}),L&&y.addClass(re,"mce-visual-caret-before"),A(),K=V.ownerDocument.createRange(),K.setStart(Q,0),K.setEnd(Q,0)}else return f=zv(V,L),K=V.ownerDocument.createRange(),gb(f.nextSibling)?(K.setStart(f,0),K.setEnd(f,0)):(K.setStart(f,1),K.setEnd(f,1)),K;return K},O=()=>{Zk(n),f&&(ad(f),f=null),c.on(L=>{y.remove(L.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},A=()=>{u=setInterval(()=>{c.on(L=>{r()?y.toggleClass(L.caret,"mce-visual-caret-hidden"):y.addClass(L.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:O,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(L=>{const V=Gf(n,L.element,L.before);y.setStyles(L.caret,{...V})})},destroy:()=>clearInterval(u)}},jk=()=>Ue.browser.isFirefox(),gb=e=>UD(e)||Zf(e),eu=e=>(gb(e)||Ei(e)&&jk())&&qg(j.fromDom(e)).exists(er),Oy=be,Ay=vn,Gk=Or,Ry=Qg("display","block table table-cell table-caption list-item"),MS=Na,BS=dm,NS=je,qf=_e,hb=Fi,wm=e=>e>0,tu=e=>e<0,Mh=(e,n)=>{let o;for(;o=e(n);)if(!BS(o))return o;return null},Kf=(e,n,o,r,c)=>{const u=new Vs(e,r),f=Ay(e)||BS(e);let b;if(tu(n)){if(f&&(b=Mh(u.prev.bind(u),!0),o(b)))return b;for(;b=Mh(u.prev.bind(u),c);)if(o(b))return b}if(wm(n)){if(f&&(b=Mh(u.next.bind(u),!0),o(b)))return b;for(;b=Mh(u.next.bind(u),c);)if(o(b))return b}return null},qk=(e,n)=>{const o=c=>Oy(c.dom),r=c=>c.dom===n;return ko(j.fromDom(e),o,r).map(c=>c.dom).getOr(n)},zi=(e,n)=>{for(;e&&e!==n;){if(Ry(e))return e;e=e.parentNode}return null},Xa=(e,n,o)=>zi(e.container(),o)===zi(n.container(),o),pb=(e,n)=>{if(!n)return N.none();const o=n.container(),r=n.offset();return NS(o)?N.from(o.childNodes[r+e]):N.none()},Kk=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},WD=(e,n,o)=>zi(n,e)===zi(o,e),Sm=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&MS(u)&&(u=u[r]),Ay(u)||Gk(u)){if(WD(n,u,c))return u;break}if(hb(u))break;c=c.parentNode}return null},Yf=Ee(Kk,!0),Xf=Ee(Kk,!1),br=(e,n,o)=>{let r;const c=Ee(Sm,!0,n),u=Ee(Sm,!1,n),f=o.startContainer,b=o.startOffset;if(dm(f)){const y=qf(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,eu(r)))return Yf(r);if(x==="after"&&(r=y.previousSibling,eu(r)))return Xf(r)}if(!o.collapsed)return o;if(_e(f)){if(MS(f)){if(e===1){if(r=u(f),r)return Yf(r);if(r=c(f),r)return Xf(r)}if(e===-1){if(r=c(f),r)return Xf(r);if(r=u(f),r)return Yf(r)}return o}if(hl(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Yf(r):o;if(fm(f)&&b<=1)return e===-1&&(r=c(f),r)?Xf(r):o;if(b===f.data.length)return r=u(f),r?Yf(r):o;if(b===0)return r=c(f),r?Xf(r):o}return o},bb=(e,n)=>pb(e?0:-1,n).filter(Ay),xm=(e,n,o)=>{const r=br(e,n,o);return e===-1?ie.fromRangeStart(r):ie.fromRangeEnd(r)},vb=e=>N.from(e.getNode()).map(j.fromDom),PS=e=>N.from(e.getNode(!0)).map(j.fromDom),Dy=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},yb=(e,n)=>{const o=Xa(e,n);return!o&&bn(e.getNode())?!0:o};var Ms;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ms||(Ms={}));const Cb=vn,oi=_e,My=je,By=bn,nu=Fi,$S=gk,cd=Zv,wb=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Sb=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Ny=(e,n)=>{if(wm(e)){if(nu(n.previousSibling)&&!oi(n.previousSibling))return ie.before(n);if(oi(n))return ie(n,0)}if(tu(e)){if(nu(n.nextSibling)&&!oi(n.nextSibling))return ie.after(n);if(oi(n))return ie(n,n.data.length)}return tu(e)?By(n)?ie.before(n):ie.after(n):ie.before(n)},Em=(e,n)=>{const o=n.nextSibling;return o&&nu(o)?oi(o)?ie(o,0):ie.before(o):Jf(Ms.Forwards,ie.after(n),e)},Jf=(e,n,o)=>{let r,c,u,f;if(!My(o)||!n)return null;if(n.isEqual(ie.after(o))&&o.lastChild){if(f=ie.after(o.lastChild),tu(e)&&nu(o.lastChild)&&My(o.lastChild))return By(o.lastChild)?ie.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(oi(b)){if(tu(e)&&y>0)return ie(b,--y);if(wm(e)&&y<b.length)return ie(b,++y);r=b}else{if(tu(e)&&y>0&&(c=Sb(b,y-1),nu(c)))return!$S(c)&&(u=Kf(c,e,cd,c),u)?oi(u)?ie(u,u.data.length):ie.after(u):oi(c)?ie(c,c.data.length):ie.before(c);if(wm(e)&&y<b.childNodes.length&&(c=Sb(b,y),nu(c)))return By(c)?Em(o,c):!$S(c)&&(u=Kf(c,e,cd,c),u)?oi(u)?ie(u,0):ie.before(u):oi(c)?ie(c,0):ie.after(c);r=c||f.getNode()}if(r&&(wm(e)&&f.isAtEnd()||tu(e)&&f.isAtStart())&&(r=Kf(r,e,Qe,o,!0),cd(r,o)))return Ny(e,r);c=r&&Kf(r,e,cd,o);const x=Ic(Et(wb(b,o),Cb));return x&&(!c||!x.contains(c))?(wm(e)?f=ie.after(x):f=ie.before(x),f):c?Ny(e,c):null},nr=e=>({next:n=>Jf(Ms.Forwards,n,e),prev:n=>Jf(Ms.Backwards,n,e)}),IS=(e,n,o)=>{const r=e?ie.before(o):ie.after(o);return Ja(e,n,r)},Py=e=>bn(e)?ie.before(e):ie.after(e),$y=e=>ie.isTextPosition(e)?e.offset()===0:Fi(e.getNode()),FS=e=>{if(ie.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Fi(e.getNode(!0))},Iy=(e,n)=>!ie.isTextPosition(e)&&!ie.isTextPosition(n)&&e.getNode()===n.getNode(!0),LS=e=>!ie.isTextPosition(e)&&bn(e.getNode()),HS=(e,n,o)=>e?!Iy(n,o)&&!LS(n)&&FS(n)&&$y(o):!Iy(o,n)&&$y(n)&&FS(o),Ja=(e,n,o)=>{const r=nr(n);return N.from(e?r.next(o):r.prev(o))},ou=(e,n,o)=>Ja(e,n,o).bind(r=>Xa(o,r,n)&&HS(e,o,r)?Ja(e,n,r):N.some(r)),zS=(e,n,o,r)=>ou(e,n,o).bind(c=>r(c)?zS(e,n,c,r):N.some(c)),Tm=(e,n)=>{const o=e?n.firstChild:n.lastChild;return _e(o)?N.some(ie(o,e?0:o.data.length)):o?Fi(o)?N.some(e?ie.before(o):Py(o)):IS(e,n,o):N.none()},Br=Ee(Ja,!0),Pa=Ee(Ja,!1),Nr=Ee(Tm,!0),Qa=Ee(Tm,!1),xb="_mce_caret",ec=e=>je(e)&&e.id===xb,_m=(e,n)=>{let o=n;for(;o&&o!==e;){if(ec(o))return o;o=o.parentNode}return null},Yk=e=>Z(e.start),VS=e=>Rt(e,"rng"),Xk=e=>Rt(e,"id"),US=e=>Rt(e,"name"),WS=e=>Me.isArray(e.start),Fy=e=>!US(e)&&gt(e.forward)?e.forward:!0,Ly=(e,n)=>(je(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Gs=(e,n)=>{const o=N.from(Qw(e.getRoot(),n.start)),r=N.from(Qw(e.getRoot(),n.end));return ur(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Fy(n)}})},Hy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(qo);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},id=e=>!e.hasChildNodes(),Qf=(e,n)=>Qa(e).fold(xe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),zy=(e,n,o)=>id(n)&&_m(e,n)?(Hy(n,o),!0):!1,Eb=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const x=f.childNodes;if(zy(u,f,r))return!0;if(c[y]>x.length-1)return zy(u,f,r)?!0:Qf(f,r);f=x[c[y]]}_e(f)&&(b=Math.min(c[0],f.data.length)),je(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Bh=e=>_e(e)&&e.data.length>0,Vy=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Bh(r.nextSibling)?(f=r.nextSibling,b=0):Bh(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Bh(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;Me.each(Me.grep(r.childNodes),A=>{_e(A)&&(A.data=A.data.replace(/\uFEFF/g,""))});let O;for(;O=e.get(o.id+"_"+n);)e.remove(O,!0);if(_e(x)&&_e(y)&&!Ue.browser.isOpera()){const A=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=A}}return N.some(ie(f,b))}else return N.none()},eg=(e,n)=>{const o=e.createRng();return Eb(e,!0,n,o)&&Eb(e,!1,n,o)?N.some({range:o,forward:Fy(n)}):N.none()},Uy=(e,n)=>{const o=Vy(e,"start",n),r=Vy(e,"end",n);return ur(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Ly(e,c.container()),c.offset()),f.setEnd(Ly(e,u.container()),u.offset()),{range:f,forward:Fy(n)}})},vl=(e,n)=>N.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),km=(e,n)=>{const o=e.dom;if(n){if(WS(n))return eg(o,n);if(Yk(n))return Gs(o,n);if(Xk(n))return Uy(o,n);if(US(n))return vl(o,n);if(VS(n))return N.some({range:n.rng,forward:Fy(n)})}return N.none()},ZS=(e,n,o)=>aS(e,n,o),su=(e,n)=>{km(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},tc=e=>je(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",yl=(e=>n=>e===n)(us),Om=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Wy=e=>!Om(e)&&!yl(e)&&!dv(e),Tb=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},GS=e=>dc(e,n=>{const o=Ff(n);return o?[j.fromDom(o)]:[]}),Jk=e=>Tb(e).length>1,Qk=e=>Et(GS(e),$f),qS=e=>mr(e,"td[data-mce-selected],th[data-mce-selected]"),ld=(e,n)=>{const o=qS(n);return o.length>0?o:Qk(e)},tg=e=>ld(Tb(e.selection.getSel()),j.fromDom(e.getBody())),Nh=(e,n)=>zs(e,"table",n),e4=e=>{const n=e.startContainer,o=e.startOffset;return _e(n)?o===0?N.some(j.fromDom(n)):N.none():N.from(n.childNodes[o]).map(j.fromDom)},t4=e=>{const n=e.endContainer,o=e.endOffset;return _e(n)?o===n.data.length?N.some(j.fromDom(n)):N.none():N.from(n.childNodes[o-1]).map(j.fromDom)},ng=e=>hf(e).fold(Fe([e]),n=>[e].concat(ng(n))),Zy=e=>Zc(e).fold(Fe([e]),n=>pn(n)==="br"?Wc(n).map(o=>[e].concat(Zy(o))).getOr([]):[e].concat(Zy(n))),_b=(e,n)=>ur(e4(n),t4(n),(o,r)=>{const c=ns(ng(e),Ee(Dn,o)),u=ns(Zy(e),Ee(Dn,r));return c.isSome()&&u.isSome()}).getOr(!1),jy=(e,n,o,r)=>{const c=o,u=new Vs(o,c),f=xo(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!$t(["td","th","table"],x.toLowerCase()));let b=o;do{if(_e(b)&&Me.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Gy=e=>{const n=e.selection.getSel();return he(n)&&n.rangeCount>0},og=(e,n)=>{const o=tg(e);o.length>0?fe(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},qy=(e,n,o)=>{const r=rS(e,n);o(r),e.moveToBookmark(r)},sg=e=>Ls(e==null?void 0:e.nodeType),Ky=e=>je(e)&&!tc(e)&&!ec(e)&&!Xd(e),ln=(e,n)=>{if(Ky(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Cl=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=vn(u);qy(r,!0,()=>{n()}),f&&vn(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Am(c,r)},Am=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!ln(e,b)&&je(u)){const y=u.childNodes,x=e.getRoot();let O;if(f<y.length){const A=y[f];O=new Vs(A,(o=e.getParent(A,e.isBlock))!==null&&o!==void 0?o:x)}else{const A=y[y.length-1];O=new Vs(A,(r=e.getParent(A,e.isBlock))!==null&&r!==void 0?r:x),O.next(!0)}for(let A=O.current();A;A=O.next()){if(e.getContentEditable(A)==="false")return;if(_e(A)&&!Xy(A)){c.setStart(A,0),n.setRng(c);return}}}},Ph=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(je(e)||!Xy(e))return e}},Yy=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Fu(e,n),ru=(e,n,o)=>e.schema.isValidChild(n,o),Xy=(e,n=!1)=>{if(he(e)&&_e(e)){const o=n?e.data.replace(/ /g," "):e.data;return Gc(o)}else return!1},kb=e=>he(e)&&_e(e)&&e.length===0,Jy=(e,n)=>{const o="[data-mce-cef-wrappable]",r=gS(e),c=Ua(r)?o:`${o},${r}`;return ja(j.fromDom(n),c)},Qy=(e,n)=>{const o=e.dom;return Ky(n)&&o.getContentEditable(n)==="false"&&Jy(e,n)&&o.select('[contenteditable="true"]',n).length===0},Rm=(e,n)=>Y(e)?e(n):(he(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Ob=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Dm=(e,n)=>{if(Dt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Bi(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Ab=(e,n,o)=>{const r=e.getStyle(n,o);return Dm(r,o)},KS=(e,n)=>{let o;return e.getParent(n,r=>je(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},rg=(e,n,o)=>e.getParents(n,o,e.getRoot()),Rb=(e,n,o)=>{const r=e.formatter.get(n);return he(r)&&oo(r,o)},n4=(e,n)=>Rb(e,n,r=>{const c=u=>Y(u)||u.length>1&&u.charAt(0)==="%";return oo(["styles","attributes"],u=>uo(r,u).exists(f=>{const b=Vt(f)?f:tf(f);return oo(b,c)}))}),Db=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>xo(u,(f,b)=>oo(r,y=>y===b));return Rb(e,n,u=>{const f=c(u);return Rb(e,o,b=>{const y=c(b);return $d(f,y)})})},au=e=>wa(e,"block"),o4=e=>au(e)&&e.wrapper===!0,$h=e=>au(e)&&e.wrapper!==!0,Tc=e=>wa(e,"selector"),Bs=e=>wa(e,"inline"),s4=e=>Tc(e)&&Bs(e)&&Zo(uo(e,"mixed"),!0),Vi=e=>Tc(e)&&e.expand!==!1&&!Bs(e),r4=e=>{const n=[];let o=e;for(;o;){if(_e(o)&&o.data!==qo||o.childNodes.length>1)return[];je(o)&&n.push(o),o=o.firstChild}return n},YS=e=>r4(e).length>0,Ih=e=>ec(e.dom)&&YS(e.dom),ag=tc,XS=rg,JS=Xy,ZD=Yy,jD=e=>bn(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,QS=(e,n)=>{let o=n;for(;o;){if(je(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},ex=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Ke=(e,n,o)=>ex(e,n,o,r=>yl(r)||Om(r)),Ns=(e,n,o)=>ex(e,n,o,Wy),Fh=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(O,A,D)=>{const $=qu(e),z=c?$.backwards:$.forwards;return N.from(z(O,A,(L,V)=>ag(L.parentNode)?-1:(f=L,D(c,L,V)),b))};return y(o,r,Ke).bind(O=>u?y(O.container,O.offset+(c?-1:0),Ns):N.some(O)).orThunk(()=>f?N.some({container:f,offset:c?0:f.length}):N.none())},Ps=(e,n,o,r,c)=>{const u=r[c];_e(r)&&Ua(r.data)&&u&&(r=u);const f=XS(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(he(x.collapsed)&&x.collapsed!==o.collapsed)&&Tc(x)&&e.is(f[b],x.selector))return f[b]}return r},_c=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(au(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(_e(o)?o.parentNode:o,x=>x!==f&&ZD(e.schema,x),y)}if(u&&au(b)&&b.wrapper&&(u=XS(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Ob(u,"br")););return u||o},e2=(e,n,o,r)=>{const c=o.parentNode;return he(o[r])?!1:c===n||Dt(c)||e.isBlock(c)?!0:e2(e,n,c,r)},Mm=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(_e(o)&&!JS(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=_e(y)&&!e2(e,b,y,f);if(!ag(y)&&!jD(y)&&!JS(y,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Mb=e=>ag(e.parentNode)||ag(e),ud=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return je(c)&&c.hasChildNodes()&&(c=qe(c,u),_e(c)&&(u=0)),je(f)&&f.hasChildNodes()&&(f=qe(f,n.collapsed?b:b-1),_e(f)&&(b=f.data.length)),c=QS(e,c),f=QS(e,f),Mb(c)&&(c=ag(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,_e(c)&&(u=n.collapsed?c.length:0)),Mb(f)&&(f=ag(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,_e(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(Fh(e,e.getRoot(),c,u,!0,r).each(({container:A,offset:D})=>{c=A,u=D}),Fh(e,e.getRoot(),f,b,!1,r).each(({container:A,offset:D})=>{f=A,b=D})),(Bs(y)||y.block_expand)&&((!Bs(y)||!_e(c)||u===0)&&(c=Mm(e,o,c,u,!0)),(!Bs(y)||!_e(f)||b===f.data.length)&&(f=Mm(e,o,f,b,!1))),Vi(y)&&(c=Ps(e,o,n,c,"previousSibling"),f=Ps(e,o,n,f,"nextSibling")),(au(y)||Tc(y))&&(c=_c(e,o,c,"previousSibling"),f=_c(e,o,f,"nextSibling"),au(y)&&(e.isBlock(c)||(c=Mm(e,o,c,u,!0),_e(c)&&(u=0)),e.isBlock(f)||(f=Mm(e,o,f,b,!1),_e(f)&&(b=f.data.length)))),je(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),je(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},Lh=(e,n,o)=>{var r;const c=n.startOffset,u=qe(n.startContainer,c),f=n.endOffset,b=qe(n.endContainer,f-1),y=V=>{const K=V[0];_e(K)&&K===u&&c>=K.data.length&&V.splice(0,1);const Q=V[V.length-1];return f===0&&V.length>0&&Q===b&&_e(Q)&&V.splice(V.length-1,1),V},x=(V,K,Q)=>{const X=[];for(;V&&V!==Q;V=V[K])X.push(V);return X},O=(V,K)=>e.getParent(V,Q=>Q.parentNode===K,K),A=(V,K,Q)=>{const X=Q?"nextSibling":"previousSibling";for(let re=V,we=re.parentNode;re&&re!==K;re=we){we=re.parentNode;const De=x(re===V?re:re[X],X);De.length&&(Q||De.reverse(),o(y(De)))}};if(u===b)return o(y([u]));const D=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return A(u,D,!0);if(e.isChildOf(b,u))return A(b,D);const $=O(u,D)||u,z=O(b,D)||b;A(u,$,!0);const L=x($===u?$:$.nextSibling,"nextSibling",z===b?z.nextSibling:z);L.length&&o(y(L)),A(b,z)},tx=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],a4=e=>yo(e)&&fh(e)===qo,c4=(e,n,o,r)=>gc(n).fold(()=>"skipping",c=>r==="br"||a4(n)?"valid":Q_(n)?"existing":ec(n.dom)?"caret":oo(tx,u=>ja(n,u))?"valid-block":!ru(e,o,r)||!ru(e,pn(c),o)?"invalid-child":"valid"),i4=(e,n)=>{const o=ud(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},dd=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;Wd(e,Af()),so(e,`${Rf()}`,f),so(e,`${fl()}`,r);const{attributes:y={},classes:x=[]}=c(f,b);if(Wl(e,y),B1(e,x),u){x.length>0&&so(e,`${Gu()}`,x.join(","));const O=Lr(y);O.length>0&&so(e,`${gl()}`,O.join(","))}},Hh=e=>{Zd(e,Af()),Os(e,`${Rf()}`),Os(e,`${fl()}`),Os(e,`${am()}`);const n=wi(e,`${gl()}`).map(r=>r.split(",")).getOr([]),o=wi(e,`${Gu()}`).map(r=>r.split(",")).getOr([]);fe(n,r=>Os(e,r)),LD(e,o),Os(e,`${Gu()}`),Os(e,`${gl()}`)},zh=(e,n,o,r,c)=>{const u=j.fromTag("span",e);return dd(u,n,o,r,c,!1),u},Bb=(e,n,o,r,c,u)=>{const f=[],b=zh(e.getDoc(),o,u,r,c),y=Ar(),x=()=>{y.clear()},O=()=>y.get().getOrThunk(()=>{const z=Pi(b);return f.push(z),y.set(z),z}),A=z=>{fe(z,D)},D=z=>{switch(c4(e,z,"span",pn(z))){case"invalid-child":{x();const V=dr(z);A(V),x();break}case"valid-block":{x(),dd(z,o,u,r,c,!0);break}case"valid":{const V=O();av(z,V);break}}},$=z=>{const L=Ht(z,j.fromDom);A(L)};return Lh(e.dom,n,z=>{x(),$(z)}),f},$a=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=tg(e).length>0,b=Df("mce-annotation");if(u.collapsed&&!f&&i4(e,u),c.getRng().collapsed&&!f){const y=zh(e.getDoc(),b,r,n,o.decorate);i1(y,us),c.getRng().insertNode(y.dom),c.select(y.dom)}else qy(c,!1,()=>{og(e,y=>{Bb(e,y,b,n,o.decorate,r)})})})},wl=e=>{const n=$v();D1(e,n);const o=Pv(e,n),r=cf("span"),c=u=>{fe(u,f=>{r(f)?Zl(f):Hh(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{$a(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{im(e,N.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Xe(Nw(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Nw(e,u);return _n(f,b=>Ht(b,y=>y.dom))}}},md=e=>({getBookmark:Ee(ZS,e),moveToBookmark:Ee(su,e)});md.isBookmarkNode=tc;const fd=(e,n,o)=>o.collapsed?!1:oo(o.getClientRects(),r=>ak(r,e,n)),l4=(e,n)=>e.dispatch("PreProcess",n),Nb=(e,n)=>e.dispatch("PostProcess",n),Pb=e=>{e.dispatch("remove")},u4=e=>{e.dispatch("detach")},d4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},m4=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},f4=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},nx=e=>{e.dispatch("PreInit")},$b=e=>{e.dispatch("PostRender")},g4=e=>{e.dispatch("Init")},Ib=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},or=(e,n,o)=>{e.dispatch(n,o)},kc=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},nc=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Fb=(e,n)=>e.dispatch("BeforeSetContent",n),Lb=(e,n)=>e.dispatch("SetContent",n),ox=(e,n)=>e.dispatch("BeforeGetContent",n),t2=(e,n)=>e.dispatch("GetContent",n),sx=(e,n)=>{e.dispatch("AutocompleterStart",n)},n2=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},rx=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},ax=e=>{e.dispatch("AutocompleterEnd")},h4=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),p4=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Hb=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),o2=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),ke={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ke.metaKeyPressed(e),metaKeyPressed:e=>Ue.os.isMacOS()||Ue.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Jr="data-mce-selected",cx="table,img,figure.image,hr,video,span.mce-preview-object,details",s2=Math.abs,Vh=Math.round,Uh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},zb=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Wh=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,x,O,A,D,$,z,L,V,K,Q,X,re,we,De;const Ge=Ze=>he(Ze)&&(b1(Ze)||o.is(Ze,"figure.image")),ge=Ze=>Or(Ze)||o.hasClass(Ze,"mce-preview-object"),ue=(Ze,Kt)=>{if(zb(Ze)){const en=Ze.touches[0];return Ge(Ze.target)&&!fd(en.clientX,en.clientY,Kt)}else return Ge(Ze.target)&&!fd(Ze.clientX,Ze.clientY,Kt)},Ce=Ze=>{const Kt=Ze.target;ue(Ze,n.selection.getRng())&&!Ze.isDefaultPrevented()&&n.selection.select(Kt)},nt=Ze=>o.hasClass(Ze,"mce-preview-object")&&he(Ze.firstElementChild)?[Ze,Ze.firstElementChild]:o.is(Ze,"figure.image")?[Ze.querySelector("img")]:[Ze],lt=Ze=>{const Kt=Ya(n);return!Kt||Ze.getAttribute("data-mce-resize")==="false"||Ze===n.getBody()?!1:o.hasClass(Ze,"mce-preview-object")&&he(Ze.firstElementChild)?ja(j.fromDom(Ze.firstElementChild),Kt):ja(j.fromDom(Ze),Kt)},qt=(Ze,Kt)=>{if(ge(Kt))return Ze.create("img",{src:Ue.transparentSrc});if(Ei(Kt)){const Fs=ls(x.name,"n")?Tr:Fl,Rn=Kt.cloneNode(!0);return Fs(Ze.select("tr",Rn)).each(gs=>{const ui=Ze.select("td,th",gs);Ze.setStyle(gs,"height",null),fe(ui,Il=>Ze.setStyle(Il,"height",null))}),Rn}else return Kt.cloneNode(!0)},jt=(Ze,Kt,en)=>{if(he(en)){const Fs=nt(Ze);fe(Fs,Rn=>{Rn.style[Kt]||!n.schema.isValid(Rn.nodeName.toLowerCase(),Kt)?o.setStyle(Rn,Kt,en):o.setAttrib(Rn,Kt,""+en)})}},wn=(Ze,Kt,en)=>{jt(Ze,"width",Kt),jt(Ze,"height",en)},Nn=Ze=>{let Kt,en,Fs,Rn,gs;Kt=Ze.screenX-A,en=Ze.screenY-D,X=Kt*x[2]+L,re=en*x[3]+V,X=X<5?5:X,re=re<5?5:re,(Ge(f)||ge(f))&&Th(n)!==!1?Fs=!ke.modifierPressed(Ze):Fs=ke.modifierPressed(Ze),Fs&&(s2(Kt)>s2(en)?(re=Vh(X*K),X=Vh(re/K)):(X=Vh(re/K),re=Vh(X*K))),wn(b,X,re),Rn=x.startPos.x+Kt,gs=x.startPos.y+en,Rn=Rn>0?Rn:0,gs=gs>0?gs:0,o.setStyles(y,{left:Rn,top:gs,display:"block"}),y.innerHTML=X+" &times; "+re,x[2]<0&&b.clientWidth<=X&&o.setStyle(b,"left",$+(L-X)),x[3]<0&&b.clientHeight<=re&&o.setStyle(b,"top",z+(V-re)),Kt=u.scrollWidth-we,en=u.scrollHeight-De,Kt+en!==0&&o.setStyles(y,{left:Rn-Kt,top:gs-en}),Q||(m4(n,f,L,V,"corner-"+x.name),Q=!0)},Vo=()=>{const Ze=Q;Q=!1,Ze&&(jt(f,"width",X),jt(f,"height",re)),o.unbind(r,"mousemove",Nn),o.unbind(r,"mouseup",Vo),c!==r&&(o.unbind(c,"mousemove",Nn),o.unbind(c,"mouseup",Vo)),o.remove(b),o.remove(y),o.remove(O),Cr(f),Ze&&(f4(n,f,X,re,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Cr=Ze=>{Ve();const Kt=o.getPos(Ze,u),en=Kt.x,Fs=Kt.y,Rn=Ze.getBoundingClientRect(),gs=Rn.width||Rn.right-Rn.left,ui=Rn.height||Rn.bottom-Rn.top;f!==Ze&&($e(),f=Ze,X=re=0);const Il=n.dispatch("ObjectSelected",{target:Ze});lt(Ze)&&!Il.isDefaultPrevented()?Xe(Uh,(na,cc)=>{const di=mi=>{const ut=nt(f)[0];A=mi.screenX,D=mi.screenY,L=ut.clientWidth,V=ut.clientHeight,K=V/L,x=na,x.name=cc,x.startPos={x:gs*na[0]+en,y:ui*na[1]+Fs},we=u.scrollWidth,De=u.scrollHeight,O=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=qt(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:en,top:Fs,margin:0}),wn(b,gs,ui),b.removeAttribute(Jr),u.appendChild(b),o.bind(r,"mousemove",Nn),o.bind(r,"mouseup",Vo),c!==r&&(o.bind(c,"mousemove",Nn),o.bind(c,"mouseup",Vo)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},L+" &times; "+V)};let Ha=o.get("mceResizeHandle"+cc);Ha&&o.remove(Ha),Ha=o.add(u,"div",{id:"mceResizeHandle"+cc,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+cc+"-resize; margin:0; padding:0"}),o.bind(Ha,"mousedown",mi=>{mi.stopImmediatePropagation(),mi.preventDefault(),di(mi)}),na.elm=Ha,o.setStyles(Ha,{left:gs*na[0]+en-Ha.offsetWidth/2,top:ui*na[1]+Fs-Ha.offsetHeight/2})}):$e(!1)},In=mh(Cr,0),$e=(Ze=!0)=>{In.cancel(),Ve(),f&&Ze&&f.removeAttribute(Jr),Xe(Uh,(Kt,en)=>{const Fs=o.get("mceResizeHandle"+en);Fs&&(o.unbind(Fs),o.remove(Fs))})},at=(Ze,Kt)=>o.isChildOf(Ze,Kt),mn=Ze=>{if(Q||n.removed||n.composing)return;const Kt=Ze.type==="mousedown"?Ze.target:e.getNode(),en=Bu(j.fromDom(Kt),cx).map(Rn=>Rn.dom).filter(Rn=>o.isEditable(Rn.parentElement)||Rn.nodeName==="IMG"&&o.isEditable(Rn)).getOrUndefined(),Fs=he(en)?o.getAttrib(en,Jr,"1"):"1";if(fe(o.select(`img[${Jr}],hr[${Jr}]`),Rn=>{Rn.removeAttribute(Jr)}),he(en)&&at(en,u)&&n.hasFocus()){vt();const Rn=e.getStart(!0);if(at(Rn,en)&&at(e.getEnd(!0),en)){o.setAttrib(en,Jr,Fs),In.throttle(en);return}}$e()},Ve=()=>{Xe(Uh,Ze=>{Ze.elm&&(o.unbind(Ze.elm),delete Ze.elm)})},vt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{vt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",mn),n.on("keyup compositionend",Ze=>{f&&f.nodeName==="TABLE"&&mn(Ze)}),n.on("hide blur",$e),n.on("contextmenu longpress",Ce,!0)}),n.on("remove",Ve),{isResizable:lt,showResizeRect:Cr,hideResizeRect:$e,updateResizeRect:mn,destroy:()=>{In.cancel(),f=b=O=null}}},ix=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},lx=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},r2=(e,n,o)=>{const r=e.document.createRange();return ix(r,n),lx(r,o),r},a2=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},cu=xn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),c2=(e,n,o)=>n(j.fromDom(o.startContainer),o.startOffset,j.fromDom(o.endContainer),o.endOffset),ux=(e,n)=>n.match({domRange:o=>({ltr:Fe(o),rtl:N.none}),relative:(o,r)=>({ltr:nl(()=>r2(e,o,r)),rtl:nl(()=>N.some(r2(e,r,o)))}),exact:(o,r,c,u)=>({ltr:nl(()=>a2(e,o,r,c,u)),rtl:nl(()=>N.some(a2(e,c,u,o,r)))})}),b4=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>cu.rtl(j.fromDom(c.endContainer),c.endOffset,j.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>c2(e,cu.ltr,o)):c2(e,cu.ltr,o)},v4=(e,n)=>{const o=ux(e,n);return b4(e,o)};cu.ltr,cu.rtl;const ga={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Pr=(e,n,o)=>{var r,c;return N.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return N.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),N.some(f)})},cg=(e,n,o)=>{var r,c;return N.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},GD=(()=>document.caretPositionFromPoint?Pr:document.caretRangeFromPoint?cg:N.none)(),y4=(e,n,o)=>{const r=j.fromDom(e.document);return GD(r,n,o).map(c=>ga.create(j.fromDom(c.startContainer),c.startOffset,j.fromDom(c.endContainer),c.endOffset))},i2=xn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),an=(e,n,o,r)=>e.fold(n,o,r),qD=e=>e.fold(ho,ho,ho),mx=i2.before,fx=i2.on,KD=i2.after,gd={before:mx,on:fx,after:KD,cata:an,getStart:qD},Zh=xn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),C4=e=>Zh.exact(e.start,e.soffset,e.finish,e.foffset),w4=e=>e.match({domRange:n=>j.fromDom(n.startContainer),relative:(n,o)=>gd.getStart(n),exact:(n,o,r,c)=>n}),S4=Zh.domRange,Vb=Zh.relative,jh=Zh.exact,gx=e=>{const n=w4(e);return Gg(n)},YD=ga.create,ig={domRange:S4,relative:Vb,exact:jh,exactFromRange:C4,getWin:gx,range:YD},l2=(e,n)=>{const o=pn(e);return o==="input"?gd.after(e):$t(["br","img"],o)?n===0?gd.before(e):gd.after(e):gd.on(e,n)},XD=(e,n)=>{const o=e.fold(gd.before,l2,gd.after),r=n.fold(gd.before,l2,gd.after);return ig.relative(o,r)},hx=(e,n,o,r)=>{const c=l2(e,n),u=l2(o,r);return ig.relative(c,u)},x4=e=>e.match({domRange:n=>{const o=j.fromDom(n.startContainer),r=j.fromDom(n.endContainer);return hx(o,n.startOffset,r,n.endOffset)},relative:XD,exact:hx}),Tt=(e,n)=>{const r=(n||document).createDocumentFragment();return fe(e,c=>{r.appendChild(c.dom)}),j.fromDom(r)},l=e=>{const n=ig.getWin(e).dom,o=(c,u,f,b)=>a2(n,c,u,f,b),r=x4(e);return v4(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>y4(e,n,o),p=(e,n,o)=>{const r=Gg(j.fromDom(o));return m(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},v=(e,n)=>he(e)&&he(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,S=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},k=(e,n,o)=>S(e,n,o)!==null,M=(e,n,o)=>k(e,n,r=>r.nodeName===o),I=(e,n)=>Na(e)&&!k(e,n,ec),H=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Vs(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(bn(u))return!0}return!1},G=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},se=(e,n)=>{let o=n;for(;o&&o!==e;){if(vn(o))return!0;o=o.parentNode}return!1},Te=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,x;if(!b)return N.none();const O=e.getParent(b,e.isBlock)||u;if(r&&bn(c)&&n&&e.isEmpty(O))return N.some(ie(b,e.nodeIndex(c)));const A=new Vs(c,O);for(;x=A[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||I(x,u))return N.none();if(_e(x)&&x.data.length>0)return M(x,u,"A")?N.none():N.some(ie(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return N.none();y=x}return As(y)?N.none():o&&y?N.some(ie(y,0)):N.none()},We=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=je(b)&&y===b.childNodes.length,O=e.schema.getNonEmptyElements();let A=o;if(Na(b))return N.none();if(je(b)&&y>b.childNodes.length-1&&(A=!1),Cf(b)&&(b=c,y=0),b===c){if(A&&(u=b.childNodes[y>0?y-1:0],u&&(Na(u)||O[u.nodeName]||Ei(u))))return N.none();if(b.hasChildNodes()){if(y=Math.min(!A&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=_e(b)&&x?b.data.length:0,!n&&b===c.lastChild&&Ei(b)||se(c,b)||Na(b)||qa(b))return N.none();if(b.hasChildNodes()&&!Ei(b)){u=b;const D=new Vs(b,c);do{if(vn(u)||Na(u)){f=!1;break}if(_e(u)&&u.data.length>0){y=A?0:u.data.length,b=u,f=!0;break}if(O[u.nodeName.toLowerCase()]&&!ds(u)){y=e.nodeIndex(u),b=u.parentNode,A||y++,f=!0;break}}while(u=A?D.next():D.prev())}}}return n&&(_e(b)&&y===0&&Te(e,x,n,!0,b).each(D=>{b=D.container(),y=D.offset(),f=!0}),je(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&bn(u)&&!G(u,"A")&&!H(e,u,!1)&&!H(e,u,!0)&&Te(e,x,n,!0,u).each(D=>{b=D.container(),y=D.offset(),f=!0}))),A&&!n&&_e(b)&&y===b.data.length&&Te(e,x,n,!1,b).each(D=>{b=D.container(),y=D.offset(),f=!0}),f&&b?N.some(ie(b,y)):N.none()},Le=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=ie.fromRangeStart(n);return We(e,o,!0,r).each(u=>{(!o||!ie.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||We(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?N.none():N.some(r)},Be=(e,n)=>e.splitText(n),ot=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&_e(n)){if(o>0&&o<n.data.length)if(r=Be(n,o),n=r.previousSibling,c>o){c=c-o;const u=Be(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(_e(n)&&o>0&&o<n.data.length&&(n=Be(n,o),o=0),_e(r)&&c>0&&c<r.data.length){const u=Be(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Se=e=>({walk:(u,f)=>Lh(e,u,f),split:ot,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=ud(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Le(e,u).fold(xe,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Se.compareRanges=v,Se.getCaretRangeFromPoint=p,Se.getSelectedNode=Ff,Se.getNode=qe;const Ct=((e,n)=>{const o=(b,y)=>{if(!Ls(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;Gd(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=Cs(b,e);return parseFloat(x)||0}return y},c=r,u=(b,y)=>Wo(y,(x,O)=>{const A=Cs(b,O),D=A===void 0?0:parseInt(A,10);return isNaN(D)?x:x+D},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,x)=>{const O=u(b,x);return y>O?y-O:0}}})("height",e=>{const n=e.dom;return pf(e)?n.getBoundingClientRect().height:n.offsetHeight}),ze=e=>Ct.get(e),yn=()=>j.fromDom(document),Bn=(e,n)=>e.view(n).fold(Fe([]),r=>{const c=e.owner(r),u=Bn(e,c);return[r].concat(u)}),kn=(e,n)=>{const o=n.owner(e);return Bn(n,o)};var Sl=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?N.none():N.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(j.fromDom)},owner:e=>zr(e)});const hd=e=>{const n=yn(),o=_a(n),r=kn(e,Sl),c=m1(e),u=Bd(r,(f,b)=>{const y=m1(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return vf(u.left+c.left+o.left,u.top+c.top+o.top)},pd=e=>pn(e)==="textarea",En=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Qr=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},ea=(e,n)=>{const o=dr(e);if(o.length===0||pd(e))return{element:e,offset:n};if(n<o.length&&!pd(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return pd(r)?{element:e,offset:n}:pn(r)==="img"?{element:r,offset:1}:yo(r)?{element:r,offset:fh(r).length}:{element:r,offset:dr(r).length}}},Oc=(e,n)=>{const o=lv(e),r=ze(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Ac=(e,n)=>{const o=ea(e,n),r=j.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+qo+"</span>");return da(o.element,r),Oc(r,()=>ro(r))},Qt=e=>Oc(j.fromDom(e),ht),zo=(e,n,o,r)=>{Ft(e,(c,u)=>Gh(e,n,o,r),o)},xl=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(En(e,u))return;const f=_a(n).top;o(e,n,f,r,c),Qr(e,u)},Gh=(e,n,o,r)=>{const c=j.fromDom(e.getBody()),u=j.fromDom(e.getDoc());tr(c);const f=Ac(j.fromDom(o.startContainer),o.startOffset);xl(e,u,n,f,r),f.cleanup()},Ia=(e,n,o,r)=>{const c=j.fromDom(e.getDoc());xl(e,c,o,Qt(n),r)},Ft=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(j.fromDom(r),j.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},u2=(e,n,o,r,c)=>{const u=n.pos;if(r)cw(u.left,u.top,c);else{const f=u.top-o+n.height;cw(-e.getBody().getBoundingClientRect().left,f,c)}},d2=(e,n,o,r,c,u)=>{const f=r+o,b=c.pos.top,y=c.bottom,x=y-b>=r;b<o?u2(e,c,r,u!==!1,n):b>f?u2(e,c,r,x?u!==!1:u===!0,n):y>f&&!x&&u2(e,c,r,u===!0,n)},Ub=(e,n,o,r,c)=>{const u=Gg(n).dom.innerHeight;d2(e,n,o,u,r,c)},px=(e,n,o,r,c)=>{const u=Gg(n).dom.innerHeight;d2(e,n,o,u,r,c);const f=hd(r.element),b=uv(window);f.top<b.y?Kg(r.element,c!==!1):f.top>b.bottom&&Kg(r.element,c===!0)},Bm=(e,n,o)=>zo(e,Ub,n,o),iu=(e,n,o)=>Ia(e,n,Ub,o),bx=(e,n,o)=>zo(e,px,n,o),qh=(e,n,o)=>Ia(e,n,px,o),DF=(e,n,o)=>{(e.inline?iu:qh)(e,n,o)},m2=(e,n,o)=>{(e.inline?Bm:bx)(e,n,o)},Wb=(e,n=!1)=>e.dom.focus({preventScroll:n}),Kh=e=>{const n=xi(e).dom;return e.dom===n.activeElement},E4=(e=yn())=>N.from(e.dom.activeElement).map(j.fromDom),JD=e=>E4(xi(e)).filter(n=>e.dom.contains(n.dom)),QD=(e,n)=>{const o=yo(n)?fh(n).length:dr(n).length+1;return e>o?o:e<0?0:e},MF=e=>ig.range(e.start,QD(e.soffset,e.start),e.finish,QD(e.foffset,e.finish)),eM=(e,n)=>!Pu(n.dom)&&(Si(e,n)||Dn(e,n)),T4=e=>n=>eM(e,n.start)&&eM(e,n.finish),Kj=e=>e.inline||Ue.browser.isFirefox(),BF=e=>ig.range(j.fromDom(e.startContainer),e.startOffset,j.fromDom(e.endContainer),e.endOffset),tM=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?N.none():N.from(n.getRangeAt(0))).map(BF)},_4=e=>{const n=Gg(e);return tM(n.dom).filter(T4(e))},k4=(e,n)=>N.from(n).filter(T4(e)).map(MF),O4=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),N.some(n)}catch{return N.none()}},f2=e=>{const n=Kj(e)?_4(j.fromDom(e.getBody())):N.none();e.bookmark=n.isSome()?n:e.bookmark},vx=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>k4(j.fromDom(e.getBody()),o)).bind(O4),nM=e=>{vx(e).each(n=>e.selection.setRng(n))},oM={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},sM=(e,n)=>(Ls(n)||(n=0),setTimeout(e,n)),NF=(e,n)=>(Ls(n)||(n=0),setInterval(e,n)),si={setEditorTimeout:(e,n,o)=>sM(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=NF(()=>{e.removed?clearInterval(r):n()},o);return r}},rM=e=>e.type==="nodechange"&&e.selectionChange,aM=(e,n)=>{const o=()=>{n.throttle()};Qn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Qn.DOM.unbind(document,"mouseup",o)})},cM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},iM=(e,n)=>{cM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{rM(o)||f2(e)})},PF=e=>{const n=mh(()=>{f2(e)},0);e.on("init",()=>{e.inline&&aM(e,n),iM(e,n)}),e.on("remove",()=>{n.cancel()})};let Zb;const R4=Qn.DOM,$F=e=>je(e)&&oM.isEditorUIElement(e),D4=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},yx=(e,n)=>{const o=kh(e);return R4.getParent(n,c=>$F(c)||(o?e.dom.is(c,o):!1))!==null},M4=e=>{try{const n=xi(j.fromDom(e.getElement()));return E4(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},IF=(e,n)=>{const o=n.editor;PF(o);const r=(c,u)=>{if(cb(c)&&c.inline!==!0){const f=j.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;D4(M4(o))&&r(o,Wd),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{si.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!D4(M4(o))||c!==o)&&r(o,Zd),!yx(o,M4(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Zb||(Zb=c=>{const u=e.activeEditor;u&&nw(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!yx(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},R4.bind(document,"focusin",Zb))},Cx=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Zb&&(R4.unbind(document,"focusin",Zb),Zb=null)},lM=e=>{e.on("AddEditor",Ee(IF,e)),e.on("RemoveEditor",Ee(Cx,e))},FF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),uM=e=>e.collapsed?N.from(qe(e.startContainer,e.startOffset)).map(j.fromDom):N.none(),dM=(e,n)=>uM(n).bind(o=>Pf(o)?N.some(o):Si(e,o)?N.none():N.some(e)),mM=(e,n)=>{dM(j.fromDom(e.getBody()),n).bind(o=>Nr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},B4=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},LF=e=>Kh(e)||JD(e).isSome(),HF=e=>he(e.iframeElement)&&Kh(j.fromDom(e.iframeElement)),zF=e=>{const n=e.getBody();return n&&LF(j.fromDom(n))},fM=e=>{const n=xi(j.fromDom(e.getElement()));return E4(n).filter(o=>!D4(o.dom)&&yx(e,o.dom)).isSome()},Yh=e=>e.inline?zF(e):HF(e),g2=e=>Yh(e)||fM(e),VF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=f=>{vx(f).each(b=>{f.selection.setRng(b),r=b})};!Yh(e)&&e.hasEditableRoot()&&c(e);const u=FF(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){B4(u),e.hasEditableRoot()||c(e),mM(e,r),N4(e);return}e.inline||(Ue.browser.isOpera()||B4(o),e.getWin().focus()),(Ue.browser.isFirefox()||e.inline)&&(B4(o),mM(e,r)),N4(e)},N4=e=>e.editorManager.setActive(e),P4=(e,n)=>{e.removed||(n?N4(e):VF(e))},gM=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),$4=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return N.from(u).map(j.fromDom).map(b=>!r||!n.collapsed?Mu(b,c(b,f)).getOr(b):b).bind(b=>Za(b)?N.some(b):gc(b).filter(Za)).map(b=>b.dom).getOr(e)},I4=(e,n,o=!1)=>$4(e,n,!0,o,(r,c)=>Math.min(Vr(r),c)),F4=(e,n,o=!1)=>$4(e,n,!1,o,(r,c)=>c>0?c-1:c),hM=(e,n)=>{const o=e;for(;e&&_e(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},UF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),_e(o)&&_e(r)&&(o.length===c?o=hM(o.nextSibling,!0):o=o.parentNode,u===0?r=hM(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=_e(f)?f.parentNode:f;return vc(b)?b:e},WF=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||I4(u,n,n.collapsed),e.isBlock),b=e.getParent(r||F4(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y;const x=new Vs(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},ZF=(e,n,o)=>N.from(n).bind(r=>N.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(jy(e,f,r,!0),jy(e,f,r,!1)),f})),jb=(e,n)=>Ht(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),pM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},h2=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},bM=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Gc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},L4=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Fa{static create(n,o){const r=new Fa(n,pM[n]||1);return o&&Xe(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!Z(n))return he(n)&&Xe(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Fa(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=h2(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=h2(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(L4(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||L4(f))return!1}if(f.type===8||f.type===3&&!bM(f)||f.type===3&&f.parent&&o[f.parent.name]&&Gc((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=h2(f,u));return!0}walk(n){return h2(this,null,n)}}const jF=Me.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),vM=e=>Z(e.nodeValue)&&e.nodeValue.includes(qo),yM=e=>`${e.length===0?"":`${Ht(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,GF=(e,n)=>n.querySelectorAll(yM(e)),CM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>vM(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),wM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(vM(n)){const o=n.parentNode;return o&&Rt(jF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),qF=e=>CM(e).nextNode()!==null,KF=e=>wM(e).nextNode()!==null,YF=(e,n)=>n.querySelector(yM(e))!==null,XF=(e,n)=>{fe(GF(e,n),o=>{const r=j.fromDom(o);ys(r,"data-mce-bogus")==="all"?ro(r):fe(e,c=>{Ud(r,c)&&Os(r,c)})})},SM=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},wx=_(SM,CM),xM=_(SM,wM),H4=(e,n)=>{const o=[{condition:Ee(YF,n),action:Ee(XF,n)},{condition:qF,action:wx},{condition:KF,action:xM}];let r=e,c=!1;return fe(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},EM=e=>{const n=mr(e,"[data-mce-bogus]");fe(n,o=>{ys(o,"data-mce-bogus")==="all"?ro(o):Nf(o)?(da(o,j.fromText(Xg)),ro(o)):Zl(o)})},TM=e=>{const n=mr(e,"input");fe(n,o=>{Os(o,"name")})},JF=(e,n)=>{const o=pr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},QF=(e,n)=>{const o=e.getDoc(),r=xi(j.fromDom(e.getBody())),c=j.fromTag("div",o);so(c,"data-mce-bogus","all"),Ut(c,{position:"fixed",left:"-9999999px",top:"0"}),i1(c,n.innerHTML),EM(c),TM(c);const u=tw(r);Io(u,c);const f=Ba(c.dom.innerText);return ro(c),f},e8=(e,n,o)=>{let r;return n.format==="raw"?r=Me.trim(Ba(H4(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=QF(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=JF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!hh(j.fromDom(o))&&Z(r)?Me.trim(r):r},t8=(e,n)=>N.from(e.getBody()).fold(Fe(n.format==="tree"?new Fa("body",11):""),o=>e8(e,n,o)),z4=Me.makeMap,_M=e=>{const n=[];e=e||{};const o=e.indent,r=z4(e.indent_before||""),c=z4(e.indent_after||""),u=Di.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const O=n[n.length-1];O.length>0&&O!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let O=0,A=y.length;O<A;O++){const D=y[O];n.push(" ",D.name,'="',u(D.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const O=n[n.length-1];O.length>0&&O!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Nm=(e={},n=dl())=>{const o=_M(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const O=f[y.type];if(O)O(y);else{const A=y.name,D=A in n.getVoidElements();let $=y.attributes;if(u&&$&&$.length>1){const z=[];z.map={};const L=n.getElementRule(y.name);if(L){for(let V=0,K=L.attributesOrder.length;V<K;V++){const Q=L.attributesOrder[V];if(Q in $.map){const X=$.map[Q];z.map[Q]=X,z.push({name:Q,value:X})}}for(let V=0,K=$.length;V<K;V++){const Q=$[V].name;if(!(Q in z.map)){const X=$.map[Q];z.map[Q]=X,z.push({name:Q,value:X})}}$=z}}if(o.start(A,$,D),Jo(A))Z(y.value)&&o.text(y.value,!0),o.end(A);else if(!D){let z=y.firstChild;if(z){(A==="pre"||A==="textarea")&&z.type===3&&((x=z.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(z);while(z=z.next)}o.end(A)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},V4=new Set;fe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{V4.add(n)});const kM=new Set;fe(["background-color"],n=>{kM.add(n)});const OM=["font","text-decoration","text-emphasis"],n8=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Gb=(e,n)=>Lr(n8(e,n)),o8=e=>V4.has(e),s8=e=>kM.has(e),AM=(e,n)=>oo(Gb(e,n),o=>o8(o)),r8=(e,n)=>AM(e,n)&&oo(Gb(e,n),o=>s8(o)),a8=e=>Et(e,n=>oo(OM,o=>ls(n,o))),c8=(e,n,o)=>{const r=Gb(e,n),c=Gb(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",O=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return jn(x)&&jn(O)&&x!==O};return oo(r,f=>{const b=y=>oo(y,x=>x===f);if(!b(c)&&b(OM)){const y=a8(c);return oo(y,u)}else return u(f)})},RM=(e,n,o)=>N.from(o.container()).filter(_e).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),U4=Ee(RM,!0,Om),W4=Ee(RM,!1,Om),i8=e=>{const n=e.container();return _e(n)&&(n.data.length===0||um(n.data)&&md.isBookmarkNode(n.parentNode))},lg=(e,n)=>o=>pb(e?0:-1,o).filter(n).isSome(),DM=e=>b1(e)&&Cs(j.fromDom(e),"display")==="block",MM=e=>vn(e)&&!eh(e),l8=lg(!0,DM),u8=lg(!1,DM),ct=lg(!0,Or),qb=lg(!1,Or),Z4=lg(!0,Ei),j4=lg(!1,Ei),bd=lg(!0,MM),ug=lg(!1,MM),d8=e=>e.slice(0,-1),m8=(e,n,o)=>Si(n,e)?d8(ev(e,r=>o(r)||Dn(r,n))):[],BM=(e,n)=>m8(e,n,xe),Pm=(e,n)=>[e].concat(BM(e,n)),Kb=(e,n,o)=>zS(e,n,o,i8),NM=e=>n=>e.isBlock(pn(n)),f8=(e,n,o)=>ns(Pm(j.fromDom(n.container()),e),NM(o)),PM=(e,n,o,r)=>Kb(e,n.dom,o).forall(c=>f8(n,o,r).fold(()=>!Xa(c,o,n.dom),u=>!Xa(c,o,n.dom)&&Si(u,j.fromDom(c.container())))),Bt=(e,n,o,r)=>f8(n,o,r).fold(()=>Kb(e,n.dom,o).forall(c=>!Xa(c,o,n.dom)),c=>Kb(e,c.dom,o).isNone()),G4=Ee(Bt,!1),zt=Ee(Bt,!0),$M=Ee(PM,!1),Yj=Ee(PM,!0),Xj=e=>vb(e).exists(Nf),Sx=(e,n,o,r)=>{const c=Et(Pm(j.fromDom(o.container()),n),f=>r.isBlock(pn(f))),u=Tr(c).getOr(n);return Ja(e,u.dom,o).filter(Xj)},IM=(e,n,o)=>vb(n).exists(Nf)||Sx(!0,e,n,o).isSome(),q4=(e,n,o)=>PS(n).exists(Nf)||Sx(!1,e,n,o).isSome(),FM=Ee(Sx,!1),g8=Ee(Sx,!0),Ot=e=>ie.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),LM=(e,n,o)=>{const r=Et(Pm(j.fromDom(n.container()),e),c=>o.isBlock(pn(c)));return Tr(r).getOr(e)},HM=(e,n,o)=>Ot(n)?W4(n):W4(n)||Pa(LM(e,n,o).dom,n).exists(W4),zM=(e,n,o)=>Ot(n)?U4(n):U4(n)||Br(LM(e,n,o).dom,n).exists(U4),p2=e=>$t(["pre","pre-wrap"],e),xx=e=>vb(e).bind(n=>jo(n,Za)).exists(n=>p2(Cs(n,"white-space"))),h8=(e,n)=>Pa(e.dom,n).isNone(),p8=(e,n)=>Br(e.dom,n).isNone(),b8=(e,n,o)=>h8(e,n)||p8(e,n)||G4(e,n,o)||zt(e,n,o)||q4(e,n,o)||IM(e,n,o),VM=e=>he(e)&&vn(e)&&Ry(e),UM=(e,n)=>o=>VM(new Vs(o,e)[n]()),Jj=(e,n)=>{const o=Br(e.dom,n).getOr(n),r=UM(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},Qj=(e,n)=>{const o=Pa(e.dom,n).getOr(n),r=UM(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},WM=(e,n,o)=>xx(n)?!1:b8(e,n,o)||HM(e,n,o)||zM(e,n,o),b2=(e,n,o)=>xx(n)?!1:G4(e,n,o)||$M(e,n,o)||q4(e,n,o)||HM(e,n,o)||Qj(e,n),v8=e=>{const n=e.container(),o=e.offset();return _e(n)&&o<n.data.length?ie(n,o+1):e},v2=(e,n,o)=>xx(n)?!1:zt(e,n,o)||Yj(e,n,o)||IM(e,n,o)||zM(e,n,o)||Jj(e,n),Ex=(e,n,o)=>b2(e,n,o)||v2(e,v8(n),o),ZM=(e,n)=>yl(e.charAt(n)),Gt=(e,n)=>Om(e.charAt(n)),jM=e=>{const n=e.container();return _e(n)&&ir(n.data,us)},Tx=e=>{const n=e.split("");return Ht(n,(o,r)=>yl(o)&&r>0&&r<n.length-1&&Wy(n[r-1])&&Wy(n[r+1])?" ":o).join("")},K4=(e,n,o,r)=>{const c=n.data,u=ie(n,0);return!o&&ZM(c,0)&&!Ex(e,u,r)?(n.data=" "+c.slice(1),!0):o&&Gt(c,0)&&b2(e,u,r)?(n.data=us+c.slice(1),!0):!1},GM=e=>{const n=e.data,o=Tx(n);return o!==n?(e.data=o,!0):!1},Y4=(e,n,o,r)=>{const c=n.data,u=ie(n,c.length-1);return!o&&ZM(c,c.length-1)&&!Ex(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&Gt(c,c.length-1)&&v2(e,u,r)?(n.data=c.slice(0,-1)+us,!0):!1},qM=(e,n,o)=>{const r=n.container();if(!_e(r))return N.none();if(jM(n)){const c=K4(e,r,!1,o)||GM(r)||Y4(e,r,!1,o);return gn(c,n)}else if(Ex(e,n,o)){const c=K4(e,r,!0,o)||Y4(e,r,!0,o);return gn(c,n)}else return N.none()},KM=e=>{const n=j.fromDom(e.getBody());e.selection.isCollapsed()&&qM(n,ie.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},YM=(e,n,o,r)=>{if(o===0)return;const c=j.fromDom(e),u=ko(c,x=>r.isBlock(pn(x))).getOr(c),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&v2(u,ie(e,e.data.length),r),y=n===0&&b2(u,ie(e,0),r);e.replaceData(n,o,qc(f,4,y,b))},y2=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Fg(r).length;YM(e,n,c,o)},X4=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-sf(r).length;YM(e,n-c,c,o)},J4=(e,n,o,r,c=!0)=>{const u=sf(e.data).length,f=c?e:n,b=c?n:e;return c?f.appendData(b.data):f.insertData(0,b.data),ro(j.fromDom(b)),r&&y2(f,u,o),f},y8=(e,n)=>{const o=e.container(),r=e.offset();return!ie.isTextPosition(e)&&o===n.parentNode&&r>ie.before(n).offset()},C8=(e,n)=>y8(n,e)?ie(n.container(),n.offset()-1):n,w8=e=>_e(e)?ie(e,0):ie.before(e),S8=e=>_e(e)?ie(e,e.data.length):ie.after(e),XM=e=>Fi(e.previousSibling)?N.some(S8(e.previousSibling)):e.previousSibling?Qa(e.previousSibling):N.none(),JM=e=>Fi(e.nextSibling)?N.some(w8(e.nextSibling)):e.nextSibling?Nr(e.nextSibling):N.none(),Q4=(e,n)=>N.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Pa(e,ie.before(o))).orThunk(()=>Br(e,ie.after(n))),e3=(e,n)=>Br(e,ie.after(n)).orThunk(()=>Pa(e,ie.before(n))),x8=(e,n)=>XM(n).orThunk(()=>JM(n)).orThunk(()=>Q4(e,n)),E8=(e,n)=>JM(n).orThunk(()=>XM(n)).orThunk(()=>e3(e,n)),T8=(e,n,o)=>e?E8(n,o):x8(n,o),_8=(e,n,o)=>T8(e,n,o).map(Ee(C8,o)),QM=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},k8=e=>n=>n.dom===e,O8=(e,n)=>n&&Rt(e.schema.getBlockElements(),pn(n)),A8=(e,n,o)=>{if(ao(e,n)){const r=j.fromHtml('<br data-mce-bogus="1">');return o?fe(dr(n),c=>{Ih(c)||ro(c)}):qd(n),Io(n,r),N.some(ie.before(r.dom))}else return N.none()},e5=(e,n,o,r)=>{const c=Wc(e).filter(yo),u=gf(e).filter(yo);return ro(e),Au(c,u,n,(f,b,y)=>{const x=f.dom,O=b.dom,A=x.data.length;return J4(x,O,o,r),y.container()===O?ie(x,A):y}).orThunk(()=>(r&&(c.each(f=>X4(f.dom,f.dom.length,o)),u.each(f=>y2(f.dom,0,o))),n))},R8=(e,n)=>Rt(e.schema.getTextInlineElements(),pn(n)),Xh=(e,n,o,r=!0,c=!1)=>{const u=_8(n,e.getBody(),o.dom),f=ko(o,Ee(O8,e),k8(e.getBody())),b=e5(o,u,e.schema,R8(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(y=>A8(e.schema,y,c)).fold(()=>{r&&QM(e,n,b)},y=>{r&&QM(e,n,N.some(y))})},Jh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,D8=e=>Jh.test(e),dg=(e,n)=>ja(j.fromDom(n),Ak(e))&&!Fu(e.schema,n)&&e.dom.isEditable(n),t5=e=>{var n;return Qn.DOM.getStyle(e,"direction",!0)==="rtl"||D8((n=e.textContent)!==null&&n!==void 0?n:"")},M8=(e,n,o)=>Et(Qn.DOM.getParents(o.container(),"*",n),e),$m=(e,n,o)=>{const r=M8(e,n,o);return N.from(r[r.length-1])},n5=(e,n,o)=>{const r=zi(n,e),c=zi(o,e);return he(r)&&r===c},o5=e=>Vv(e)||mm(e),ri=(e,n)=>{const o=n.container(),r=n.offset();return e?Ii(o)?_e(o.nextSibling)?ie(o.nextSibling,0):ie.after(o):Vv(n)?ie(o,r+1):n:Ii(o)?_e(o.previousSibling)?ie(o.previousSibling,o.previousSibling.data.length):ie.before(o):mm(n)?ie(o,r-1):n},ha=Ee(ri,!0),s5=Ee(ri,!1),r5=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},B8=e=>{e.execCommand("delete")},_x=e=>r5(e,"Delete"),a5=e=>r5(e,"ForwardDelete"),Qh=e=>n=>Zo(gc(n),e,Dn),N8=e=>Lw(e)||ma(e),kx=(e,n)=>Si(e,n)?jo(n,N8,Qh(e)):N.none(),mo=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},C2=(e,n,o)=>ur(Nr(o),Qa(o),(r,c)=>{const u=ri(!0,r),f=ri(!1,c),b=ri(!1,n);return e?Br(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Pa(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),ep=e=>(af(e)?Wc(e):Zc(e)).bind(ep).orThunk(()=>N.some(e)),c5=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=ep(o).getOr(o),f=j.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?mo(e,r):ao(e.schema,f,{checkRootAsContent:!1})&&(Ma(f),r&&e.selection.setCursorLocation(f.dom,0)),!Dn(o,f)){const b=Zo(gc(f),o)?[]:ew(f);fe(b.concat(dr(o)),y=>{!Dn(y,f)&&!Si(y,f)&&ao(e.schema,y)&&ro(y)})}},Yb=e=>n=>Dn(e,n),Rc=e=>mr(e,"td,th"),Xb=(e,n)=>Nh(j.fromDom(e),n),Wn=e=>ur(e.startTable,e.endTable,(n,o)=>{const r=h1(n,u=>Dn(u,o)),c=h1(o,u=>Dn(u,n));return!r&&!c?e:{...e,startTable:r?N.none():e.startTable,endTable:c?N.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),w2=e=>Wn(e),i5=(e,n)=>{const o=Xb(e.startContainer,n),r=Xb(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=ur(o,r,Dn).getOr(!1);return w2({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},Ox=(e,n)=>({start:e,end:n}),t3=(e,n,o)=>({rng:e,table:n,cells:o}),tp=xn.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Jb=(e,n)=>Bu(j.fromDom(e),"td,th",n),Ax=e=>!Dn(e.start,e.end),S2=(e,n)=>Nh(e.start,n).bind(o=>Nh(e.end,n).bind(r=>gn(Dn(o,r),o))),n3=(e,n)=>!Ax(e)&&S2(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),l5=(e,n)=>{const o=Jb(e.startContainer,n),r=Jb(e.endContainer,n);return ur(o,r,Ox)},u5=e=>n=>Nh(n,e).bind(o=>Fl(Rc(o)).map(r=>Ox(n,r))),d5=e=>n=>Nh(n,e).bind(o=>Tr(Rc(o)).map(r=>Ox(r,n))),Rx=e=>n=>S2(n,e).map(o=>t3(n,o,Rc(o))),o3=(e,n,o,r)=>{if(o.collapsed||!e.forall(Ax))return N.none();if(n.isSameTable){const c=e.bind(Rx(r));return N.some({start:c,end:c})}else{const c=Jb(o.startContainer,r),u=Jb(o.endContainer,r),f=c.bind(u5(r)).bind(Rx(r)),b=u.bind(d5(r)).bind(Rx(r));return N.some({start:f,end:b})}},np=(e,n)=>ya(e,o=>Dn(o,n)),Dx=e=>ur(np(e.cells,e.rng.start),np(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),s3=(e,n,o)=>e.exists(r=>n3(r,o)&&_b(r.start,n)),m5=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},P8=(e,n,o,r)=>o3(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=Dx(c).getOr([]);if(u&&c.cells.length===f.length)return N.some(tp.fullTable(c.table));if(f.length>0){if(u)return N.some(tp.partialTable(f,N.none()));{const b=m5(o,n);return N.some(tp.partialTable(f,N.some({...n,rng:b})))}}else return N.none()}),f5=(e,n,o,r)=>o3(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(Dx).getOr([]),b=u.bind(Dx).getOr([]);if(f.length>0&&b.length>0){const y=m5(o,n);return N.some(tp.multiTable(f,b,y))}else return N.none()}),g5=(e,n)=>{const o=Yb(e),r=l5(n,o),c=i5(n,o);return s3(r,n,o)?r.map(u=>tp.singleCellTable(n,u.start)):c.isMultiTable?f5(r,c,n,o):P8(r,c,n,o)},r3=e=>fe(e,n=>{Os(n,"contenteditable"),Ma(n)}),Mx=(e,n)=>N.from(e.dom.getParent(n,e.dom.isBlock)).map(j.fromDom),h5=(e,n,o)=>{o.each(r=>{n?ro(r):(Ma(r),e.selection.setCursorLocation(r.dom,0))})},Bx=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),Nx(e,c,n,!1).each(u=>u())},a3=e=>{const n=tg(e),o=j.fromDom(e.selection.getNode());v1(o.dom)&&ao(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&oo(n,r=>Dn(r,o))&&so(o,"data-mce-selected","1")},c3=(e,n,o)=>N.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=Mx(e,f?u.endContainer:u.startContainer);u.deleteContents(),h5(e,f,b.filter(Ee(ao,e.schema)));const y=f?n[0]:n[n.length-1];return Bx(e,y,r,f),ao(e.schema,y)?N.none():N.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);r3(c),a3(e)}),p5=(e,n,o,r)=>N.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];Bx(e,u,c,!0),Bx(e,f,c,!1);const b=ao(e.schema,u)?n:n.slice(1),y=ao(e.schema,f)?o:o.slice(0,-1);r3(b.concat(y)),r.deleteContents(),a3(e)}),Nx=(e,n,o,r=!0)=>N.some(()=>{c5(e,n,o,r)}),b5=(e,n)=>N.some(()=>Xh(e,!1,n)),v5=(e,n,o)=>g5(n,o).bind(r=>r.fold(Ee(Nx,e),Ee(b5,e),Ee(c3,e),Ee(p5,e))),y5=(e,n)=>x2(e,n),C5=(e,n,o,r)=>Px(n,r).fold(()=>v5(e,n,o),c=>y5(e,c)),i3=(e,n,o)=>{const r=j.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?c3(e,o,N.none()):C5(e,r,c,n)},l3=(e,n)=>ns(Pm(n,e),$f),Px=(e,n)=>ns(Pm(n,e),cf("caption")),w5=(e,n,o,r,c)=>ou(o,e.getBody(),c).bind(u=>l3(n,j.fromDom(u.getNode())).bind(f=>Dn(f,r)?N.none():N.some(ht))),x2=(e,n)=>N.some(()=>{Ma(n),e.selection.setCursorLocation(n.dom,0)}),S5=(e,n,o,r)=>Nr(e.dom).bind(c=>Qa(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),x5=(e,n)=>x2(e,n),u3=(e,n,o)=>Px(e,j.fromDom(o.getNode())).fold(()=>N.some(ht),r=>gn(!Dn(r,n),ht)),$x=(e,n,o,r,c)=>ou(o,e.getBody(),c).fold(()=>N.some(ht),u=>S5(r,o,c,u)?x5(e,r):u3(n,r,u)),d3=(e,n,o,r)=>{const c=ie.fromRangeStart(e.selection.getRng());return l3(o,r).bind(u=>ao(e.schema,u,{checkRootAsContent:!1})?x2(e,u):w5(e,o,n,u,c))},Ix=(e,n,o,r)=>{const c=ie.fromRangeStart(e.selection.getRng());return ao(e.schema,r)?x2(e,r):$x(e,o,n,r,c)},m3=(e,n)=>e?Z4(n):j4(n),Fx=(e,n)=>{const o=ie.fromRangeStart(e.selection.getRng());return m3(n,o)||Ja(n,e.getBody(),o).exists(r=>m3(n,r))},f3=(e,n,o)=>{const r=j.fromDom(e.getBody());return Px(r,o).fold(()=>d3(e,n,r,o).orThunk(()=>gn(Fx(e,n),ht)),c=>Ix(e,n,r,c))},op=(e,n)=>{const o=j.fromDom(e.selection.getStart(!0)),r=tg(e);return e.selection.isCollapsed()&&r.length===0?f3(e,n,o):i3(e,o,r)},Im=(e,n)=>{let o=n;for(;o&&o!==e;){if(be(o)||vn(o))return o;o=o.parentNode}return null},E5=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Qb=Me.each,E2=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const O={};return Qb(n.getAttribs(x),A=>{const D=A.nodeName.toLowerCase();D!=="style"&&!c(D)&&(O[D]=n.getAttrib(x,D))}),O},y=(x,O)=>{for(const A in x)if(Rt(x,A)){const D=O[A];if(tt(D)||x[A]!==D)return!1;delete O[A]}for(const A in O)if(Rt(O,A))return!1;return!0};return je(u)&&je(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!tc(u)&&!tc(f)},c=u=>oo(E5,f=>ls(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Lx=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),e0=e=>e.name==="summary",mg=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},g3=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},$8=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&mg(o,c=>{g3(e,n,c,r)}),r},T5=(e,n)=>{const o=(r,c)=>{Xe(r,u=>{const f=Ca(u.nodes);fe(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||Dt(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},h3=(e,n,o,r={})=>{const c=$8(e,n,o);T5(c,r)},Hx=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Fa("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Fa("#text",3)).value=us},I8=e=>{var n;return Fm(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===us},Fm=(e,n)=>{const o=e==null?void 0:e.firstChild;return he(o)&&o===e.lastChild&&o.name===n},sp=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},zx=(e,n,o,r)=>r.isEmpty(n,o,c=>sp(e,c)),vr=(e,n)=>he(e)&&(n(e)||e.name==="br"),F8=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return N.from(n)},p3=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&p3(c,n,o);e.unwrap()}},lu=(e,n,o,r=ht)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Me.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,x=O=>O!==o&&!b[O.name];for(let O=0;O<e.length;O++){const A=e[O];let D,$,z;if(!A.parent||y.has(A))continue;if(c[A.name]&&A.parent.name==="li"){let V=A.next;for(;V&&c[V.name];){V.name="li",y.add(V),A.parent.insert(V,A.parent);V=V.next}A.unwrap();continue}const L=[A];for(D=A.parent;D&&!n.isValidChild(D.name,A.name)&&x(D);D=D.parent)L.push(D);if(D&&L.length>1)if(_5(n,A,D))p3(A,n);else{L.reverse(),$=L[0].clone(),r($);let V=$;for(let K=0;K<L.length-1;K++){n.isValidChild(V.name,L[K].name)&&K>0?(z=L[K].clone(),r(z),V.append(z)):z=V;for(let Q=L[K].firstChild;Q&&Q!==L[K+1];){const X=Q.next;z.append(Q),Q=X}V=z}zx(n,u,f,$)?D.insert(A,L[0],!0):(D.insert($,L[0],!0),D.insert(A,$)),D=L[0],(zx(n,u,f,D)||Fm(D,"br"))&&D.empty().remove()}else if(A.parent){if(A.name==="li"){let V=A.prev;if(V&&(V.name==="ul"||V.name==="ol")){V.append(A);continue}if(V=A.next,V&&(V.name==="ul"||V.name==="ol")&&V.firstChild){V.insert(A,V.firstChild,!0);continue}const K=new Fa("ul",1);r(K),A.wrap(K);continue}if(n.isValidChild(A.parent.name,"div")&&n.isValidChild("div",A.name)){const V=new Fa("div",1);r(V),A.wrap(V)}else p3(A,n)}}},Tn=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},_5=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&Tn(o,"a")?!0:e0(o)&&Lx(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,L8=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},H8=e=>{const n=ie.fromRangeStart(e),o=ie.fromRangeEnd(e),r=e.commonAncestorContainer;return Ja(!1,r,o).map(c=>!Xa(n,o,r)&&Xa(n,c,r)?L8(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},Yn=e=>e.collapsed?e:H8(e),k5=e=>he(e.firstChild)&&e.firstChild===e.lastChild,T2=e=>e.name==="br"||e.value===us,_2=(e,n)=>e.getBlockElements()[n.name]&&k5(n)&&T2(n.firstChild),Vx=(e,n)=>{const o=e.getNonEmptyElements();return he(n)&&(n.isEmpty(o)||_2(e,n))},Ux=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),Vx(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},O5=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},eG=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return O5(c)},z8=e=>{var n;return Et((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},tG=e=>e.data===us||bn(e),V8=e=>he(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&tG(e.firstChild),U8=e=>!e.firstChild||V8(e),nG=e=>e.length>0&&U8(e[e.length-1])?e.slice(0,-1):e,b3=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},sr=(e,n)=>!!b3(e,n),A5=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},R5=(e,n)=>{const o=ie.before(e),c=nr(n).next(o);return c?c.toRange():null},D5=(e,n)=>{const o=ie.after(e),c=nr(n).prev(o);return c?c.toRange():null},W8=(e,n,o,r)=>{const c=A5(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Me.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),D5(n[n.length-1],o)},Z8=(e,n,o)=>{const r=e.parentNode;return r&&Me.each(n,c=>{r.insertBefore(c,e)}),R5(e,o)},Dc=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),D5(n[0],o)),uu=(e,n,o,r)=>{const c=eG(n,e,r),u=b3(n,o.startContainer),f=nG(z8(c.firstChild)),b=1,y=2,x=n.getRoot(),O=A=>{const D=ie.fromRangeStart(o),$=nr(n.getRoot()),z=A===b?$.prev(D):$.next(D),L=z==null?void 0:z.getNode();return L?b3(n,L)!==u:!0};return u?O(b)?Z8(u,f,x):O(y)?Dc(u,f,x,n):W8(u,f,x,o):null},j8=["pre"],v3=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=$t(j8,u.name);if(y&&x){const O=u.attr("contenteditable")!=="false",A=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,D=N.from(Im(r,o)).forall(be);return O&&A&&D}else return!1},k2=v1,G8=(e,n,o)=>{if(he(o)){const r=e.getParent(n.endContainer,k2);return o===r&&_b(j.fromDom(o),n)}else return!1},q8=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},O2=(e,n,o)=>{N.from(e.getParent(n,"td,th")).map(j.fromDom).each(r=>Hw(r,o))},Wx=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=E2(e),f="*[data-mce-fragment]",b=r.select(f);Me.each(b,y=>{const x=D=>he(o[D.nodeName.toLowerCase()]),O=D=>D.childNodes.length===1;if((D=>!(AM(r,D)||r8(r,D)))(y)&&x(y)&&O(y)){const D=Gb(r,y),$=(K,Q)=>Ys(K,X=>$t(Q,X)),z=K=>O(y)&&r.is(K,f)&&x(K)&&(K.nodeName===y.nodeName&&$(D,Gb(r,K))||z(K.children[0])),L=K=>he(K)&&K!==c&&(u.compare(y,K)||L(K.parentElement)),V=K=>he(K)&&K!==c&&r.is(K,f)&&(c8(r,y,K)||V(K.parentElement));(z(y.children[0])||L(y.parentElement)&&!V(y.parentElement))&&r.remove(y,!0)}})}},y3=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},K8=e=>{Me.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},du=e=>!!e.getAttribute("data-mce-fragment"),Y8=(e,n)=>he(n)&&!e.schema.getVoidElements()[n.nodeName],X8=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Im(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const O=n.previousSibling;if(_e(O)){x.setStart(O,(r=(o=O.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const $=n.nextSibling;_e($)&&(O.appendData($.data),(c=$.parentNode)===null||c===void 0||c.removeChild($))}else x.setStartBefore(n),x.setEndBefore(n);const A=$=>{let z=ie.fromRangeStart($);return z=nr(e.getBody()).next(z),z==null?void 0:z.toRange()},D=f.getParent(n,f.isBlock);if(f.remove(n),D&&f.isEmpty(D)){const $=k2(D);qd(j.fromDom(D)),x.setStart(D,0),x.setEnd(D,0),!$&&!du(D)&&(u=A(x))?(x=u,f.remove(D)):f.add(D,f.create("br",$?{}:{"data-mce-bogus":"1"}))}b.setRng(x)},Ui=e=>{const n=e.dom,o=Yn(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,k2);G8(n,o,r)?Nx(e,o,j.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&_e(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},A2=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return N.some(n);return N.none()},El=(e,n,o)=>{var r;return oo(o.children(),Lx)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},J8=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=Nm({validate:!0},e.schema),O='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Ba(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,O);let A=u.getRng();const D=A.startContainer,$=e.getBody();D===$&&u.isCollapsed()&&f.isBlock($.firstChild)&&Y8(e,$.firstChild)&&f.isEmpty($.firstChild)&&(A=f.createRng(),A.setStart($.firstChild,0),A.setEnd($.firstChild,0),u.setRng(A)),u.isCollapsed()||Ui(e);const z=u.getNode(),L={context:z.nodeName.toLowerCase(),data:o.data,insert:!0},V=b.parse(n,L);if(o.paste===!0&&Ux(e.schema,V)&&sr(f,z))return A=uu(x,f,u.getRng(),V),A&&u.setRng(A),n;o.paste===!0&&v3(f,V,z,e.getBody())&&((r=V.firstChild)===null||r===void 0||r.unwrap()),y3(V);let K=V.lastChild;if(K&&K.attr("id")==="mce_marker"){const Q=K;for(K=K.prev;K;K=K.walk(!0))if(K.type===3||!f.isBlock(K.name)){K.parent&&e.schema.isValidChild(K.parent.name,"span")&&K.parent.insert(Q,K,K.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(z),!L.invalid&&!El(f,z,V))n=x.serialize(V),q8(e,n,z);else{e.selection.setContent(O);let Q=u.getNode(),X;const re=e.getBody();for(Cf(Q)?Q=X=re:X=Q;X&&X!==re;)Q=X,X=X.parentNode;n=Q===re?re.innerHTML:f.getOuterHTML(Q);const we=b.parse(n),De=A2(we),Ge=De.bind(F8).getOr(we);De.each(nt=>nt.replace(V));const ge=V.children(),ue=(c=V.parent)!==null&&c!==void 0?c:we;V.unwrap();const Ce=Et(ge,nt=>_5(e.schema,nt,ue));lu(Ce,e.schema,Ge),h3(b.getNodeFilters(),b.getAttributeFilters(),we),n=x.serialize(we),Q===re?f.setHTML(re,n):f.setOuterHTML(Q,n)}return Wx(e,y),X8(e,f.get("mce_marker")),K8(e.getBody()),O2(f,u.getStart(),e.schema),W_(e.schema,e.getBody(),u.getStart()),n},On=e=>e instanceof Fa,t0=e=>{Yh(e)&&Nr(e.getBody()).each(n=>{const o=n.getNode(),r=Ei(o)?Nr(o).getOr(n):n;e.selection.setRng(r.toRange())})},n0=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&t0(e)},M5=(e,n,o,r)=>{if(o=Ba(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=pr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,ed(e),o)):o||(o=c),n0(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Nm({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=hh(j.fromDom(n))?o:Me.trim(o);return n0(e,c,r.no_selection),{content:c,html:c}}},C3=(e,n,o,r)=>{h3(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Nm({validate:!1},e.schema).serialize(o),u=Ba(hh(j.fromDom(n))?c:Me.trim(c));return n0(e,u,r.no_selection),{content:o,html:u}},w3=(e,n,o)=>N.from(e.getBody()).map(r=>On(n)?C3(e,r,n,o):M5(e,r,n,o)).getOr({content:n,html:On(o.content)?"":o.content}),B5=e=>Y(e)?e:xe,S3=(e,n,o)=>{let r=e.dom;const c=B5(o);for(;r.parentNode;){r=r.parentNode;const u=j.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return N.none()},x3=(e,n,o)=>{const r=n(e),c=B5(o);return r.orThunk(()=>c(e)?N.none():S3(e,n,c))},Zx=Ob,E3=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Tc(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},R2=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>E3(e,b,o)?!0:b.parentNode===u||!!vd(e,b,o,r,!0));return!!vd(e,f,o,r,c)},D2=(e,n,o)=>Bs(o)&&Zx(n,o.inline)||au(o)&&Zx(n,o.block)?!0:Tc(o)?je(n)&&e.is(n,o.selector):!1,M2=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(Y(o.onmatch))return o.onmatch(n,o,r);if(f){if(U0(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):Ab(e,n,f[y]))return!0}else for(const y in f)if(Rt(f,y)){const x=b?e.getAttrib(n,y):Ab(e,n,y),O=Rm(f[y],u),A=Dt(x)||Ua(x);if(A&&Dt(O))continue;if(c&&A&&!o.exact||(!c||o.exact)&&!Zx(x,Dm(O,y)))return!1}}return!0},vd=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&je(n))for(let b=0;b<u.length;b++){const y=u[b];if(D2(e.dom,n,y)&&M2(f,n,y,"attributes",c,r)&&M2(f,n,y,"styles",c,r)){const x=y.classes;if(x){for(let O=0;O<x.length;O++)if(!e.dom.hasClass(n,Rm(x[O],r)))return}return y}}},T3=(e,n,o,r,c)=>{if(r)return R2(e,r,n,o,c);if(r=e.selection.getNode(),R2(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&R2(e,u,n,o,c))},Q8=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&vd(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},e7=(e,n)=>{const o=c=>Dn(c,j.fromDom(e.getBody())),r=(c,u)=>vd(e,c.dom,u)?N.some(u):N.none();return N.from(e.selection.getStart(!0)).bind(c=>x3(j.fromDom(c),u=>Nd(n,f=>r(u,f)),o)).getOrNull()},t7=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=rg(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Tc(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},N5=(e,n,o)=>Wo(o,(r,c)=>{const u=n4(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),B2=qo,n7=(e,n)=>e.importNode(n,!0),_3=e=>{if(e){const n=new Vs(e,e);for(let o=n.current();o;o=n.next())if(_e(o))return o}return null},jx=e=>{const n=j.fromTag("span");return Wl(n,{id:xb,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Io(n,j.fromText(B2)),n},o7=e=>{const n=_3(e);return n&&n.data.charAt(0)===B2&&n.deleteData(0,1),n},k3=(e,n,o)=>{const r=e.dom,c=e.selection;if(YS(n))Xh(e,!1,j.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,O=u.endOffset,A=o7(n);r.remove(n,!0),b===A&&y>0&&u.setStart(A,y-1),x===A&&O>0&&u.setEnd(A,O-1),f&&r.isEmpty(f)&&Ma(j.fromDom(f)),c.setRng(u)}},Gx=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)k3(e,n,o);else if(n=_m(e.getBody(),c.getStart()),!n)for(;n=r.get(xb);)k3(e,n,o)},s7=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ee(Yy,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(sk(j.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},O3=(e,n)=>(e.appendChild(n),n),ai=(e,n)=>{var o;const r=Bd(e,(u,f)=>O3(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return O3(r,c.createTextNode(B2))},r7=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=Et(Lr(f.get()),A=>A!==r&&!ir(A,"removeformat")),x=N5(e,o,y);if(Et(x,A=>!Db(e,A,r)).length>0){const A=o.cloneNode(!1);return b.add(n,A),f.remove(r,c,A,u),b.remove(A),N.some(A)}else return N.none()},P5=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=_m(e.getBody(),c.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&O.test(x.charAt(b))&&O.test(x.charAt(b-1))){const A=c.getBookmark();f.collapse(!0);let D=ud(e.dom,f,u);D=ot(D),e.formatter.apply(n,o,D),c.moveToBookmark(A)}else{let A=r?_3(r):null;(!r||(A==null?void 0:A.data)!==B2)&&(r=n7(e.getDoc(),jx(!0).dom),A=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(A,b)}},A3=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,O=y.startOffset;let A=x;_e(x)&&(O!==x.data.length&&(f=!0),A=A.parentNode);const D=[];let $;for(;A;){if(vd(e,A,n,o,r)){$=A;break}A.nextSibling&&(f=!0),D.push(A),A=A.parentNode}if($)if(f){const z=u.getBookmark();y.collapse(!0);let L=ud(c,y,b,!0);L=ot(L),e.formatter.remove(n,o,L,r),u.moveToBookmark(z)}else{const z=_m(e.getBody(),$),L=he(z)?c.getParents($.parentNode,Qe,z):[],V=jx(!1).dom;s7(e,V,z??$);const K=r7(e,V,$,n,o,r),Q=ai([...D,...K.toArray(),...L],V);z&&k3(e,z,he(z)),u.setCursorLocation(Q,1),c.isEmpty($)&&c.remove($)}},R3=(e,n,o)=>{const r=e.selection,c=e.getBody();Gx(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===B2&&Gx(e,_m(c,r.getStart()),!0),(n===37||n===39)&&Gx(e,_m(c,r.getStart()),!0)},$5=e=>_e(e)&&zl(e.data,us),I5=e=>{e.on("mouseup keydown",n=>{R3(e,n.keyCode,$5(e.selection.getRng().endContainer))})},F5=e=>{const n=jx(!1),o=ai(e,n.dom);return{caretContainer:n,caretPosition:ie(o,0)}},L5=(e,n)=>{const{caretContainer:o,caretPosition:r}=F5(n);return da(j.fromDom(e),o),ro(j.fromDom(e)),r},D3=(e,n)=>{const{caretContainer:o,caretPosition:r}=F5(n);return e.insertNode(o.dom),r},M3=(e,n)=>{if(ec(n.dom))return!1;const o=e.schema.getTextInlineElements();return Rt(o,pn(n))&&!ec(n.dom)&&!Xd(n.dom)},oc={},H5=Kc(["pre"]),a7=(e,n)=>{oc[e]||(oc[e]=[]),oc[e].push(n)},oG=(e,n)=>{Rt(oc,e)&&fe(oc[e],o=>{o(n)})};a7("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return H5(f)&&$t(c,f)},r=(c,u)=>{const f=j.fromDom(u),b=zr(f).dom;ro(f),Nu(j.fromDom(c),[j.fromTag("br",b),j.fromTag("br",b),...dr(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Et(Et(c,H5),o(c));fe(u,f=>{r(f.previousSibling,f)})}});const qx=["fontWeight","fontStyle","color","fontSize","fontFamily"],c7=e=>kt(e.styles)&&oo(Lr(e.styles),n=>$t(qx,n)),sG=e=>ns(e,n=>Bs(n)&&n.inline==="span"&&c7(n)),z5=(e,n)=>{const o=e.get(n);return Vt(o)?sG(o):N.none()},Kx=(e,n)=>Pa(n,ie.fromRangeStart(e)).isNone(),Tl=(e,n)=>Br(n,ie.fromRangeEnd(e)).exists(o=>!bn(o.getNode())||Br(n,o).isSome())===!1,Yx=e=>n=>H_(n)&&e.isEditable(n),Xx=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return Kx(o,n[0])&&Tl(o,n[0])?n:[];{const r=Tr(n).filter(f=>Kx(o,f)).toArray(),c=Fl(n).filter(f=>Tl(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},B3=e=>Et(Xx(e),Yx(e.dom)),V5=e=>Et(e.getSelectedBlocks(),Yx(e.dom)),Jx=Me.each,N3=e=>je(e)&&!tc(e)&&!ec(e)&&!Xd(e),P3=(e,n)=>{for(let o=e;o;o=o[n]){if(_e(o)&&jn(o.data))return e;if(je(o)&&!tc(o))return o}return e},Qx=(e,n,o)=>{const r=E2(e),c=vc(n)&&e.dom.isEditable(n),u=vc(o)&&e.dom.isEditable(o);if(c&&u){const f=P3(n,"previousSibling"),b=P3(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),Me.each(Me.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},U5=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=Qx(e,Ph(r),r))!==null&&c!==void 0?c:r;Qx(e,u,Ph(u,!0))}},W5=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Jx(e.select(r,o),c=>{N3(c)&&e.isEditable(c)&&Jx(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},$3=(e,n,o)=>{Jx(e.childNodes,r=>{N3(r)&&(n(r)&&o(r),r.hasChildNodes()&&$3(r,n,o))})},rp=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},I3=(e,n)=>o=>!!(o&&Ab(e,o,n)),Z5=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),rp(e,r)},fg=xn.generate([{keep:[]},{rename:["name"]},{removed:[]}]),i7=/^(src|href|style)$/,F3=Me.each,eE=Ob,l7=e=>/^(TR|TH|TD)$/.test(e.nodeName),j5=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),L3=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(je(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return _e(r)&&o&&c>=r.data.length&&(r=new Vs(r,e.getBody()).next()||r),_e(r)&&!o&&c===0&&(r=new Vs(r,e.getBody()).prev()||r),r},G5=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return l7(e)&&r?e.nodeName==="TR"&&r[o]||r:e},N2=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},gg=(e,n,o,r,c)=>{const u=j.fromDom(n),f=j.fromDom(e.create(r,c)),b=o?hc(u):tv(u);return Nu(f,b),o?(da(u,f),c1(f,u)):(bc(u,f),Io(f,u)),f.dom},u7=(e,n)=>n.links&&e.nodeName==="A",q5=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=pr(e);au(o)&&r===u.getRoot()&&(!o.list_block||!eE(n,o.list_block))&&fe(Ca(n.childNodes),b=>{ru(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=N2(u,b,f),u.setAttribs(c,ed(e))):c=null}),!(s4(o)&&!eE(o.inline,n))&&u.remove(n,!0)},P2=(e,n,o)=>Ls(e)?{name:n,value:null}:{name:e,value:Rm(n,o)},H3=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},z3=(e,n,o,r,c)=>{let u=!1;F3(o.styles,(f,b)=>{const{name:y,value:x}=P2(b,f,r),O=Dm(x,y);(o.remove_similar||q(x)||!je(c)||eE(Ab(e,c,y),O))&&e.setStyle(n,y,""),u=!0}),u&&H3(e,n)},d7=(e,n,o)=>{n==="removeformat"?fe(V5(e.selection),r=>{fe(qx,c=>e.dom.setStyle(r,c,"")),H3(e.dom,r)}):z5(e.formatter,n).each(r=>{fe(V5(e.selection),c=>z3(e.dom,c,r,o,null))})},V3=(e,n,o,r,c)=>{const u=e.dom,f=E2(e),b=e.schema;if(Bs(n)&&y1(b,n.inline)&&Fu(b,r)&&r.parentElement===e.getBody())return q5(e,r,n),fg.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!D2(u,r,n)&&!u7(r,n))return fg.keep();const y=r,x=n.preserve_attributes;if(Bs(n)&&n.remove==="all"&&Vt(x)){const O=Et(u.getAttribs(y),A=>$t(x,A.name.toLowerCase()));if(u.removeAllAttribs(y),fe(O,A=>u.setAttrib(y,A.name,A.value)),O.length>0)return fg.rename("span")}if(n.remove!=="all"){z3(u,y,n,o,c),F3(n.attributes,(A,D)=>{const{name:$,value:z}=P2(D,A,o);if(n.remove_similar||q(z)||!je(c)||eE(u.getAttrib(c,$),z)){if($==="class"){const L=u.getAttrib(y,$);if(L){let V="";if(fe(L.split(/\s+/),K=>{/mce\-\w+/.test(K)&&(V+=(V?" ":"")+K)}),V){u.setAttrib(y,$,V);return}}}if(i7.test($)&&y.removeAttribute("data-mce-"+$),$==="style"&&Kc(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute($),u.setStyle(y,"list-style-type","none");return}$==="class"&&y.removeAttribute("className"),y.removeAttribute($)}}),F3(n.classes,A=>{A=Rm(A,o),(!je(c)||u.hasClass(c,A))&&u.removeClass(y,A)});const O=u.getAttribs(y);for(let A=0;A<O.length;A++){const D=O[A].nodeName;if(!f.isAttributeInternal(D))return fg.keep()}}return n.remove!=="none"?(q5(e,y,n),fg.removed()):fg.keep()},m7=(e,n,o,r,c)=>{let u;return n.parentNode&&fe(rg(e.dom,n.parentNode).reverse(),f=>{if(!u&&je(f)&&f.id!=="_start"&&f.id!=="_end"){const b=vd(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},ap=(e,n,o,r)=>V3(e,n,o,r,r).fold(Fe(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Fe(null)),K5=(e,n,o,r,c,u,f,b)=>{var y,x;let O,A;const D=e.dom;if(o){const $=o.parentNode;for(let z=r.parentNode;z&&z!==$;z=z.parentNode){let L=D.clone(z,!1);for(let V=0;V<n.length&&(L=ap(e,n[V],b,L),L!==null);V++);L&&(O&&L.appendChild(O),A||(A=L),O=L)}u&&(!f.mixed||!D.isBlock(o))&&(r=(y=D.split(o,r))!==null&&y!==void 0?y:r),O&&A&&((x=c.parentNode)===null||x===void 0||x.insertBefore(O,c),A.appendChild(c),Bs(f)&&U5(e,f,b,O))}return r},Y5=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=L=>{const V=m7(e,L,n,o,c);return K5(e,u,V,L,L,!0,f,o)},O=L=>tc(L)&&je(L)&&(L.id==="_start"||L.id==="_end"),A=L=>oo(u,V=>hg(e,V,o,L,L)),D=L=>{const V=Ca(L.childNodes),Q=A(L)||oo(u,we=>D2(b,L,we)),X=L.parentNode;if(!Q&&he(X)&&Vi(f)&&A(X),f.deep&&V.length)for(let we=0;we<V.length;we++)D(V[we]);fe(["underline","line-through","overline"],we=>{je(L)&&e.dom.getStyle(L,"text-decoration")===we&&L.parentNode&&KS(b,L.parentNode)===we&&hg(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:we}},void 0,L)})},$=L=>{const V=b.get(L?"_start":"_end");if(V){let K=V[L?"firstChild":"lastChild"];return O(K)&&(K=K[L?"firstChild":"lastChild"]),_e(K)&&K.data.length===0&&(K=L?V.previousSibling||V.nextSibling:V.nextSibling||V.previousSibling),b.remove(V,!0),K}else return null},z=L=>{let V,K,Q=ud(b,L,u,L.collapsed);if(f.split){if(Q=ot(Q),V=L3(e,Q,!0),K=L3(e,Q),V!==K){if(V=G5(V,!0),K=G5(K,!1),j5(b,V,K)){const re=N.from(V.firstChild).getOr(V);x(gg(b,re,!0,"span",{id:"_start","data-mce-type":"bookmark"})),$(!0);return}if(j5(b,K,V)){const re=N.from(K.lastChild).getOr(K);x(gg(b,re,!1,"span",{id:"_end","data-mce-type":"bookmark"})),$(!1);return}V=N2(b,V,"span",{id:"_start","data-mce-type":"bookmark"}),K=N2(b,K,"span",{id:"_end","data-mce-type":"bookmark"});const X=b.createRng();X.setStartAfter(V),X.setEndBefore(K),Lh(b,X,re=>{fe(re,we=>{!tc(we)&&!tc(we.parentNode)&&x(we)})}),x(V),x(K),V=$(!0),K=$()}else V=K=x(V);Q.startContainer=V.parentNode?V.parentNode:V,Q.startOffset=b.nodeIndex(V),Q.endContainer=K.parentNode?K.parentNode:K,Q.endOffset=b.nodeIndex(K)+1}Lh(b,Q,X=>{fe(X,D)})};if(r){if(sg(r)){const L=b.createRng();L.setStartBefore(r),L.setEndAfter(r),z(L)}else z(r);nc(e,n,r,o);return}!y.isCollapsed()||!Bs(f)||tg(e).length?(Cl(e,()=>og(e,z),L=>Bs(f)&&T3(e,n,o,L)),e.nodeChanged()):A3(e,n,o,c),d7(e,n,o),nc(e,n,r,o)},U3=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&Y5(e,n,o,r,c)},hg=(e,n,o,r,c)=>V3(e,n,o,r,c).fold(xe,u=>(e.dom.rename(r,u),!0),Qe),W3=Me.each,f7=(e,n,o,r)=>{const c=u=>{if(vc(u)&&je(u.parentNode)&&e.isEditable(u)){const f=KS(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Me.walk(r,c,"childNodes"),c(r))},X5=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=I3(e,"fontSize");$3(r,u=>c(u)&&e.isEditable(u),Z5(e,"backgroundColor",Rm(n.styles.backgroundColor,o)))}},g7=(e,n,o,r)=>{if(Bs(n)&&(n.inline==="sub"||n.inline==="sup")){const c=I3(e,"fontSize");$3(r,f=>c(f)&&e.isEditable(f),Z5(e,"fontSize",""));const u=Et(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},h7=(e,n,o,r)=>{W3(n,c=>{Bs(c)&&W3(e.dom.select(c.inline,r),u=>{N3(u)&&hg(e,c,o,u,c.exact?u:null)}),W5(e.dom,c,r)})},tE=(e,n,o,r,c)=>{const u=c.parentNode;vd(e,u,o,r)&&hg(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>vd(e,f,o,r)?(hg(e,n,r,c),!0):!1)},$2=Me.each,Z3=(e,n,o,r)=>{if(fS(e)&&Bs(n)&&o.parentNode){const c=E1(e.schema),u=lw(j.fromDom(o),f=>ec(f.dom));return wa(c,r)&&cl(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},J5=(e,n,o,r)=>{if($2(o.styles,(c,u)=>{e.setStyle(n,u,Rm(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},p7=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(z,L=u)=>{Y(L.onformat)&&L.onformat(z,L,o,r),J5(b,z,L,o),$2(L.attributes,(V,K)=>{b.setAttrib(z,K,Rm(V,o))}),$2(L.classes,V=>{const K=Rm(V,o);b.hasClass(z,K)||b.addClass(z,K)})},O=(z,L)=>{let V=!1;return $2(z,K=>Tc(K)?b.getContentEditable(L)==="false"&&!K.ceFalseOverride||he(K.collapsed)&&K.collapsed!==f?!0:b.is(L,K.selector)&&!ec(L)?(x(L,K),V=!0,!1):!0:!1),V},A=z=>{if(Z(z)){const L=b.create(z);return x(L),L}else return null},D=(z,L,V)=>{const K=[];let Q=!0;const X=u.inline||u.block,re=A(X),we=ge=>o4(u)&&vd(e,ge,n,o),De=(ge,ue,Ce)=>{const nt=$h(u)&&Yy(e.schema,ge)&&ru(e,ue,X);return Ce&&nt},Ge=(ge,ue,Ce,nt)=>{const lt=ge.nodeName.toLowerCase(),qt=ru(e,X,lt)&&ru(e,ue,X),jt=!V&&_e(ge)&&um(ge.data),wn=ec(ge),Nn=!Bs(u)||!z.isBlock(ge);return(Ce||nt)&&qt&&!jt&&!wn&&Nn};Lh(z,L,ge=>{let ue;const Ce=nt=>{let lt=!1,qt=Q,jt=!1;const wn=nt.parentNode,Nn=wn.nodeName.toLowerCase(),Vo=z.getContentEditable(nt);he(Vo)&&(qt=Q,Q=Vo==="true",lt=!0,jt=Qy(e,nt));const Cr=Q&&!lt;if(bn(nt)&&!Z3(e,u,nt,Nn)){ue=null,au(u)&&z.remove(nt);return}if(we(nt)){ue=null;return}if(De(nt,Nn,Cr)){const In=z.rename(nt,X);x(In),K.push(In),ue=null;return}if(Tc(u)){let In=O(c,nt);if(!In&&he(wn)&&Vi(u)&&(In=O(c,wn)),!Bs(u)||In){ue=null;return}}he(re)&&Ge(nt,Nn,Cr,jt)?(ue||(ue=z.clone(re,!1),wn.insertBefore(ue,nt),K.push(ue)),jt&&lt&&(Q=qt),ue.appendChild(nt)):(ue=null,fe(Ca(nt.childNodes),Ce),lt&&(Q=qt),ue=null)};fe(ge,Ce)}),u.links===!0&&fe(K,ge=>{const ue=Ce=>{Ce.nodeName==="A"&&x(Ce,u),fe(Ca(Ce.childNodes),ue)};ue(ge)}),fe(K,ge=>{const ue=lt=>{let qt=0;return fe(lt.childNodes,jt=>{!kb(jt)&&!tc(jt)&&qt++}),qt},Ce=lt=>ns(lt.childNodes,Ky).filter(jt=>z.getContentEditable(jt)!=="false"&&D2(z,jt,u)).map(jt=>{const wn=z.clone(jt,!1);return x(wn),z.replace(wn,lt,!0),z.remove(jt,!0),wn}).getOr(lt),nt=ue(ge);if((K.length>1||!z.isBlock(ge))&&nt===0){z.remove(ge,!0);return}(Bs(u)||au(u)&&u.wrapper)&&(!u.exact&&nt===1&&(ge=Ce(ge)),h7(e,c,o,ge),tE(e,u,n,o,ge),X5(z,u,o,ge),f7(z,u,o,ge),g7(z,u,o,ge),U5(e,u,o,ge))})},$=sg(r)?r:y.getNode();if(b.getContentEditable($)==="false"&&!Qy(e,$)){r=$,O(c,r),kc(e,n,r,o);return}if(u){if(r)if(sg(r)){if(!O(c,r)){const z=b.createRng();z.setStartBefore(r),z.setEndAfter(r),D(b,ud(b,z,c),!0)}}else D(b,r,!0);else!f||!Bs(u)||tg(e).length?(y.setRng(Yn(y.getRng())),Cl(e,()=>{og(e,(z,L)=>{const V=L?z:ud(b,z,c);D(b,V,!1)})},Qe),e.nodeChanged()):P5(e,n,o),z5(e.formatter,n).each(z=>{fe(B3(e.selection),L=>J5(b,L,z,o))});oG(n,e)}kc(e,n,r,o)},j3=(e,n,o,r)=>{(r||e.selection.isEditable())&&p7(e,n,o,r)},nE=e=>Rt(e,"vars"),Q5=(e,n)=>{e.set({}),n.on("NodeChange",o=>{I2(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(c=>sg(c)?c:c.startContainer).bind(c=>je(c)?N.some(c):N.from(c.parentElement)).getOrThunk(()=>eB(n));I2(n,r,e.get())})},eB=e=>e.selection.getStart(),tB=(e,n,o,r,c)=>Pg(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!tt(y)},b=>E3(e,b,o)?!0:r?!1:he(e.formatter.matchNode(b,o,c,!0))),nB=(e,n)=>{const o=n??eB(e);return Et(rg(e.dom,o),r=>je(r)&&!Xd(r))},I2=(e,n,o)=>{const r=nB(e,n);Xe(o,(c,u)=>{const f=b=>{const y=tB(e,r,u,b.similar,nE(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const O=y.getOr(n);nE(b)?b.callback(x,{node:O,format:u,parents:r}):fe(b.callbacks,A=>A(x,{node:O,format:u,parents:r}))}};fe([c.withSimilar,c.withoutSimilar],f),fe(c.withVars,f)})},Lm=(e,n,o,r,c,u)=>{const f=n.get();fe(o.split(","),b=>{const y=uo(f,b).getOrThunk(()=>{const O={withSimilar:{state:te(!1),similar:!0,callbacks:[]},withoutSimilar:{state:te(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=O,O}),x=()=>{const O=nB(e);return tB(e,O,b,c,u).isSome()};if(tt(u)){const O=c?y.withSimilar:y.withoutSimilar;O.callbacks.push(r),O.callbacks.length===1&&O.state.set(x())}else y.withVars.push({state:te(x()),similar:c,vars:u,callback:r})}),n.set(f)},b7=(e,n,o)=>{const r=e.get();fe(n.split(","),c=>uo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Et(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Et(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Et(u.withVars,f=>f.callback!==o)}})),e.set(r)},G3=(e,n,o,r,c,u)=>(Lm(e,n,o,r,c,u),{unbind:()=>b7(n,o,r)}),cs=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(T3(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?U3(e,n,o,r):j3(e,n,o,r))},oE=Me.explode,sE=()=>{const e={};return{addFilter:(c,u)=>{fe(oE(c),f=>{Rt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>tf(e),removeFilter:(c,u)=>{fe(oE(c),f=>{if(Rt(e,f))if(he(u)){const b=e[f],y=Et(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},Hm=(e,n)=>{fe(n,o=>{e.attr(o,null)})},oB=(e,n,o)=>{e.addNodeFilter("font",r=>{fe(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Fd(y).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),Hm(c,["color","face","size"])})})},sB=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";fe(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},F2=(e,n,o)=>{var r;const c=kv();n.convert_fonts_to_spans&&oB(e,c,Me.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),sB(e,o,c)},v7=(e,n,o)=>{n.inline_styles&&F2(e,n,o)},y7=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),o0=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},q3=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?o0(r):decodeURIComponent(r);return N.some({type:c[1],data:f,base64Encoded:u})}else return N.none()},pg=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return N.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return N.some(new Blob([c],{type:e}))},C7=e=>new Promise((n,o)=>{q3(e).bind(({type:r,data:c,base64Encoded:u})=>pg(r,c,u)).fold(()=>o("Invalid data URI"),n)}),bg=e=>ls(e,"blob:")?y7(e):ls(e,"data:")?C7(e):Promise.reject("Unknown URI format"),rB=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let Wi=0;const L2=e=>(e||"blobid")+Wi++,rE=(e,n,o)=>q3(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return N.none();{const f=u?r:btoa(r);return o(f,c)}}),aE=(e,n,o)=>{const r=e.create(L2(),n,o);return e.add(r),r},aB=(e,n,o=!1)=>rE(n,o,(r,c)=>N.from(e.getByData(r,c)).orThunk(()=>pg(c,r).map(u=>aE(e,u,r)))),cE=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(ls(n,"blob:")){const r=e.getByUri(n);return he(r)?Promise.resolve(r):bg(n).then(c=>rB(c).then(u=>rE(u,!1,f=>N.some(aE(e,c,f))).getOrThunk(o)))}else return ls(n,"data:")?aB(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},w7=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,_l=e=>N.from(e.match(w7)).bind(n=>ef(n,1)).map(n=>ls(n,"www.")?n.substring(4):n),H2=(e,n)=>{N.from(e.attr("src")).bind(_l).forall(o=>!$t(n,o))&&e.attr("sandbox","")},iE=(e,n)=>ls(e,`${n}/`),K3=e=>tt(e)?"iframe":iE(e,"image")?"img":iE(e,"video")?"video":iE(e,"audio")?"audio":"iframe",Y3=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=K3(e),b=new Fa(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&H2(b,u),b},cp=e=>he(e.attr("data-mce-bogus")),X3=e=>e.attr("src")===Ue.transparentSrc||he(e.attr("data-mce-placeholder")),S7=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");X3(c)||cp(c)||Dt(u)||aB(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>fe(c,r))}},cB=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",y=>{let x=y.length;const O=D=>D.split(" ").filter(z=>z.length>0).concat(["noopener"]).sort().join(" "),A=D=>{const $=D?Me.trim(D):"";return/\b(noopener)\b/g.test($)?$:O($)};if(!n.allow_unsafe_link_target)for(;x--;){const D=y[x];D.name==="a"&&D.attr("target")==="_blank"&&D.attr("rel",A(D.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",y=>{let x=y.length,O,A,D,$;for(;x--;)if($=y[x],$.name==="a"&&$.firstChild&&!$.attr("href"))for(D=$.parent,O=$.lastChild;O&&D;)A=O.prev,D.insert(O,$),O=A}),n.fix_list_elements&&e.addNodeFilter("ul,ol",y=>{let x=y.length,O,A;for(;x--;)if(O=y[x],A=O.parent,A&&(A.name==="ul"||A.name==="ol"))if(O.prev&&O.prev.name==="li")O.prev.append(O);else{const D=new Fa("li",1);D.attr("style","list-style-type: none"),O.wrap(D)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",y=>{var x;let O=y.length;for(;O--;){const A=y[O],D=(x=A.attr("class"))!==null&&x!==void 0?x:"",$=Me.explode(D," ");let z="";for(let L=0;L<$.length;L++){const V=$[L];let K=!1,Q=u["*"];Q&&Q[V]&&(K=!0),Q=u[A.name],!K&&Q&&Q[V]&&(K=!0),K&&(z&&(z+=" "),z+=V)}z.length||(z=null),A.attr("class",z)}}),S7(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=$g((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",y=>fe(y,x=>{x.replace(Y3({type:x.attr("type"),src:x.name==="object"?x.attr("data"):x.attr("src"),width:x.attr("width"),height:x.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",y=>fe(y,x=>H2(x,b)))},{entries:iB,setPrototypeOf:lB,isFrozen:x7,getPrototypeOf:E7,getOwnPropertyDescriptor:z2}=Object;let{freeze:Mc,seal:kl,create:J3}=Object,{apply:Q3,construct:lE}=typeof Reflect<"u"&&Reflect;Q3||(Q3=function(n,o,r){return n.apply(o,r)}),Mc||(Mc=function(n){return n}),kl||(kl=function(n){return n}),lE||(lE=function(n,o){return new n(...o)});const uB=Ol(Array.prototype.forEach),T7=Ol(Array.prototype.pop),V2=Ol(Array.prototype.push),uE=Ol(String.prototype.toLowerCase),eO=Ol(String.prototype.toString),_7=Ol(String.prototype.match),mu=Ol(String.prototype.replace),k7=Ol(String.prototype.indexOf),O7=Ol(String.prototype.trim),Zi=Ol(RegExp.prototype.test),U2=A7(TypeError);function Ol(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Q3(e,n,r)}}function A7(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return lE(e,o)}}function Ln(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:uE,lB&&lB(e,null);let c=n.length;for(;c--;){let u=n[c];if(typeof u=="string"){const f=o(u);f!==u&&(x7(n)||(n[c]=f),u=f)}e[u]=!0}return e}function ip(e){const n=J3(null);for(const[o,r]of iB(e))n[o]=r;return n}function dE(e,n){for(;e!==null;){const r=z2(e,n);if(r){if(r.get)return Ol(r.get);if(typeof r.value=="function")return Ol(r.value)}e=E7(e)}function o(r){return console.warn("fallback value for",r),null}return o}const lp=Mc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tO=Mc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nO=Mc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R7=Mc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),oO=Mc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dB=Mc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mB=Mc(["#text"]),fB=Mc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),sO=Mc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gB=Mc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mE=Mc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D7=kl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),M7=kl(/<%[\w\W]*|[\w\W]*%>/gm),B7=kl(/\${[\w\W]*}/gm),N7=kl(/^data-[\-\w.\u00B7-\uFFFF]/),P7=kl(/^aria-[\-\w]+$/),fE=kl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hB=kl(/^(?:\w+script|data):/i),rG=kl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),s0=kl(/^html$/i);var pB=Object.freeze({__proto__:null,MUSTACHE_EXPR:D7,ERB_EXPR:M7,TMPLIT_EXPR:B7,DATA_ATTR:N7,ARIA_ATTR:P7,IS_ALLOWED_URI:fE,IS_SCRIPT_OR_DATA:hB,ATTR_WHITESPACE:rG,DOCTYPE_NAME:s0});const bB=()=>typeof window>"u"?null:window,$7=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function W2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bB();const n=tn=>W2(tn);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:c}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:y,NodeFilter:x,NamedNodeMap:O=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:A,DOMParser:D,trustedTypes:$}=e,z=y.prototype,L=dE(z,"cloneNode"),V=dE(z,"nextSibling"),K=dE(z,"childNodes"),Q=dE(z,"parentNode");if(typeof f=="function"){const tn=c.createElement("template");tn.content&&tn.content.ownerDocument&&(c=tn.content.ownerDocument)}let X,re="";const{implementation:we,createNodeIterator:De,createDocumentFragment:Ge,getElementsByTagName:ge}=c,{importNode:ue}=o;let Ce={};n.isSupported=typeof iB=="function"&&typeof Q=="function"&&we&&we.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:nt,ERB_EXPR:lt,TMPLIT_EXPR:qt,DATA_ATTR:jt,ARIA_ATTR:wn,IS_SCRIPT_OR_DATA:Nn,ATTR_WHITESPACE:Vo}=pB;let{IS_ALLOWED_URI:Cr}=pB,In=null;const $e=Ln({},[...lp,...tO,...nO,...oO,...mB]);let at=null;const mn=Ln({},[...fB,...sO,...gB,...mE]);let Ve=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,Xt=null,Ze=!0,Kt=!0,en=!1,Fs=!0,Rn=!1,gs=!1,ui=!1,Il=!1,na=!1,cc=!1,di=!1,Ha=!0,mi=!1;const ut="user-content-";let cn=!0,Ro=!1,Yo={},is=null;const Ks=Ln({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Qo=null;const es=Ln({},["audio","video","img","source","image","track"]);let Ir=null;const fi=Ln({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pc="http://www.w3.org/1998/Math/MathML",Ji="http://www.w3.org/2000/svg",gi="http://www.w3.org/1999/xhtml";let Ym=gi,Dg=!1,Np=null;const C_=Ln({},[Pc,Ji,gi],eO);let Xm;const IC=["application/xhtml+xml","text/html"],bF="text/html";let oa,Pp=null;const AD=c.createElement("form"),RD=function(de){return de instanceof RegExp||de instanceof Function},Cu=function(de){if(!(Pp&&Pp===de)){if((!de||typeof de!="object")&&(de={}),de=ip(de),Xm=IC.indexOf(de.PARSER_MEDIA_TYPE)===-1?Xm=bF:Xm=de.PARSER_MEDIA_TYPE,oa=Xm==="application/xhtml+xml"?eO:uE,In="ALLOWED_TAGS"in de?Ln({},de.ALLOWED_TAGS,oa):$e,at="ALLOWED_ATTR"in de?Ln({},de.ALLOWED_ATTR,oa):mn,Np="ALLOWED_NAMESPACES"in de?Ln({},de.ALLOWED_NAMESPACES,eO):C_,Ir="ADD_URI_SAFE_ATTR"in de?Ln(ip(fi),de.ADD_URI_SAFE_ATTR,oa):fi,Qo="ADD_DATA_URI_TAGS"in de?Ln(ip(es),de.ADD_DATA_URI_TAGS,oa):es,is="FORBID_CONTENTS"in de?Ln({},de.FORBID_CONTENTS,oa):Ks,vt="FORBID_TAGS"in de?Ln({},de.FORBID_TAGS,oa):{},Xt="FORBID_ATTR"in de?Ln({},de.FORBID_ATTR,oa):{},Yo="USE_PROFILES"in de?de.USE_PROFILES:!1,Ze=de.ALLOW_ARIA_ATTR!==!1,Kt=de.ALLOW_DATA_ATTR!==!1,en=de.ALLOW_UNKNOWN_PROTOCOLS||!1,Fs=de.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Rn=de.SAFE_FOR_TEMPLATES||!1,gs=de.WHOLE_DOCUMENT||!1,na=de.RETURN_DOM||!1,cc=de.RETURN_DOM_FRAGMENT||!1,di=de.RETURN_TRUSTED_TYPE||!1,Il=de.FORCE_BODY||!1,Ha=de.SANITIZE_DOM!==!1,mi=de.SANITIZE_NAMED_PROPS||!1,cn=de.KEEP_CONTENT!==!1,Ro=de.IN_PLACE||!1,Cr=de.ALLOWED_URI_REGEXP||fE,Ym=de.NAMESPACE||gi,Ve=de.CUSTOM_ELEMENT_HANDLING||{},de.CUSTOM_ELEMENT_HANDLING&&RD(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ve.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&RD(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ve.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ve.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Rn&&(Kt=!1),cc&&(na=!0),Yo&&(In=Ln({},[...mB]),at=[],Yo.html===!0&&(Ln(In,lp),Ln(at,fB)),Yo.svg===!0&&(Ln(In,tO),Ln(at,sO),Ln(at,mE)),Yo.svgFilters===!0&&(Ln(In,nO),Ln(at,sO),Ln(at,mE)),Yo.mathMl===!0&&(Ln(In,oO),Ln(at,gB),Ln(at,mE))),de.ADD_TAGS&&(In===$e&&(In=ip(In)),Ln(In,de.ADD_TAGS,oa)),de.ADD_ATTR&&(at===mn&&(at=ip(at)),Ln(at,de.ADD_ATTR,oa)),de.ADD_URI_SAFE_ATTR&&Ln(Ir,de.ADD_URI_SAFE_ATTR,oa),de.FORBID_CONTENTS&&(is===Ks&&(is=ip(is)),Ln(is,de.FORBID_CONTENTS,oa)),cn&&(In["#text"]=!0),gs&&Ln(In,["html","head","body"]),In.table&&(Ln(In,["tbody"]),delete vt.tbody),de.TRUSTED_TYPES_POLICY){if(typeof de.TRUSTED_TYPES_POLICY.createHTML!="function")throw U2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof de.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw U2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');X=de.TRUSTED_TYPES_POLICY,re=X.createHTML("")}else X===void 0&&(X=$7($,r)),X!==null&&typeof re=="string"&&(re=X.createHTML(""));Mc&&Mc(de),Pp=de}},Mg=Ln({},["mi","mo","mn","ms","mtext"]),ae=Ln({},["foreignobject","desc","title","annotation-xml"]),le=Ln({},["title","style","font","a","script"]),Ie=Ln({},tO);Ln(Ie,nO),Ln(Ie,R7);const Re=Ln({},oO);Ln(Re,dB);const wt=function(de){let t=Q(de);(!t||!t.tagName)&&(t={namespaceURI:Ym,tagName:"template"});const s=uE(de.tagName),a=uE(t.tagName);return Np[de.namespaceURI]?de.namespaceURI===Ji?t.namespaceURI===gi?s==="svg":t.namespaceURI===Pc?s==="svg"&&(a==="annotation-xml"||Mg[a]):!!Ie[s]:de.namespaceURI===Pc?t.namespaceURI===gi?s==="math":t.namespaceURI===Ji?s==="math"&&ae[a]:!!Re[s]:de.namespaceURI===gi?t.namespaceURI===Ji&&!ae[a]||t.namespaceURI===Pc&&!Mg[a]?!1:!Re[s]&&(le[s]||!Ie[s]):!!(Xm==="application/xhtml+xml"&&Np[de.namespaceURI]):!1},on=function(de){V2(n.removed,{element:de});try{de.parentNode.removeChild(de)}catch{de.remove()}},Do=function(de,t){try{V2(n.removed,{attribute:t.getAttributeNode(de),from:t})}catch{V2(n.removed,{attribute:null,from:t})}if(t.removeAttribute(de),de==="is"&&!at[de])if(na||cc)try{on(t)}catch{}else try{t.setAttribute(de,"")}catch{}},Qi=function(de){let t,s;if(Il)de="<remove></remove>"+de;else{const d=_7(de,/^[\r\n\t ]+/);s=d&&d[0]}Xm==="application/xhtml+xml"&&Ym===gi&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");const a=X?X.createHTML(de):de;if(Ym===gi)try{t=new D().parseFromString(a,Xm)}catch{}if(!t||!t.documentElement){t=we.createDocument(Ym,"template",null);try{t.documentElement.innerHTML=Dg?re:a}catch{}}const i=t.body||t.documentElement;return de&&s&&i.insertBefore(c.createTextNode(s),i.childNodes[0]||null),Ym===gi?ge.call(t,gs?"html":"body")[0]:gs?t.documentElement:i},w_=function(de){return De.call(de.ownerDocument||de,de,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},Dj=function(de){return de instanceof A&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof O)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function"||typeof de.hasChildNodes!="function")},S_=function(de){return typeof b=="object"?de instanceof b:de&&typeof de=="object"&&typeof de.nodeType=="number"&&typeof de.nodeName=="string"},Jm=function(de,t,s){Ce[de]&&uB(Ce[de],a=>{a.call(n,t,s,Pp)})},vF=function(de){let t;if(Jm("beforeSanitizeElements",de,null),Dj(de))return on(de),!0;const s=oa(de.nodeName);if(Jm("uponSanitizeElement",de,{tagName:s,allowedTags:In}),de.hasChildNodes()&&!S_(de.firstElementChild)&&(!S_(de.content)||!S_(de.content.firstElementChild))&&Zi(/<[/\w]/g,de.innerHTML)&&Zi(/<[/\w]/g,de.textContent))return on(de),!0;if(!In[s]||vt[s]){if(!vt[s]&&MD(s)&&(Ve.tagNameCheck instanceof RegExp&&Zi(Ve.tagNameCheck,s)||Ve.tagNameCheck instanceof Function&&Ve.tagNameCheck(s)))return!1;if(cn&&!is[s]){const a=Q(de)||de.parentNode,i=K(de)||de.childNodes;if(i&&a){const d=i.length;for(let g=d-1;g>=0;--g)a.insertBefore(L(i[g],!0),V(de))}}return on(de),!0}return de instanceof y&&!wt(de)||(s==="noscript"||s==="noembed"||s==="noframes")&&Zi(/<\/no(script|embed|frames)/i,de.innerHTML)?(on(de),!0):(Rn&&de.nodeType===3&&(t=de.textContent,t=mu(t,nt," "),t=mu(t,lt," "),t=mu(t,qt," "),de.textContent!==t&&(V2(n.removed,{element:de.cloneNode()}),de.textContent=t)),Jm("afterSanitizeElements",de,null),!1)},DD=function(de,t,s){if(Ha&&(t==="id"||t==="name")&&(s in c||s in AD))return!1;if(!(Kt&&!Xt[t]&&Zi(jt,t))){if(!(Ze&&Zi(wn,t))){if(!at[t]||Xt[t]){if(!(MD(de)&&(Ve.tagNameCheck instanceof RegExp&&Zi(Ve.tagNameCheck,de)||Ve.tagNameCheck instanceof Function&&Ve.tagNameCheck(de))&&(Ve.attributeNameCheck instanceof RegExp&&Zi(Ve.attributeNameCheck,t)||Ve.attributeNameCheck instanceof Function&&Ve.attributeNameCheck(t))||t==="is"&&Ve.allowCustomizedBuiltInElements&&(Ve.tagNameCheck instanceof RegExp&&Zi(Ve.tagNameCheck,s)||Ve.tagNameCheck instanceof Function&&Ve.tagNameCheck(s))))return!1}else if(!Ir[t]){if(!Zi(Cr,mu(s,Vo,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&de!=="script"&&k7(s,"data:")===0&&Qo[de])){if(!(en&&!Zi(Nn,mu(s,Vo,"")))){if(s)return!1}}}}}}return!0},MD=function(de){return de.indexOf("-")>0},yF=function(de){let t,s,a,i;Jm("beforeSanitizeAttributes",de,null);const{attributes:d}=de;if(!d)return;const g={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:at};for(i=d.length;i--;){t=d[i];const{name:h,namespaceURI:C}=t;s=h==="value"?t.value:O7(t.value);const w=s;if(a=oa(h),g.attrName=a,g.attrValue=s,g.keepAttr=!0,g.forceKeepAttr=void 0,Jm("uponSanitizeAttribute",de,g),s=g.attrValue,g.forceKeepAttr)continue;if(!g.keepAttr){Do(h,de);continue}if(!Fs&&Zi(/\/>/i,s)){Do(h,de);continue}Rn&&(s=mu(s,nt," "),s=mu(s,lt," "),s=mu(s,qt," "));const E=oa(de.nodeName);if(!DD(E,a,s)){Do(h,de);continue}if(mi&&(a==="id"||a==="name")&&(Do(h,de),s=ut+s),X&&typeof $=="object"&&typeof $.getAttributeType=="function"&&!C)switch($.getAttributeType(E,a)){case"TrustedHTML":{s=X.createHTML(s);break}case"TrustedScriptURL":{s=X.createScriptURL(s);break}}if(s!==w)try{C?de.setAttributeNS(C,h,s):de.setAttribute(h,s)}catch{Do(h,de)}}Jm("afterSanitizeAttributes",de,null)},Mj=function tn(de){let t;const s=w_(de);for(Jm("beforeSanitizeShadowDOM",de,null);t=s.nextNode();)Jm("uponSanitizeShadowNode",t,null),!vF(t)&&(t.content instanceof u&&tn(t.content),yF(t));Jm("afterSanitizeShadowDOM",de,null)};return n.sanitize=function(tn){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t,s,a,i;if(Dg=!tn,Dg&&(tn="<!-->"),typeof tn!="string"&&!S_(tn))if(typeof tn.toString=="function"){if(tn=tn.toString(),typeof tn!="string")throw U2("dirty is not a string, aborting")}else throw U2("toString is not a function");if(!n.isSupported)return tn;if(ui||Cu(de),n.removed=[],typeof tn=="string"&&(Ro=!1),Ro){if(tn.nodeName){const h=oa(tn.nodeName);if(!In[h]||vt[h])throw U2("root node is forbidden and cannot be sanitized in-place")}}else if(tn instanceof b)t=Qi("<!---->"),s=t.ownerDocument.importNode(tn,!0),s.nodeType===1&&s.nodeName==="BODY"||s.nodeName==="HTML"?t=s:t.appendChild(s);else{if(!na&&!Rn&&!gs&&tn.indexOf("<")===-1)return X&&di?X.createHTML(tn):tn;if(t=Qi(tn),!t)return na?null:di?re:""}t&&Il&&on(t.firstChild);const d=w_(Ro?tn:t);for(;a=d.nextNode();)vF(a)||(a.content instanceof u&&Mj(a.content),yF(a));if(Ro)return tn;if(na){if(cc)for(i=Ge.call(t.ownerDocument);t.firstChild;)i.appendChild(t.firstChild);else i=t;return(at.shadowroot||at.shadowrootmode)&&(i=ue.call(o,i,!0)),i}let g=gs?t.outerHTML:t.innerHTML;return gs&&In["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&Zi(s0,t.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+g),Rn&&(g=mu(g,nt," "),g=mu(g,lt," "),g=mu(g,qt," ")),X&&di?X.createHTML(g):g},n.setConfig=function(tn){Cu(tn),ui=!0},n.clearConfig=function(){Pp=null,ui=!1},n.isValidAttribute=function(tn,de,t){Pp||Cu({});const s=oa(tn),a=oa(de);return DD(s,a,t)},n.addHook=function(tn,de){typeof de=="function"&&(Ce[tn]=Ce[tn]||[],V2(Ce[tn],de))},n.removeHook=function(tn){if(Ce[tn])return T7(Ce[tn])},n.removeHooks=function(tn){Ce[tn]&&(Ce[tn]=[])},n.removeAllHooks=function(){Ce={}},n}var gE=W2();const Es=Me.each,aG=Me.trim,cG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],iG={ftp:21,http:80,https:443,mailto:25},lG=["img","video"],Al=(e,n)=>he(e)?!e:he(n)?!$t(lG,n):!0,hE=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},zm=(e,n,o)=>{const r=hE(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Al(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class ta{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Di.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!zm(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=aG(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new ta(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&Es(cG,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new ta(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new ta(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?iG[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];Es(u,A=>{A&&b.push(A)});const y=[];for(let A=f.length-1;A>=0;A--)if(!(f[A].length===0||f[A]===".")){if(f[A]===".."){r++;continue}if(r>0){r--;continue}y.push(f[A])}const x=b.length-r;let O;return x<=0?O=No(y).join("/"):O=b.slice(0,x).join("/")+"/"+No(y).join("/"),O.indexOf("/")!==0&&(O="/"+O),c&&O.lastIndexOf("/")!==O.length-1&&(O+=c),O}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const I7=Me.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),rO="data-mce-type";let up=0;const dp=(e,n,o,r,c)=>{var u,f,b,y;const x=n.validate,O=o.getSpecialElements();e.nodeType===qC&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const A=(f=c==null?void 0:c.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){he(c)&&(c.allowedTags[A]=!0);return}if(e.nodeType!==Ci||A==="body")return;const D=j.fromDom(e),$=Ud(D,rO),z=ys(D,"data-mce-bogus");if(!$&&Z(z)){z==="all"?ro(D):Zl(D);return}const L=o.getElementRule(A);if(x&&!L){Rt(O,A)?ro(D):Zl(D);return}else he(c)&&(c.allowedTags[A]=!0);if(x&&L&&!$){if(fe((b=L.attributesForced)!==null&&b!==void 0?b:[],V=>{so(D,V.name,V.value==="{$uid}"?`mce_${up++}`:V.value)}),fe((y=L.attributesDefault)!==null&&y!==void 0?y:[],V=>{Ud(D,V.name)||so(D,V.name,V.value==="{$uid}"?`mce_${up++}`:V.value)}),L.attributesRequired&&!oo(L.attributesRequired,V=>Ud(D,V))){Zl(D);return}if(L.removeEmptyAttrs&&Uc(D)){Zl(D);return}L.outputName&&L.outputName!==A&&$w(D,L.outputName)}},r0=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=pE(n,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,aO(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&ls(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):bE(e,f)&&(c.forceKeepAttr=!0)},pE=(e,n,o,r,c,u)=>o!=="html"&&!Jo(r)?!0:!(c in I7&&zm(e,u,r))&&(!e.validate||n.isValid(r,c)||ls(c,"data-")||ls(c,"aria-")),bE=(e,n)=>e.hasAttribute(rO)&&(n==="id"||n==="class"||n==="style"),aO=(e,n)=>e in n.getBoolAttrs(),vB=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,y=f.value;!pE(n,o,r,e.tagName.toLowerCase(),b,y)&&!bE(e,b)?e.removeAttribute(b):aO(b,o)&&e.setAttribute(b,b)}},F7=(e,n,o)=>{const r=gE();return r.addHook("uponSanitizeElement",(c,u)=>{dp(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{r0(c,e,n,o.current(),u)}),r},L7=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},yB=e=>{const n=V_(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(c=>`xlink:${c}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};gE().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};gE().sanitize(e,o)}else throw new Error("Not a namespace element")},H7=(e,n)=>{const o=pv();if(e.sanitize){const r=F7(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,L7(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:yB}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let y;for(;y=b.nextNode();){const x=o.track(y);dp(y,e,n,x),je(y)&&vB(y,e,n,x)}o.reset()},sanitizeNamespaceElement:ht}},CB=Me.makeMap,wB=Me.extend,SB=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",f=n.childNodes;for(let b=0,y=f.length;b<y;b++){const x=f[b],O=new Fa(x.nodeName.toLowerCase(),x.nodeType);if(je(x)){const A=x.attributes;for(let D=0,$=A.length;D<$;D++){const z=A[D];O.attr(z.name,z.value)}Jo(O.name)&&(r(x),O.value=x.innerHTML)}else _e(x)?(O.value=x.data,u&&(O.raw=!0)):(As(x)||Wr(x)||Ti(x))&&(O.value=x.data);Jo(O.name)||SB(O,x,o,r),e.append(O)}},z7=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;fe(n,b=>b(f)),Dt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];fe(o,f=>f(u))}},xB=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=wB(CB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=E1(n),x=/[ \t\r\n]+/g,O=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,D=Q=>{let X=Q.parent;for(;he(X);){if(X.name in f)return!0;X=X.parent}return!1},$=Q=>{let X=Q;for(;he(X);){if(X.name in y)return zx(n,u,f,X);X=X.parent}return!1},z=Q=>Q.name in b||Gl(n,Q)||Jo(Q.name)&&Q.parent===e,L=(Q,X)=>{const re=X?Q.prev:Q.next;return he(re)||Dt(Q.parent)?!1:z(Q.parent)&&(Q.parent!==e||r.isRootContent===!0)};return[Q=>{var X;if(Q.type===3&&!D(Q)){let re=(X=Q.value)!==null&&X!==void 0?X:"";re=re.replace(x," "),(vr(Q.prev,z)||L(Q,!0))&&(re=re.replace(O,"")),re.length===0?Q.remove():Q.value=re}},Q=>{var X;if(Q.type===1){const re=n.getElementRule(Q.name);if(c&&re){const we=zx(n,u,f,Q);re.paddInEmptyBlock&&we&&$(Q)?Hx(o,r,z,Q):re.removeEmpty&&we?z(Q)?Q.remove():Q.unwrap():re.paddEmpty&&(we||I8(Q))&&Hx(o,r,z,Q)}}else if(Q.type===3&&!D(Q)){let re=(X=Q.value)!==null&&X!==void 0?X:"";(Q.next&&z(Q.next)||L(Q,!1))&&(re=re.replace(A,"")),re.length===0?Q.remove():Q.value=re}}]},V7=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},yd=(e={},n=dl())=>{const o=sE(),r=sE(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=H7(c,n),b=(X,re,we="html")=>{const De=we==="xhtml"?"application/xhtml+xml":"text/html",Ge=Rt(n.getSpecialElements(),re.toLowerCase()),ge=Ge?`<${re}>${X}</${re}>`:X,ue=we==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ge}</body></html>`:`<body>${ge}</body>`,Ce=u.parseFromString(ue,De).body;return f.sanitizeHtmlElement(Ce,De),Ge?Ce.firstChild:Ce},y=o.addFilter,x=o.getFilters,O=o.removeFilter,A=r.addFilter,D=r.getFilters,$=r.removeFilter,z=(X,re)=>{_5(n,X)&&re.push(X)},L=(X,re)=>{const we=Z(re.attr(rO)),De=re.type===1&&!Rt(X,re.name)&&!Gl(n,re)&&!Jo(re.name);return re.type===3||De&&!we},V=(X,re)=>{const we=wB(CB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),De=/^[ \t\r\n]+/,Ge=/[ \t\r\n]+$/;let ge=X.firstChild,ue=null;const Ce=nt=>{var lt,qt;nt&&(ge=nt.firstChild,ge&&ge.type===3&&(ge.value=(lt=ge.value)===null||lt===void 0?void 0:lt.replace(De,"")),ge=nt.lastChild,ge&&ge.type===3&&(ge.value=(qt=ge.value)===null||qt===void 0?void 0:qt.replace(Ge,"")))};if(n.isValidChild(X.name,re.toLowerCase())){for(;ge;){const nt=ge.next;L(we,ge)?(ue||(ue=new Fa(re,1),ue.attr(c.forced_root_block_attrs),X.insert(ue,ge)),ue.append(ge)):(Ce(ue),ue=null),ge=nt}Ce(ue)}},Q={schema:n,addAttributeFilter:A,getAttributeFilters:D,removeAttributeFilter:$,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:O,parse:(X,re={})=>{var we;const De=c.validate,Ge=(we=re.context)!==null&&we!==void 0?we:c.root_name,ge=b(X,Ge,re.format);th(n,ge);const ue=new Fa(Ge,11);SB(ue,ge,n.getSpecialElements(),f.sanitizeNamespaceElement),ge.innerHTML="";const[Ce,nt]=xB(ue,n,c,re),lt=[],qt=De?Vo=>z(Vo,lt):ht,jt={nodes:{},attributes:{}},wn=Vo=>g3(x(),D(),Vo,jt);if(z7(ue,[Ce,wn],[nt,qt]),lt.reverse(),De&&lt.length>0)if(re.context){const{pass:Vo,fail:Cr}=Er(lt,In=>In.parent===ue);lu(Cr,n,ue,wn),re.invalid=Vo.length>0}else lu(lt,n,ue,wn);const Nn=V7(c,re);return Nn&&(ue.name==="body"||re.isRootContent)&&V(ue,Nn),re.invalid||T5(jt,re),ue}};return cB(Q,c),v7(Q,c,n),Q},EB=e=>On(e)?Nm({validate:!1}).serialize(e):e,TB=(e,n,o)=>{const r=EB(e),c=n(r);if(c.isDefaultPrevented())return c;if(On(e))if(c.content!==r){const u=yd({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},cO=e=>({sanitize:ib(e),sandbox_iframes:lb(e),sandbox_iframes_exclusions:ub(e)}),_B=(e,n)=>{if(n.no_events)return qr.value(n);{const o=ox(e,n);return o.isDefaultPrevented()?qr.error(t2(e,{content:"",...o}).content):qr.value(o)}},iO=(e,n,o)=>o.no_events?n:TB(n,c=>t2(e,{...o,content:c}),cO(e)).content,lO=(e,n)=>{if(n.no_events)return qr.value(n);{const o=TB(n.content,r=>Fb(e,{...n,content:r}),cO(e));return o.isDefaultPrevented()?(Lb(e,o),qr.error(void 0)):qr.value(o)}},uO=(e,n,o)=>{o.no_events||Lb(e,{...o,content:n})},vE=(e,n,o)=>({element:e,width:n,rows:o}),dO=(e,n)=>({element:e,cells:n}),kB=(e,n)=>({x:e,y:n}),mO=(e,n)=>wi(e,n).bind(Fd).getOr(1),OB=(e,n,o,r,c)=>{const u=mO(c,"rowspan"),f=mO(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=dO(Mf(r),[]));for(let x=n;x<n+f;x++){const O=b[y].cells;O[x]=y===o&&x===n?c:Pi(c)}}},AB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},U7=(e,n,o)=>{for(;AB(e,n,o);)n++;return n},RB=e=>Wo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),DB=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Dn(c[u],n))return N.some(kB(u,r))}return N.none()},yE=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(dO(f[b].element,x))}return u},Z2=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?yE(e,r,c,u,f):yE(e,r,f,u,c);return vE(e.element,RB(b),b)},MB=(e,n)=>{const o=Pi(e.element),r=j.fromTag("tbody");return Nu(r,n),Io(o,r),o},BB=e=>Ht(e.rows,n=>{const o=Ht(n.cells,c=>{const u=Mf(c);return Os(u,"colspan"),Os(u,"rowspan"),u}),r=Pi(n.element);return Nu(r,o),r}),CE=e=>{const n=vE(Pi(e),0,[]);return fe(mr(e,"tr"),(o,r)=>{fe(mr(o,"td,th"),(c,u)=>{OB(n,U7(n,u,r),r,o,c)})}),vE(n.element,RB(n.rows),n.rows)},W7=e=>MB(e,BB(e)),Z7=(e,n,o)=>DB(e,n).bind(r=>DB(e,o).map(c=>Z2(e,r,c))),mp=e=>ns(e,n=>pn(n)==="ul"||pn(n)==="ol"),fO=(e,n)=>ns(e,o=>pn(o)==="li"&&_b(o,n)).fold(Fe([]),o=>mp(e).map(r=>{const c=j.fromTag(pn(r)),u=xo(ua(r),(f,b)=>ls(b,"list-style"));return Ut(c,u),[j.fromTag("li"),c]}).getOr([])),NB=(e,n)=>{const o=Wo(n,(r,c)=>(Io(c,r),c),e);return n.length>0?Tt([o]):o},j2=e=>ma(e)?gc(e).filter($i).fold(Fe([]),n=>[e,n]):$i(e)?[e]:[],PB=(e,n,o)=>{const r=j.fromDom(n.commonAncestorContainer),c=Pm(r,e),u=Et(c,y=>o.isWrapper(pn(y))),f=fO(c,n),b=u.concat(f.length?f:j2(r));return Ht(b,Pi)},wE=()=>Tt([]),$B=(e,n,o)=>NB(j.fromDom(n.cloneContents()),PB(e,n,o)),IB=(e,n)=>zs(n,"table",Ee(Dn,e)),j7=(e,n)=>IB(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=CE(o);return Z7(u,r,c).map(f=>Tt([W7(f)]))}).getOrThunk(wE),G7=(e,n,o)=>n.length>0&&n[0].collapsed?wE():$B(e,n[0],o),q7=(e,n,o)=>{const r=ld(n,e);return r.length>0?j7(e,r):G7(e,n,o)},a0=(e,n)=>n>=0&&n<e.length&&Om(e.charAt(n)),FB=e=>Ba(e.innerText),LB=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),K7=e=>N.from(e.selection.getRng()).map(n=>{var o;const r=N.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=LB(r),f=j.fromDom(n.cloneContents());EM(f),TM(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=FB(b),x=Ba((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),a0(x,0)||a0(x,x.length-1)){const O=r.getOr(c),A=FB(O),D=A.indexOf(y);if(D===-1)return y;{const $=a0(A,D-1),z=a0(A,D+y.length);return($?" ":"")+y+(z?" ":"")}}else return y}).getOr(""),Y7=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=jb(e,Tb(c)),f=n.contextual?q7(j.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},X7=(e,n)=>{if(n.format==="text")return K7(e);{const o=Y7(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},J7=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),Q7=(e,n,o={})=>{const r=J7(o,n);return _B(e,r).fold(ho,c=>{const u=X7(e,c);return iO(e,u,c)})},gO=0,HB=1,zB=2,eL=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(O,A,D)=>({start:O,end:A,diag:D}),f=(O,A,D,$,z)=>{const L=y(O,A,D,$);if(L===null||L.start===A&&L.diag===A-$||L.end===O&&L.diag===O-D){let V=O,K=D;for(;V<A||K<$;)V<A&&K<$&&e[V]===n[K]?(z.push([gO,e[V]]),++V,++K):A-O>$-D?(z.push([zB,e[V]]),++V):(z.push([HB,n[K]]),++K)}else{f(O,L.start,D,L.start-L.diag,z);for(let V=L.start;V<L.end;++V)z.push([gO,e[V]]);f(L.end,A,L.end-L.diag,$,z)}},b=(O,A,D,$)=>{let z=O;for(;z-A<$&&z<D&&e[z]===n[z-A];)++z;return u(O,z,A)},y=(O,A,D,$)=>{const z=A-O,L=$-D;if(z===0||L===0)return null;const V=z-L,K=L+z,Q=(K%2===0?K:K+1)/2;r[1+Q]=O,c[1+Q]=A+1;let X,re,we,De,Ge;for(X=0;X<=Q;++X){for(re=-X;re<=X;re+=2){for(we=re+Q,re===-X||re!==X&&r[we-1]<r[we+1]?r[we]=r[we+1]:r[we]=r[we-1]+1,De=r[we],Ge=De-O+D-re;De<A&&Ge<$&&e[De]===n[Ge];)r[we]=++De,++Ge;if(V%2!==0&&V-X<=re&&re<=V+X&&c[we-V]<=r[we])return b(c[we-V],re+O-D,A,$)}for(re=V-X;re<=V+X;re+=2){for(we=re+Q-V,re===V-X||re!==V+X&&c[we+1]<=c[we-1]?c[we]=c[we+1]-1:c[we]=c[we-1],De=c[we]-1,Ge=De-O+D-re;De>=O&&Ge>=D&&e[De]===n[Ge];)c[we]=De--,Ge--;if(V%2===0&&-X<=re&&re<=X&&c[we]<=r[we+V])return b(c[we],re+O-D,A,$)}}return null},x=[];return f(0,e.length,0,n.length,x),x},c0=e=>je(e)?e.outerHTML:_e(e)?Di.encodeRaw(e.data,!1):As(e)?"<!--"+e.data+"-->":"",pa=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},tL=(e,n,o)=>{const r=pa(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},SE=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},fp=(e,n)=>{let o=0;fe(e,r=>{r[0]===gO?o++:r[0]===HB?(tL(n,r[1],o),o++):r[0]===zB&&SE(n,o)})},VB=(e,n)=>Et(Ht(Ca(e.childNodes),n?_(Ba,c0):c0),o=>o.length>0),Bc=(e,n)=>{const o=Ht(Ca(n.childNodes),c0);return fp(eL(o,e),n),n},gp=nl(()=>document.implementation.createHTMLDocument("undo")),UB=e=>e.querySelector("iframe")!==null,nL=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),WB=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),xE=e=>{const n=e.serializer.getTempAttrs(),o=H4(e.getBody(),n);return UB(o)?nL(VB(o,!0)):WB(Ba(o.innerHTML))},EE=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Bc(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:he(r)&&WS(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},hp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,TE=e=>{const n=j.fromTag("body",gp());return i1(n,hp(e)),fe(mr(n,"*[data-mce-bogus]"),Zl),Fo(n)},oL=(e,n)=>hp(e)===hp(n),ZB=(e,n)=>TE(e)===TE(n),hO=(e,n)=>!e||!n?!1:oL(e,n)?!0:ZB(e,n),G2=e=>e.get()===0,i0=(e,n,o)=>{G2(o)&&(e.typing=n)},jB=(e,n)=>{e.typing&&(i0(e,!1,n),e.add())},sL=e=>{e.typing&&(e.typing=!1,e.add())},Cd=(e,n,o)=>{G2(n)&&o.set(ey(e.selection))},pO=(e,n,o,r,c,u,f)=>{const b=xE(e),y=Me.extend(u||{},b);if(!G2(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&hO(x,y))return null;n.data[o.get()]&&c.get().each(D=>{n.data[o.get()].beforeBookmark=D});const O=Rk(e);if(O&&n.data.length>O){for(let D=0;D<n.data.length-1;D++)n.data[D]=n.data[D+1];n.data.length--,o.set(n.data.length)}y.bookmark=ey(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const A={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",A),e.dispatch("change",A)):e.dispatch("AddUndo",A),y},rL=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},_E=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];EE(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},bO=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],EE(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},GB=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,i0(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],EE(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},qB=e=>{e.clear(),e.add()},KB=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!hO(xE(e),n.data[0]),aL=(e,n)=>n.get()<e.data.length-1&&!e.typing,cL=(e,n,o)=>(jB(e,n),e.beforeChange(),e.ignore(o),e.add()),iL=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},lL=(e,n)=>{const o=e.dom,r=he(n)?n:e.getBody();fe(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=vy(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=yy(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},YB=e=>({init:{bindEvents:ht},undoManager:{beforeChange:(n,o)=>Cd(e,n,o),add:(n,o,r,c,u,f)=>pO(e,n,o,r,c,u,f),undo:(n,o,r)=>GB(e,n,o,r),redo:(n,o)=>bO(e,n,o),clear:(n,o)=>rL(e,n,o),reset:n=>qB(n),hasUndo:(n,o)=>KB(e,n,o),hasRedo:(n,o)=>aL(n,o),transact:(n,o,r)=>cL(n,o,r),ignore:(n,o)=>iL(n,o),extra:(n,o,r,c)=>_E(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>T3(e,n,o,r,c),matchAll:(n,o)=>Q8(e,n,o),matchNode:(n,o,r,c)=>vd(e,n,o,r,c),canApply:n=>t7(e,n),closest:n=>e7(e,n),apply:(n,o,r)=>j3(e,n,o,r),remove:(n,o,r,c)=>U3(e,n,o,r,c),toggle:(n,o,r)=>cs(e,n,o,r),formatChanged:(n,o,r,c,u)=>G3(e,n,o,r,c,u)},editor:{getContent:n=>t8(e,n),setContent:(n,o)=>w3(e,n,o),insertContent:(n,o)=>J8(e,n,o),addVisual:n=>lL(e,n)},selection:{getContent:(n,o)=>Q7(e,n,o)},autocompleter:{addDecoration:ht,removeDecoration:ht},raw:{getModel:()=>N.none()}}),XB=e=>{const n=x=>kt(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,O,A)=>r.transact(A),ignore:(x,O)=>r.ignore(O),extra:(x,O,A,D)=>r.extra(A,D)},formatter:{match:(x,O,A,D)=>c.match(x,n(O),D),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,O,A)=>c.apply(x,n(O)),remove:(x,O,A,D)=>c.remove(x,n(O)),toggle:(x,O,A)=>c.toggle(x,n(O)),formatChanged:(x,O,A,D,$)=>c.formatChanged(O,A,D,$)},editor:{getContent:x=>u.getContent(x),setContent:(x,O)=>({content:u.setContent(x,O),html:""}),insertContent:(x,O)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,O)=>f.getContent(O)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>N.some(y.getRawModel())}}},uL=()=>{const e=Fe(null),n=Fe("");return{init:{bindEvents:ht},undoManager:{beforeChange:ht,add:e,undo:e,redo:e,clear:ht,reset:ht,hasUndo:xe,hasRedo:xe,transact:e,ignore:ht,extra:ht},formatter:{match:xe,matchAll:Fe([]),matchNode:Fe(void 0),canApply:xe,closest:n,apply:ht,remove:ht,toggle:ht,formatChanged:Fe({unbind:ht})},editor:{getContent:n,setContent:Fe({content:"",html:""}),insertContent:Fe(""),addVisual:ht},selection:{getContent:n},autocompleter:{addDecoration:ht,removeDecoration:ht},raw:{getModel:Fe(N.none())}}},wd=e=>Rt(e.plugins,"rtc"),dL=e=>uo(e.plugins,"rtc").bind(n=>N.from(n.setup)),JB=e=>{const n=e;return dL(e).fold(()=>(n.rtcInstance=YB(e),N.none()),o=>(n.rtcInstance=uL(),N.some(()=>o().then(r=>(n.rtcInstance=XB(r),r.rtc.isRemote)))))},q2=e=>e.rtcInstance?e.rtcInstance:YB(e),Ts=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},QB=(e,n,o)=>{Ts(e).undoManager.beforeChange(n,o)},vO=(e,n,o,r,c,u,f)=>Ts(e).undoManager.add(n,o,r,c,u,f),eN=(e,n,o,r)=>Ts(e).undoManager.undo(n,o,r),tN=(e,n,o)=>Ts(e).undoManager.redo(n,o),yO=(e,n,o)=>{Ts(e).undoManager.clear(n,o)},nN=(e,n)=>{Ts(e).undoManager.reset(n)},oN=(e,n,o)=>Ts(e).undoManager.hasUndo(n,o),sN=(e,n,o)=>Ts(e).undoManager.hasRedo(n,o),mL=(e,n,o,r)=>Ts(e).undoManager.transact(n,o,r),CO=(e,n,o)=>{Ts(e).undoManager.ignore(n,o)},fL=(e,n,o,r,c)=>{Ts(e).undoManager.extra(n,o,r,c)},kE=(e,n,o,r,c)=>Ts(e).formatter.match(n,o,r,c),gL=(e,n,o)=>Ts(e).formatter.matchAll(n,o),hL=(e,n,o,r,c)=>Ts(e).formatter.matchNode(n,o,r,c),pL=(e,n)=>Ts(e).formatter.canApply(n),rN=(e,n)=>Ts(e).formatter.closest(n),aN=(e,n,o,r)=>{Ts(e).formatter.apply(n,o,r)},bL=(e,n,o,r,c)=>{Ts(e).formatter.remove(n,o,r,c)},vL=(e,n,o,r)=>{Ts(e).formatter.toggle(n,o,r)},yL=(e,n,o,r,c,u)=>Ts(e).formatter.formatChanged(n,o,r,c,u),CL=(e,n)=>q2(e).editor.getContent(n),wL=(e,n,o)=>q2(e).editor.setContent(n,o),cN=(e,n,o)=>q2(e).editor.insertContent(n,o),uG=(e,n,o)=>Ts(e).selection.getContent(n,o),SL=(e,n)=>Ts(e).editor.addVisual(n),iN=e=>Ts(e).init.bindEvents(),xL=(e,n={})=>{const o=n.format?n.format:"html";return uG(e,o,n)},lN=e=>e.dom.length===0?(ro(e),N.none()):N.some(e),EL=(e,n)=>e.filter(o=>md.isBookmarkNode(o.dom)).bind(n?gf:Wc),TL=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(J4(u,f,c,!1,!r),o.setStart(f,b)):(J4(f,u,c,!1,!r),o.setEnd(f,b))},_L=(e,n,o)=>{gc(e).each(r=>{const c=e.dom;n&&b2(r,ie(c,0),o)?y2(c,0,o):!n&&v2(r,ie(c,c.length),o)&&X4(c,c.length,o)})},wO=(e,n,o,r,c)=>{e.bind(u=>((r?X4:y2)(u.dom,r?u.dom.length:0,c),n.filter(yo).map(b=>TL(u,b,o,r,c)))).orThunk(()=>EL(n,r).or(n).filter(yo).map(f=>_L(f,r,c)))},kL=(e,n,o)=>{const r=N.from(n.firstChild).map(j.fromDom),c=N.from(n.lastChild).map(j.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Wc).filter(yo).bind(lN),f=c.bind(gf).filter(yo).bind(lN);wO(u,r,e,!0,o),wO(f,c,e,!1,o),e.collapse(!1)},OL=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),AL=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Nm({validate:!1},e.schema).serialize(u)}else return n.content},RL=(e,n,o={})=>{const r=OL(o,n);lO(e,r).each(c=>{const u=AL(e,c),f=e.selection.getRng();kL(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),m2(e,f),uO(e,u,c)})},uN=(e,n,o)=>{if(Rt(e,n)){const r=Et(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var dG=(e,n)=>{let o,r;const c=(b,y)=>ns(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),O={};Xe(o,(A,D)=>{c(D,x).each($=>{r[D]||(fe(A,z=>{z(!0,{node:$,selector:D,parents:x})}),r[D]=A),O[D]=A})}),Xe(r,(A,D)=>{O[D]||(delete r[D],fe(A,$=>{$(!1,{node:y,selector:D,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{uN(o,b,y),uN(r,b,y)}})}};const DL=e=>!!(e&&e.ownerDocument)&&Si(j.fromDom(e.ownerDocument),j.fromDom(e)),ML=e=>e?DL(e.startContainer)&&DL(e.endContainer):!1,dN=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=dG(e,r),b=($e,at)=>{const mn=e.createRng();he($e)&&he(at)?(mn.setStart($e,at),mn.setEnd($e,at),re(mn),K(!1)):(jy(e,mn,r.getBody(),!0),re(mn))},y=$e=>xL(r,$e),x=($e,at)=>RL(r,$e,at),O=$e=>I4(r.getBody(),X(),$e),A=$e=>F4(r.getBody(),X(),$e),D=($e,at)=>Cr.getBookmark($e,at),$=$e=>Cr.moveToBookmark($e),z=($e,at)=>(ZF(e,$e,at).each(re),$e),L=()=>{const $e=X(),at=Q();return!$e||$e.item?!1:$e.compareEndPoints?$e.compareEndPoints("StartToEnd",$e)===0:!at||$e.collapsed},V=()=>{const $e=X(),at=r.getBody().querySelectorAll('[data-mce-selected="1"]');return at.length>0?Ys(at,mn=>e.isEditable(mn.parentElement)):gM(e,$e)},K=$e=>{const at=X();at.collapse(!!$e),re(at)},Q=()=>n.getSelection?n.getSelection():n.document.selection,X=()=>{let $e;const at=(Ve,vt,Xt)=>{try{return vt.compareBoundaryPoints(Ve,Xt)}catch{return-1}},mn=n.document;if(he(r.bookmark)&&!Yh(r)){const Ve=vx(r);if(Ve.isSome())return Ve.map(vt=>jb(r,[vt])[0]).getOr(mn.createRange())}try{const Ve=Q();Ve&&!Pu(Ve.anchorNode)&&(Ve.rangeCount>0?$e=Ve.getRangeAt(0):$e=mn.createRange(),$e=jb(r,[$e])[0])}catch{}if($e||($e=mn.createRange()),Cf($e.startContainer)&&$e.collapsed){const Ve=e.getRoot();$e.setStart(Ve,0),$e.setEnd(Ve,0)}return c&&u&&(at($e.START_TO_START,$e,c)===0&&at($e.END_TO_END,$e,c)===0?$e=u:(c=null,u=null)),$e},re=($e,at)=>{if(!ML($e))return;const mn=Q();if($e=r.dispatch("SetSelectionRange",{range:$e,forward:at}).range,mn){u=$e;try{mn.removeAllRanges(),mn.addRange($e)}catch{}at===!1&&mn.extend&&(mn.collapse($e.endContainer,$e.endOffset),mn.extend($e.startContainer,$e.startOffset)),c=mn.rangeCount>0?mn.getRangeAt(0):null}if(!$e.collapsed&&$e.startContainer===$e.endContainer&&(mn!=null&&mn.setBaseAndExtent)&&$e.endOffset-$e.startOffset<2&&$e.startContainer.hasChildNodes()){const vt=$e.startContainer.childNodes[$e.startOffset];vt&&vt.nodeName==="IMG"&&(mn.setBaseAndExtent($e.startContainer,$e.startOffset,$e.endContainer,$e.endOffset),(mn.anchorNode!==$e.startContainer||mn.focusNode!==$e.endContainer)&&mn.setBaseAndExtent(vt,0,vt,1))}r.dispatch("AfterSetSelectionRange",{range:$e,forward:at})},we=$e=>(x(e.getOuterHTML($e)),$e),De=()=>UF(r.getBody(),X()),Ge=($e,at)=>WF(e,X(),$e,at),ge=()=>{const $e=Q(),at=$e==null?void 0:$e.anchorNode,mn=$e==null?void 0:$e.focusNode;if(!$e||!at||!mn||Pu(at)||Pu(mn))return!0;const Ve=e.createRng(),vt=e.createRng();try{Ve.setStart(at,$e.anchorOffset),Ve.collapse(!0),vt.setStart(mn,$e.focusOffset),vt.collapse(!0)}catch{return!0}return Ve.compareBoundaryPoints(Ve.START_TO_START,vt)<=0},Vo={dom:e,win:n,serializer:o,editor:r,expand:($e={type:"word"})=>re(Se(e).expand(X(),$e)),collapse:K,setCursorLocation:b,getContent:y,setContent:x,getBookmark:D,moveToBookmark:$,select:z,isCollapsed:L,isEditable:V,isForward:ge,setNode:we,getNode:De,getSel:Q,setRng:re,getRng:X,getStart:O,getEnd:A,getSelectedBlocks:Ge,normalize:()=>{const $e=X(),at=Q();if(!Jk(at)&&Gy(r)){const mn=Le(e,$e);return mn.each(Ve=>{re(Ve,ge())}),mn.getOr($e)}return $e},selectorChanged:($e,at)=>(f($e,at),Vo),selectorChangedWithUnbind:f,getScrollContainer:()=>{let $e,at=e.getRoot();for(;at&&at.nodeName!=="BODY";){if(at.scrollHeight>at.clientHeight){$e=at;break}at=at.parentNode}return $e},scrollIntoView:($e,at)=>{he($e)?DF(r,$e,at):m2(r,X(),at)},placeCaretAt:($e,at)=>re(p($e,at,r.getDoc())),getBoundingClientRect:()=>{const $e=X();return $e.collapsed?ie.fromRangeStart($e).getClientRects()[0]:$e.getBoundingClientRect()},destroy:()=>{n=c=u=null,In.destroy()}},Cr=md(Vo),In=Wh(Vo,r);return Vo.bookmarkManager=Cr,Vo.controlSelection=In,Vo},mG=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=Me.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const x=O=>O.name in f||Gl(o,O);for(let O=0,A=r.length;O<A;O++){let D=r[O],$=D.parent;if($&&x($)&&D===$.lastChild){let z=D.prev;for(;z;){const L=z.name;if(L!=="span"||z.attr("data-mce-type")!=="bookmark"){L==="br"&&(D=null);break}z=z.prev}if(D&&(D.remove(),zx(o,b,y,$))){const L=o.getElementRule($.name);L&&(L.removeEmpty?$.remove():L.paddEmpty&&Hx(e,u,x,$))}}else{let z=D;for(;$&&$.firstChild===z&&$.lastChild===z&&(z=$,!f[$.name]);)$=$.parent;if(z===$){const L=new Fa("#text",3);L.value=us,D.replace(L)}}}})},BL=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let O=x.attr(u);O!==void 0?(x.attr(c,O.length>0?O:null),x.attr(u,null)):(O=x.attr(c),c==="style"?O=o.serializeStyle(o.parseStyle(O),x.name):f&&(O=f.call(b,O,c,x.name)),x.attr(c,O.length>0?O:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(N.from(b.firstChild).exists(x=>{var O;return!um((O=x.value)!==null&&O!==void 0?O:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,O=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const A=y.attr("type");A&&y.attr("type",A==="mce-no/type"?null:A.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&O.length>0&&(x.value=`// <![CDATA[
`+f(O)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&O.length>0&&(x.value=`<!--
`+f(O)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{fe(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&mG(n,e,e.schema)},Ko=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},SO=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Me.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return l4(e,{...o,node:u}),r&&(c.doc=r),u},fG=(e,n)=>he(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,NL=(e,n,o)=>fG(e,o)?SO(e,n,o):n,PL=(e,n,o)=>{Me.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},l0=(e,n,o)=>!n.no_events&&e?Nb(e,{...n,content:o}).content:o,gG=(e,n,o)=>{const r=Ba(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||hh(j.fromDom(n))?r:Me.trim(r)},hG=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return Ko(c),c},$r=(e,n,o)=>Nm(e,n).serialize(o),mN=(e,n,o,r,c)=>{const u=$r(n,o,r);return l0(e,c,u)},fN=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:Qn.DOM,u=n&&n.schema?n.schema:dl(r),f=yd(r,u);BL(f,r,c);const b=(y,x={})=>{const O={format:"html",...x},A=NL(n,y,O),D=gG(c,A,O),$=hG(f,D,O);return O.format==="tree"?$:mN(n,r,u,$,O)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ee(PL,f,o),getTempAttrs:Fe(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},xO=(e,n)=>{const o=fN(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},$L="html",IL=(e,n)=>({...e,format:n,get:!0,getInner:!0}),OE=(e,n={})=>{const o=n.format?n.format:$L,r=IL(n,o);return _B(e,r).fold(ho,c=>{const u=CL(e,c);return iO(e,u,c)})},FL="html",EO=(e,n)=>({format:FL,...e,set:!0,content:n}),TO=(e,n,o={})=>{const r=EO(o,n);return lO(e,r).map(c=>{const u=wL(e,c.content,c);return uO(e,u.html,c),u.content}).getOr(n)},gN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),hN=[],_O="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),kO=[],AE=(e,n)=>{const o=Et(n,r=>Rt(e,r));return Po(o)},LL=e=>{const n=AE(e,gN),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Po(n)},HL=e=>AE(e,hN),pN=(e,n)=>{const o=Me.makeMap(e.plugins," "),c=Et(n,u=>Rt(o,u));return Po(c)},ji=e=>pN(e,_O),zL=e=>pN(e,kO.map(n=>n.name)),VL=(e,n)=>{const o=LL(e),r=ji(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",O=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+y+x+O)}},UL=e=>ns(kO,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),WL=(e,n)=>{const o=HL(e),r=zL(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(UL).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},ZL=(e,n)=>{VL(e,n),WL(e,n)},K2=Qn.DOM,jL=e=>{K2.setStyle(e.id,"display",e.orgDisplay)},RE=e=>N.from(e).each(n=>n.destroy()),GL=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},DE=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),K2.unbind(n,"submit reset",e.formEventDelegate))},qL=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&he(c==null?void 0:c.nextSibling)&&K2.remove(c.nextSibling),Pb(e),e.editorManager.remove(e),!e.inline&&r&&jL(e),u4(e),K2.remove(e.getContainer()),RE(n),RE(o),e.destroy()}},KL=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),RE(o),RE(r)),DE(e),GL(e),e.destroyed=!0}},u0=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Rt(e,c)}})(),d0=jr.ModelManager,bN=(e,n)=>n.dom[e],XL=(e,n)=>parseInt(Cs(n,e),10),JL=Ee(bN,"clientWidth"),Y2=Ee(bN,"clientHeight"),vN=Ee(XL,"margin-top"),yN=Ee(XL,"margin-left"),QL=e=>e.dom.getBoundingClientRect(),CN=(e,n,o)=>{const r=JL(e),c=Y2(e);return n>=0&&o>=0&&n<=r&&o<=c},eH=(e,n,o,r)=>{const c=QL(n),u=e?c.left+n.dom.clientLeft+yN(n):0,f=e?c.top+n.dom.clientTop+vN(n):0,b=o-u,y=r-f;return{x:b,y}},tH=(e,n,o)=>{const r=j.fromDom(e.getBody()),c=e.inline?r:QC(r),u=eH(e.inline,c,n,o);return CN(c,u.x,u.y)},nH=e=>N.from(e).map(j.fromDom),oH=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return nH(n).map(pf).getOr(!1)};var wN=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const SN=e=>{const n=[],o=()=>{const D=e.theme;return D&&D.getNotificationManagerImpl?D.getNotificationManagerImpl():wN()},r=()=>N.from(n[0]),c=(D,$)=>D.type===$.type&&D.text===$.text&&!D.progressBar&&!D.timeout&&!$.progressBar&&!$.timeout,u=()=>{r().each(D=>{D.reposition()})},f=D=>{n.push(D)},b=D=>{ya(n,$=>$===D).each($=>{n.splice($,1)})},y=(D,$=!0)=>e.removed||!oH(e)?{}:($&&e.dispatch("BeforeOpenNotification",{notification:D}),ns(n,z=>c(o().getArgs(z),D)).getOrThunk(()=>{e.editorManager.setActive(e);const z=o().open(D,()=>{b(z)},()=>g2(e));return f(z),u(),e.dispatch("OpenNotification",{notification:{...z}}),z})),x=()=>{r().each(D=>{o().close(D),b(D),u()})},O=Fe(n);return(D=>{D.on("SkinLoaded",()=>{const $=Kr(D);$&&y({text:$,type:"warning",timeout:0},!1),u()}),D.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(u)}),D.on("remove",()=>{fe(n.slice(),$=>{o().close($)})}),D.addShortcut("alt+F12","Focus to notification",()=>r().map($=>j.fromDom($.getEl())).each($=>Wb($)))})(e),{open:y,close:x,getNotifications:O}},m0=jr.PluginManager,fu=jr.ThemeManager;var xN=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const OO=e=>{let n=[];const o=()=>{const L=e.theme;return L&&L.getWindowManagerImpl?L.getWindowManagerImpl():xN()},r=(L,V)=>(...K)=>V?V.apply(L,K):void 0,c=L=>{e.dispatch("OpenWindow",{dialog:L})},u=L=>{e.dispatch("CloseWindow",{dialog:L})},f=L=>{n.push(L),c(L)},b=L=>{u(L),n=Et(n,V=>V!==L),n.length===0&&e.focus()},y=()=>N.from(n[n.length-1]),x=L=>{e.editorManager.setActive(e),f2(e),e.ui.show();const V=L();return f(V),V},O=(L,V)=>x(()=>o().open(L,V,b)),A=L=>x(()=>o().openUrl(L,b)),D=(L,V,K)=>{const Q=o();Q.alert(L,r(K||Q,V))},$=(L,V,K)=>{const Q=o();Q.confirm(L,r(K||Q,V))},z=()=>{y().each(L=>{o().close(L),b(L)})};return e.on("remove",()=>{fe(n,L=>{o().close(L)})}),{open:O,openUrl:A,alert:D,confirm:$,close:z}},EN=(e,n)=>{e.notificationManager.open({type:"error",text:n})},ME=(e,n)=>{e._skinLoaded?EN(e,n):e.on("SkinLoaded",()=>{EN(e,n)})},sH=(e,n)=>{ME(e,Ds.translate(["Failed to upload image: {0}",n]))},f0=(e,n,o)=>{or(e,n,{message:o}),console.error(o)},X2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,rH=(e,n,o)=>{f0(e,"PluginLoadError",X2("plugin",n,o))},aH=(e,n,o)=>{f0(e,"IconsLoadError",X2("icons",n,o))},cH=(e,n,o)=>{f0(e,"LanguageLoadError",X2("language",n,o))},pG=(e,n,o)=>{f0(e,"ThemeLoadError",X2("theme",n,o))},gu=(e,n,o)=>{f0(e,"ModelLoadError",X2("model",n,o))},AO=(e,n,o)=>{const r=Ds.translate(["Failed to initialize plugin: {0}",n]);or(e,"PluginLoadError",{message:r}),BE(r,o),ME(e,r)},BE=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},iH=e=>/^[a-z0-9\-]+$/i.test(e),RO=e=>"content/"+e+"/content.css",lH=e=>tinymce.Resource.has(RO(e)),An=e=>g0(e,bm(e)),uH=e=>g0(e,fa(e)),g0=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Ht(n,u=>lH(u)?u:iH(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},dH=e=>{e.contentCSS=e.contentCSS.concat(An(e),uH(e))},mH=e=>e?Ca(e.getElementsByTagName("img")):[],fH=(e,n)=>{const o={};return{findAll:(c,u=Qe)=>{const f=Et(mH(c),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===Ue.transparentSrc?!1:ls(x,"blob:")?!e.isUploaded(x)&&u(y):ls(x,"data:")?u(y):!1}),b=Ht(f,y=>{const x=y.src;if(Rt(o,x))return o[x].then(O=>Z(O)?O:{image:y,blobInfo:O.blobInfo});{const O=cE(n,x).then(A=>(delete o[x],{image:y,blobInfo:A})).catch(A=>(delete o[x],A));return o[x]=O,O}});return Promise.all(b)}}},DO=()=>{let o={};const r=(D,$)=>({status:D,resultUri:$}),c=D=>D in o;return{hasBlobUri:c,getResultUri:D=>{const $=o[D];return $?$.resultUri:null},isPending:D=>c(D)?o[D].status===1:!1,isUploaded:D=>c(D)?o[D].status===2:!1,markPending:D=>{o[D]=r(1,null)},markUploaded:(D,$)=>{o[D]=r(2,$)},removeFailed:D=>{delete o[D]},destroy:()=>{o={}}}};let vg=0;const sc=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},J2=e=>e+vg+++sc(),yg=()=>{let e=[];const n=A=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[A.toLowerCase()]||"dat",o=(A,D,$,z,L)=>{if(Z(A))return r({id:A,name:z,filename:L,blob:D,base64:$});if(kt(A))return r(A);throw new Error("Unknown input type")},r=A=>{if(!A.blob||!A.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const D=A.id||J2("blobid"),$=A.name||D,z=A.blob;return{id:Fe(D),name:Fe($),filename:Fe(A.filename||$+"."+n(z.type)),blob:Fe(z),base64:Fe(A.base64),blobUri:Fe(A.blobUri||URL.createObjectURL(z)),uri:Fe(A.uri)}},c=A=>{f(A.id())||e.push(A)},u=A=>ns(e,A).getOrUndefined(),f=A=>u(D=>D.id()===A);return{create:o,add:c,get:f,getByUri:A=>u(D=>D.blobUri()===A),getByData:(A,D)=>u($=>$.base64()===A&&$.blob().type===D),findFirst:u,removeByUri:A=>{e=Et(e,D=>D.blobUri()===A?(URL.revokeObjectURL(D.blobUri()),!1):!0)},destroy:()=>{fe(e,A=>{URL.revokeObjectURL(A.blobUri())}),e=[]}}},Sd=(e,n)=>{const o={},r=(L,V)=>L?L.replace(/\/$/,"")+"/"+V.replace(/^\//,""):V,c=(L,V)=>new Promise((K,Q)=>{const X=new XMLHttpRequest;X.open("POST",n.url),X.withCredentials=n.credentials,X.upload.onprogress=we=>{V(we.loaded/we.total*100)},X.onerror=()=>{Q("Image upload failed due to a XHR Transport error. Code: "+X.status)},X.onload=()=>{if(X.status<200||X.status>=300){Q("HTTP Error: "+X.status);return}const we=JSON.parse(X.responseText);if(!we||!Z(we.location)){Q("Invalid JSON: "+X.responseText);return}K(r(n.basePath,we.location))};const re=new FormData;re.append("file",L.blob(),L.filename()),X.send(re)}),u=Y(n.handler)?n.handler:c,f=()=>new Promise(L=>{L([])}),b=(L,V)=>({url:V,blobInfo:L,status:!0}),y=(L,V)=>({url:"",blobInfo:L,status:!1,error:V}),x=(L,V)=>{Me.each(o[L],K=>{K(V)}),delete o[L]},O=(L,V,K)=>(e.markPending(L.blobUri()),new Promise(Q=>{let X,re;try{const we=()=>{X&&(X.close(),re=ht)},De=ge=>{we(),e.markUploaded(L.blobUri(),ge),x(L.blobUri(),b(L,ge)),Q(b(L,ge))},Ge=ge=>{we(),e.removeFailed(L.blobUri()),x(L.blobUri(),y(L,ge)),Q(y(L,ge))};re=ge=>{ge<0||ge>100||N.from(X).orThunk(()=>N.from(K).map(ts)).each(ue=>{X=ue,ue.progressBar.value(ge)})},V(L,re).then(De,ge=>{Ge(Z(ge)?{message:ge}:ge)})}catch(we){Q(y(L,we))}})),A=L=>L===c,D=L=>{const V=L.blobUri();return new Promise(K=>{o[V]=o[V]||[],o[V].push(K)})},$=(L,V)=>(L=Me.grep(L,K=>!e.isUploaded(K.blobUri())),Promise.all(Me.map(L,K=>e.isPending(K.blobUri())?D(K):O(K,u,V))));return{upload:(L,V)=>!n.url&&A(u)?f():$(L,V)}},h0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),NE=(e,n)=>Sd(n,{url:uy(e),basePath:X1(e),credentials:dy(e),handler:uS(e)}),MO=e=>{const n=DO(),o=NE(e,n);return{upload:(r,c=!0)=>o.upload(r,c?h0(e):void 0)}},TN=(e,n)=>e.dom.isEmpty(n.dom)&&he(e.schema.getTextBlockElements()[pn(n)]),_N=e=>n=>{TN(e,n)&&Io(n,j.fromHtml('<br data-mce-bogus="1" />'))},gH=e=>{const n=yg();let o,r;const c=DO(),u=[],f=X=>re=>e.selection?X(re):[],b=X=>X+(X.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(X,re,we)=>{let De=0;do De=X.indexOf(re,De),De!==-1&&(X=X.substring(0,De)+we+X.substr(De+re.length),De+=we.length-re.length+1);while(De!==-1);return X},x=(X,re,we)=>{const De=`src="${we}"${we===Ue.transparentSrc?' data-mce-placeholder="1"':""}`;return X=y(X,`src="${re}"`,De),X=y(X,'data-mce-src="'+re+'"','data-mce-src="'+we+'"'),X},O=(X,re)=>{fe(e.undoManager.data,we=>{we.type==="fragmented"?we.fragments=Ht(we.fragments,De=>x(De,X,re)):we.content=x(we.content,X,re)})},A=(X,re)=>{const we=e.convertURL(re,"src");O(X.src,re),Wl(j.fromDom(X),{src:fs(e)?b(re):re,"data-mce-src":we})},D=()=>(o||(o=NE(e,c)),V().then(f(X=>{const re=Ht(X,we=>we.blobInfo);return o.upload(re,h0(e)).then(f(we=>{const De=[];let Ge=!1;const ge=Ht(we,(ue,Ce)=>{const{blobInfo:nt,image:lt}=X[Ce];let qt=!1;return ue.status&&Mn(e)?(ue.url&&!ir(lt.src,ue.url)&&(Ge=!0),n.removeByUri(lt.src),wd(e)||A(lt,ue.url)):ue.error&&(ue.error.remove&&(O(lt.src,Ue.transparentSrc),De.push(lt),qt=!0),sH(e,ue.error.message)),{element:lt,status:ue.status,uploadUri:ue.url,blobInfo:nt,removed:qt}});return De.length>0&&!wd(e)?e.undoManager.transact(()=>{fe(cv(De),ue=>{const Ce=gc(ue);ro(ue),Ce.each(_N(e)),n.removeByUri(ue.dom.src)})}):Ge&&e.undoManager.dispatchChange(),ge}))}))),$=()=>ss(e)?D():Promise.resolve([]),z=X=>Ys(u,re=>re(X)),L=X=>{u.push(X)},V=()=>(r||(r=fH(c,n)),r.findAll(e.getBody(),z).then(f(X=>{const re=Et(X,we=>Z(we)?(ME(e,we),!1):we.uriType!=="blob");return wd(e)||fe(re,we=>{O(we.image.src,we.blobInfo.blobUri()),we.image.src=we.blobInfo.blobUri(),we.image.removeAttribute("data-mce-src")}),re}))),K=()=>{n.destroy(),c.destroy(),r=o=null},Q=X=>X.replace(/src="(blob:[^"]+)"/g,(re,we)=>{const De=c.getResultUri(we);if(De)return'src="'+De+'"';let Ge=n.getByUri(we);return Ge||(Ge=Wo(e.editorManager.get(),(ge,ue)=>ge||ue.editorUpload&&ue.editorUpload.blobCache.getByUri(we),void 0)),Ge?'src="data:'+Ge.blob().type+";base64,"+Ge.base64()+'"':re});return e.on("SetContent",()=>{ss(e)?$():V()}),e.on("RawSaveContent",X=>{X.content=Q(X.content)}),e.on("GetContent",X=>{X.source_view||X.format==="raw"||X.format==="tree"||(X.content=Q(X.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",X=>{fe(X,re=>{const we=re.attr("src");if(!we||n.getByUri(we))return;const De=c.getResultUri(we);De&&re.attr("src",De)})})}),{blobCache:n,addFilter:L,uploadImages:D,uploadImagesAuto:$,scanForImages:V,destroy:K}},hH=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>je(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Me.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Me.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},BO={remove_similar:!0,inherit:!1},pp={selector:"td,th",...BO},kN={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...pp},tablecellverticalalign:{styles:{"vertical-align":"%value"},...pp},tablecellbordercolor:{styles:{borderColor:"%value"},...pp},tablecellclass:{classes:["%value"],...pp},tableclass:{selector:"table",classes:["%value"],...BO},tablecellborderstyle:{styles:{borderStyle:"%value"},...pp},tablecellborderwidth:{styles:{borderWidth:"%value"},...pp}},ON=Fe(kN),NO=e=>{const n={},o=f=>he(f)?n[f]:n,r=f=>Rt(n,f),c=(f,b)=>{f&&(Z(f)?(Vt(b)||(b=[b]),fe(b,y=>{tt(y.deep)&&(y.deep=!Tc(y)),tt(y.split)&&(y.split=!Tc(y)||Bs(y)),tt(y.remove)&&Tc(y)&&!Bs(y)&&(y.remove="none"),Tc(y)&&Bs(y)&&(y.mixed=!0,y.block_expand=!0),Z(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):Xe(f,(y,x)=>{c(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(hH(e)),c(ON()),c(gy(e)),{get:o,has:r,register:c,unregister:u}},PO=Me.each,Gi=Qn.DOM,AN=e=>he(e)&&kt(e),RN=(e,n)=>{const o=n&&n.schema||dl({}),r=(y,x)=>{x.classes.length>0&&Gi.addClass(y,x.classes.join(" ")),Gi.setAttribs(y,x.attrs)},c=y=>{const x=Z(y)?{name:y,classes:[],attrs:{}}:y,O=Gi.create(x.name);return r(O,x),O},u=(y,x)=>{const O=o.getElementRule(y.nodeName.toLowerCase()),A=O==null?void 0:O.parentsRequired;return A&&A.length?x&&$t(A,x)?x:A[0]:!1},f=(y,x,O)=>{let A;const D=x[0],$=AN(D)?D.name:void 0,z=u(y,$);if(z)$===z?(A=D,x=x.slice(1)):A=z;else if(D)A=D,x=x.slice(1);else if(!O)return y;const L=A?c(A):Gi.create("div");L.appendChild(y),O&&Me.each(O,K=>{const Q=c(K);L.insertBefore(Q,y)});const V=AN(A)?A.siblings:void 0;return f(L,x,V)},b=Gi.create("div");if(e.length>0){const y=e[0],x=c(y),O=AN(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),O))}return b},pH=e=>{e=Me.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Me.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},xd=e=>Z(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Me.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Me.map(n.split(/(?:~\+|~|\+)/),pH),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],bG=(e,n)=>{let o="",r=hy(e);if(r==="")return"";const c=D=>Z(D)?D.replace(/%(\w+)/g,""):"",u=(D,$)=>Gi.getStyle($??e.getBody(),D,!0);if(Z(n)){const D=e.formatter.get(n);if(!D)return"";n=D[0]}if("preview"in n){const D=n.preview;if(D===!1)return"";r=D||r}let f=n.block||n.inline||"span",b;const y=xd(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=RN(y,e)):b=RN([f],e);const x=Gi.select(f,b)[0]||b.firstChild;PO(n.styles,(D,$)=>{const z=c(D);z&&Gi.setStyle(x,$,z)}),PO(n.attributes,(D,$)=>{const z=c(D);z&&Gi.setAttrib(x,$,z)}),PO(n.classes,D=>{const $=c(D);Gi.hasClass(x,$)||Gi.addClass(x,$)}),e.dispatch("PreviewFormats"),Gi.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const O=u("fontSize"),A=/px$/.test(O)?parseInt(O,10):0;return PO(r.split(" "),D=>{let $=u(D,x);if(!(D==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test($)&&($=u(D),Bi($).toLowerCase()==="#ffffff"))&&!(D==="color"&&Bi($).toLowerCase()==="#000000")){if(D==="font-size"&&/em|%$/.test($)){if(A===0)return;$=parseFloat($)/(/%$/.test($)?100:1)*A+"px"}D==="border"&&$&&(o+="padding:0 2px;"),o+=D+":"+$+";"}}),e.dispatch("AfterPreviewFormats"),Gi.remove(b),o},vG=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},DN=e=>{const n=NO(e),o=te({});return vG(e),I5(e),wd(e)||Q5(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{aN(e,r,c,u)},remove:(r,c,u,f)=>{bL(e,r,c,u,f)},toggle:(r,c,u)=>{vL(e,r,c,u)},match:(r,c,u,f)=>kE(e,r,c,u,f),closest:r=>rN(e,r),matchAll:(r,c)=>gL(e,r,c),matchNode:(r,c,u,f)=>hL(e,r,c,u,f),canApply:r=>pL(e,r),formatChanged:(r,c,u,f)=>yL(e,o,r,c,u,f),getCssText:Ee(bG,e)}},p0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},bH=(e,n,o)=>{const r=te(!1),c=y=>{i0(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;p0(x)||(jB(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;p0(x)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;const O=Ue.os.isMacOS()&&y.key==="Meta";(x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey||O)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!hO(xE(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(y);return}const O=y.ctrlKey&&!y.altKey||y.metaKey;if((x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!O){n.beforeChange(),i0(n,!0,o),n.add({},y),r.set(!0);return}(Ue.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},MN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},$O=e=>{const n=Ar(),o=te(0),r=te(0),c={data:[],typing:!1,beforeChange:()=>{QB(e,o,n)},add:(u,f)=>vO(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=xE(e);u.bookmark=ey(e.selection),e.dispatch("change",{level:u,lastLevel:ef(c.data,r.get()).getOrUndefined()})},undo:()=>eN(e,c,o,r),redo:()=>tN(e,r,c.data),clear:()=>{yO(e,c,r)},reset:()=>{nN(e,c)},hasUndo:()=>oN(e,c,r),hasRedo:()=>sN(e,c,r),transact:u=>mL(e,c,o,u),ignore:u=>{CO(e,o,u)},extra:(u,f)=>{fL(e,c,r,u,f)}};return wd(e)||bH(e,c,o),MN(e),c},BN=[9,27,ke.HOME,ke.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ke.DOWN,ke.UP,ke.LEFT,ke.RIGHT].concat(Ue.browser.isFirefox()?[224]:[]),NN="data-mce-placeholder",PN=e=>e.type==="keydown"||e.type==="keyup",Vm=e=>{const n=e.keyCode;return n===ke.BACKSPACE||n===ke.DELETE},vH=e=>{if(PN(e)){const n=e.keyCode;return!Vm(e)&&(ke.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||$t(BN,n))}else return!1},yH=e=>PN(e)&&!(Vm(e)||e.type==="keyup"&&e.keyCode===229),CH=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},wH=e=>{var n;const o=e.dom,r=pr(e),c=(n=_h(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(vH(f))return;const y=e.getBody(),x=yH(f)?!1:CH(o,y,r);(o.getAttrib(y,NN)!==""!==x||b)&&(o.setAttrib(y,NN,x?c:null),Ib(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};jn(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>si.setEditorTimeout(e,()=>u(b)))})},SH=(e,n)=>({block:e,position:n}),xH=(e,n)=>({from:e,to:n}),IO=(e,n)=>{const o=j.fromDom(e),r=j.fromDom(n.container());return kx(o,r).map(c=>SH(c,n))},EH=e=>!(Si(e.to.block,e.from.block)||Si(e.from.block,e.to.block)),TH=e=>!Dn(e.from.block,e.to.block),Q2=(e,n)=>jo(n,c=>$f(c)||be(c.dom),c=>Dn(c,e)).filter(Za).getOr(e),_H=(e,n)=>{const o=j.fromDom(e);return Dn(Q2(o,n.from.block),Q2(o,n.to.block))},kH=e=>vn(e.from.block.dom)===!1&&vn(e.to.block.dom)===!1,yG=e=>{const n=o=>Lw(o)||_i(o.dom)||ma(o);return n(e.from.block)&&n(e.to.block)},eC=(e,n,o,r)=>bn(r.position.getNode())&&!ao(e,r.block)?Tm(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Ja(o,n,c).bind(u=>IO(n,u)):N.some(r)).getOr(r):r,OH=(e,n,o,r)=>{const c=IO(n,ie.fromRangeStart(r)),u=c.bind(f=>Ja(o,n,f.position).bind(b=>IO(n,b).map(y=>eC(e,n,o,y))));return ur(c,u,xH).filter(f=>TH(f)&&_H(n,f)&&kH(f)&&yG(f)&&EH(f))},FO=(e,n,o,r)=>r.collapsed?OH(e,n,o,r):N.none(),AH=(e,n)=>{const o=dr(e);return ya(o,r=>n.isBlock(pn(r))).fold(Fe(o),r=>o.slice(0,r))},$N=(e,n)=>{const o=AH(e,n);return fe(o,ro),o},IN=(e,n,o)=>{const r=Pm(o,n);return ns(r.reverse(),c=>ao(e,c)).each(ro)},RH=(e,n)=>Et(tv(n),o=>!ao(e,o)).length===0,bp=(e,n,o,r,c)=>{if(ao(r,o))return Ma(o),Nr(o.dom);RH(r,c)&&ao(r,n)&&da(c,j.fromTag("br"));const u=Pa(o.dom,ie.before(c.dom));return fe($N(n,r),f=>{da(c,f)}),IN(r,e,n),u},vp=(e,n)=>e.isInline(pn(n)),PE=(e,n,o,r)=>{if(ao(r,o)){if(ao(r,n)){const f=Bd((b=>{const y=(x,O)=>hf(x).fold(()=>O,A=>vp(r,A)?y(A,O.concat(Pi(A))):O);return y(b,[])})(o),(b,y)=>(av(b,y),y),lm());qd(n),Io(n,f)}return ro(o),Nr(n.dom)}const c=Qa(o.dom);return fe($N(n,r),u=>{Io(o,u)}),IN(r,e,n),c},$E=(e,n)=>{const o=Pm(n,e);return N.from(o[o.length-1])},yp=(e,n)=>Si(n,e)?$E(n,e):N.none(),Cg=(e,n)=>{Tm(e,n.dom).bind(o=>N.from(o.getNode())).map(j.fromDom).filter(Nf).each(ro)},tC=(e,n,o,r)=>(Cg(!0,n),Cg(!1,o),yp(n,o).fold(Ee(PE,e,n,o,r),Ee(bp,e,n,o,r))),nC=(e,n,o,r,c)=>n?tC(e,r,o,c):tC(e,o,r,c),IE=(e,n)=>{const o=j.fromDom(e.getBody());return FO(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{nC(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},LO=(e,n,o)=>{const r=n.getRng();return ur(kx(e,j.fromDom(r.startContainer)),kx(e,j.fromDom(r.endContainer)),(c,u)=>Dn(c,u)?N.none():N.some(()=>{r.deleteContents(),nC(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(N.none())},FE=(e,n)=>{const o=j.fromDom(n),r=Ee(Dn,e);return ko(o,$f,r).isSome()},FN=(e,n)=>FE(e,n.startContainer)||FE(e,n.endContainer),LN=(e,n)=>{const o=Pa(e.dom,ie.fromRangeStart(n)).isNone(),r=Br(e.dom,ie.fromRangeEnd(n)).isNone();return!FN(e,n)&&o&&r},b0=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),HN=e=>{const n=j.fromDom(e.getBody()),o=e.selection.getRng();return LN(n,o)?b0(e):LO(n,e.selection,e.schema)},LE=(e,n)=>e.selection.isCollapsed()?N.none():HN(e),Ed=(e,n,o,r,c)=>N.from(n._selectionOverrides.showCaret(e,o,r,c)),HE=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},v0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?N.none():N.some(HE(n)),zN=(e,n,o)=>{const r=br(1,e.getBody(),n),c=ie.fromRangeStart(r),u=c.getNode();if(gb(u))return Ed(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(gb(f))return Ed(1,e,f,!1,!1);const b=Im(e.dom.getRoot(),c.getNode());return gb(b)?Ed(1,e,b,!1,o):N.none()},zE=(e,n,o)=>n.collapsed?zN(e,n,o).getOr(n):n,VN=e=>bd(e)||ct(e),Um=e=>ug(e)||qb(e),wg=(e,n)=>{_e(n)&&n.data.length===0&&e.remove(n)},qi=(e,n,o,r,c,u)=>{Ed(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),wg(e.dom,o)},DH=(e,n)=>{const o=e.selection.getRng();if(!_e(o.commonAncestorContainer))return N.none();const r=n?Ms.Forwards:Ms.Backwards,c=nr(e.getBody()),u=Ee(Dy,n?c.next:c.prev),f=n?VN:Um,b=xm(r,e.getBody(),o),y=u(b),x=y&&ri(n,y);if(!x||!yb(b,x))return N.none();if(f(x))return N.some(()=>qi(e,o,b.getNode(),r,n,x));const O=u(x);return O&&f(O)&&yb(x,O)?N.some(()=>qi(e,o,b.getNode(),r,n,O)):N.none()},HO=(e,n)=>DH(e,n),zO=(e,n)=>{const o=e.getBody();return n?Nr(o).filter(bd):Qa(o).filter(ug)},VO=e=>{const n=e.selection.getRng();return!n.collapsed&&(zO(e,!0).exists(o=>o.isEqual(ie.fromRangeStart(n)))||zO(e,!1).exists(o=>o.isEqual(ie.fromRangeEnd(n))))},MH=e=>he(e)&&($f(j.fromDom(e))||ma(j.fromDom(e))),ci=xn.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),BH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return je(o)&&o.getAttribute("data-mce-caret")===r},NH=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!Xa(o,r,e);return bb(!n,o).fold(()=>bb(n,r).fold(xe,u),u)},UN=(e,n,o,r,c)=>{const u=c.getNode(!o);return kx(j.fromDom(n),j.fromDom(r.getNode())).map(f=>ao(e,f)?ci.remove(f.dom):ci.moveToElement(u)).orThunk(()=>N.some(ci.moveToElement(u)))},WN=(e,n,o,r)=>Ja(n,e,o).bind(c=>MH(c.getNode())||NH(e,n,o,c,r)?N.none():n&&vn(c.getNode())||!n&&vn(c.getNode(!0))?UN(r,e,n,o,c):n&&ug(o)||!n&&bd(o)?N.some(ci.moveToPosition(c)):N.none()),PH=(e,n)=>Dt(n)?N.none():e&&vn(n.nextSibling)?N.some(ci.moveToElement(n.nextSibling)):!e&&vn(n.previousSibling)?N.some(ci.moveToElement(n.previousSibling)):N.none(),$H=(e,n,o)=>o.fold(r=>N.some(ci.remove(r)),r=>N.some(ci.moveToElement(r)),r=>Xa(n,r,e)?N.none():N.some(ci.moveToPosition(r))),UO=(e,n,o,r)=>BH(n,o)?PH(n,o.getNode(!n)).orThunk(()=>WN(e,n,o,r)):WN(e,n,o,r).bind(c=>$H(e,o,c)),WO=(e,n,o,r)=>{const c=br(n?1:-1,e,o),u=ie.fromRangeStart(c),f=j.fromDom(e);return!n&&ug(u)?N.some(ci.remove(u.getNode(!0))):n&&bd(u)?N.some(ci.remove(u.getNode())):!n&&bd(u)&&q4(f,u,r)?FM(f,u,r).map(b=>ci.remove(b.getNode())):n&&ug(u)&&IM(f,u,r)?g8(f,u,r).map(b=>ci.remove(b.getNode())):UO(e,n,u,r)},ZN=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Xh(e,n,j.fromDom(o)),!0),IH=(e,n)=>o=>{const r=n?ie.before(o):ie.after(o);return e.selection.setRng(r.toRange()),!0},FH=e=>n=>(e.selection.setRng(n.toRange()),!0),ZO=(e,n)=>N.from(Im(e.getBody(),n)),jN=(e,n)=>{const o=e.selection.getNode();return ZO(e,o).filter(vn).fold(()=>WO(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(ZN(e,n),IH(e,n),FH(e))),()=>N.some(ht))},jO=e=>{fe(mr(e,".mce-offscreen-selection"),ro)},GN=(e,n)=>{const o=e.selection.getNode();return vn(o)&&!v1(o)?ZO(e,o.parentNode).filter(vn).fold(()=>N.some(()=>{jO(j.fromDom(e.getBody())),Xh(e,n,j.fromDom(e.selection.getNode())),mo(e)}),()=>N.some(ht)):VO(e)?N.some(()=>{c5(e,e.selection.getRng(),j.fromDom(e.getBody()))}):N.none()},GO=e=>{const n=e.dom,o=e.selection,r=Im(e.getBody(),o.getNode());if(be(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(ie.before(c).toRange())}return!0},oC=(e,n)=>e.selection.isCollapsed()?jN(e,n):GN(e,n),qN=e=>e.hasOwnProperty("text"),KN=e=>e.hasOwnProperty("marker"),hu=(e,n)=>{const o=(u,f)=>{if(_e(u))return{text:u,offset:f};{const b=n(),y=u.childNodes;return f<y.length?(u.insertBefore(b,y[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},Ki=e=>{var n,o;const{start:r,end:c}=e,u=new window.Range;return qN(r)?u.setStart(r.text,r.offset):KN(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),qN(c)?u.setEnd(c.text,c.offset):KN(c)&&(c.before?u.setEndBefore(c.marker):u.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),u},y0=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const y=c.cloneNode(!1),x=()=>{if(n?a5(e):_x(e),f.firstChild!==c){const O=hu(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(A=>y.appendChild(A)),f.appendChild(y),e.selection.setRng(Ki(O))}};return N.some(x)}return N.none()},YN=(e,n)=>{const o=ie.fromRangeStart(e.selection.getRng());return Ja(n,e.getBody(),o).filter(r=>n?l8(r):u8(r)).bind(r=>pb(n?0:-1,r)).map(r=>()=>e.selection.select(r))},C0=(e,n)=>e.selection.isCollapsed()?YN(e,n):N.none(),Cp=_e,qO=e=>Cp(e)&&e.data[0]===qo,KO=e=>Cp(e)&&e.data[e.data.length-1]===qo,YO=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(qo)},XN=e=>{var n;if(Cp(e.previousSibling))return KO(e.previousSibling)||e.previousSibling.appendData(qo),e.previousSibling;if(Cp(e))return qO(e)||e.insertData(0,qo),e;{const o=YO(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},JN=e=>{var n,o;if(Cp(e.nextSibling))return qO(e.nextSibling)||e.nextSibling.insertData(0,qo),e.nextSibling;if(Cp(e))return KO(e)||e.appendData(qo),e;{const r=YO(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},wp=(e,n)=>e?XN(n):JN(n),XO=Ee(wp,!0),LH=Ee(wp,!1),QN=(e,n)=>_e(e.container())?wp(n,e.container()):wp(n,e.getNode()),eP=(e,n)=>{const o=n.get();return o&&e.container()===o&&Ii(o)},JO=(e,n)=>n.fold(o=>{ad(e.get());const r=XO(o);return e.set(r),N.some(ie(r,r.length-1))},o=>Nr(o).map(r=>{if(eP(r,e)){const c=e.get();return ie(c,1)}else{ad(e.get());const c=QN(r,!0);return e.set(c),ie(c,1)}}),o=>Qa(o).map(r=>{if(eP(r,e)){const c=e.get();return ie(c,c.length-1)}else{ad(e.get());const c=QN(r,!1);return e.set(c),ie(c,c.length-1)}}),o=>{ad(e.get());const r=LH(o);return e.set(r),N.some(ie(r,1))}),QO=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return N.none()},La=xn.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),tP=(e,n)=>{const o=zi(n,e);return o||e},eA=(e,n,o)=>{const r=ha(o),c=tP(n,r.container());return $m(e,c,r).fold(()=>Br(c,r).bind(Ee($m,e,c)).map(u=>La.before(u)),N.none)},HH=(e,n)=>_m(e,n)===null,nP=(e,n,o)=>$m(e,n,o).filter(Ee(HH,n)),zH=(e,n,o)=>{const r=s5(o);return nP(e,n,r).bind(c=>Pa(c,r).isNone()?N.some(La.start(c)):N.none())},VH=(e,n,o)=>{const r=ha(o);return nP(e,n,r).bind(c=>Br(c,r).isNone()?N.some(La.end(c)):N.none())},UH=(e,n,o)=>{const r=s5(o),c=tP(n,r.container());return $m(e,c,r).fold(()=>Pa(c,r).bind(Ee($m,e,c)).map(u=>La.after(u)),N.none)},oP=e=>!t5(w0(e)),Td=(e,n,o)=>QO([eA,zH,VH,UH],[e,n,o]).filter(oP),w0=e=>e.fold(ho,ho,ho,ho),VE=e=>e.fold(Fe("before"),Fe("start"),Fe("end"),Fe("after")),UE=e=>e.fold(La.before,La.before,La.after,La.after),tA=e=>e.fold(La.start,La.start,La.end,La.end),WH=(e,n)=>VE(e)===VE(n)&&w0(e)===w0(n),ZH=(e,n,o,r,c,u)=>ur($m(n,o,r),$m(n,o,c),(f,b)=>f!==b&&n5(o,f,b)?La.after(e?f:b):u).getOr(u),sP=(e,n)=>e.fold(Qe,o=>!WH(o,n)),jH=(e,n,o,r,c)=>{const u=ri(e,c);return Ja(e,o,u).map(Ee(ri,e)).fold(()=>r.map(UE),y=>Td(n,o,y).map(Ee(ZH,e,n,o,u,y)).filter(Ee(sP,r))).filter(oP)},GH=(e,n)=>e?n.fold(_(N.some,La.start),N.none,_(N.some,La.after),N.none):n.fold(N.none,_(N.some,La.before),N.none,_(N.some,La.end)),nA=(e,n,o,r)=>{const c=ri(e,r),u=Td(n,o,c);return Td(n,o,c).bind(Ee(GH,e)).orThunk(()=>jH(e,n,o,u,r))},qH=e=>Y(e.selection.getSel().modify),rP=(e,n,o)=>{const r=e?1:-1;return n.setRng(ie(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},KH=(e,n)=>{const o=n.selection.getRng(),r=e?ie.fromRangeEnd(o):ie.fromRangeStart(o);return qH(n)?e&&Vv(r)?rP(!0,n.selection,r):!e&&mm(r)?rP(!1,n.selection,r):!1:!1};var _d;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(_d||(_d={}));const WE=(e,n)=>e===Ms.Backwards?No(n):n,YH=(e,n,o)=>e===Ms.Forwards?n.next(o):n.prev(o),XH=(e,n,o,r)=>bn(r.getNode(n===Ms.Forwards))?_d.Br:Xa(o,r)===!1?_d.Block:_d.Wrap,sC=(e,n,o,r)=>{const c=nr(o);let u=r;const f=[];for(;u;){const b=YH(n,c,u);if(!b)break;if(bn(b.getNode(!1)))return n===Ms.Forwards?{positions:WE(n,f).concat([b]),breakType:_d.Br,breakAt:N.some(b)}:{positions:WE(n,f),breakType:_d.Br,breakAt:N.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=XH(o,n,u,b);return{positions:WE(n,f),breakType:y,breakAt:N.some(b)}}f.push(b),u=b}return{positions:WE(n,f),breakType:_d.Eol,breakAt:N.none()}},rC=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Ms.Backwards?u.concat(c):[c].concat(u)}).getOr([]),oA=(e,n)=>Wo(e,(o,r)=>o.fold(()=>N.some(r),c=>ur(Tr(c.getClientRects()),Tr(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),N.none()),ZE=(e,n)=>Tr(n.getClientRects()).bind(o=>oA(e,o.left)),Sg=Ee(sC,ie.isAbove,-1),aC=Ee(sC,ie.isBelow,1),aP=Ee(rC,-1,Sg),cP=Ee(rC,1,aC),iP=(e,n)=>Sg(e,n).breakAt.isNone(),lP=(e,n)=>aC(e,n).breakAt.isNone(),JH=e=>Nr(e).map(n=>[n].concat(aC(e,n).positions)).getOr([]),QH=e=>Qa(e).map(n=>Sg(e,n).positions.concat(n)).getOr([]),ez=(e,n)=>ZE(aP(e,n),n),tz=(e,n)=>ZE(cP(e,n),n),nz=vn,uP=(e,n)=>Math.abs(e.left-n),oz=(e,n)=>Math.abs(e.right-n),Rl=e=>wa(e,"node"),jE=(e,n)=>Va(e,(o,r)=>{const c=Math.min(uP(o,n),oz(o,n)),u=Math.min(uP(r,n),oz(r,n));return u===c&&Rl(r)&&nz(r.node)||u<c?r:o}),dP=e=>{const n=o=>Ht(o,r=>{const c=Xl(r);return c.node=e,c});if(je(e))return n(e.getClientRects());if(_e(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},sA=e=>dc(e,dP);var cC;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(cC||(cC={}));const mP=(e,n,o,r)=>{let c=r;for(;c=Kf(c,e,Zv,n);)if(o(c))return},fP=(e,n,o,r,c,u)=>{let f=0;const b=[],y=A=>{let D=sA([A]);e===-1&&(D=D.reverse());for(let $=0;$<D.length;$++){const z=D[$];if(!o(z,x)){if(b.length>0&&n(z,Ic(b))&&f++,z.line=f,c(z))return!0;b.push(z)}}return!1},x=Ic(u.getClientRects());if(!x)return b;const O=u.getNode();return O&&(y(O),mP(e,r,y,O)),b},gP=(e,n)=>n.line>e,sz=(e,n)=>n.line===e,rz=Ee(fP,cC.Up,bh,L1),az=Ee(fP,cC.Down,L1,bh),Sp=e=>Ic(e.getClientRects()),hP=(e,n,o,r)=>{const c=nr(n);let u,f,b,y;const x=[];let O=0;e===1?(u=c.next,f=L1,b=bh,y=ie.after(r)):(u=c.prev,f=bh,b=L1,y=ie.before(r));const A=Sp(y);do{if(!y.isVisible())continue;const D=Sp(y);if(b(D,A))continue;x.length>0&&f(D,Ic(x))&&O++;const $=Xl(D);if($.position=y,$.line=O,o($))return x;x.push($)}while(y=u(y));return x},rA=e=>n=>gP(e,n),GE=e=>n=>sz(e,n),pu=(e,n)=>{e.selection.setRng(n),m2(e,e.selection.getRng())},aA=(e,n,o)=>N.some(zE(e,n,o)),pP=(e,n,o,r,c,u)=>{const f=n===Ms.Forwards,b=nr(e.getBody()),y=Ee(Dy,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const z=Ff(o);if(u(z))return Ed(n,e,z,n===Ms.Backwards,!1);if(VO(e)){const L=o.cloneRange();return L.collapse(n===Ms.Backwards),N.from(L)}}const O=xm(n,e.getBody(),o);if(x(O))return v0(e,O.getNode(!f));let A=y(O);const D=Gr(o);if(A)A=ri(f,A);else return D?N.some(o):N.none();if(x(A))return Ed(n,e,A.getNode(!f),f,!1);const $=y(A);return $&&x($)&&yb(A,$)?Ed(n,e,$.getNode(!f),f,!1):D?aA(e,A.toRange(),!1):N.none()},bP=(e,n,o,r,c,u)=>{const f=xm(n,e.getBody(),o),b=Ic(f.getClientRects()),y=n===cC.Down,x=e.getBody();if(!b)return N.none();if(VO(e)){const V=y?ie.fromRangeEnd(o):ie.fromRangeStart(o);return(y?tz:ez)(x,V).orThunk(()=>N.from(V)).map(Q=>Q.toRange())}const A=(y?az:rz)(x,rA(1),f),D=Et(A,GE(1)),$=b.left,z=jE(D,$);if(z&&u(z.node)){const V=Math.abs($-z.left),K=Math.abs($-z.right);return Ed(n,e,z.node,V<K,!1)}let L;if(r(f)?L=f.getNode():c(f)?L=f.getNode(!0):L=Ff(o),L){const V=hP(n,x,rA(1),L);let K=jE(Et(V,GE(1)),$);if(K||(K=Ic(Et(V,GE(0))),K))return aA(e,K.position.toRange(),!1)}return D.length===0?vP(e,y).filter(y?c:r).map(V=>zE(e,V.toRange(),!1)):N.none()},vP=(e,n)=>{const o=e.selection.getRng(),r=n?ie.fromRangeEnd(o):ie.fromRangeStart(o),c=qk(r.container(),e.getBody());if(n){const u=aC(c,r);return Fl(u.positions)}else{const u=Sg(c,r);return Tr(u.positions)}},cz=(e,n,o)=>vP(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),cA=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},Yi=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},yP=(e,n,o)=>JO(n,o).map(r=>(cA(e,r),o)),iz=(e,n,o)=>{const r=ie.fromRangeStart(e);if(e.collapsed)return r;{const c=ie.fromRangeEnd(e);return o?Pa(n,c).getOr(c):Br(n,r).getOr(r)}},xp=(e,n,o)=>{const r=e.getBody(),c=iz(e.selection.getRng(),r,o),u=Ee(dg,e);return nA(o,u,r,c).bind(b=>yP(e,n,b))},CP=(e,n,o)=>{const r=Ht(mr(j.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Et(r,e),u=Et(o,e);fe(zp(c,u),Ee(Yi,!1)),fe(zp(u,c),Ee(Yi,!0))},lz=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=ie.fromRangeStart(e.selection.getRng());ie.isTextPosition(r)&&!o5(r)&&(cA(e,Wk(o,r)),n.set(null))}},qE=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Et(r,e);fe(c,u=>{const f=ie.fromRangeStart(n.selection.getRng());Td(e,n.getBody(),f).bind(b=>yP(n,o,b))})}},wP=(e,n,o)=>vm(e)?xp(e,n,o).isSome():!1,SP=(e,n,o)=>vm(n)?KH(e,n):!1,uz=e=>{const n=te(null),o=Ee(dg,e);return e.on("NodeChange",r=>{vm(e)&&(CP(o,e.dom,r.parents),lz(e,n),qE(o,e,n,r.parents))}),n},dz=Ee(SP,!0),xP=Ee(SP,!1),KE=(e,n,o)=>{if(vm(e)){const r=vP(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?ie.fromRangeEnd(c):ie.fromRangeStart(c)});return Td(Ee(dg,e),e.getBody(),r).exists(c=>{const u=UE(c);return JO(o,u).exists(f=>(cA(e,f),!0))})}else return!1},Wm=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},mz=e=>ur(Nr(e),Qa(e),(n,o)=>{const r=ri(!0,n),c=ri(!1,o);return Br(e,r).forall(u=>u.isEqual(c))}).getOr(!0),EP=(e,n)=>o=>JO(n,o).map(r=>()=>cA(e,r)),TP=(e,n,o,r)=>{const c=e.getBody(),u=Ee(dg,e);e.undoManager.ignore(()=>{e.selection.setRng(Wm(o,r)),_x(e),Td(u,c,ie.fromRangeStart(e.selection.getRng())).map(tA).bind(EP(e,n)).each(ra)}),e.nodeChanged()},fz=(e,n)=>{const o=zi(n,e);return o||e},gz=(e,n,o,r)=>{const c=fz(e.getBody(),r.container()),u=Ee(dg,e),f=Td(u,c,r);return f.bind(y=>o?y.fold(Fe(N.some(tA(y))),N.none,Fe(N.some(UE(y))),N.none):y.fold(N.none,Fe(N.some(UE(y))),N.none,Fe(N.some(tA(y))))).map(EP(e,n)).getOrThunk(()=>{const y=ou(o,c,r),x=y.bind(O=>Td(u,c,O));return ur(f,x,()=>$m(u,c,r).bind(O=>mz(O)?N.some(()=>{Xh(e,o,j.fromDom(O))}):N.none())).getOrThunk(()=>x.bind(()=>y.map(O=>()=>{o?TP(e,n,r,O):TP(e,n,O,r)})))})},iC=(e,n,o)=>{if(e.selection.isCollapsed()&&vm(e)){const r=ie.fromRangeStart(e.selection.getRng());return gz(e,n,o,r)}return N.none()},iA=e=>Vr(e)>1,YE=(e,n)=>{const o=j.fromDom(e.getBody()),r=j.fromDom(e.selection.getStart()),c=Pm(r,o);return ya(c,n).fold(Fe(c),u=>c.slice(0,u))},_P=e=>Vr(e)===1,kP=e=>YE(e,n=>e.schema.isBlock(pn(n))||iA(n)),OP=e=>YE(e,n=>e.schema.isBlock(pn(n))),AP=(e,n)=>{const o=Ee(M3,e);return dc(n,r=>o(r)?[r.dom]:[])},S0=e=>{const n=OP(e);return AP(e,n)},XE=(e,n,o,r)=>{const c=AP(n,r);if(c.length===0)Xh(n,e,o);else{const u=L5(o.dom,c);n.selection.setRng(u.toRange())}},RP=(e,n)=>{const o=Et(kP(e),_P);return Fl(o).bind(r=>{const c=ie.fromRangeStart(e.selection.getRng());return C2(n,c,r.dom)&&!Ih(r)?N.some(()=>XE(n,e,r,o)):N.none()})},DP=(e,n)=>{const o=n.parentElement;return bn(n)&&!q(o)&&e.dom.isEmpty(o)},MP=e=>Ih(j.fromDom(e)),lA=(e,n)=>{const o=e.selection.getStart(),r=DP(e,o)||MP(o)?L5(o,n):D3(e.selection.getRng(),n);e.selection.setRng(r.toRange())},JE=(e,n)=>{const o=zp(n,S0(e));o.length>0&&lA(e,o)},QE=e=>_e(e.startContainer),lC=e=>e.startOffset===0&&QE(e),hz=(e,n)=>{const o=n.startContainer.parentElement;return!q(o)&&M3(e,j.fromDom(o))},BP=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!q(n)&&!q(o)&&n.isEqualNode(o)},pz=e=>{const n=e.endContainer;return e.endOffset===(_e(n)?n.length:n.childNodes.length)},bz=e=>BP(e)&&pz(e),NP=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),vz=e=>bz(e)||NP(e),PP=e=>{const n=e.selection.getRng();return lC(n)&&hz(e,n)&&vz(n)},CG=e=>{if(PP(e)){const n=S0(e);return N.some(()=>{_x(e),JE(e,n)})}else return N.none()},uA=(e,n)=>e.selection.isCollapsed()?RP(e,n):CG(e),yz=(e,n)=>g1(e,o=>ec(o.dom),o=>n.isBlock(pn(o))),Cz=e=>yz(j.fromDom(e.selection.getStart()),e.schema),wz=e=>{const n=e.selection.getRng();return n.collapsed&&(QE(n)||e.dom.isEmpty(n.startContainer))&&!Cz(e)},uC=e=>(wz(e)&&lA(e,[]),!0),dA=(e,n,o)=>he(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),Xh(e,n,j.fromDom(o))}):N.none(),Sz=(e,n)=>{const o=n?ct:qb,r=n?Ms.Forwards:Ms.Backwards,c=xm(r,e.getBody(),e.selection.getRng());return o(c)?dA(e,n,c.getNode(!n)):N.from(ri(n,c)).filter(u=>o(u)&&yb(c,u)).bind(u=>dA(e,n,u.getNode(!n)))},xz=(e,n)=>{const o=e.selection.getNode();return Or(o)?dA(e,n,o):N.none()},eT=(e,n)=>e.selection.isCollapsed()?Sz(e,n):xz(e,n),Ez=e=>jo(e,n=>be(n.dom)||vn(n.dom)).exists(n=>be(n.dom)),Zm=e=>Fd(e??"").getOr(0),mA=(e,n)=>{const o=e||Lv(n)?"margin":"padding",r=Cs(n,"direction")==="rtl"?"-right":"-left";return o+r},fA=(e,n,o,r,c,u)=>{const f=mA(o,j.fromDom(u)),b=Zm(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},$P=(e,n)=>Ys(n,o=>{const r=mA(my(e),o),c=Ta(o,r).map(Zm).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),tT=e=>{const n=ii(e);return!e.mode.isReadOnly()&&(n.length>1||$P(e,n))},jm=e=>$i(e)||ma(e),IP=e=>gc(e).exists(jm),ii=e=>Et(cv(e.selection.getSelectedBlocks()),n=>!jm(n)&&!IP(n)&&Ez(n)),xg=(e,n)=>{var o,r;const{dom:c}=e,u=RF(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=Zm(u),y=my(e);fe(ii(e),x=>{fA(c,n,y,b,f,x.dom)})},gA=e=>xg(e,"indent"),FP=e=>xg(e,"outdent"),hA=e=>{if(e.selection.isCollapsed()&&tT(e)){const n=e.dom,o=e.selection.getRng(),r=ie.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&G4(j.fromDom(c),r,e.schema))return N.some(()=>FP(e))}return N.none()},LP=(e,n,o)=>Nd([hA,oC,HO,(r,c)=>iC(r,n,c),IE,op,C0,eT,LE,uA,y0],r=>r(e,o)).filter(r=>e.selection.isEditable()),Tz=(e,n)=>{LP(e,n,!1).fold(()=>{e.selection.isEditable()&&(_x(e),mo(e))},ra)},_z=(e,n)=>{LP(e,n,!0).fold(()=>{e.selection.isEditable()&&a5(e)},ra)},kz=(e,n)=>{e.addCommand("delete",()=>{Tz(e,n)}),e.addCommand("forwardDelete",()=>{_z(e,n)})},HP=5,zP=400,VP=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),Oz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>HP||r>HP},x0=e=>{const n=Ar(),o=te(!1),r=ju(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},zP);e.on("touchstart",c=>{VP(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),VP(c).each(u=>{n.on(f=>{Oz(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},E0=(e,n)=>Rt(e,n.nodeName),UP=(e,n)=>_e(n)?!0:je(n)?!E0(e.getBlockElements(),n)&&!tc(n)&&!Fu(e,n)&&!Go(n):!1,WP=(e,n,o)=>oo(BM(j.fromDom(o),j.fromDom(n)),r=>E0(e,r.dom)),pA=(e,n)=>{if(_e(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||E0(e,n.nextSibling)||Go(n.nextSibling)}return!1},bA=e=>e.dom.create(pr(e),ed(e)),Az=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=null;const O=pr(e);if(!u||!je(u))return;const A=f.nodeName.toLowerCase();if(!r.isValidChild(A,O.toLowerCase())||WP(c,f,u))return;if(f.firstChild===f.lastChild&&bn(f.firstChild)){b=bA(e),b.appendChild(lm().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let D=f.firstChild;for(;D;)if(je(D)&&pw(r,D),UP(r,D)){if(pA(c,D)){y=D,D=D.nextSibling,n.remove(y);continue}if(!b){if(!x&&e.hasFocus()&&(x=hu(e.selection.getRng(),()=>document.createElement("span"))),!D.parentNode){D=null;break}b=bA(e),f.insertBefore(b,D)}y=D,D=D.nextSibling,b.appendChild(y)}else b=null,D=D.nextSibling;x&&(e.selection.setRng(Ki(x)),e.nodeChanged())},ZP=(e,n,o)=>{const r=j.fromDom(bA(e)),c=lm();Io(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},Rz=e=>{e.on("NodeChange",()=>Az(e))},jP=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,Dz=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},Mz=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],Dz(e,c,rb(e)));o.content=c}},GP=(e,n)=>Ys(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),Bz=e=>{const n="contenteditable",o=" "+Me.trim(Ik(e))+" ",r=" "+Me.trim(rb(e))+" ",c=jP(o),u=jP(r),f=ni(e);f.length>0&&e.on("BeforeSetContent",b=>{Mz(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];if(!c(x)&&!u(x))continue;const O=x.attr("data-mce-content");f.length>0&&O?GP(f,O)?(x.name="#text",x.type=3,x.raw=!0,x.value=O):x.remove():x.attr(n,null)}})},Nz=e=>pt(j.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),Nc=(e,n)=>{n.hasAttribute("data-mce-caret")&&(rn(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Pz=(e,n)=>{const o=Nz(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),Nc(e,o);return}Hv(o)&&(Nc(e,o),e.undoManager.add())}},vA=e=>{e.on("keyup compositionstart",Ee(Pz,e))},yA=vn,CA=(e,n,o)=>pP(n,e,o,bd,ug,yA),$z=(e,n,o)=>bP(n,e,o,u=>bd(u)||Z4(u),u=>ug(u)||j4(u),yA),Iz=e=>{const n=e.dom.create(pr(e));return n.innerHTML='<br data-mce-bogus="1">',n},qP=(e,n,o)=>{const r=nr(e.getBody()),c=Ee(Dy,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(ie.fromRangeStart(o))){const b=j.fromDom(Iz(e));n===1?bc(j.fromDom(u),b):da(j.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},Fz=(e,n)=>{const o=n?Ms.Forwards:Ms.Backwards,r=e.selection.getRng();return CA(o,e,r).orThunk(()=>(qP(e,o,r),N.none()))},Lz=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return $z(o,e,r).orThunk(()=>(qP(e,o,r),N.none()))},KP=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return t5(o)?!n:n},YP=(e,n)=>Fz(e,KP(e.selection,n)).exists(o=>(pu(e,o),!0)),XP=(e,n)=>Lz(e,n).exists(o=>(pu(e,o),!0)),T0=(e,n)=>cz(e,n,n?ug:bd),Dl=(e,n)=>zO(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(pu(e,o),!0)),Ep=e=>$t(["figcaption"],pn(e)),nT=(e,n,o)=>{const r=Ee(Dn,n);return jo(j.fromDom(e.container()),c=>o.isBlock(pn(c)),r).filter(Ep)},wA=(e,n,o)=>n?lP(e.dom,o):iP(e.dom,o),SA=(e,n)=>{const o=j.fromDom(e.getBody()),r=ie.fromRangeStart(e.selection.getRng());return nT(r,o,e.schema).exists(()=>{if(wA(o,n,r)){const u=ZP(e,o,n?Io:c1);return e.selection.setRng(u),!0}else return!1})},xA=(e,n)=>e.selection.isCollapsed()?SA(e,n):!1,Hz=(e,n,o)=>{const r=e.selection.getRng(),c=ie.fromRangeStart(r);return e.getBody().firstChild===n&&iP(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},JP=(e,n)=>{const o=e.selection.getRng(),r=ie.fromRangeStart(o);return e.getBody().lastChild===n&&lP(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},QP=(e,n)=>n?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>JP(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>Hz(e,r,o))).getOr(!1),e$=(e,n)=>QP(e,n),t$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},zz=e=>Ht(e,n=>({...t$,...n})),Vz=e=>Ht(e,n=>({...t$,...n})),n$=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Uz=(e,n)=>dc(zz(e),o=>n$(o,n)?[o]:[]),o$=(e,n)=>dc(Vz(e),o=>n$(o,n)?[o]:[]),Mt=(e,...n)=>()=>e.apply(null,n),oT=(e,n)=>ns(Uz(e,n),o=>o.action()),Wz=(e,n)=>Nd(o$(e,n),o=>o.action()),Zz=(e,n)=>{const o=n?Ms.Forwards:Ms.Backwards,r=e.selection.getRng();return pP(e,o,r,ct,qb,Or).exists(c=>(pu(e,c),!0))},s$=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return bP(e,o,r,ct,qb,Or).exists(c=>(pu(e,c),!0))},jz=(e,n)=>cz(e,n,n?qb:ct),Gz=xn.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),dC={...Gz,none:e=>Gz.none(e)},SG=(e,n)=>r$(e,n,Qe),r$=(e,n,o)=>dc(dr(e),r=>ja(r,n)?o(r)?[r]:[]:r$(r,n,o)),rc=(e,n,o=xe)=>{if(o(n))return N.none();if($t(e,pn(n)))return N.some(n);const r=c=>ja(c,"table")||o(c);return zs(n,e.join(","),r)},a$=(e,n)=>rc(["td","th"],e,n),mC=e=>SG(e,"th,td"),c$=(e,n)=>Bu(e,"table",n),sT=(e,n,o,r,c=Qe)=>{const u=r===1;if(!u&&o<=0)return dC.first(e[0]);if(u&&o>=e.length-1)return dC.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?dC.middle(n,b):sT(e,n,f,r,c)}},EA=(e,n)=>c$(e,n).bind(o=>{const r=mC(o);return ya(r,u=>Dn(e,u)).map(u=>({index:u,all:r}))}),TA=(e,n,o)=>EA(e,o).fold(()=>dC.none(e),c=>sT(c.all,e,c.index,1,n)),qz=(e,n,o)=>EA(e,o).fold(()=>dC.none(),c=>sT(c.all,e,c.index,-1,n)),Kz=e=>nk(e).filter(n=>n.trim().length!==0||n.indexOf(us)>-1).isSome(),i$=e=>Vc(e)&&ys(e,"contenteditable")==="false",Yz=["img","br"],Xz=e=>Kz(e)||$t(Yz,pn(e))||i$(e),Jz=e=>ow(e,Xz),_A=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Qz=(e,n)=>dc(n,o=>{const r=_A(Xl(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),eV=(e,n,o)=>Wo(e,(r,c)=>r.fold(()=>N.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return N.some(b<f?c:u)}),N.none()),tV=(e,n,o,r,c)=>{const u=mr(j.fromDom(o),"td,th,caption").map(b=>b.dom),f=Et(Qz(e,u),b=>n(b,c));return eV(f,r,c).map(b=>b.cell)},nV=e=>e.bottom,l$=e=>e.top,xG=(e,n)=>e.y<n,oV=(e,n)=>e.y>n,sV=Ee(tV,nV,xG),rV=Ee(tV,l$,oV),kA=(e,n)=>Tr(n.getClientRects()).bind(o=>sV(e,o.left,o.top)).bind(o=>ZE(QH(o),n)),rT=(e,n)=>Fl(n.getClientRects()).bind(o=>rV(e,o.left,o.top)).bind(o=>ZE(JH(o),n)),u$=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),d$=e=>e.breakType===_d.Wrap&&e.positions.length===0,aV=e=>e.breakType===_d.Br&&e.positions.length===1,m$=(e,n,o)=>{const r=e(n,o);return d$(r)||!bn(o.getNode())&&aV(r)?!u$(e,n,r):r.breakAt.isNone()},OA=Ee(m$,Sg),cV=Ee(m$,aC),iV=(e,n,o)=>{const r=ie.fromRangeStart(n);return Tm(!e,o).exists(c=>c.isEqual(r))},lV=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return jk()&&iV(n,c,o)?(Ed(u,e,o,!n,!1).each(f=>{pu(e,f)}),!0):!1},uV=(e,n,o)=>kA(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>oA(aP(e,ie.before(n)),r.left))).getOr(ie.before(n)),Ml=(e,n,o)=>rT(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>oA(cP(e,ie.after(n)),r.left))).getOr(ie.after(n)),AA=(e,n)=>{const o=n.getNode(e);return Ei(o)?N.some(o):N.none()},f$=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?bc:da,c=ZP(n,j.fromDom(o),r);pu(n,c)})},dV=(e,n,o)=>{const r=AA(!!n,o),c=n===!1;r.fold(()=>pu(e,o.toRange()),u=>Tm(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>pu(e,o.toRange()),f=>f$(n,e,u)))},EG=(e,n,o,r)=>{const c=e.selection.getRng(),u=ie.fromRangeStart(c),f=e.getBody();if(!n&&OA(r,u)){const b=uV(f,o,u);return dV(e,n,b),!0}else if(n&&cV(r,u)){const b=Ml(f,o,u);return dV(e,n,b),!0}else return!1},mV=(e,n,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),fV=(e,n)=>mV(e,n,lV),RA=(e,n)=>mV(e,n,EG),aT=e=>{const n=ig.exact(e,0,e,0);return l(n)},g$=(e,n,o)=>o.fold(N.none,N.none,(r,c)=>Jz(c).map(u=>aT(u)),r=>(e.execCommand("mceTableInsertRowAfter"),cT(e,n,r))),cT=(e,n,o)=>g$(e,n,TA(o,er)),h$=(e,n,o)=>g$(e,n,qz(o,er)),DA=(e,n)=>{const o=["table","li","dl"],r=j.fromDom(e.getBody()),c=b=>{const y=pn(b);return Dn(b,r)||$t(o,y)},u=e.selection.getRng(),f=j.fromDom(n?u.endContainer:u.startContainer);return a$(f,c).map(b=>(c$(b,c).each(O=>{e.model.table.clearSelectedCells(O.dom)}),e.selection.collapse(!n),(n?cT:h$)(e,c,b).each(O=>{e.selection.setRng(O)}),!0)).getOr(!1)},p$=(e,n,o)=>{const r=Ue.os.isMacOS()||Ue.os.isiOS();oT([{keyCode:ke.RIGHT,action:Mt(YP,e,!0)},{keyCode:ke.LEFT,action:Mt(YP,e,!1)},{keyCode:ke.UP,action:Mt(XP,e,!1)},{keyCode:ke.DOWN,action:Mt(XP,e,!0)},...r?[{keyCode:ke.UP,action:Mt(Dl,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ke.DOWN,action:Mt(Dl,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ke.RIGHT,action:Mt(fV,e,!0)},{keyCode:ke.LEFT,action:Mt(fV,e,!1)},{keyCode:ke.UP,action:Mt(RA,e,!1)},{keyCode:ke.DOWN,action:Mt(RA,e,!0)},{keyCode:ke.UP,action:Mt(RA,e,!1)},{keyCode:ke.UP,action:Mt(e$,e,!1)},{keyCode:ke.DOWN,action:Mt(e$,e,!0)},{keyCode:ke.RIGHT,action:Mt(Zz,e,!0)},{keyCode:ke.LEFT,action:Mt(Zz,e,!1)},{keyCode:ke.UP,action:Mt(s$,e,!1)},{keyCode:ke.DOWN,action:Mt(s$,e,!0)},{keyCode:ke.RIGHT,action:Mt(wP,e,n,!0)},{keyCode:ke.LEFT,action:Mt(wP,e,n,!1)},{keyCode:ke.RIGHT,ctrlKey:!r,altKey:r,action:Mt(dz,e,n)},{keyCode:ke.LEFT,ctrlKey:!r,altKey:r,action:Mt(xP,e,n)},{keyCode:ke.UP,action:Mt(xA,e,!1)},{keyCode:ke.DOWN,action:Mt(xA,e,!0)}],o).each(c=>{o.preventDefault()})},gV=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||p$(e,n,o)})},bu=(e,n)=>({container:e,offset:n}),iT=Qn.DOM,lT=e=>n=>e===n?-1:0,uT=e=>n=>e.isBlock(n)||$t(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",MA=(e,n,o)=>{if(_e(e)&&n>=0)return N.some(bu(e,n));{const r=qu(iT);return N.from(r.backwards(e,n,lT(e),o)).map(c=>bu(c.container,c.container.data.length))}},hV=(e,n,o)=>{if(_e(e)&&n>=e.length)return N.some(bu(e,n));{const r=qu(iT);return N.from(r.forwards(e,n,lT(e),o)).map(c=>bu(c.container,0))}},BA=(e,n,o)=>{if(!_e(e))return N.none();const r=e.data;if(n>=0&&n<=r.length)return N.some(bu(e,n));{const c=qu(iT);return N.from(c.backwards(e,n,lT(e),o)).bind(u=>{const f=u.container.data;return BA(u.container,n+f.length,o)})}},dT=(e,n,o)=>{if(!_e(e))return N.none();const r=e.data;if(n<=r.length)return N.some(bu(e,n));{const c=qu(iT);return N.from(c.forwards(e,n,lT(e),o)).bind(u=>dT(u.container,n-r.length,o))}},NA=(e,n,o,r,c)=>{const u=qu(e,uT(e));return N.from(u.backwards(n,o,r,c))},pV=e=>e.collapsed&&_e(e.startContainer),b$=e=>Ba(e.toString().replace(/\u00A0/g," ")),v$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,bV=(e,n)=>e.substring(n.length),vV=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&v$(f))return N.none();if(u===f&&ir(e,o,c,n))break}return N.some(c)},PA=(e,n,o,r=!1)=>{if(!pV(n))return N.none();const c={text:"",offset:0},u=(b,y,x)=>(c.text=x+c.text,c.offset+=y,vV(c.text,c.offset,o,r).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return NA(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return N.none();const x=b$(y);return x.lastIndexOf(o)!==0?N.none():N.some({text:bV(x,o),range:y,trigger:o})})},yV=e=>e.nodeType===Kp,CV=e=>e.nodeType===Ci,mT=e=>{if(yV(e))return bu(e,e.data.length);{const n=e.childNodes;return n.length>0?mT(n[n.length-1]):bu(e,n.length)}},y$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?y$(o[n],0):o.length>0&&CV(e)&&o.length===n?mT(o[o.length-1]):bu(e,n)},C$=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return NA(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!v$(u)}).isSome()},wV=e=>n=>{const o=y$(n.startContainer,n.startOffset);return!C$(e,o)},SV=(e,n,o)=>Nd(o.triggers,r=>PA(e,n,r)),xV=(e,n)=>{const o=n(),r=e.selection.getRng();return SV(e.dom,r,o).bind(c=>w$(e,n,c))},w$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=Et(u.lookupByTrigger(o.trigger),O=>o.text.length>=O.minChars&&O.matches.getOrThunk(()=>wV(e.dom))(o.range,b,o.text));if(y.length===0)return N.none();const x=Promise.all(Ht(y,O=>O.fetch(o.text,O.maxResults,r).then(D=>({matchText:o.text,items:D,columns:O.columns,onAction:O.onAction,highlightOn:O.highlightOn}))));return N.some({lookupData:x,context:o})};var vu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(vu||(vu={}));const $A=(e,n,o)=>e.stype===vu.Error?n(e.serror):o(e.svalue),$s=e=>{const n=[],o=[];return fe(e,r=>{$A(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},EV=(e,n)=>e.stype===vu.Error?{stype:vu.Error,serror:n(e.serror)}:e,TV=(e,n)=>e.stype===vu.Value?{stype:vu.Value,svalue:n(e.svalue)}:e,_V=(e,n)=>e.stype===vu.Value?n(e.svalue):e,S$=(e,n)=>e.stype===vu.Error?n(e.serror):e,fT=e=>({stype:vu.Value,svalue:e}),IA=e=>({stype:vu.Error,serror:e}),yr={fromResult:e=>e.fold(IA,fT),toResult:e=>$A(e,qr.error,qr.value),svalue:fT,partition:$s,serror:IA,bind:_V,bindError:S$,map:TV,mapError:EV,fold:$A},fC=e=>kt(e)&&Lr(e).length>100?" removed due to size":JSON.stringify(e,null,2),FA=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Fe("... (only showing first ten failures)")}]):e;return Ht(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},_0=(e,n)=>yr.serror([{path:e,getErrorInfo:n}]),E$=(e,n,o)=>_0(e,()=>'Could not find valid *required* value for "'+n+'" in '+fC(o)),gT=(e,n)=>_0(e,()=>'Choice schema did not contain choice key: "'+n+'"'),hT=(e,n,o)=>_0(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+fC(n)),gC=(e,n)=>_0(e,Fe(n)),hC=(e,n,o,r)=>uo(o,r).fold(()=>hT(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),Bl=(e,n)=>({extract:(c,u)=>uo(u,e).fold(()=>gT(c,e),b=>hC(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Lr(n)}),pC=(e,n)=>n,T$=(e,n)=>Un(e)&&Un(n)?pT(e,n):n,LA=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)Rt(c,u)&&(o[u]=e(o[u],c[u]))}return o},pT=LA(T$),HA=LA(pC),_$=()=>({tag:"required",process:{}}),kV=e=>({tag:"defaultedThunk",process:e}),k0=e=>kV(Fe(e)),OV=()=>({tag:"option",process:{}}),AV=(e,n)=>e.length>0?yr.svalue(pT(n,HA.apply(void 0,e))):yr.svalue(n),k$=e=>_(yr.serror,Hp)(e),RV={consolidateObj:(e,n)=>{const o=yr.partition(e);return o.errors.length>0?k$(o.errors):AV(o.values,n)},consolidateArr:e=>{const n=yr.partition(e);return n.errors.length>0?k$(n.errors):yr.svalue(n.values)}},DV=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),MV=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),O$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},zA=e=>{const n=(r,c)=>yr.bindError(e(c),u=>gC(r,u)),o=Fe("val");return{extract:n,toString:o}},BV=zA(yr.svalue),NV=(e,n,o,r)=>uo(n,o).fold(()=>E$(e,o,n),r),A$=(e,n,o,r)=>{const c=uo(e,n).getOrThunk(()=>o(e));return r(c)},PV=(e,n,o)=>o(uo(e,n)),R$=(e,n,o,r)=>{const c=uo(e,n).map(u=>u===!0?o(e):u);return r(c)},D$=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>yr.svalue(N.none()),y=>{const x=c.extract(n.concat([r]),y);return yr.map(x,N.some)});switch(e.tag){case"required":return NV(n,o,r,u);case"defaultedThunk":return A$(o,r,e.process,u);case"option":return PV(o,r,f);case"defaultedOptionThunk":return R$(o,r,e.process,f);case"mergeWithThunk":return A$(o,r,Fe({}),b=>{const y=pT(e.process(o),b);return u(y)})}},M$=(e,n,o)=>{const r={},c=[];for(const u of o)O$(u,(f,b,y,x)=>{const O=D$(y,e,n,f,x);yr.fold(O,A=>{c.push(...A)},A=>{r[b]=A})},(f,b)=>{r[f]=b(n)});return c.length>0?yr.serror(c):yr.svalue(r)},VA=e=>({extract:(r,c)=>M$(r,c,e),toString:()=>`obj{
`+Ht(e,c=>O$(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),B$=e=>({extract:(r,c)=>{const u=Ht(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return RV.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),$V=e=>zA(n=>e(n).fold(yr.serror,yr.svalue)),IV=(e,n,o)=>{const r=n.extract([e],o);return yr.mapError(r,c=>({input:o,errors:c}))},N$=(e,n,o)=>yr.toResult(IV(e,n,o)),FV=e=>`Errors: 
`+FA(e.errors).join(`
`)+`

Input object: `+fC(e.input),UA=(e,n)=>Bl(e,_n(n,VA)),LV=Fe(BV),bC=(e,n)=>zA(o=>{const r=typeof o;return e(o)?yr.svalue(o):yr.serror(`Expected type: ${n} but got: ${r}`)}),P$=bC(Ls,"number"),bT=bC(Z,"string"),HV=bC(gt,"boolean"),WA=bC(Y,"function"),vC=DV,ZA=MV,zV=e=>$V(n=>$t(e,n)?qr.value(n):qr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),$$=(e,n)=>vC(e,e,_$(),n),jA=e=>$$(e,bT),I$=e=>$$(e,WA),VV=(e,n)=>vC(e,e,_$(),B$(n)),vT=(e,n)=>vC(e,e,OV(),n),yT=e=>vT(e,bT),UV=e=>vT(e,WA),WV=(e,n)=>vC(e,e,k0(n),LV()),_p=(e,n,o)=>vC(e,e,k0(n),o),GA=(e,n)=>_p(e,n,P$),ZV=(e,n)=>_p(e,n,bT),F$=(e,n,o)=>_p(e,n,zV(o)),qA=(e,n)=>_p(e,n,HV),KA=(e,n)=>_p(e,n,WA),jV=(e,n,o)=>_p(e,n,B$(o)),GV=jA("type"),qV=I$("fetch"),YA=I$("onAction"),kG=KA("onSetup",()=>ht),KV=yT("text"),CT=yT("icon"),L$=yT("tooltip"),H$=yT("label"),YV=qA("active",!1),z$=qA("enabled",!0),XA=qA("primary",!1),XV=e=>WV("columns",e),yC=e=>ZV("type",e),JV=VA([GV,jA("trigger"),GA("minChars",1),XV(1),GA("maxResults",10),UV("matches"),qV,YA,jV("highlightOn",[],bT)]),V$=e=>N$("Autocompleter",JV,e),JA=[z$,L$,CT,KV,kG],wT=[YV].concat(JA),QV=[KA("predicate",xe),F$("scope","node",["node","editor"]),F$("position","selection",["node","selection","line"])],e9=JA.concat([yC("contextformbutton"),XA,YA,ZA("original",ho)]),t9=wT.concat([yC("contextformbutton"),XA,YA,ZA("original",ho)]),U$=JA.concat([yC("contextformbutton")]),n9=wT.concat([yC("contextformtogglebutton")]),o9=UA("type",{contextformbutton:e9,contextformtogglebutton:t9});VA([yC("contextform"),KA("initValue",Fe("")),H$,VV("commands",o9),vT("launch",UA("type",{contextformbutton:U$,contextformtogglebutton:n9}))].concat(QV));const s9=e=>{const n=e.ui.registry.getAll().popups,o=_n(n,f=>V$(f).fold(b=>{throw new Error(FV(b))},ho)),r=Up(_u(o,f=>f.trigger)),c=tf(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Et(c,b=>b.trigger===f)}},r9=(e,n)=>{const o=ju(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},a9=e=>{const n=Ar(),o=te(!1),r=n.isSet,c=()=>{r()&&(ax(e),o.set(!1),n.clear())},u=A=>{r()||n.set({trigger:A.trigger,matchLength:A.text.length})},f=nl(()=>s9(e)),b=A=>n.get().map(D=>PA(e.dom,e.selection.getRng(),D.trigger,!0).bind($=>w$(e,f,$,A))).getOrThunk(()=>xV(e,f)),y=A=>{b(A).fold(c,D=>{u(D.context),D.lookupData.then($=>{n.get().map(z=>{const L=D.context;z.trigger===L.trigger&&(n.set({...z,matchLength:L.text.length}),o.get()?(rx(e,{range:L.range}),n2(e,{lookupData:$})):(o.set(!0),rx(e,{range:L.range}),sx(e,{lookupData:$})))})})})},x=(A,D)=>{const $=A.compareBoundaryPoints(window.Range.START_TO_START,D),z=A.compareBoundaryPoints(window.Range.END_TO_END,D);return $>=0&&z<=0},O=()=>n.get().bind(({trigger:A})=>{const D=e.selection.getRng();return PA(e.dom,D,A,o.get()).filter(({range:$})=>x(D,$)).map(({range:$})=>$)});e.addCommand("mceAutocompleterReload",(A,D)=>{const $=kt(D)?D.fetchOptions:{};y($)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{O().each(A=>{rx(e,{range:A})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>O().isSome()),r9(e,{cancelIfNecessary:c,load:y})},kd=yi().browser.isSafari(),W$=e=>Ma(j.fromDom(e)),c9=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},ST=(e,n)=>N.from(e.getParent(n.container(),"details")),Z$=(e,n)=>ST(e,n).isSome(),i9=(e,n)=>{const o=N.from(e.getParent(n.startContainer,"details")),r=N.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>N.from(e.select("summary",u)[0]));return N.some({startSummary:c,startDetails:o,endDetails:r})}else return N.none()},l9=(e,n)=>Nr(n).exists(o=>o.isEqual(e)),j$=(e,n)=>Qa(n).exists(o=>bn(o.getNode())&&Pa(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),O0=(e,n)=>n.startSummary.exists(o=>l9(e,o)),OG=(e,n)=>n.startSummary.exists(o=>j$(e,o)),u9=(e,n)=>n.startDetails.exists(o=>Pa(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),d9=(e,n,o)=>o.startDetails.exists(r=>Br(e,n).forall(c=>!r.contains(c.container()))),Nl=(e,n)=>{const o=n.getNode();tt(o)||e.selection.setCursorLocation(o,n.offset())},G$=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Nr(c):Qa(c)).each(f=>Nl(e,f))}else Nl(e,n)},m9=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(x=>y!==x));return(c||u)&&!(c&&u)||f},QA=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=ie.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),y=ST(r,f),x=b&&r.isEmpty(b),O=q(b==null?void 0:b.previousSibling),A=q(b==null?void 0:b.nextSibling);return x&&(n?A:O)&&ou(!n,u,f).exists(z=>Z$(r,z)&&!Vg(y,ST(r,z)))?!0:ou(n,u,f).fold(xe,D=>{const $=ST(r,D);if(Z$(r,D)&&!Vg(y,$)){if(n||G$(e,D,!1),b&&x){if(n&&O)return!0;if(!n&&A)return!0;G$(e,D,n),e.dom.remove(b)}return!0}else return!1})}else return!1},f9=(e,n,o,r)=>{const u=e.selection.getRng(),f=ie.fromRangeStart(u),b=e.getBody();return r==="selection"?m9(u,n):o?OG(f,n)||d9(b,f,n):O0(f,n)||u9(f,n)},eR=(e,n,o)=>i9(e.dom,e.selection.getRng()).fold(()=>QA(e,n,o),r=>f9(e,r,n,o)||QA(e,n,o)),Od=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=ie.fromRangeStart(u);return z_(c)?(o==="selection"&&c9(u,c)||C2(n,f,c)?W$(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:y,anchorOffset:x,focusNode:O,focusOffset:A}=b??{};const D=()=>{he(y)&&he(x)&&he(O)&&he(A)&&(b==null||b.setBaseAndExtent(y,x,O,A))},$=()=>{y=b==null?void 0:b.anchorNode,x=b==null?void 0:b.anchorOffset,O=b==null?void 0:b.focusNode,A=b==null?void 0:b.focusOffset},z=(V,K)=>{fe(V.childNodes,Q=>{sg(Q)&&K.appendChild(Q)})},L=e.dom.create("span",{"data-mce-bogus":"1"});z(c,L),c.appendChild(L),D(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&c9(r.getRng(),L)?W$(c):(e.execCommand(n?"ForwardDelete":"Delete"),$(),z(L,c),D()),e.dom.remove(L)}),!0):!1},Eg=(e,n,o)=>eR(e,n,o)||kd&&Od(e,n,o)?N.some(ht):N.none(),tR=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:ht,inputType:o},f=ei(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},CC=tR("input"),kp=tR("beforeinput"),xT=yi(),nR=xT.os,oR=nR.isMacOS()||nR.isiOS(),g9=xT.browser.isFirefox(),h9=(e,n,o)=>{const r=o.keyCode===ke.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";Wz([{keyCode:ke.BACKSPACE,action:Mt(hA,e)},{keyCode:ke.BACKSPACE,action:Mt(oC,e,!1)},{keyCode:ke.DELETE,action:Mt(oC,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(HO,e,!1)},{keyCode:ke.DELETE,action:Mt(HO,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(iC,e,n,!1)},{keyCode:ke.DELETE,action:Mt(iC,e,n,!0)},{keyCode:ke.BACKSPACE,action:Mt(op,e,!1)},{keyCode:ke.DELETE,action:Mt(op,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(Eg,e,!1,u)},{keyCode:ke.DELETE,action:Mt(Eg,e,!0,u)},...oR?[{keyCode:ke.BACKSPACE,altKey:!0,action:Mt(Eg,e,!1,f(!0))},{keyCode:ke.DELETE,altKey:!0,action:Mt(Eg,e,!0,f(!0))},{keyCode:ke.BACKSPACE,metaKey:!0,action:Mt(Eg,e,!1,f(!1))}]:[{keyCode:ke.BACKSPACE,ctrlKey:!0,action:Mt(Eg,e,!1,f(!0))},{keyCode:ke.DELETE,ctrlKey:!0,action:Mt(Eg,e,!0,f(!0))}],{keyCode:ke.BACKSPACE,action:Mt(C0,e,!1)},{keyCode:ke.DELETE,action:Mt(C0,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(eT,e,!1)},{keyCode:ke.DELETE,action:Mt(eT,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(LE,e,!1)},{keyCode:ke.DELETE,action:Mt(LE,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(IE,e,!1)},{keyCode:ke.DELETE,action:Mt(IE,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(uA,e,!1)},{keyCode:ke.DELETE,action:Mt(uA,e,!0)},{keyCode:ke.BACKSPACE,action:Mt(y0,e,!1)},{keyCode:ke.DELETE,action:Mt(y0,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),kp(e,r).isDefaultPrevented()||(b(),CC(e,r))})},p9=(e,n,o)=>oT([{keyCode:ke.BACKSPACE,action:Mt(GO,e)},{keyCode:ke.DELETE,action:Mt(GO,e)},...oR?[{keyCode:ke.BACKSPACE,altKey:!0,action:Mt(uC,e)},{keyCode:ke.DELETE,altKey:!0,action:Mt(uC,e)},...o?[{keyCode:g9?224:91,action:Mt(uC,e)}]:[]]:[{keyCode:ke.BACKSPACE,ctrlKey:!0,action:Mt(uC,e)},{keyCode:ke.DELETE,ctrlKey:!0,action:Mt(uC,e)}]],n),b9=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===ke.BACKSPACE,r.isDefaultPrevented()||h9(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||p9(e,r,o),o=!1})},q$=e=>{for(;e;){if(je(e)||_e(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},A0=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=q$(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(us),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Vs(n,n);let f=n,b;for(;b=u.current();){if(_e(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else bn(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),m2(e,c)},wC=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},sR=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),v9=e=>sR(e).fold(Fe(""),n=>n.nodeName.toUpperCase()),y9=e=>sR(e).filter(n=>ma(j.fromDom(n))).isSome(),ET=e=>{e.innerHTML='<br data-mce-bogus="1">'},K$=(e,n,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(y=>{const O={...ua(j.fromDom(n)),...y};r.setStyles(n,O)});const c=N.from(o.class).map(y=>y.split(/\s+/)),u=N.from(n.className).map(y=>Et(y.split(/\s+/),x=>x!==""));ur(c,u,(y,x)=>{const O=Et(x,D=>!$t(y,D)),A=[...y,...O];r.setAttrib(n,"class",A.join(" "))});const f=["style","class"],b=xo(o,(y,x)=>!$t(f,x));r.setAttribs(n,b)},SC=(e,n)=>{if(pr(e).toLowerCase()===n.tagName.toLowerCase()){const r=ed(e);K$(e,n,r)}},Y$=(e,n,o,r,c=!0,u,f)=>{const b=e.dom,y=e.schema,x=pr(e),O=o?o.nodeName.toUpperCase():"";let A=n;const D=y.getTextInlineElements();let $;u||O==="TABLE"||O==="HR"?$=b.create(u||x,f||{}):$=o.cloneNode(!1);let z=$;if(!c)b.setAttrib($,"style",null),b.setAttrib($,"class",null);else do if(D[A.nodeName]){if(ec(A)||tc(A))continue;const L=A.cloneNode(!1);b.setAttrib(L,"id",""),$.hasChildNodes()?(L.appendChild($.firstChild),$.appendChild(L)):(z=L,$.appendChild(L))}while((A=A.parentNode)&&A!==r);return SC(e,$),ET(z),$},RG=(e,n)=>e.dom.getParent(n,qa),rR=(e,n,o)=>{let r=n;for(;r&&r!==e&&q(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return qa(c);r=c}return!1},C9=(e,n,o)=>!n&&o.nodeName.toLowerCase()===pr(e)&&e.dom.isEmpty(o)&&rR(e.getBody(),o,r=>Rt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),w9=(e,n,o)=>{var r,c,u;const f=n(pr(e)),b=RG(e,o);b&&(e.dom.insertAfter(f,b),A0(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},S9=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,X$=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},J$=(e,n)=>{const o=e==null?void 0:e.parentNode;return he(o)&&o.nodeName===n},aR=e=>he(e)&&/^(OL|UL|LI)$/.test(e.nodeName),cR=e=>he(e)&&/^(LI|DT|DD)$/.test(e.nodeName),x9=e=>aR(e)&&aR(e.parentNode),iR=e=>{const n=e.parentNode;return cR(n)?n:e},ar=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!je(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},Q$=e=>Wo(_u(ua(j.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),E9=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;x9(o)&&(c="LI");const y=cR(r)?Q$(r):void 0;let x=cR(r)&&y?n(c,{style:Q$(r)}):n(c);if(ar(o,r,!0)&&ar(o,r,!1))if(J$(o,"LI")){const O=iR(o);u.insertAfter(x,O),X$(o)?u.remove(O):u.remove(o)}else u.replace(x,o);else if(ar(o,r,!0))J$(o,"LI")?(u.insertAfter(x,iR(o)),x.appendChild(u.doc.createTextNode(" ")),x.appendChild(o)):b.insertBefore(x,o),u.remove(r);else if(ar(o,r,!1))u.insertAfter(x,iR(o)),u.remove(r);else{o=iR(o);const O=f.cloneRange();O.setStartAfter(r),O.setEndAfter(o);const A=O.extractContents();if(c==="LI"&&S9(A,"LI")){const D=Et(Ht(x.children,j.fromDom),po(cf("br")));x=A.firstChild,u.insertAfter(A,o),fe(D,$=>c1(j.fromDom(x),$)),y&&x.setAttribute("style",y)}else u.insertAfter(A,o),u.insertAfter(x,o);u.remove(r)}A0(e,x)},T9=e=>{fe(f1(j.fromDom(e),yo),n=>{const o=n.dom;o.nodeValue=Ba(o.data)})},_9=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},k9=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),lR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,uR=(e,n)=>he(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",TT=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;je(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||k9(e,u))&&e.remove(u)},dR=(e,n,o)=>_e(n)?e?o===1&&n.data.charAt(o-1)===qo?0:o:o===n.data.length-1&&n.data.charAt(o)===qo?n.data.length:o:o,O9=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,dR(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,dR(!1,e.endContainer,e.endOffset)),n},mR=e=>{let n=e;do _e(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},fR=(e,n,o,r,c)=>{var u,f;const b=e.dom,y=(u=wC(b,r))!==null&&u!==void 0?u:b.getRoot();let x=b.getParent(r,b.isBlock);if(!x||!uR(b,x)){if(x=x||y,!x.hasChildNodes()){const $=b.create(n);return SC(e,$),x.appendChild($),o.setStart($,0),o.setEnd($,0),$}let O=r;for(;O&&O.parentNode!==x;)O=O.parentNode;let A;for(;O&&!b.isBlock(O);)A=O,O=O.previousSibling;const D=(f=A==null?void 0:A.parentElement)===null||f===void 0?void 0:f.nodeName;if(A&&D&&e.schema.isValidChild(D,n.toLowerCase())){const $=A.parentNode,z=b.create(n);for(SC(e,z),$.insertBefore(z,A),O=A;O&&!b.isBlock(O);){const L=O.nextSibling;z.appendChild(O),O=L}o.setStart(r,c),o.setEnd(r,c)}}return r},A9=(e,n)=>{n.normalize();const o=n.lastChild;(!o||je(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},DG=(e,n)=>{const o=ms(e);return Dt(n)?!1:Z(o)?$t(Me.explode(o),n.nodeName.toLowerCase()):o},e6={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),O=e.selection.getRng(),A=pr(e),D=j.fromDom(O.startContainer),$=Mu(D,O.startOffset),z=$.exists(Ce=>Vc(Ce)&&!er(Ce)),L=O.collapsed&&z,V=(Ce,nt)=>Y$(e,o,De,we,kk(e),Ce,nt),K=Ce=>{const nt=dR(Ce,o,r);if(_e(o)&&(Ce?nt>0:nt<o.data.length))return!1;if((o.parentNode===De||o===De)&&f&&!Ce||Ce&&je(o)&&o===De.firstChild)return!0;if(lR(o,"TABLE")||lR(o,"HR"))return f&&!Ce||!f&&Ce;const lt=new Vs(o,De);_e(o)&&(Ce&&nt===0?lt.prev():!Ce&&nt===o.data.length&&lt.next());let qt;for(;qt=lt.current();){if(je(qt)){if(!qt.getAttribute("data-mce-bogus")){const jt=qt.nodeName.toLowerCase();if(x[jt]&&jt!=="br")return!1}}else if(_e(qt)&&!Gc(qt.data))return!1;Ce?lt.prev():lt.next()}return!0},Q=()=>{let Ce;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Ge!=="HGROUP"?Ce=V(A):Ce=V(),DG(e,u)&&uR(b,u)&&b.isEmpty(De,void 0,{includeZwsp:!0})?Ce=b.split(u,De):b.insertAfter(Ce,De),A0(e,Ce),Ce};Le(b,O).each(Ce=>{O.setStart(Ce.startContainer,Ce.startOffset),O.setEnd(Ce.endContainer,Ce.endOffset)}),o=O.startContainer,r=O.startOffset;const X=!!(n&&n.shiftKey),re=!!(n&&n.ctrlKey);je(o)&&o.hasChildNodes()&&!L&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&_e(o)?r=o.data.length:r=0);const we=wC(b,o);if(!we||_9(e,o))return;X||(o=fR(e,A,O,o,r));let De=b.getParent(o,b.isBlock)||b.getRoot();u=he(De==null?void 0:De.parentNode)?b.getParent(De.parentNode,b.isBlock):null,c=De?De.nodeName.toUpperCase():"";const Ge=u?u.nodeName.toUpperCase():"";if(Ge==="LI"&&!re){const Ce=u;De=Ce,u=Ce.parentNode,c=Ge}if(je(u)&&C9(e,X,De))return w9(e,V,De);if(/^(LI|DT|DD)$/.test(c)&&je(u)&&b.isEmpty(De)){E9(e,V,u,De,A);return}if(!L&&(De===e.getBody()||!uR(b,De)))return;const ge=De.parentNode;let ue;if(L)ue=V(A),$.fold(()=>{Io(D,j.fromDom(ue))},Ce=>{da(Ce,j.fromDom(ue))}),e.selection.setCursorLocation(ue,0);else if(dm(De))ue=rn(De),b.isEmpty(De)&&ET(De),SC(e,ue),A0(e,ue);else if(K(!1))ue=Q();else if(K(!0)&&ge){const Ce=ie.fromRangeStart(O),nt=j4(Ce),lt=j.fromDom(De),jt=q4(lt,Ce,e.schema)?FM(lt,Ce,e.schema).bind(Nn=>N.from(Nn.getNode())):N.none();ue=ge.insertBefore(V(),De);const wn=lR(De,"HR")||nt?ue:jt.getOr(De);A0(e,wn)}else{const Ce=O9(O).cloneRange();Ce.setEndAfter(De);const nt=Ce.extractContents();T9(nt),mR(nt),ue=nt.firstChild,b.insertAfter(nt,De),TT(b,x,ue),A9(b,De),b.isEmpty(De)&&ET(De),ue.normalize(),b.isEmpty(ue)?(b.remove(ue),Q()):(SC(e,ue),A0(e,ue))}b.setAttrib(ue,"id",""),e.dispatch("NewBlock",{newBlock:ue})},fakeEventName:"insertParagraph"},R9=(e,n,o)=>{const r=new Vs(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||_e(c)&&c.length>0)return!0;return!1},D9=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),m2(e,r)},M9=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Le(r,c).each($=>{c.setStart($.startContainer,$.startOffset),c.setEnd($.endContainer,$.endOffset)});let b=c.startOffset,y=c.startContainer;if(je(y)&&y.hasChildNodes()){const $=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,$&&_e(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const O=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,A=O?O.nodeName.toUpperCase():"",D=!!(n&&n.ctrlKey);A==="LI"&&!D&&(x=O),_e(y)&&b>=y.data.length&&(R9(e.schema,y,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),wh(r,c,u),D9(e,u,f),e.undoManager.add()},yu=(e,n)=>{const o=j.fromTag("br");da(j.fromDom(n),o),e.undoManager.add()},B9=(e,n)=>{N9(e.getBody(),n)||bc(j.fromDom(n),j.fromTag("br"));const o=j.fromTag("br");bc(j.fromDom(n),o),D9(e,o.dom,!1),e.undoManager.add()},t6=e=>bn(e.getNode()),N9=(e,n)=>t6(ie.after(n))?!0:Br(e,ie.after(n)).map(o=>bn(o.getNode())).getOr(!1),n6=e=>e&&e.nodeName==="A"&&"href"in e,P9=e=>e.fold(xe,n6,n6,xe),$9=e=>{const n=Ee(dg,e),o=ie.fromRangeStart(e.selection.getRng());return Td(n,e.getBody(),o).filter(P9)},I9=(e,n)=>{n.fold(ht,Ee(yu,e),Ee(B9,e),ht)},_T={insert:(e,n)=>{const o=$9(e);o.isSome()?o.each(Ee(I9,e)):M9(e,n)},fakeEventName:"insertLineBreak"},gR=(e,n)=>sR(e).filter(o=>n.length>0&&ja(j.fromDom(o),n)).isSome(),kT=e=>gR(e,td(e)),F9=e=>gR(e,_k(e)),li=xn.generate([{br:[]},{block:[]},{none:[]}]),L9=(e,n)=>F9(e),o6=e=>(n,o)=>y9(n)===e,s6=(e,n)=>(o,r)=>v9(o)===e.toUpperCase()===n,r6=e=>{const n=wC(e.dom,e.selection.getStart());return Dt(n)},xC=e=>s6("pre",e),a6=()=>s6("summary",!0),EC=e=>(n,o)=>lS(n)===e,H9=(e,n)=>kT(e),OT=(e,n)=>n,hR=e=>{const n=pr(e),o=wC(e.dom,e.selection.getStart());return he(o)&&e.schema.isValidChild(o.nodeName,n)},z9=e=>{const n=e.selection.getRng(),o=j.fromDom(n.startContainer),c=Mu(o,n.startOffset).map(u=>Vc(u)&&!er(u));return n.collapsed&&c.getOr(!0)},Xi=(e,n)=>(o,r)=>Wo(e,(u,f)=>u&&f(o,r),!0)?N.some(n):N.none(),AT=(e,n)=>QO([Xi([L9],li.none()),Xi([xC(!0),r6],li.none()),Xi([a6()],li.br()),Xi([xC(!0),EC(!1),OT],li.br()),Xi([xC(!0),EC(!1)],li.block()),Xi([xC(!0),EC(!0),OT],li.block()),Xi([xC(!0),EC(!0)],li.br()),Xi([o6(!0),OT],li.br()),Xi([o6(!0)],li.block()),Xi([H9],li.br()),Xi([OT],li.br()),Xi([hR],li.block()),Xi([z9],li.block())],[e,!!(n&&n.shiftKey)]).getOr(li.none()),RT=(e,n,o)=>{n.selection.isCollapsed()||B8(n),!(he(o)&&kp(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),he(o)&&CC(n,e.fakeEventName))},DT=(e,n)=>{const o=()=>RT(_T,e,n),r=()=>RT(e6,e,n),c=AT(e,n);switch(Y1(e)){case"linebreak":c.fold(o,o,ht);break;case"block":c.fold(r,r,ht);break;case"invert":c.fold(r,o,ht);break;default:c.fold(o,r,ht);break}},MT=yi(),c6=MT.os.isiOS()&&MT.browser.isSafari(),i6=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),sL(e.undoManager),e.undoManager.transact(()=>{DT(e,n)}))},NG=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(_e(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},Tg=e=>{let n=N.none();const o=c=>{n=N.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(ht,f=>c.selection.moveToBookmark(f)),i6(c,u),n=N.none()};e.on("keydown",c=>{c.keyCode===ke.ENTER&&(c6&&NG(e.selection.getRng())?o(e):i6(e,c))}),e.on("keyup",c=>{c.keyCode===ke.ENTER&&n.each(()=>r(e,c))})},V9=(e,n,o)=>{const r=Ue.os.isMacOS()||Ue.os.isiOS();oT([{keyCode:ke.END,action:Mt(T0,e,!0)},{keyCode:ke.HOME,action:Mt(T0,e,!1)},...r?[]:[{keyCode:ke.HOME,action:Mt(Dl,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ke.END,action:Mt(Dl,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ke.END,action:Mt(jz,e,!0)},{keyCode:ke.HOME,action:Mt(jz,e,!1)},{keyCode:ke.END,action:Mt(KE,e,!0,n)},{keyCode:ke.HOME,action:Mt(KE,e,!1,n)}],o).each(c=>{o.preventDefault()})},U9=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||V9(e,n,o)})},W9=e=>{e.on("input",n=>{n.isComposing||KM(e)})},BT=yi(),l6=(e,n,o)=>{oT([{keyCode:ke.PAGE_UP,action:Mt(KE,e,!1,n)},{keyCode:ke.PAGE_DOWN,action:Mt(KE,e,!0,n)}],o)},pR=e=>e.stopImmediatePropagation(),u6=e=>e.keyCode===ke.PAGE_UP||e.keyCode===ke.PAGE_DOWN,bR=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",pR,!0):!o&&e.get()&&n.off("NodeChange",pR),e.set(o)},Z9=(e,n)=>{if(BT.os.isMacOS())return;const o=te(!1);e.on("keydown",r=>{u6(r)&&bR(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||l6(e,n,r),u6(r)&&o.get()&&(bR(o,e,!1),e.nodeChanged())})},j9=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||oo(n.getTargetRanges(),o=>!gM(e.dom,o)))&&n.preventDefault()})},d6=(e,n)=>{const o=n.container(),r=n.offset();return _e(o)?(o.insertData(r,e),N.some(ie(o,r+e.length))):vb(n).map(c=>{const u=j.fromText(e);return n.isAtEnd()?bc(c,u):da(c,u),ie(u.dom,e.length)})},NT=Ee(d6,us),PT=Ee(d6," "),G9=(e,n,o)=>WM(e,n,o)?NT(n):PT(n),vR=e=>n=>n.fold(o=>Pa(e.dom,ie.before(o)),o=>Nr(o),o=>Qa(o),o=>Br(e.dom,ie.after(o))),m6=(e,n,o)=>r=>WM(e,r,o)?NT(n):PT(n),TC=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},f6=(e,n)=>e.isEditable(e.getParent(n,"summary")),g6=e=>{const n=ie.fromRangeStart(e.selection.getRng()),o=j.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ee(dg,e),c=ie.fromRangeStart(e.selection.getRng());return Td(r,e.getBody(),c).bind(vR(o)).map(u=>()=>m6(o,n,e.schema)(u).each(TC(e)))}else return N.none()},q9=e=>{const n=()=>{const o=j.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=ie.fromRangeStart(e.selection.getRng());G9(o,r,e.schema).each(TC(e))};return gn(Ue.browser.isFirefox()&&e.selection.isEditable()&&f6(e.dom,e.selection.getRng().startContainer),n)},K9=(e,n)=>{Wz([{keyCode:ke.SPACEBAR,action:Mt(g6,e)},{keyCode:ke.SPACEBAR,action:Mt(q9,e)}],n).each(o=>{n.preventDefault(),kp(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),CC(e,"insertText",{data:" "}))})},$T=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||K9(e,n)})},h6=e=>Lk(e)?[{keyCode:ke.TAB,action:Mt(DA,e,!0)},{keyCode:ke.TAB,shiftKey:!0,action:Mt(DA,e,!1)}]:[],Y9=(e,n)=>{oT([...h6(e)],n).each(o=>{n.preventDefault()})},X9=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Y9(e,n)})},p6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),a9(e),wd(e))return te(null);{const n=uz(e);return j9(e),vA(e),gV(e,n),b9(e,n),Tg(e),$T(e),W9(e),X9(e),U9(e,n),Z9(e,n),n}};class J9{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{f2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Gy(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Gy(n)&&(n.selection.getNode().nodeName==="IMG"?si.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!tb(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=No(r.dom.getParents(n,Qe,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const b6=Df("image"),Q9=e=>{const n=e;return N.from(n[b6])},eU=(e,n)=>{const o=e;o[b6]=n},yR=Df("event"),v6=e=>{const n=e;return N.from(n[yR])},IT=e=>n=>{const o=n;o[yR]=e},y6=(e,n)=>IT(n)(e),C6=IT(0),tU=IT(2),nU=IT(1),oU=(e=>n=>{const o=n;return N.from(o[yR]).exists(r=>r===e)})(0),R0=()=>Object.freeze({length:0,item:e=>null}),CR=Df("mode"),sU=e=>{const n=e;return N.from(n[CR])},_C=e=>n=>{const o=n;o[CR]=e},w6=(e,n)=>_C(n)(e),S6=_C(0),wR=_C(2),x6=_C(1),E6=e=>n=>{const o=n;return N.from(o[CR]).exists(r=>r===e)},D0=E6(0),rU=E6(1),FT=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(D0(e))if(Z(o)){if(!tt(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{D0(e)&&n.remove(o)},clear:()=>{D0(e)&&n.clear()}}),aU=["none","copy","link","move"],cU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],SR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){$t(aU,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){oU(r)&&$t(cU,c)&&(o=c)},get items(){return FT(r,e.items)},get files(){return rU(r)?R0():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{D0(r)&&(eU(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>rU(r)?"":e.getData(c),setData:(c,u)=>{D0(r)&&e.setData(c,u)},clearData:c=>{D0(r)&&e.clearData(c)}};return S6(r),r},iU=e=>{const n=SR(),o=sU(e);return wR(e),C6(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,Q9(e).each(r=>n.setDragImage(r.image,r.x,r.y)),fe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),fe(e.files,r=>n.items.add(r)),v6(e).each(r=>{y6(n,r)}),o.each(r=>{w6(e,r),w6(n,r)}),n},lU=e=>{const n=e.getData("text/html");return n===""?N.none():N.some(n)},T6=(e,n)=>e.setData("text/html",n),_6="x-tinymce/html",LT=Fe(_6),xR="<!-- "+_6+" -->",uU=e=>xR+e,dU=e=>e.replace(xR,""),k6=e=>e.indexOf(xR)!==-1,mU=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Xn=(e,n)=>{let o="<"+e;const r=_u(n,(c,u)=>u+'="'+Di.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},fU=(e,n,o)=>{const r=e.split(/\n\n/),c=Xn(n,o),u="</"+n+">",f=Ht(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:Ht(f,b).join("")},ER="%MCEPASTEBIN%",gU=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ER);Ue.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},TR=(e,n)=>{const o=e.dom;if(HT(e)){let r;const c=n.get();for(;r=HT(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},HT=e=>e.dom.get("mcepastebin"),hU=e=>he(e)&&e.id==="mcepastebin",pU=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Et(e.getBody().childNodes,hU);fe(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},_R=e=>e===ER,kR=e=>{const n=te(null);return{create:()=>gU(e,n),remove:()=>TR(e,n),getEl:()=>HT(e),getHtml:()=>pU(e),getLastRng:n.get}},O6=(e,n)=>(Me.each(n,o=>{mt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),bU=e=>{const n=dl(),o=yd({},n);let r="";const c=n.getVoidElements(),u=Me.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,O=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let A=y.firstChild;if(A)do b(A);while(A=A.next)}f[x]&&O.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=O6(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},A6=e=>(e=O6(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":us],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),R6=e=>{let n=0;return()=>e+n++},vU=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Me.hasOwn(o,n)?"image/"+o[n]:"image/"+n},yU=(e,n)=>{const o=yd({sanitize:ib(e),sandbox_iframes:lb(e),sandbox_iframes_exclusions:ub(e),convert_unsafe_embeds:zk(e)},e.schema);o.addNodeFilter("meta",c=>{Me.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Nm({validate:!0},e.schema).serialize(r)},Op=(e,n)=>({content:e,cancelled:n}),CU=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=p4(e,r,o);return Op(c.node.innerHTML,c.isDefaultPrevented())},M0=(e,n,o)=>{const r=h4(e,n,o),c=yU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?CU(e,c,o):Op(c,r.isDefaultPrevented())},kC=(e,n,o)=>M0(e,n,o),OR=(e,n)=>(e.insertContent(n,{merge:ES(e),paste:!0}),!0),AR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),B0=(e,n)=>AR(n)&&oo(Rh(e),o=>zl(n.toLowerCase(),`.${o.toLowerCase()}`)),wU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),RR=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),SU=(e,n,o)=>!e.selection.isCollapsed()&&AR(n)?RR(e,n,o):!1,D6=(e,n,o)=>B0(e,n)?wU(e,n,o):!1,M6=(e,n)=>{Me.each([SU,D6,OR],o=>!o(e,n,OR))},DR=(e,n,o)=>{o||!TS(e)?OR(e,n):M6(e,n)},B6=R6("mceclip"),xU=e=>{const n=SR();return T6(n,e),wR(n),n},N6=(e,n,o,r,c)=>{const u=kC(e,n,o);if(!u.cancelled){const f=u.content,b=()=>DR(e,f,r);c?kp(e,"insertFromPaste",{dataTransfer:xU(f)}).isDefaultPrevented()||(b(),CC(e,"insertFromPaste")):b()}},OC=(e,n,o,r)=>{const c=o||k6(n);N6(e,dU(n),c,!1,r)},MR=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=qc(r,sb(e)),u=fU(c,pr(e),ed(e));N6(e,u,!1,!0,o)},BR=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Ad=(e,n)=>n in e&&e[n].length>0,NR=e=>Ad(e,"text/html")||Ad(e,"text/plain"),EU=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return he(o)?e.dom.encode(o[1]):void 0},TU=(e,n,o,r)=>{const c=B6(),u=fs(e)&&he(o.name),f=u?EU(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},_U=(e,n)=>{q3(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y??TU(e,b,f,u);OC(e,`<img src="${x.blobUri()}">`,!1,!0)})},P6=e=>e.type==="paste",PR=e=>Promise.all(Ht(e,n=>rB(n).then(o=>({file:n,uri:o})))),kU=e=>{const n=Rh(e);return o=>ls(o.type,"image/")&&oo(n,r=>vU(r)===o.type)},$6=(e,n)=>{const o=n.items?dc(Ca(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Ca(n.files):[];return Et(o.length>0?o:r,kU(e))},$R=(e,n,o)=>{const r=P6(n)?n.clipboardData:n.dataTransfer;if(Ah(e)&&r){const c=$6(e,r);if(c.length>0)return n.preventDefault(),PR(c).then(u=>{o&&e.selection.setRng(o),fe(u,f=>{_U(e,f)})}),!0}return!1},OU=e=>{var n,o;return Ue.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},I6=e=>ke.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,IR=(e,n,o,r,c)=>{let u=A6(o);const f=Ad(n,LT())||k6(o),b=!f&&mU(u),y=AR(u);(_R(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(Ad(n,"text/plain")&&b?u=n["text/plain"]:u=bU(u)),!_R(u)&&(r?MR(e,u,c):OC(e,u,f,c))},AU=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{I6(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||OU(u))return;const f=o.get()==="text"||r;r=!1;const b=BR(u.clipboardData);!NR(b)&&$R(e,u,c())||(Ad(b,"text/html")?(u.preventDefault(),IR(e,b,b["text/html"],f,!0)):Ad(b,"text/plain")&&Ad(b,"text/uri-list")?(u.preventDefault(),IR(e,b,b["text/plain"],f,!0)):(n.create(),si.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),IR(e,b,y,f,!1)},0)))})},RU=e=>{const n=c=>ls(c,"webkit-fake-url"),o=c=>ls(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!Ah(e)&&r(f))for(const b of c){const y=b.attr("src");Z(y)&&!b.attr("data-mce-object")&&y!==Ue.transparentSrc&&(n(y)||!Wf(e)&&o(y))&&b.remove()}})},DU=(e,n,o)=>{AU(e,n,o),RU(e)},MU=(e,n)=>{n.get()==="text"?(n.set("html"),Hb(e,!1)):(n.set("text"),Hb(e,!0)),e.focus()},zT=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{MU(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&OC(e,r.html,r.internal,!1),r.text&&MR(e,r.text,!1)})},BU=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(LT(),n),!0}catch{return!1}else return!1},FR=(e,n,o,r)=>{BU(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},F6=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),si.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},L6=e=>({html:uU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),H6=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),LR=e=>!e.selection.isCollapsed()||H6(e),NU=e=>n=>{!n.isDefaultPrevented()&&LR(e)&&e.selection.isEditable()&&FR(n,L6(e),F6(e),()=>{if(Ue.browser.isChromium()||Ue.browser.isFirefox()){const o=e.selection.getRng();si.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},PU=e=>n=>{!n.isDefaultPrevented()&&LR(e)&&FR(n,L6(e),F6(e),ht)},$U=e=>{e.on("cut",NU(e)),e.on("copy",PU(e))},z6=(e,n)=>{var o,r;return Se.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},IU=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},HR=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},FU=e=>oo(e.files,n=>/^image\//.test(n.type)),LU=(e,n,o,r)=>{const c=e.getParent(o,f=>Fu(n,f));if(!q(e.getParent(o,"summary")))return!0;if(c&&Rt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!q(f.querySelector(c.nodeName.toLowerCase()))}else return!1},HU=e=>{e.on("input",n=>{const o=r=>q(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Et(e.dom.select("details"),o);fe(r,c=>{bn(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(lm().dom),c.prepend(u)})}})},zU=(e,n)=>{Sy(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Ah(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&FU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=z6(e,o);if(Dt(r))return;const c=BR(o.dataTransfer),u=Ad(c,LT());if((!NR(c)||IU(c))&&$R(e,o,r))return;const f=c[LT()],b=f||c["text/html"]||c["text/plain"],y=LU(e.dom,e.schema,r.startContainer,c),x=n.get();x&&!y||b&&(o.preventDefault(),si.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||x&&y)&&e.execCommand("Delete"),HR(e,r);const O=A6(b);c["text/html"]?OC(e,O,u,!0):MR(e,O,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Ah(e)&&!n.get()&&(o.preventDefault(),HR(e,z6(e,o))),o.type==="dragend"&&n.set(!1)}),HU(e)},VU=e=>{const n=c=>u=>{c(e,u)},o=xy(e);Y(o)&&e.on("PastePreProcess",n(o));const r=wS(e);Y(r)&&e.on("PastePostProcess",n(r))},UU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},WU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,V6=e=>Me.trim(e).replace(WU,Bi).toLowerCase(),U6=(e,n,o)=>{const r=xS(e);if(o||r==="all"||!Pk(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,O)=>{const A=u.parseStyle(u.decode(x)),D={};for(let z=0;z<c.length;z++){const L=A[c[z]];let V=L,K=u.getStyle(f,c[z],!0);/color/.test(c[z])&&(V=V6(V),K=V6(K)),K!==V&&(D[c[z]]=L)}const $=u.serializeStyle(D,"span");return $?y+' style="'+$+'"'+O:y+O})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},W6=e=>{(Ue.browser.isChromium()||Ue.browser.isSafari())&&UU(e,U6)},ZU=e=>{const n=te(!1),o=te(_S(e)?"text":"html"),r=kR(e);W6(e),zT(e,o),VU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{$U(e),zU(e,n),DU(e,r,o)})},jU=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},GU=e=>{e.parser.addNodeFilter("details",n=>{const o=Hk(e);fe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=OS(e);fe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},qU=e=>{jU(e),GU(e)},KU=bn,Z6=_e,YU=e=>vn(e.dom),VT=e=>be(e.dom),zR=e=>n=>Dn(j.fromDom(e),n),XU=(e,n,o)=>jo(j.fromDom(e),r=>VT(r)||o.isBlock(pn(r)),zR(n)).getOr(j.fromDom(n)).dom,VR=(e,n)=>jo(j.fromDom(e),YU,zR(n)),UR=(e,n,o)=>{const r=new Vs(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!KU(f);f=c())Fi(f)&&(u=f);return u},WR=(e,n,o)=>{const c=ie.fromRangeStart(e).getNode(),u=XU(c,n,o),f=UR(c,u,!1),b=UR(c,u,!0),y=document.createRange();return VR(f,u).fold(()=>{Z6(f)?y.setStart(f,0):y.setStartBefore(f)},x=>y.setStartBefore(x.dom)),VR(b,u).fold(()=>{Z6(b)?y.setEnd(b,b.data.length):y.setEndAfter(b)},x=>y.setEndAfter(x.dom)),y},JU=e=>{const n=WR(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Yn(n))},j6=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),JU(e))})};var N0;(function(e){e.Before="before",e.After="after"})(N0||(N0={}));const G6=(e,n)=>Math.abs(e.left-n),QU=(e,n)=>Math.abs(e.right-n),q6=(e,n)=>e>=n.top&&e<=n.bottom,eW=(e,n)=>e.top<n.bottom&&e.bottom>n.top,tW=(e,n)=>{const o=ck(e,n)/Math.min(e.height,n.height);return eW(e,n)&&o>.5},nW=(e,n)=>{const o=Et(e,r=>q6(n,r));return Co(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Er(e,f=>tW(f,r));return[c,u]})},AC=(e,n)=>({node:e.node,position:G6(e,n)<QU(e,n)?N0.Before:N0.After}),oW=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),ZR=(e,n,o,r)=>{const c=A=>Fi(A.node)?N.some(A):je(A.node)?ZR(Ca(A.node.childNodes),n,o,!1):N.none(),u=(A,D,$)=>c(D).filter(z=>Math.abs($(A,n,o)-$(z,n,o))<2&&_e(z.node)),f=(A,D)=>{const $=Po(A,(z,L)=>D(z,n,o)-D(L,n,o));return Nd($,c).map(z=>r&&!_e(z.node)&&$.length>1?u(z,$[1],D).getOr(z):z)},[b,y]=nW(sA(e),o),{pass:x,fail:O}=Er(y,A=>A.top<o);return f(b,oW).orThunk(()=>f(O,Uv)).orThunk(()=>f(x,Uv))},K6=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>je(x)&&x.classList.contains("mce-drag-container"),y=Et(u.dom.childNodes,po(b));return f.fold(()=>ZR(y,o,r,!0),x=>{const O=Et(y,A=>A!==x.dom);return ZR(O,o,r,!0)}).orThunk(()=>(Dn(u,e)?N.none():qg(u)).bind(O=>c(O,N.some(u))))};return c(n,N.none())},sW=(e,n,o)=>{const r=j.fromDom(e),c=zr(r),f=j.fromPoint(c,n,o).filter(b=>Si(r,b)).getOr(r);return K6(r,f,n,o)},Y6=(e,n,o)=>sW(e,n,o).filter(r=>eu(r.node)).map(r=>AC(r,n)),X6=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},rW=e=>e.inline?X6(e.getBody()):{left:0,top:0},aW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},UT=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},J6=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=X6(e.getContentAreaContainer()),r=UT(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},Q6=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),cW=(e,n)=>Q6(rW(e),aW(e),J6(e,n)),eI=e=>({target:e,srcElement:e}),iW=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...eI(o)}),$G=(e,n,o)=>{const r=va("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:ht,stopImmediatePropagation:ht,stopPropagation:ht,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...eI(n)}},lW=(e,n)=>{const o=iU(e);return n==="dragstart"?(C6(o),S6(o)):n==="drop"?(tU(o),wR(o)):(nU(o),x6(o)),o},tI=(e,n,o,r)=>{const c=lW(o,e);return tt(r)?$G(e,n,c):iW(e,r,n,c)},P0=32,WT=100,ZT=8,jT=16,jR=vn,uW=Wv(jR,be),GR=(e,n,o)=>jR(o)&&o!==n&&e.isEditable(o.parentElement),nI=(e,n,o)=>Dt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),dW=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},mW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},RC=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},oI=RC("left",-P0),fW=RC("left",P0),sI=RC("top",-P0),rI=RC("top",P0),gW=(e,n,o,r,c,u,f,b,y,x,O,A)=>{let D=0,$=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(D=n.pageX+o-c),n.pageY+r>u&&($=n.pageY+r-u),e.style.width=o-D+"px",e.style.height=r-$+"px";const z=y.clientHeight,L=y.clientWidth,V=f+y.getBoundingClientRect().top,K=b+y.getBoundingClientRect().left;O.on(Q=>{Q.intervalId.clear(),Q.dragging&&A&&(f+ZT>=z?Q.intervalId.set(rI(x)):f-ZT<=0?Q.intervalId.set(sI(x)):b+ZT>=L?Q.intervalId.set(fW(x)):b-ZT<=0?Q.intervalId.set(oI(x)):V+jT>=window.innerHeight?Q.intervalId.set(rI(window)):V-jT<=0?Q.intervalId.set(sI(window)):K+jT>=window.innerWidth?Q.intervalId.set(fW(window)):K-jT<=0&&Q.intervalId.set(oI(window)))})},qR=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},hW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);qR(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Ma(j.fromDom(o))},aI=e=>e.button===0,pW=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),bW=(e,n)=>o=>{if(aI(o)){const r=ns(n.dom.getParents(o.target),uW).getOr(null);if(he(r)&&GR(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:SR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:dW(n,r,r.offsetWidth,r.offsetHeight),intervalId:wf(WT)})}}},vW=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),Y6(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===N0.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},DC=(e,n,o,r,c)=>{n==="dragstart"&&T6(r,e.dom.getOuterHTML(o));const u=tI(n,o,r,c);return e.dispatch(n,u)},yW=(e,n)=>{const o=mh((c,u)=>vW(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=DC(n,"dragstart",u.element,u.dataTransfer,c);if(he(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=pW(u,cW(n,c));mW(u.ghost,n.getBody()),gW(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},cI=e=>{const n=e.getSel();if(he(n)){const r=n.getRangeAt(0).startContainer;return _e(r)?r.parentNode:r}else return null},IG=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(nI(n,cI(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();DC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{hW(n.dom,r.element),lU(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}DC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),uI(e)},iI=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>DC(n,"dragend",r.element,r.dataTransfer),c=>DC(n,"dragend",r.element,r.dataTransfer,c))}),uI(e)},lI=(e,n)=>o=>iI(e,n,N.some(o)),uI=e=>{e.on(n=>{n.intervalId.clear(),qR(n.ghost)}),e.clear()},KR=e=>{const n=Ar(),o=Qn.DOM,r=document,c=bW(n,e),u=yW(n,e),f=IG(n,e),b=lI(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===ke.ESC&&iI(n,e,N.none())})},CW=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&($t(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&ME(e,"Dropped file type is not supported"))}},o=c=>{yx(e,c.target)&&n(c)},r=()=>{const c=Qn.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];fe(y,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{fe(y,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{si.setEditorTimeout(e,r,0)})},wW=e=>{KR(e),yS(e)&&CW(e)},SW=e=>{const n=mh(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=zE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},dI=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Or(o)){const r=Im(e.getBody(),o),c=vn(r)?r:o;e.selection.getNode()!==c&&v0(e,c).each(u=>e.selection.setRng(u))}})})},_g=vn,YR=(e,n)=>Im(e.getBody(),n),mI=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=DS(e,r,o.isBlock,()=>Yh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=Ge=>he(Ge)&&o.hasClass(Ge,"mce-offscreen-selection"),x=Ge=>Ge!==r&&(_g(Ge)||Or(Ge))&&o.isChildOf(Ge,r)&&o.isEditable(Ge.parentNode),O=Ge=>{Ge&&n.setRng(Ge)},A=(Ge,ge,ue,Ce=!0)=>e.dispatch("ShowCaret",{target:ge,direction:Ge,before:ue}).isDefaultPrevented()?null:(Ce&&n.scrollIntoView(ge,Ge===-1),c.show(ue,ge)),D=Ge=>{Ge.hasAttribute("data-mce-caret")&&(rn(Ge),n.scrollIntoView(Ge))},$=()=>{e.on("click",ge=>{o.isEditable(ge.target)||(ge.preventDefault(),e.focus())}),e.on("blur NewBlock",re),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",ge=>{const ue=ge.target,Ce=YR(e,ue);_g(Ce)?(ge.preventDefault(),v0(e,Ce).each(X)):x(ue)&&v0(e,ue).each(X)},!0),e.on("mousedown",ge=>{const ue=ge.target;if(ue!==r&&ue.nodeName!=="HTML"&&!o.isChildOf(ue,r)||!tH(e,ge.clientX,ge.clientY))return;re(),De();const Ce=YR(e,ue);_g(Ce)?(ge.preventDefault(),v0(e,Ce).each(X)):Y6(r,ge.clientX,ge.clientY).each(nt=>{ge.preventDefault();const lt=A(1,nt.node,nt.position===N0.Before,!1);O(lt),vc(Ce)?Ce.focus():e.getBody().focus()})}),e.on("keypress",ge=>{ke.modifierPressed(ge)||_g(n.getNode())&&ge.preventDefault()}),e.on("GetSelectionRange",ge=>{let ue=ge.range;if(b){if(!b.parentNode){b=null;return}ue=ue.cloneRange(),ue.selectNode(b),ge.range=ue}}),e.on("SetSelectionRange",ge=>{ge.range=V(ge.range);const ue=X(ge.range,ge.forward);ue&&(ge.range=ue)});const Ge=ge=>je(ge)&&ge.id==="mcepastebin";e.on("AfterSetSelectionRange",ge=>{const ue=ge.range,Ce=ue.startContainer.parentElement;!L(ue)&&!Ge(Ce)&&De(),y(Ce)||re()}),wW(e),SW(e),dI(e)},z=Ge=>Na(Ge)||fm(Ge)||hl(Ge),L=Ge=>z(Ge.startContainer)||z(Ge.endContainer),V=Ge=>{const ge=e.schema.getVoidElements(),ue=o.createRng(),Ce=Ge.startContainer,nt=Ge.startOffset,lt=Ge.endContainer,qt=Ge.endOffset;return Rt(ge,Ce.nodeName.toLowerCase())?nt===0?ue.setStartBefore(Ce):ue.setStartAfter(Ce):ue.setStart(Ce,nt),Rt(ge,lt.nodeName.toLowerCase())?qt===0?ue.setEndBefore(lt):ue.setEndAfter(lt):ue.setEnd(lt,qt),ue},K=(Ge,ge)=>{const ue=j.fromDom(e.getBody()),Ce=e.getDoc(),nt=pt(ue,"#"+u).getOrThunk(()=>{const jt=j.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ce);return so(jt,"id",u),Io(ue,jt),jt}),lt=o.createRng();qd(nt),Nu(nt,[j.fromText(us,Ce),j.fromDom(ge),j.fromText(us,Ce)]),lt.setStart(nt.dom.firstChild,1),lt.setEnd(nt.dom.lastChild,0),Ut(nt,{top:o.getPos(Ge,e.getBody()).y+"px"}),Wb(nt);const qt=n.getSel();return qt&&(qt.removeAllRanges(),qt.addRange(lt)),lt},Q=Ge=>{const ge=Ge.cloneNode(!0),ue=e.dispatch("ObjectSelected",{target:Ge,targetClone:ge});if(ue.isDefaultPrevented())return null;const Ce=K(Ge,ue.targetClone),nt=j.fromDom(Ge);return fe(mr(j.fromDom(e.getBody()),`*[${f}]`),lt=>{Dn(nt,lt)||Os(lt,f)}),o.getAttrib(Ge,f)||Ge.setAttribute(f,"1"),b=Ge,De(),Ce},X=(Ge,ge)=>{if(!Ge)return null;if(Ge.collapsed){if(!L(Ge)){const lt=ge?1:-1,qt=xm(lt,r,Ge),jt=qt.getNode(!ge);if(he(jt)){if(eu(jt))return A(lt,jt,ge?!qt.isAtEnd():!1,!1);if(Ii(jt)&&vn(jt.nextSibling)){const Nn=o.createRng();return Nn.setStart(jt,0),Nn.setEnd(jt,0),Nn}}const wn=qt.getNode(ge);if(he(wn)){if(eu(wn))return A(lt,wn,ge?!1:!qt.isAtEnd(),!1);if(Ii(wn)&&vn(wn.previousSibling)){const Nn=o.createRng();return Nn.setStart(wn,1),Nn.setEnd(wn,1),Nn}}}return null}let ue=Ge.startContainer,Ce=Ge.startOffset;const nt=Ge.endOffset;if(_e(ue)&&Ce===0&&_g(ue.parentNode)&&(ue=ue.parentNode,Ce=o.nodeIndex(ue),ue=ue.parentNode),!je(ue))return null;if(nt===Ce+1&&ue===Ge.endContainer){const lt=ue.childNodes[Ce];if(x(lt))return Q(lt)}return null},re=()=>{b&&b.removeAttribute(f),pt(j.fromDom(e.getBody()),"#"+u).each(ro),b=null},we=()=>{c.destroy(),b=null},De=()=>{c.hide()};return wd(e)||$(),{showCaret:A,showBlockCaretContainer:D,hideFakeCaret:De,destroy:we}},xW=(e,n)=>{let o=n;for(let r=e.previousSibling;_e(r);r=r.previousSibling)o+=r.data.length;return o},fI=(e,n,o,r,c)=>{if(_e(o)&&(r<0||r>o.data.length))return[];const u=c&&_e(o)?[xW(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},GT=(e,n,o,r,c,u,f=!1)=>{const b=fI(e,n,o,r,f),y=fI(e,n,c,u,f);return{start:b,end:y}},gI=(e,n)=>{const o=n.slice(),r=o.pop();return Ls(r)?Wo(o,(u,f)=>u.bind(b=>N.from(b.childNodes[f])),N.some(e)).bind(u=>_e(u)&&(r<0||r>u.data.length)?N.none():N.some({node:u,offset:r})):N.none()},hI=(e,n)=>gI(e,n.start).bind(({node:o,offset:r})=>gI(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),EW=(e,n,o,r=!1)=>GT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),kg=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,_e(n.firstChild)&&Gc(n.firstChild.data)),kg(e,r,o)}},qT=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(_e(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),_e(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),kg(e,c,o),c!==u&&kg(e,u,o))},KT=(e,n)=>N.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),XR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Xu(r).concat(e.blockPatterns),inlinePatterns:Zs(r).concat(e.inlinePatterns)}},JR=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},pI=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),YT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},QR=(e,n,o)=>{const r=hI(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(pI(e,n+"-end"),f),start:y.insertBefore(pI(e,n+"-start"),b)}},eD=(e,n,o)=>{kg(e,e.get(n.prefix+"-end"),o),kg(e,e.get(n.prefix+"-start"),o)},MC=e=>e.start.length===0,tD=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},bI=(e,n,o,r)=>{const c=n.start;return NA(e,r.container,r.offset,tD(c),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+c.length){const A=e.createRng();return A.setStart(f.container,f.offset-c.length),A.setEnd(f.container,f.offset),N.some(A)}else{const A=f.offset-c.length;return BA(f.container,A,o).map(D=>{const $=e.createRng();return $.setStart(D.container,D.offset),$.setEnd(f.container,f.offset),$}).filter(D=>D.toString()===c).orThunk(()=>bI(e,n,o,bu(f.container,0)))}})},nD=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),N.some(f)}return MA(o,r,c).bind(f=>bI(e,n,c,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return N.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return N.none()}return N.some(y)}))},TW=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return BA(b,y-o.pattern.end.length,n).bind(x=>{const O=GT(c,u,x.container,x.offset,b,y,r);if(MC(f))return N.some({matches:[{pattern:f,startRng:O,endRng:O}],position:x});{const A=XT(e,o.remainingPatterns,x.container,x.offset,n,r),D=A.getOr({matches:[],position:x}),$=D.position;return nD(c,f,$.container,$.offset,n,A.isNone()).map(L=>{const V=EW(c,u,L,r);return{matches:D.matches.concat([{pattern:f,startRng:V,endRng:O}]),position:bu(L.startContainer,L.startOffset)}})}})},XT=(e,n,o,r,c,u)=>{const f=e.dom;return MA(o,r,f.getRoot()).bind(b=>{const y=JR(f,c,o,r);for(let x=0;x<n.length;x++){const O=n[x];if(!zl(y,O.end))continue;const A=n.slice();A.splice(x,1);const D=TW(e,c,{pattern:O,remainingPatterns:A,position:b},u);if(D.isNone()&&r>0)return XT(e,n,o,r-1,c,u);if(D.isSome())return D}return N.none()})},oD=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?fe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},_W=(e,n,o,r)=>{const c=YT(e.dom,o);qT(e.dom,c,r),oD(e,n,c)},kW=(e,n,o,r,c)=>{const u=e.dom,f=YT(u,r),b=YT(u,o);qT(u,b,c),qT(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},x=YT(u,y);oD(e,n,x)},OW=(e,n)=>{const o=Df("mce_textpattern"),r=Bd(n,(c,u)=>{const f=QR(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Bd(r,(c,u)=>{const f=r.length-c.length-1,b=MC(u.pattern)?u.endMarker:QR(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},AW=e=>Po(e,(n,o)=>o.end.length-n.end.length),RW=(e,n)=>{const o=Ys(e,r=>oo(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},vI=(e,n,o,r,c,u)=>{const f=XT(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=XT(e,AW(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return RW(f,b)},yI=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=OW(o,n);fe(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;MC(u.pattern)?_W(e,u.pattern,u.endMarker,b):kW(e,u.pattern,u.startMarker,u.endMarker,b),eD(o,u.endMarker,b),eD(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},sD=(e,n,o)=>hV(n,0,n).map(r=>{const c=r.container;return dT(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),qT(e,f,b=>b===n)}),c}),CI=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=hI(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,y)=>{const x=y.get(b);return Vt(x)&&Tr(x).exists(O=>Rt(O,"block"))};return KT(n,u).each(b=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,c),n.execCommand(c.cmd,!1,c.value)})}),!0},rD=e=>Po(e,(n,o)=>o.start.length-n.start.length),wI=e=>(n,o)=>{const r=rD(n),c=o.replace(us," ");return ns(r,u=>e(u,o,c))},SI=(e,n)=>(o,r,c,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const y=o.dom,x=pr(o);return y.is(r,x)?e(c.blockPatterns,f).map(O=>n&&Me.trim(f).length===O.start.length?[]:[{pattern:O,range:GT(y,y.getRoot(),r,0,r,0,u)}]).getOr([]):[]},DW=e=>/^\s[^\s]/.test(e),MW=CI((e,n,o)=>{sD(e,n,o).each(r=>{const c=j.fromDom(r),u=fh(c);DW(u)&&P1(c,u.slice(1))})}),BW=wI((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),JT=SI(BW,!0),NW=(e,n)=>{const o=e.selection.getRng();return KT(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=XR(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=vI(e,r,o.startContainer,u,f,!0),y=JT(e,r,f,!0);return{inlineMatches:b,blockMatches:y}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},PW=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();fe(n,r=>MW(e,r)),e.selection.moveToBookmark(o)},$W=CI(sD),IW=wI((e,n,o)=>n===e.start||o===e.start),FW=SI(IW,!1),LW=(e,n)=>{const o=e.selection.getRng();return KT(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=JR(e.dom,r,o.startContainer,c),f=XR(n,r,u);return FW(e,r,f,!1,u)}).filter(r=>r.length>0)},HW=(e,n)=>{fe(n,o=>$W(e,o))},zW=(e,n)=>NW(e,n).fold(xe,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{HD(e),yI(e,o),PW(e,r);const c=e.selection.getRng(),u=MA(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Xg&&(b.deleteData(f.offset-1,1),kg(e.dom,b.parentNode,y=>y===e.dom.getRoot()))})}),!0)),VW=(e,n)=>{const o=e.selection.getRng();KT(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=JR(e.dom,r,o.startContainer,c),f=XR(n,r,u),b=vI(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{yI(e,b)})})},xI=(e,n)=>LW(e,n).fold(xe,o=>(e.undoManager.transact(()=>{HW(e,o)}),!0)),EI=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},TI=(e,n)=>EI(e,n,(o,r)=>o===r.keyCode&&!ke.modifierPressed(r)),UW=(e,n)=>EI(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),WW=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Ju(kS(e),$k(e)),c=()=>od(e);e.on("keydown",f=>{if(f.keyCode===13&&!ke.modifierPressed(f)&&e.selection.isCollapsed()){const b=oy(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&zW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()){const b=oy(r(),"space");(b.blockPatterns.length>0||c())&&xI(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=oy(r(),"space");(f.inlinePatterns.length>0||c())&&VW(e,f)}};e.on("keyup",f=>{TI(o,f)&&u()}),e.on("keypress",f=>{UW(n,f)&&si.setEditorTimeout(e,u)})},_I=e=>{WW(e)},BC=e=>{const n=Me.each,o=ke.BACKSPACE,r=ke.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Ue.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),O=Ue.deviceType.isiPhone()||Ue.deviceType.isiPad(),A=Ue.os.isMacOS()||Ue.os.isiOS(),D=(Ve,vt)=>{try{e.getDoc().execCommand(Ve,!1,String(vt))}catch{}},$=Ve=>Ve.isDefaultPrevented(),z=()=>{const Ve=Xt=>{const Ze=c.create("body"),Kt=Xt.cloneContents();return Ze.appendChild(Kt),u.serializer.serialize(Ze,{format:"html"})},vt=Xt=>{const Ze=Ve(Xt),Kt=c.createRng();Kt.selectNode(e.getBody());const en=Ve(Kt);return Ze===en};e.on("keydown",Xt=>{const Ze=Xt.keyCode;if(!$(Xt)&&(Ze===r||Ze===o)&&e.selection.isEditable()){const Kt=e.selection.isCollapsed(),en=e.getBody();if(Kt&&!cl(e.schema,en)||!Kt&&!vt(e.selection.getRng()))return;Xt.preventDefault(),e.setContent(""),en.firstChild&&c.isBlock(en.firstChild)?e.selection.setCursorLocation(en.firstChild,0):e.selection.setCursorLocation(en,0),e.nodeChanged()}})},L=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},V=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Ve=>{let vt;if(Ve.target===e.getDoc().documentElement)if(vt=u.getRng(),e.getBody().focus(),Ve.type==="mousedown"){if(Na(vt.startContainer))return;u.placeCaretAt(Ve.clientX,Ve.clientY)}else u.setRng(vt)})},K=()=>{e.on("keydown",Ve=>{if(!$(Ve)&&Ve.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const vt=u.getNode(),Xt=vt.previousSibling;if(vt.nodeName==="HR"){c.remove(vt),Ve.preventDefault();return}Xt&&Xt.nodeName&&Xt.nodeName.toLowerCase()==="hr"&&(c.remove(Xt),Ve.preventDefault())}}})},Q=()=>{Range.prototype.getClientRects||e.on("mousedown",Ve=>{if(!$(Ve)&&Ve.target.nodeName==="HTML"){const vt=e.getBody();vt.blur(),si.setEditorTimeout(e,()=>{vt.focus()})}})},X=()=>{const Ve=yy(e);e.on("click",vt=>{const Xt=vt.target;/^(IMG|HR)$/.test(Xt.nodeName)&&c.isEditable(Xt)&&(vt.preventDefault(),e.selection.select(Xt),e.nodeChanged()),Xt.nodeName==="A"&&c.hasClass(Xt,Ve)&&Xt.childNodes.length===0&&c.isEditable(Xt.parentNode)&&(vt.preventDefault(),u.select(Xt))})},re=()=>{const Ve=()=>{const Xt=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Ze=u.getStart();Ze!==e.getBody()&&(c.setAttrib(Ze,"style",null),n(Xt,Kt=>{Ze.setAttributeNode(Kt.cloneNode(!0))}))}},vt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Xt=>{let Ze;return!$(Xt)&&(Xt.keyCode===8||Xt.keyCode===46)&&vt()?(Ze=Ve(),e.getDoc().execCommand("delete",!1),Ze(),Xt.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Xt=>{if(!$(Xt)&&vt()){const Ze=Ve();si.setEditorTimeout(e,()=>{Ze()})}})},we=()=>{e.on("keydown",Ve=>{if(!$(Ve)&&Ve.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const vt=u.getNode().previousSibling;if(vt&&vt.nodeName&&vt.nodeName.toLowerCase()==="table")return Ve.preventDefault(),!1}return!0})},De=()=>{e.on("keydown",Ve=>{if($(Ve)||Ve.keyCode!==ke.BACKSPACE)return;let vt=u.getRng();const Xt=vt.startContainer,Ze=vt.startOffset,Kt=c.getRoot();let en=Xt;if(!(!vt.collapsed||Ze!==0)){for(;en.parentNode&&en.parentNode.firstChild===en&&en.parentNode!==Kt;)en=en.parentNode;en.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,en),vt=c.createRng(),vt.setStart(Xt,0),vt.setEnd(Xt,0),u.setRng(vt))}})},Ge=()=>{const Ve=()=>{D("StyleWithCSS",!1),D("enableInlineTableEditing",!1),Ya(e)||D("enableObjectResizing",!1)};bS(e)||e.on("BeforeExecCommand mousedown",Ve)},ge=()=>{const Ve=()=>{n(c.select("a:not([data-mce-block])"),vt=>{var Xt;let Ze=vt.parentNode;const Kt=c.getRoot();if((Ze==null?void 0:Ze.lastChild)===vt){for(;Ze&&!c.isBlock(Ze);){if(((Xt=Ze.parentNode)===null||Xt===void 0?void 0:Xt.lastChild)!==Ze||Ze===Kt)return;Ze=Ze.parentNode}c.add(Ze,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",vt=>{(vt.type==="setcontent"||vt.command==="mceInsertLink")&&Ve()})},ue=()=>{e.on("init",()=>{D("DefaultParagraphSeparator",pr(e))})},Ce=Ve=>{const vt=Ve.getBody(),Xt=Ve.selection.getRng();return Xt.startContainer===Xt.endContainer&&Xt.startContainer===vt&&Xt.startOffset===0&&Xt.endOffset===vt.childNodes.length},nt=()=>{e.on("keyup focusin mouseup",Ve=>{!ke.modifierPressed(Ve)&&!Ce(e)&&u.normalize()},!0)},lt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},qt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},jt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ve=>{let vt;Ve.target.nodeName==="HTML"&&(vt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(vt),e.selection.normalize(),e.nodeChanged())}))},wn=()=>{A&&e.on("keydown",Ve=>{ke.metaKeyPressed(Ve)&&!Ve.shiftKey&&(Ve.keyCode===37||Ve.keyCode===39)&&(Ve.preventDefault(),e.selection.getSel().modify("move",Ve.keyCode===37?"backward":"forward","lineboundary"))})},Nn=()=>{e.on("click",Ve=>{let vt=Ve.target;do if(vt.tagName==="A"){Ve.preventDefault();return}while(vt=vt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Vo=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ve=>{Ve.preventDefault()})})},Cr=()=>{f.addNodeFilter("br",Ve=>{let vt=Ve.length;for(;vt--;)Ve[vt].attr("class")==="Apple-interchange-newline"&&Ve[vt].remove()})},In=ht,$e=()=>{if(!y||e.removed)return!1;const Ve=e.selection.getSel();return!Ve||!Ve.rangeCount||Ve.rangeCount===0},at=()=>{x&&(V(),X(),Vo(),L(),O&&(qt(),jt(),Nn())),y&&(Q(),Ge(),lt(),wn())},mn=()=>{De(),z(),Ue.windowsPhone||nt(),x&&(V(),X(),ue(),Vo(),we(),Cr(),O?(qt(),jt(),Nn()):L()),y&&(K(),Q(),re(),Ge(),ge(),lt(),wn(),we())};return wd(e)?at():mn(),{refreshContentEditable:In,isHidden:$e}},ZW=e=>e.toLowerCase()==="gpl",kI=e=>e.length>=64&&e.length<=255,jW=e=>ZW(e)||kI(e)?"VALID":"INVALID",GW=e=>{const n=Dh(e);!Z(Ey(e))&&(tt(n)||jW(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},aD=Qn.DOM,qW=(e,n)=>{const o=j.fromDom(e.getBody()),r=s1(xi(o)),c=j.fromTag("style");so(c,"type","text/css"),Io(c,j.fromText(n)),Io(r,c),e.on("remove",()=>{ro(c)})},OI=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,cD=e=>xo(e,n=>tt(n)===!1),iD=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return cD({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:OI(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:ub(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},AI=e=>{const n=e.options.get;return cD({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},KW=e=>{const n=e.options.get;return{...iD(e),...AI(e),...cD({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},YW=e=>{const n=yd(iD(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),ab(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Fa("br",1))}}),n},XW=e=>{const n=ob(e);n&&si.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},JW=e=>{const n=e.dom.getRoot();!e.inline&&(!Gy(e)||e.selection.getStart(!0)===n)&&Nr(n).each(o=>{const r=o.getNode(),c=Ei(r)?Nr(r).getOr(o):o;e.selection.setRng(c.toRange())})},QW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,g4(e),e.focus(!0),JW(e),e.nodeChanged({initial:!0});const n=Bk(e);Y(n)&&n.call(e,e),XW(e)},lD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,eZ=(e,n,o)=>{const{pass:r,fail:c}=Er(n,b=>tinymce.Resource.has(RO(b))),f=[...r.map(b=>{const y=tinymce.Resource.get(RO(b));return Z(y)?Promise.resolve(lD(e).loadRawCss(b,y)):Promise.resolve()}),lD(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},RI=e=>{const n=lD(e),o=fa(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";Me.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(eZ(e,r,o)).then(u).catch(u),b=Ok(e);return b&&qW(e,b),f},DI=e=>{const n=e.getDoc(),o=e.getBody();nx(e),CS(e)||(n.body.spellcheck=!1,aD.setAttrib(o,"spellcheck","false")),e.quirks=BC(e),$b(e);const r=VD(e);r!==void 0&&(o.dir=r);const c=wy(e);c&&e.on("BeforeSetContent",u=>{Me.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},uD=e=>{wd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},QT=e=>{e.removed!==!0&&(uD(e),QW(e))},MI=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},BI=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(aD.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=bS(e),e._editableRoot=Dk(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&aD.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=gH(e),e.schema=dl(AI(e)),e.dom=Qn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:dS(e),referrerPolicy:J1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=YW(e),e.serializer=xO(KW(e),e),e.selection=dN(e.dom,e.getWin(),e.serializer,e),e.annotator=wl(e),e.formatter=DN(e),e.undoManager=$O(e),e._nodeChangeDispatcher=new J9(e),e._selectionOverrides=mI(e),x0(e),qU(e),Bz(e),wd(e)||(j6(e),_I(e));const c=p6(e);kz(e,c),Rz(e),wH(e),ZU(e);const u=JB(e);DI(e),GW(e),u.fold(()=>{const f=MI(e);RI(e).then(()=>{QT(e),f()})},f=>{e.setProgressState(!0),RI(e).then(()=>{f().then(b=>{e.setProgressState(!1),QT(e),iN(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),QT(e),iN(e)})})})},tZ=Qe,nZ=(e,n,o)=>L_(e,n,tZ,o),e_=Qn.DOM,NI=(e,n,o,r)=>{const c=j.fromTag("iframe");return r.each(u=>so(c,"tabindex",u)),Wl(c,o),Wl(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Wd(c,"tox-edit-area__iframe"),c},oZ=e=>{let n=Ek(e)+"<html><head>";js(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Tk(e),r=Qu(e),c=e.translate(Cy(e));return ly(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+ly(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},sZ=(e,n)=>{const o=Ue.browser.isFirefox()?Cy(e):"Rich Text Area",r=e.translate(o),c=wi(j.fromDom(e.getElement()),"tabindex").bind(Fd),u=NI(e.id,r,ti(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=oZ(e),e_.add(n.iframeContainer,u)},dD=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,BI(e)};if(Xr(e)||Ue.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=nZ(j.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},t_=(e,n)=>{sZ(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=e_.isHidden(n.editorContainer)),e.getElement().style.display="none",e_.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,dD(e)},NC=Qn.DOM,Gm=(e,n,o)=>{const r=m0.get(o),c=m0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Me.trim(o),r&&Me.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,Y(u.init)&&(u.init(e,c),n.push(o))}catch(u){AO(e,o,u)}}},n_=e=>e.replace(/^\-/,""),$0=e=>{const n=[];fe(Oh(e),o=>{Gm(e,n,n_(o))})},PI=e=>{const n=Me.trim(xs(e)),o=e.ui.registry.getAll().icons,r={...u0.get("default").icons,...u0.get(n).icons};Xe(r,(c,u)=>{Rt(o,u)||e.ui.registry.addIcon(u,c)})},rZ=e=>{const n=nd(e);if(Z(n)){const o=fu.get(n);e.theme=o(e,fu.urls[n])||{},Y(e.theme.init)&&e.theme.init(e,fu.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},aZ=e=>{const n=eb(e),o=d0.get(n);e.model=o(e,d0.urls[n])},$I=e=>{const n=e.theme.renderUI;return n?n():qm(e)},cZ=e=>{const n=e.getElement(),r=nd(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},o_=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),s_=e=>{const n=NC.create("div");return NC.insertAfter(n,e),o_(n,n)},qm=e=>{const n=e.getElement();return e.inline?o_(null):s_(n)},Ap=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Z(nd(e))?$I(e):Y(nd(e))?cZ(e):qm(e)},II=(e,n)=>{const o={show:N.from(n.show).getOr(ht),hide:N.from(n.hide).getOr(ht),isEnabled:N.from(n.isEnabled).getOr(Qe),setEnabled:r=>{e.mode.isReadOnly()||N.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},iZ=async e=>{e.dispatch("ScriptsLoaded"),PI(e),rZ(e),aZ(e),$0(e);const n=await Ap(e);II(e,N.from(n.api).getOr({})),e.editorContainer=n.editorContainer,dH(e),e.inline?BI(e):t_(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Rp=Qn.DOM,FI=e=>e.charAt(0)==="-",lZ=(e,n)=>{const o=Q1(n),r=pm(n);if(!Ds.hasCode(o)&&o!=="en"){const c=jn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{cH(n,c,o)})}},uZ=(e,n)=>{const o=nd(e);if(Z(o)&&!FI(o)&&!Rt(fu.urls,o)){const r=fy(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;fu.load(o,c).catch(()=>{pG(e,c,o)})}},dZ=(e,n)=>{const o=eb(e);if(o!=="plugin"&&!Rt(d0.urls,o)){const r=mS(e),c=Z(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;d0.load(o,c).catch(()=>{gu(e,c,o)})}},LI=e=>N.from(rs(e)).filter(jn).map(n=>({url:n,name:N.none()})),HI=(e,n,o)=>N.from(n).filter(r=>jn(r)&&!u0.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),mZ=(e,n,o)=>{const r=HI(n,"default",o),c=LI(n).orThunk(()=>HI(n,xs(n),""));fe(Js([r,c]),u=>{e.add(u.url).catch(()=>{aH(n,u.url,u.name.getOrUndefined())})})},fZ=(e,n)=>{const o=(r,c)=>{m0.load(r,c).catch(()=>{rH(e,c,r)})};Xe(Mk(e),(r,c)=>{o(c,r),e.options.set("plugins",Oh(e).concat(c))}),fe(Oh(e),r=>{r=Me.trim(r),r&&!m0.urls[r]&&!FI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},LG=e=>{const n=nd(e);return!Z(n)||he(fu.get(n))},gZ=e=>{const n=eb(e);return he(d0.get(n))},mD=(e,n)=>{const o=Ni.ScriptLoader,r=()=>{!e.removed&&LG(e)&&gZ(e)&&iZ(e)};uZ(e,n),dZ(e,n),lZ(o,e),mZ(o,e,n),fZ(e,n),o.loadQueue().then(r,r)},hZ=(e,n)=>Lu.forElement(e,{contentCssCors:vS(n),referrerPolicy:J1(n)}),pZ=e=>{const n=e.id;Ds.setCode(Q1(e));const o=()=>{Rp.unbind(window,"ready",o),e.render()};if(!Zu.Event.domLoaded){Rp.bind(window,"ready",o);return}if(!e.getElement())return;const r=j.fromDom(e.getElement()),c=uf(r);e.on("remove",()=>{Tu(r.dom.attributes,f=>Os(r,f.name)),Wl(r,c)}),e.ui.styleSheetLoader=hZ(r,e),ym(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Rp.getParent(n,"form");u&&(e.formElement=u,py(e)&&!Oo(e.getElement())&&(Rp.insertAfter(Rp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Rp.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),by(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=OO(e),e.notificationManager=SN(e),rd(e)&&e.on("GetContent",f=>{f.save&&(f.content=Rp.encode(f.content))}),hS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),pS(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),mD(e,e.suffix)},zI=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),o2(e,n))},bZ=e=>e._editableRoot,VI=(e,n)=>({sections:Fe(e),options:Fe(n)}),UI=yi().deviceType,r_=UI.isPhone(),vZ=UI.isTablet(),PC=e=>{if(Dt(e))return[];{const n=Vt(e)?e:e.split(/[ ,]/),o=Ht(n,Id);return Et(o,jn)}},yZ=(e,n)=>{const o=Pd(n,(r,c)=>$t(e,c));return VI(o.t,o.f)},CZ=(e,n,o={})=>{const r=e.sections(),c=uo(r,n).getOr({});return Me.extend({},o,c)},a_=(e,n)=>Rt(e.sections(),n),fD=(e,n)=>a_(e,n)?e.sections()[n]:{},WI=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:uo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),gD=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Me.extend({},e.external_plugins,r):r},wZ=(e,n)=>[...PC(e),...PC(n)],HG=(e,n,o,r)=>e&&a_(n,"mobile")?r:o,zG=(e,n,o,r)=>{const c=PC(o.forced_plugins),u=PC(r.plugins),f=fD(n,"mobile"),b=f.plugins?PC(f.plugins):u,y=HG(e,n,u,b),x=wZ(c,y);return Me.extend(r,{forced_plugins:c,plugins:x})},SZ=(e,n)=>e&&a_(n,"mobile"),ZI=(e,n,o,r,c)=>{var u;const f=e?{mobile:WI((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=yZ(["mobile"],pT(f,c)),y=Me.extend(o,r,b.options(),SZ(e,b)?CZ(b,"mobile"):{},{external_plugins:gD(r,b.options())});return zG(e,b,r,y)},xZ=(e,n)=>{const o=HA(n);return ZI(r_||vZ,r_,o,e,o)},EZ=(e,n)=>SL(e,n),TZ=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{fe("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},VG=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return oo(c,u=>he(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},UG=e=>{TZ(e),VG(e)},jI=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ue.os.isMacOS()||Ue.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},GI=(e,n,o,r)=>{const c=j.fromDom(e.getRoot());return b2(c,ie.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),v2(c,ie.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},_Z=e=>{if(typeof e!="string"){const n=Me.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},kZ=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?GI(r,o.getRng(),n,e.schema):n},c_=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=_Z(n);lO(e,{...r,content:kZ(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=cN(e,c.content,r);uO(e,u,c),e.addVisual()})}},WG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{c_(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{c_(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{c_(e,r)},mceInsertContent:(n,o,r)=>{c_(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(SS(e))}})},ZG={"font-size":"size","font-family":"face"},jG=cf("font"),OZ=(e,n,o)=>{const r=u=>Ta(u,e).orThunk(()=>jG(u)?uo(ZG,e).bind(f=>wi(u,f)):N.none()),c=u=>Dn(j.fromDom(n),u);return x3(j.fromDom(o),u=>r(u),c)},GG=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),AZ=(e,n)=>N.from(Qn.DOM.getStyle(n,e,!0)),Og=e=>(n,o)=>N.from(o).map(j.fromDom).filter(Za).bind(r=>OZ(e,n,r.dom).or(AZ(e,r.dom))).getOr(""),hD=Og("font-size"),i_=_(GG,Og("font-family")),qI=e=>Nr(e.getBody()).bind(n=>{const o=n.container();return N.from(_e(o)?o.parentNode:o)}),KI=e=>N.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),YI=(e,n)=>KI(e).orThunk(Ee(qI,e)).map(j.fromDom).filter(Za).bind(n),pD=(e,n)=>YI(e,Uo(N.some,n)),XI=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=sd(e),c=Fk(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},RZ=e=>{const n=e.split(/\s*,\s*/);return Ht(n,o=>o.indexOf(" ")!==-1&&!(ls(o,'"')||ls(o,"'"))?`'${o}'`:o).join(",")},DZ=(e,n)=>{const o=XI(e,n);e.formatter.toggle("fontname",{value:RZ(o)}),e.nodeChanged()},MZ=e=>pD(e,n=>i_(e.getBody(),n.dom)).getOr(""),BZ=(e,n)=>{e.formatter.toggle("fontsize",{value:XI(e,n)}),e.nodeChanged()},Ag=e=>pD(e,n=>hD(e.getBody(),n.dom)).getOr(""),NZ=e=>pD(e,n=>{const o=j.fromDom(e.getBody()),r=x3(n,u=>Ta(u,"line-height"),Ee(Dn,o)),c=()=>{const u=parseFloat(Cs(n,"line-height")),f=parseFloat(Cs(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),JI=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},PZ=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{DZ(e,c)},FontSize:(o,r,c)=>{BZ(e,c)},LineHeight:(o,r,c)=>{JI(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(Z(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},l_=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>MZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Ag(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>NZ(e))},$Z=e=>{PZ(e),l_(e)},IZ=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},FZ=e=>{e.editorCommands.addCommands({Indent:()=>{gA(e)},Outdent:()=>{FP(e)}}),e.editorCommands.addCommands({Outdent:()=>tT(e)},"state")},QI=e=>{const n=(o,r,c)=>{const u=Z(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");kt(u)&&Z(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},LZ=(e,n,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return N.from(f).map(j.fromDom)},eF=(e,n)=>{const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=wC(o,u);if(!f||!f.isContentEditable)return;const b=n?da:bc,y=pr(e);LZ(e,c,f,u).each(x=>{const O=Y$(e,u,x.dom,f,!1,y);b(x,j.fromDom(O)),e.selection.setCursorLocation(O,0),e.dispatch("NewBlock",{newBlock:O}),CC(e,"insertParagraph")})},HZ=e=>eF(e,!0),zZ=e=>eF(e,!1),bD=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{HZ(e)},InsertNewBlockAfter:()=>{zZ(e)}})},VZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{RT(e6,e)},mceInsertNewLine:(n,o,r)=>{DT(e,r)},InsertLineBreak:(n,o,r)=>{RT(_T,e)}})},UZ=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>je(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),be);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Is=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{P4(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},WZ=e=>{UG(e),jI(e),IZ(e),UZ(e),WG(e),QI(e),FZ(e),bD(e),VZ(e),$Z(e),Is(e)},ZZ=["toggleview"],u_=e=>$t(ZZ,e.toLowerCase());class vD{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():nM(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return Y(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!u_(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Y(r)?r(o):!1}queryCommandValue(n){if(!u_(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Y(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Xe(n,(c,u)=>{fe(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Km="data-mce-contenteditable",jZ=(e,n,o)=>{jg(e,n)&&!o?Zd(e,n):o&&Wd(e,n)},yD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},d_=(e,n)=>{e.dom.contentEditable=n?"true":"false"},GZ=e=>{fe(mr(e,'*[contenteditable="true"]'),n=>{so(n,Km,"true"),d_(n,!1)})},qZ=e=>{fe(mr(e,`*[${Km}="true"]`),n=>{Os(n,Km),d_(n,!0)})},KZ=e=>{N.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},YZ=e=>{e.selection.setRng(e.selection.getRng())},XZ=(e,n)=>{const o=j.fromDom(e.getBody());jZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),KZ(e),e.readonly=!0,d_(o,!1),GZ(o)):(e.readonly=!1,e.hasEditableRoot()&&d_(o,!0),qZ(o),yD(e,"StyleWithCSS",!1),yD(e,"enableInlineTableEditing",!1),yD(e,"enableObjectResizing",!1),g2(e)&&e.focus(),YZ(e),e.nodeChanged())},Pl=e=>e.readonly,$l=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Pl(e)&&fe(n,o=>{o.attr(Km,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Km,n=>{Pl(e)&&fe(n,o=>{o.attr("contenteditable",o.attr(Km))})}),e.serializer.addTempAttr(Km)},JZ=e=>{e.serializer?$l(e):e.on("PreInit",()=>{$l(e)})},QZ=e=>e.type==="click",ej=["copy"],tj=e=>$t(ej,e.type),nj=(e,n)=>Bu(n,"a",r=>Dn(r,j.fromDom(e.getBody()))).bind(r=>wi(r,"href")),oj=(e,n)=>{if(QZ(n)&&!ke.metaKeyPressed(n)){const o=j.fromDom(n.target);nj(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${of(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else tj(n)&&e.dispatch(n.type,n)},sj=e=>{e.on("ShowCaret",n=>{Pl(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Pl(e)&&n.preventDefault()})},rj=Me.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class CD{static isNative(n){return!!rj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||xe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Ov(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=xe),o){const u={func:o,removed:!1};c&&Me.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return Xe(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=Er(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,fe(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Xe(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const m_=e=>(e._eventDispatcher||(e._eventDispatcher=new CD({scope:e,toggleEvent:(n,o)=>{CD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),wD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Ov(e.toLowerCase(),n??{},r);const c=m_(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return m_(this).on(e,n,o)},off(e,n){return m_(this).off(e,n)},once(e,n){return m_(this).once(e,n)},hasEventListeners(e){return m_(this).has(e)}},f_=Qn.DOM;let Dp;const g_=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Hi(e);return o?(e.eventRoot||(e.eventRoot=f_.select(o)[0]),e.eventRoot):e.getBody()},aj=e=>!e.hidden&&!Pl(e),tF=(e,n,o)=>{aj(e)?e.dispatch(n,o):Pl(e)&&oj(e,o)},cj=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=g_(e,n);if(Hi(e)){if(Dp||(Dp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Dp&&(Xe(Dp,(c,u)=>{e.dom.unbind(g_(e,u))}),Dp=null)})),Dp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||f_.isChildOf(u,y))&&tF(f[b],n,c)}};Dp[n]=r,f_.bind(o,n,r)}else{const r=c=>{tF(e,n,c)};f_.bind(o,n,r),e.delegates[n]=r}},nF={...wD,bindPendingEventDelegates(){const e=this;Me.each(e._pendingNativeEvents,n=>{cj(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?cj(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(g_(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Xe(e.delegates,(r,c)=>{e.dom.unbind(g_(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},ij=e=>Z(e)?{value:e.split(/[ ,]/),valid:!0}:$n(e,Z)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},lj=e=>{const n=(()=>{switch(e){case"array":return Vt;case"boolean":return gt;case"function":return Y;case"number":return Ls;case"object":return kt;case"string":return Z;case"string[]":return ij;case"object[]":return o=>$n(o,kt);case"regexp":return o=>mt(o,RegExp);default:return Qe}})();return o=>SD(o,n,`The value must be a ${e}.`)},uj=e=>Z(e.processor),oF=(e,n)=>{const o=Ua(n.message)?"":`. ${n.message}`;return e+o},sF=e=>e.valid,SD=(e,n,o="")=>{const r=n(e);return gt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},dj=(e,n,o)=>{if(!tt(n)){const r=SD(n,o);if(sF(r))return r.value;console.error(oF(`Invalid default value passed for the "${e}" option`,r))}},mj=(e,n,o=n)=>{const r={},c={},u=($,z,L)=>{const V=SD(z,L);return sF(V)?(c[$]=V.value,!0):(console.warn(oF(`Invalid value passed for the ${$} option`,V)),!1)},f=($,z)=>{const L=uj(z)?lj(z.processor):z.processor,V=dj($,z.default,L);r[$]={...z,default:V,processor:L},uo(c,$).orThunk(()=>uo(n,$)).each(Q=>u($,Q,L))},b=$=>Rt(r,$);return{register:f,isRegistered:b,get:$=>uo(c,$).orThunk(()=>uo(r,$).map(z=>z.default)).getOrUndefined(),set:($,z)=>{if(b($)){const L=r[$];return L.immutable?(console.error(`"${$}" is an immutable option and cannot be updated`),!1):u($,z,L.processor)}else return console.warn(`"${$}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:$=>{const z=b($);return z&&delete c[$],z},isSet:$=>Rt(c,$),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,($,z)=>gt(z)||Ls(z)||Z(z)||q(z)||Vt(z)||Un(z)?z:Object.prototype.toString.call(z))))}catch($){console.error($)}}}},fj=["design","readonly"],rF=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&XZ(e,u.editorReadOnly),n.set(r),d4(e,r)},gj=(e,n,o,r)=>{if(r!==o.get()){if(!Rt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?rF(e,o,n,r):e.on("init",()=>rF(e,o,n,r))}},hj=(e,n,o)=>{if($t(fj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},pj=e=>{const n=te("design"),o=te({design:{activate:ht,deactivate:ht,editorReadOnly:!1},readonly:{activate:ht,deactivate:ht,editorReadOnly:!0}});return JZ(e),sj(e),{isReadOnly:()=>Pl(e),set:r=>gj(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(hj(o.get(),r,c))}}},xD=Me.each,ED=Me.explode,aF={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},cF=Me.makeMap("alt,ctrl,shift,meta,access"),bj=e=>e in cF,vj=e=>{const n={},o=Ue.os.isMacOS()||Ue.os.isiOS();xD(ED(e.toLowerCase(),"+"),u=>{bj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=aF[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in cF)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class iF{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(xD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return xD(ED(Me.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Me.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Me.map(ED(n,">"),vj);return u[u.length-1]=Me.extend(u[u.length-1],{func:r,scope:c||this.editor}),Me.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const yj=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(O,A)=>(D,$)=>{O[D.toLowerCase()]={...$,type:A}},x=(O,A)=>r[O.toLowerCase()]=A;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},Cj=()=>{const e=yj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Mp=Qn.DOM,lF=Me.extend,uF=Me.each;class h_{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,lF(this,nF);const c=this;this.id=n,this.hidden=!1;const u=xZ(r.defaultOptions,o);this.options=mj(c,u,o),Uf(c);const f=this.options.get;f("deprecation_warnings")&&ZL(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=J1(c);x&&(Ni.ScriptLoader._setReferrerPolicy(x),Qn.DOM.styleSheetLoader._setReferrerPolicy(x));const O=vS(c);he(O)&&Qn.DOM.styleSheetLoader._setContentCssCors(O),jr.languageLoad=f("language_load"),jr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new ta(js(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ym(c),this.hasVisual=Yr(c),this.shortcuts=new iF(this),this.editorCommands=new vD(this),WZ(this);const A=f("cache_suffix");A&&(Ue.cacheSuffix=A.replace(/^[\?\&]+/,"")),this.ui={registry:Cj(),styleSheetLoader:void 0,show:ht,hide:ht,setEnabled:ht,isEnabled:Qe},this.mode=pj(c),r.dispatch("SetupEditor",{editor:this});const D=nb(c);Y(D)&&D.call(c,c)}render(){pZ(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Yh(this)}translate(n){return Ds.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(he(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Qe,default:o})),!c.isSet(n)&&!tt(o)?o:c.get(n)}hasPlugin(n,o){return $t(Oh(this),n)?o?m0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Mp.show(n.getContainer()),Mp.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Mp.hide(n.getContainer()),Mp.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Oo(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Oo(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Mp.getParent(o.id,"form");b&&uF(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return TO(this,n,o)}getContent(n){return OE(this,n)}insertContent(n,o){o&&(n=lF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?TO(this,this.startContent,{format:"raw"}):TO(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Mp.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Mp.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=Nk(c);if(Y(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||kt(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new ta(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){EZ(this,n)}setEditableRoot(n){zI(this,n)}hasEditableRoot(){return bZ(this)}remove(){qL(this)}destroy(n){KL(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const I0=Qn.DOM,p_=Me.each;let dF=!1,b_,ac=[];const v_=e=>{const n=e.type;p_(Rg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},mF=e=>{if(e!==dF){const n=Qn.DOM;e?(n.bind(window,"resize",v_),n.bind(window,"scroll",v_)):(n.unbind(window,"resize",v_),n.unbind(window,"scroll",v_)),dF=e}},TD=e=>{const n=ac;return ac=Et(ac,o=>e!==o),Rg.activeEditor===e&&(Rg.activeEditor=ac.length>0?ac[0]:null),Rg.focusedEditor===e&&(Rg.focusedEditor=null),n.length!==ac.length},qG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(TD(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},fF=document.compatMode!=="CSS1Compat",Rg={...wD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"2.0",releaseDate:"2024-06-19",i18n:Ds,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=ta.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new ta(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new ta(e.baseURL),e.suffix=o,lM(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Xe(r,(c,u)=>{jr.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Me.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(O,A)=>O.inline&&A.tagName.toLowerCase()in r,u=O=>{let A=O.id;return A||(A=uo(O,"name").filter(D=>!I0.get(D)).getOrThunk(I0.uniqueId),O.setAttribute("id",A)),A},f=O=>{const A=e[O];if(A)return A.apply(n,[])},b=O=>Ue.browser.isIE()||Ue.browser.isEdge()?(BE("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):fF?(BE("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Z(O.selector)?I0.select(O.selector):he(O.target)?[O.target]:[];let y=O=>{o=O};const x=()=>{let O=0;const A=[];let D;const $=(z,L,V)=>{const K=new h_(z,L,n);A.push(K),K.on("init",()=>{++O===D.length&&y(A)}),K.targetElm=K.targetElm||V,K.render()};I0.unbind(window,"ready",x),f("onpageload"),D=$g(b(e)),Me.each(D,z=>{qG(n.get(z.id))}),D=Me.grep(D,z=>!n.get(z.id)),D.length===0?y([]):p_(D,z=>{c(e,z)?BE("Could not initialize inline editor on invalid inline target element",z):$(u(z),e,z)})};return I0.bind(window,"ready",x),new Promise(O=>{o?O(o):y=A=>{O(A)}})},get(e){return arguments.length===0?ac.slice(0):Z(e)?ns(ac,n=>n.id===e).getOr(null):Ls(e)&&ac[e]?ac[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&ac.push(e),mF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),b_||(b_=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",b_))),e},createEditor(e,n){return this.add(new h_(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=ac.length-1;r>=0;r--)n.remove(ac[r]);return}if(Z(e)){p_(I0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,q(n.get(o.id))?null:(TD(o)&&n.dispatch("RemoveEditor",{editor:o}),ac.length===0&&window.removeEventListener("beforeunload",b_),o.remove(),mF(ac.length>0),o)},execCommand(e,n,o){var r;const c=this,u=kt(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new h_(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{p_(ac,e=>{e.save()})},addI18n:(e,n)=>{Ds.add(e,n)},translate:e=>Ds.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ta(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ta(this.baseURL)}};Rg.setup();const Sj=(()=>{const e=Ar(),n=u=>({items:u,types:Lr(u),getType:f=>uo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),gF=Math.min,F0=Math.max,y_=Math.round,hF=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=y_(y/2)),x[1]==="c"&&(r+=y_(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=y_(f/2)),x[4]==="c"&&(r-=y_(u/2)),Bp(r,c,u,f)},xj=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=hF(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},_D=(e,n,o)=>Bp(e.x-n,e.y-o,e.w+n*2,e.h+o*2),kD=(e,n)=>{const o=F0(e.x,n.x),r=F0(e.y,n.y),c=gF(e.x+e.w,n.x+n.w),u=gF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:Bp(o,r,c-o,u-r)},Ej=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=F0(0,n.x-r),O=F0(0,n.y-c),A=F0(0,u-b),D=F0(0,f-y);return r+=x,c+=O,o&&(u+=x,f+=O,r-=A,c-=D),u-=A,f-=D,Bp(r,c,u-r,f-c)},Bp=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Tj={inflate:_D,relativePosition:hF,findBestRelativePosition:xj,intersect:kD,clamp:Ej,create:Bp,fromClientRect:e=>Bp(e.left,e.top,e.width,e.height)},_j=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...O)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,O))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},kj=(()=>{const e={},n={},o={};return{load:(y,x)=>{const O=`Script at URL "${x}" failed to load`,A=`Script at URL "${x}" did not call \`tinymce.Resource.add('${y}', data)\` within 1 second`;if(e[y]!==void 0)return e[y];{const D=new Promise(($,z)=>{const L=_j($,z);n[y]=L.resolve,Ni.ScriptLoader.loadScript(x).then(()=>L.start(A),()=>L.reject(O))});return e[y]=D,D}},add:(y,x)=>{n[y]!==void 0&&(n[y](x),delete n[y]),e[y]=Promise.resolve(x),o[y]=x},has:y=>y in o,get:y=>o[y],unload:y=>{delete e[y],delete o[y]}}})(),Oj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let $C;try{const e="__storage_test__";$C=window.localStorage,$C.setItem(e,e),$C.removeItem(e)}catch{$C=Oj()}var Aj=$C;const Rj={geom:{Rect:Tj},util:{Delay:si,Tools:Me,VK:ke,URI:ta,EventDispatcher:CD,Observable:wD,I18n:Ds,LocalStorage:Aj,ImageUploader:MO},dom:{EventUtils:Zu,TreeWalker:Vs,TextSeeker:qu,DOMUtils:Qn,ScriptLoader:Ni,RangeUtils:Se,Serializer:xO,StyleSheetLoader:ki,ControlSelection:Wh,BookmarkManager:md,Selection:dN,Event:Zu.Event},html:{Styles:kv,Entities:Di,Node:Fa,Schema:dl,DomParser:yd,Writer:_M,Serializer:Nm},Env:Ue,AddOnManager:jr,Annotator:wl,Formatter:DN,UndoManager:$O,EditorCommands:vD,WindowManager:OO,NotificationManager:SN,EditorObservable:nF,Shortcuts:iF,Editor:h_,FocusManager:oM,EditorManager:Rg,DOM:Qn.DOM,ScriptLoader:Ni.ScriptLoader,PluginManager:m0,ThemeManager:fu,ModelManager:d0,IconManager:u0,Resource:kj,FakeClipboard:Sj,trim:Me.trim,isArray:Me.isArray,is:Me.is,toArray:Me.toArray,makeMap:Me.makeMap,each:Me.each,map:Me.map,grep:Me.grep,inArray:Me.inArray,extend:Me.extend,walk:Me.walk,resolve:Me.resolve,explode:Me.explode,_addCacheSuffix:Me._addCacheSuffix},pF=Me.extend(Rg,Rj),OD=e=>{try{to.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(pF),OD(pF)})()})(xq);var $K=xq.exports;const gq=aK($K);(function(){const to=Object.getPrototypeOf,fo=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},go=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&fo(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Bo=t=>s=>go(s)===t,wo=t=>s=>typeof s===t,zn=t=>s=>t===s,Pn=(t,s)=>So(t)&&fo(t,s,(a,i)=>to(a)===i),Yt=Bo("string"),So=Bo("object"),_s=t=>Pn(t,Object),Sn=Bo("array"),co=zn(null),no=wo("boolean"),io=zn(void 0),dn=t=>t==null,St=t=>!dn(t),Ye=wo("function"),Zn=wo("number"),mt=(t,s)=>{if(Sn(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},Z=()=>{},kt=t=>()=>t(),Un=(t,s)=>(...a)=>t(s.apply(null,a)),Vt=(t,s)=>a=>t(s(a)),q=t=>()=>t,gt=t=>t,tt=(t,s)=>t===s;function Dt(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const he=t=>s=>!t(s),Y=t=>()=>{throw new Error(t)},Ls=t=>t(),$n=q(!1),ht=q(!0);class _{constructor(s,a){this.tag=s,this.value=a}static some(s){return new _(!0,s)}static none(){return _.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?_.some(s(this.value)):_.none()}bind(s){return this.tag?s(this.value):_.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:_.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return St(s)?_.some(s):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const Uo=Array.prototype.slice,Fe=Array.prototype.indexOf,ho=Array.prototype.push,At=(t,s)=>Fe.call(t,s),Ee=(t,s)=>{const a=At(t,s);return a===-1?_.none():_.some(a)},po=(t,s)=>At(t,s)>-1,va=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},ts=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},ra=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=Uo.call(t,i,i+s);a.push(d)}return a},xe=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},Qe=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},N=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Qm=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},lo=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},ps=(t,s,a)=>(N(t,(i,d)=>{a=s(a,i,d)}),a),bo=(t,s,a)=>(Qe(t,(i,d)=>{a=s(a,i,d)}),a),O_=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return _.some(g);if(a(g,i))break}return _.none()},$t=(t,s)=>O_(t,s,$n),oo=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return _.some(a)}return _.none()},Ht=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Sn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);ho.apply(s,t[a])}return s},fe=(t,s)=>Ht(xe(t,s)),Tu=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Er=t=>{const s=Uo.call(t,0);return s.reverse(),s},Et=(t,s)=>lo(t,a=>!po(s,a)),Bd=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Wo=t=>[t],Pg=(t,s)=>{const a=Uo.call(t,0);return a.sort(s),a},ns=(t,s)=>s>=0&&s<t.length?_.some(t[s]):_.none(),ya=t=>ns(t,0),Hp=t=>ns(t,t.length-1),dc=Ye(Array.from)?Array.from:t=>Uo.call(t),Ys=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return _.none()},No=Object.keys,zp=Object.hasOwnProperty,ks=(t,s)=>{const a=No(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];s(h,g)}},Po=(t,s)=>ef(t,(a,i)=>({k:i,v:s(a,i)})),ef=(t,s)=>{const a={};return ks(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Tr=t=>(s,a)=>{t[a]=s},Fl=(t,s,a,i)=>{ks(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},Ca=(t,s)=>{const a={},i={};return Fl(t,s,Tr(a),Tr(i)),{t:a,f:i}},Nd=(t,s)=>{const a={};return Fl(t,s,Tr(a),Z),a},$g=(t,s)=>{const a=[];return ks(t,(i,d)=>{a.push(s(i,d))}),a},Lr=(t,s)=>{const a=No(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];if(s(h,g,t))return _.some(h)}return _.none()},V0=t=>$g(t,gt),Xe=(t,s)=>_n(t,s)?_.from(t[s]):_.none(),_n=(t,s)=>zp.call(t,s),mc=(t,s)=>_n(t,s)&&t[s]!==void 0&&t[s]!==null,za=(t,s,a=tt)=>t.exists(i=>a(i,s)),Vp=(t,s,a=tt)=>_u(t,s,a).getOr(t.isNone()&&s.isNone()),Pd=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},xo=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return _.none()}return _.some(s)},_u=(t,s,a)=>t.isSome()&&s.isSome()?_.some(a(t.getOrDie(),s.getOrDie())):_.none(),tf=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?_.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):_.none(),uo=(t,s)=>t!=null?_.some(s(t)):_.none(),Rt=(t,s)=>t?_.some(s):_.none(),wa=(t,s)=>t+s,$d=(t,s)=>t.substring(s),Up=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,U0=(t,s)=>bs(t,s)?$d(t,s.length):t,aa=(t,s)=>tl(t,s)?t:wa(t,s),_r=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?io(i)?!0:d+s.length<=i:!1},bs=(t,s)=>Up(t,s,0),tl=(t,s)=>Up(t,s,t.length-s.length),Ll=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Va=t=>t.length>0,Mo=t=>!Va(t),Ic=t=>t.style!==void 0&&Ye(t.style.getPropertyValue),nl=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Hl(i.childNodes[0])},A_=(t,s)=>{const i=(s||document).createElement(t);return Hl(i)},R_=(t,s)=>{const i=(s||document).createTextNode(t);return Hl(i)},Hl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ne={fromHtml:nl,fromTag:A_,fromText:R_,fromDom:Hl,fromPoint:(t,s,a)=>_.from(t.dom.elementFromPoint(s,a)).map(Hl)},Sa=typeof window<"u"?window:Function("return this;")(),nf=(t,s)=>{let a=s??Sa;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},zC=(t,s)=>{const a=t.split(".");return nf(a,s)},W0=(t,s)=>zC(t,s),vo=(t,s)=>{const a=W0(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Z0=Object.getPrototypeOf,D_=t=>vo("HTMLElement",t),Ig=t=>{const s=zC("ownerDocument.defaultView",t);return So(t)&&(D_(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Z0(t).constructor.name))},of=9,ir=11,ls=1,zl=3,Fc=t=>t.dom.nodeName.toLowerCase(),Id=t=>t.dom.nodeType,Fg=t=>s=>Id(s)===t,sf=t=>jn(t)&&Ig(t.dom),jn=Fg(ls),Ua=Fg(zl),M_=Fg(of),Fd=Fg(ir),ku=t=>s=>jn(s)&&Fc(s)===t,ca=(t,s)=>{const a=t.dom;if(a.nodeType!==ls)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Xo=t=>t.nodeType!==ls&&t.nodeType!==of&&t.nodeType!==ir||t.childElementCount===0,B_=(t,s)=>{const a=s===void 0?document:s.dom;return Xo(a)?[]:xe(a.querySelectorAll(t),ne.fromDom)},j0=(t,s)=>{const a=s===void 0?document:s.dom;return Xo(a)?_.none():_.from(a.querySelector(t)).map(ne.fromDom)},Fn=(t,s)=>t.dom===s.dom,fc=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Wa=t=>ne.fromDom(t.dom.ownerDocument),lr=t=>M_(t)?t:Wa(t),Zp=t=>ne.fromDom(lr(t).dom.documentElement),Ld=t=>ne.fromDom(lr(t).dom.defaultView),Lc=t=>_.from(t.dom.parentNode).map(ne.fromDom),Hd=t=>Lc(t),vi=t=>_.from(t.dom.parentElement).map(ne.fromDom),VC=(t,s)=>{const a=Ye(s)?s:$n;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=ne.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},G0=t=>_.from(t.dom.offsetParent).map(ne.fromDom),UC=t=>_.from(t.dom.nextSibling).map(ne.fromDom),Hc=t=>xe(t.dom.childNodes,ne.fromDom),Ou=(t,s)=>{const a=t.dom.childNodes;return _.from(a[s]).map(ne.fromDom)},jp=t=>Ou(t,0),Gp=(t,s)=>({element:t,offset:s}),q0=(t,s)=>{const a=Hc(t);return a.length>0&&s<a.length?Gp(a[s],0):Gp(t,s)},K0=t=>Fd(t)&&St(t.dom.host),Lg=Ye(Element.prototype.attachShadow)&&Ye(Node.prototype.getRootNode),WC=q(Lg),Eo=Lg?t=>ne.fromDom(t.dom.getRootNode()):lr,zc=t=>K0(t)?t:ne.fromDom(lr(t).dom.body),N_=t=>Y0(t).isSome(),Y0=t=>{const s=Eo(t);return K0(s)?_.some(s):_.none()},yi=t=>ne.fromDom(t.dom.host),P_=t=>{if(WC()&&St(t.target)){const s=ne.fromDom(t.target);if(jn(s)&&qp(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return ya(a)}}return _.from(t.target)},qp=t=>St(t.dom.shadowRoot),Hs=t=>{const s=Ua(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Y0(ne.fromDom(s)).fold(()=>a.body.contains(s),Vt(Hs,yi))},Hr=()=>zd(ne.fromDom(document)),zd=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ne.fromDom(s)},ZC=(t,s,a)=>{if(Yt(a)||no(a)||Zn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Ue=(t,s,a)=>{ZC(t.dom,s,a)},jC=(t,s)=>{const a=t.dom;ks(s,(i,d)=>{ZC(a,d,i)})},To=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Xs=(t,s)=>_.from(To(t,s)),X0=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},$o=(t,s)=>{t.dom.removeAttribute(s)},$_=t=>bo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Hg=(t,s,a)=>{if(!Yt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ic(t)&&t.style.setProperty(s,a)},zg=(t,s)=>{Ic(t)&&t.style.removeProperty(s)},It=(t,s,a)=>{const i=t.dom;Hg(i,s,a)},xa=(t,s)=>{const a=t.dom;ks(s,(i,d)=>{Hg(a,d,i)})},Me=(t,s)=>{const a=t.dom;ks(s,(i,d)=>{i.fold(()=>{zg(a,d)},g=>{Hg(a,d,g)})})},Zo=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Hs(t)?Vg(a,s):d},Vg=(t,s)=>Ic(t)?t.style.getPropertyValue(s):"",Js=(t,s)=>{const a=t.dom,i=Vg(a,s);return _.from(i).filter(d=>d.length>0)},ur=t=>{const s={},a=t.dom;if(Ic(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},Au=(t,s,a)=>{const i=ne.fromTag(t);return It(i,s,a),Js(i,s).isSome()},gn=(t,s)=>{const a=t.dom;zg(a,s),za(Xs(t,"style").map(Ll),"")&&$o(t,"style")},Vl=t=>t.dom.offsetWidth,Qs=(t,s)=>{const a=(C,w)=>{if(!Zn(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const E=C.dom;Ic(E)&&(E.style[t]=w+"px")},i=C=>{const w=s(C);if(w<=0||w===null){const E=Zo(C,t);return parseFloat(E)||0}return w},d=i,g=(C,w)=>bo(w,(E,T)=>{const R=Zo(C,T),B=R===void 0?0:parseInt(R,10);return isNaN(B)?E:E+B},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,w,E)=>{const T=g(C,E);return w>T?w-T:0}}},rf=Qs("height",t=>{const s=t.dom;return Hs(t)?s.getBoundingClientRect().height:s.offsetHeight}),vs=t=>rf.get(t),Ru=t=>rf.getOuter(t),J0=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=rf.max(t,s,a);It(t,"max-height",i+"px")},GC=(t,s)=>({left:t,top:s,translate:(i,d)=>GC(t+i,s+d)}),_o=GC,qC=t=>{const s=t.getBoundingClientRect();return _o(s.left,s.top)},kr=(t,s)=>t!==void 0?t:s!==void 0?s:0,ia=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return _o(a.offsetLeft,a.offsetTop);const g=kr(i==null?void 0:i.pageYOffset,d.scrollTop),h=kr(i==null?void 0:i.pageXOffset,d.scrollLeft),C=kr(d.clientTop,a.clientTop),w=kr(d.clientLeft,a.clientLeft);return Ci(t).translate(h-w,g-C)},Ci=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?_o(i.offsetLeft,i.offsetTop):Hs(t)?qC(s):_o(0,0)},Kp=Qs("width",t=>t.dom.offsetWidth),pn=(t,s)=>Kp.set(t,s),la=t=>Kp.get(t),Ul=t=>Kp.getOuter(t),af=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Kp.max(t,s,a);It(t,"max-width",i+"px")},Vc=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Za=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||i("(pointer:coarse)"),w=d||!g&&h&&i("(min-device-width:768px)"),E=g||h&&!w,T=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,R=!E&&!w&&!T;return{isiPad:q(d),isiPhone:q(g),isTablet:q(w),isPhone:q(E),isTouch:q(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(T),isDesktop:q(R)}},yo=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Ug=(t,s)=>{const a=yo(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return lf(i(1),i(2))},Vd=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?cf():Ug(t,a)},cf=()=>lf(0,0),lf=(t,s)=>({major:t,minor:s}),so={nu:lf,detect:Vd,unknown:cf},Wl=(t,s)=>Ys(s.brands,a=>{const i=a.brand.toLowerCase();return $t(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:so.nu(parseInt(a.version,10),0)}))}),ys=(t,s)=>{const a=String(s).toLowerCase();return $t(t,i=>i.search(a))},wi=(t,s)=>ys(t,s).map(a=>{const i=so.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Ud=(t,s)=>ys(t,s).map(a=>{const i=so.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Os=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Uc=t=>s=>_r(s,t),uf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>_r(t,"edge/")&&_r(t,"chrome")&&_r(t,"safari")&&_r(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Os],search:t=>_r(t,"chrome")&&!_r(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>_r(t,"msie")||_r(t,"trident")},{name:"Opera",versionRegexes:[Os,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Uc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Uc("firefox")},{name:"Safari",versionRegexes:[Os,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(_r(t,"safari")||_r(t,"mobile/"))&&_r(t,"applewebkit")}],Yp=[{name:"Windows",search:Uc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>_r(t,"iphone")||_r(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Uc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Uc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Uc("linux"),versionRegexes:[]},{name:"Solaris",search:Uc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Uc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Uc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Wg={browsers:q(uf),oses:q(Yp)},Xp="Edge",df="Chromium",Jp="IE",Du="Opera",Zg="Firefox",Ea="Safari",Wd=()=>Qp({current:void 0,version:so.unknown()}),Qp=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Xp),isChromium:i(df),isIE:i(Jp),isOpera:i(Du),isFirefox:i(Zg),isSafari:i(Ea)}},Zd={unknown:Wd,nu:Qp,edge:q(Xp),chromium:q(df),ie:q(Jp),opera:q(Du),firefox:q(Zg),safari:q(Ea)},KC="Windows",jg="iOS",YC="Android",mf="Linux",XC="macOS",ff="Solaris",I_="FreeBSD",j="ChromeOS",Q0=()=>ja({current:void 0,version:so.unknown()}),ja=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(KC),isiOS:i(jg),isAndroid:i(YC),isMacOS:i(XC),isLinux:i(mf),isSolaris:i(ff),isFreeBSD:i(I_),isChromeOS:i(j)}},jd={unknown:Q0,nu:ja,windows:q(KC),ios:q(jg),android:q(YC),linux:q(mf),macos:q(XC),solaris:q(ff),freebsd:q(I_),chromeos:q(j)},JC={detect:(t,s,a)=>{const i=Wg.browsers(),d=Wg.oses(),g=s.bind(w=>Wl(i,w)).orThunk(()=>wi(i,t)).fold(Zd.unknown,Zd.nu),h=Ud(d,t).fold(jd.unknown,jd.nu),C=Za(h,g,t,a);return{browser:g,os:h,deviceType:C}}},Dn=t=>window.matchMedia(t).matches;let Si=Vc(()=>JC.detect(navigator.userAgent,_.from(navigator.userAgentData),Dn));const Ga=()=>Si(),zr=(t,s,a,i,d,g,h)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),QC=t=>{const s=ne.fromDom(P_(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Un(i,a);return zr(s,t.clientX,t.clientY,a,i,d,t)},Gg=(t,s)=>a=>{t(a)&&s(QC(a))},gc=(t,s,a,i,d)=>{const g=Gg(a,i);return t.dom.addEventListener(s,g,d),{unbind:Dt(ew,t,s,g,d)}},qg=(t,s,a,i)=>gc(t,s,a,i,!1),ev=(t,s,a,i)=>gc(t,s,a,i,!0),ew=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Wc=(t,s)=>{Lc(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},gf=(t,s)=>{UC(t).fold(()=>{Lc(t).each(d=>{hc(d,s)})},i=>{Wc(i,s)})},tv=(t,s)=>{jp(t).fold(()=>{hc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},hc=(t,s)=>{t.dom.appendChild(s.dom)},dr=(t,s,a)=>{Ou(t,a).fold(()=>{hc(t,s)},i=>{Wc(i,s)})},Mu=(t,s)=>{Qe(s,a=>{hc(t,a)})},hf=t=>{t.dom.textContent="",Qe(Hc(t),s=>{Zc(s)})},Zc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Vr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return _o(a,i)},e1=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},t1=t=>{const s=t===void 0?window:t;return Ga().browser.isFirefox()?_.none():_.from(s.visualViewport)},n1=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),o1=t=>{const s=t===void 0?window:t,a=s.document,i=Vr(ne.fromDom(a));return t1(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return n1(i.left,i.top,g,h)},d=>n1(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},xi=()=>ne.fromDom(document),s1=(t,s)=>t.view(s).fold(q([]),i=>{const d=t.owner(i),g=s1(t,d);return[i].concat(g)}),tw=(t,s)=>{const a=s.owner(t),i=s1(s,a);return _.some(i)};var nw=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?_.none():_.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ne.fromDom)},owner:t=>Wa(t)});const nv=t=>{const s=xi(),a=Vr(s);return tw(t,nw).fold(Dt(ia,t),d=>{const g=Ci(t),h=ps(d,(C,w)=>{const E=Ci(w);return{left:C.left+E.left,top:C.top+E.top}},{left:0,top:0});return _o(h.left+g.left+a.left,h.top+g.top+a.top)})},pf=(t,s,a)=>({point:t,width:s,height:a}),ov=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),ko=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),jo=t=>{const s=ia(t),a=Ul(t),i=Ru(t);return ko(s.left,s.top,a,i)},jc=t=>{const s=nv(t),a=Ul(t),i=Ru(t);return ko(s.left,s.top,a,i)},sv=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,C=g-i;return ko(a,i,h,C)},ow=(t,s)=>bo(s,(a,i)=>sv(a,i),t),zs=()=>o1(window),pt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Bu=t=>{const s=pt(_.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(_.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(_.some(C))}}},sw=()=>Bu(t=>t.destroy()),er=()=>Bu(t=>t.unbind()),Vn=()=>{const t=Bu(Z);return{...t,on:a=>t.get().each(a)}};var Gd=tinymce.util.Tools.resolve("tinymce.ThemeManager");const rv=t=>{const s=g=>g(t),a=q(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:ht,isError:$n,map:g=>Ut.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>_.some(t)};return d},r1=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:$n,isError:ht,map:s,mapError:i=>Ut.error(i(t)),bind:s,exists:$n,forall:ht,getOr:gt,or:gt,getOrThunk:Ls,orThunk:Ls,getOrDie:Y(String(t)),each:Z,toOptional:_.none};return a},Ut={value:rv,error:r1,fromOption:(t,s)=>t.fold(()=>r1(s),rv)};var Cs;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Cs||(Cs={}));const a1=(t,s,a)=>t.stype===Cs.Error?s(t.serror):a(t.svalue),Ta=t=>{const s=[],a=[];return Qe(t,i=>{a1(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},ua=(t,s)=>t.stype===Cs.Error?{stype:Cs.Error,serror:s(t.serror)}:t,pc=(t,s)=>t.stype===Cs.Value?{stype:Cs.Value,svalue:s(t.svalue)}:t,tr=(t,s)=>t.stype===Cs.Value?s(t.svalue):t,da=(t,s)=>t.stype===Cs.Error?s(t.serror):t,bc=t=>({stype:Cs.Value,svalue:t}),c1=t=>({stype:Cs.Error,serror:t}),os={fromResult:t=>t.fold(c1,bc),toResult:t=>a1(t,Ut.error,Ut.value),svalue:bc,partition:Ta,serror:c1,bind:tr,bindError:da,map:pc,mapError:ua,fold:a1},Nu=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),qd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),ro=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Zl=(t,s)=>s,FD=(t,s)=>_s(t)&&_s(s)?Fo(t,s):s,cv=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)_n(d,g)&&(a[g]=t(a[g],d[g]))}return a},Fo=cv(FD),i1=cv(Zl),ol=()=>({tag:"required",process:{}}),nn=t=>({tag:"defaultedThunk",process:t}),bf=t=>nn(q(t)),l1=()=>({tag:"option",process:{}}),u1=t=>({tag:"mergeWithThunk",process:t}),L_=t=>u1(q(t)),aw=(t,s)=>t.length>0?os.svalue(Fo(s,i1.apply(void 0,t))):os.svalue(s),iv=t=>Un(os.serror,Ht)(t),yf={consolidateObj:(t,s)=>{const a=os.partition(t);return a.errors.length>0?iv(a.errors):aw(a.values,s)},consolidateArr:t=>{const s=os.partition(t);return s.errors.length>0?iv(s.errors):os.svalue(s.values)}},lv=t=>So(t)&&No(t).length>100?" removed due to size":JSON.stringify(t,null,2),m1=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return xe(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},_a=(t,s)=>os.serror([{path:t,getErrorInfo:s}]),cw=(t,s,a)=>_a(t,()=>'Could not find valid *required* value for "'+s+'" in '+lv(a)),Kg=(t,s)=>_a(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Yg=(t,s,a)=>_a(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+lv(s)),iw=(t,s)=>_a(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),uv=(t,s)=>_a(t,q(s)),Kd=t=>{const s=(i,d)=>os.bindError(t(d),g=>uv(i,g)),a=q("val");return{extract:s,toString:a}},f1=Kd(os.svalue),mr=(t,s,a,i)=>Xe(s,a).fold(()=>cw(t,a,s),i),g1=(t,s,a,i)=>{const d=Xe(t,s).getOrThunk(()=>a(t));return i(d)},lw=(t,s,a)=>a(Xe(t,s)),h1=(t,s,a,i)=>{const d=Xe(t,s).map(g=>g===!0?a(t):g);return i(d)},Vs=(t,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>os.svalue(_.none()),w=>{const E=d.extract(s.concat([i]),w);return os.map(E,_.some)});switch(t.tag){case"required":return mr(s,a,i,g);case"defaultedThunk":return g1(a,i,t.process,g);case"option":return lw(a,i,h);case"defaultedOptionThunk":return h1(a,i,t.process,h);case"mergeWithThunk":return g1(a,i,q({}),C=>{const w=Fo(t.process(a),C);return g(w)})}},Xg=(t,s,a)=>{const i={},d=[];for(const g of a)ro(g,(h,C,w,E)=>{const T=Vs(w,t,s,h,E);os.fold(T,R=>{d.push(...R)},R=>{i[C]=R})},(h,C)=>{i[h]=C(s)});return d.length>0?os.serror(d):os.svalue(i)},us=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),dv=t=>No(Nd(t,St)),Ur=t=>{const s=_t(t),a=ps(t,(d,g)=>ro(g,h=>Fo(d,{[h]:!0}),q(d)),{});return{extract:(d,g)=>{const h=no(g)?[]:dv(g),C=lo(h,w=>!mc(a,w));return C.length===0?s.extract(d,g):iw(d,C)},toString:s.toString}},_t=t=>({extract:(i,d)=>Xg(i,d,t),toString:()=>`obj{
`+xe(t,d=>ro(d,(g,h,C,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Gc=t=>({extract:(i,d)=>{const g=xe(d,(h,C)=>t.extract(i.concat(["["+C+"]"]),h));return yf.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Jg=(t,s)=>{const a=s!==void 0?s:gt;return{extract:(g,h)=>{const C=[];for(const w of t){const E=w.extract(g,h);if(E.stype===Cs.Value)return{stype:Cs.Value,svalue:a(E.svalue)};C.push(E)}return yf.consolidateArr(C)},toString:()=>"oneOf("+xe(t,g=>g.toString()).join(", ")+")"}},p1=(t,s)=>{const a=(g,h)=>Gc(Kd(t)).extract(g,h);return{extract:(g,h)=>{const C=No(h),w=a(g,C);return os.bind(w,E=>{const T=xe(E,R=>Nu(R,R,ol(),s));return _t(T).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},uw=(t,s)=>{const a=Vc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},mv=Un(Gc,_t),qc=q(f1),sl=(t,s)=>Kd(a=>{const i=typeof a;return t(a)?os.svalue(a):os.serror(`Expected type: ${s} but got: ${i}`)}),Pu=sl(Zn,"number"),je=sl(Yt,"string"),vc=sl(no,"boolean"),fv=sl(Ye,"function"),Yd=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Yd(t[s]));default:return!1}},Kc=Kd(t=>Yd(t)?os.svalue(t):os.serror("Expected value to be acceptable for sending via postMessage")),Qg=(t,s,a,i)=>Xe(a,i).fold(()=>Yg(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),$u=(t,s)=>({extract:(d,g)=>Xe(g,t).fold(()=>Kg(d,t),C=>Qg(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+No(s)}),Xd=()=>Gc(f1),eh=t=>Kd(s=>t(s).fold(os.serror,os.svalue)),Ei=(t,s)=>p1(a=>os.fromResult(t(a)),s),dw=(t,s,a)=>{const i=s.extract([t],a);return os.mapError(i,d=>({input:a,errors:d}))},Oo=(t,s,a)=>os.toResult(dw(t,s,a)),_e=t=>t.fold(s=>{throw new Error(Ti(s))},gt),Wr=(t,s,a)=>_e(Oo(t,s,a)),Ti=t=>`Errors: 
`+m1(t.errors).join(`
`)+`

Input object: `+lv(t.input),As=(t,s)=>$u(t,Po(s,_t)),Cf=(t,s)=>uw(t,s),ws=Nu,bn=qd,b1=t=>eh(s=>po(t,s)?Ut.value(s):Ut.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),be=t=>ws(t,t,ol(),qc()),vn=(t,s)=>ws(t,t,ol(),s),v1=t=>vn(t,Pu),ds=t=>vn(t,je),Or=(t,s)=>ws(t,t,ol(),b1(s)),H_=t=>vn(t,vc),qa=t=>vn(t,fv),z_=(t,s)=>ws(t,t,l1(),Kd(a=>os.serror("The field: "+t+" is forbidden. "+s))),jl=(t,s)=>ws(t,t,ol(),_t(s)),mw=(t,s)=>ws(t,t,ol(),mv(s)),Ka=(t,s)=>ws(t,t,ol(),Gc(s)),hn=t=>ws(t,t,l1(),qc()),rl=(t,s)=>ws(t,t,l1(),s),Jd=t=>rl(t,Pu),Ss=t=>rl(t,je),gv=(t,s)=>rl(t,b1(s)),al=t=>rl(t,fv),cl=(t,s)=>rl(t,Gc(s)),ao=(t,s)=>rl(t,_t(s)),hv=(t,s)=>rl(t,Ur(s)),te=(t,s)=>ws(t,t,bf(s),qc()),yc=(t,s,a)=>ws(t,t,bf(s),a),wf=(t,s)=>yc(t,s,Pu),Ar=(t,s)=>yc(t,s,je),Yc=(t,s,a)=>yc(t,s,b1(a)),Jo=(t,s)=>yc(t,s,vc),Go=(t,s)=>yc(t,s,fv),V_=(t,s)=>yc(t,s,Kc),Xc=(t,s,a)=>yc(t,s,Gc(a)),pv=(t,s,a)=>yc(t,s,_t(a)),Jc={generate:t=>{if(!Sn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Qe(t,(i,d)=>{const g=No(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...w)=>{const E=w.length;if(E!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+E);return{fold:(...R)=>{if(R.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+R.length);return R[d].apply(null,w)},match:R=>{const B=No(R);if(s.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+B.join(","));if(!Tu(s,F=>po(B,F)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+s.join(", "));return R[h].apply(null,w)},log:R=>{console.log(R,{constructors:s,constructor:h,params:w})}}}}),a}};Jc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const vv=t=>{const s=[],a=[];return Qe(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},fw=(t,s)=>{const a={};return ks(t,(i,d)=>{po(s,d)||(a[d]=i)}),a},gw=(t,s)=>({[t]:s}),hw=t=>{const s={};return Qe(t,a=>{s[a.key]=a.value}),s},U_=(t,s)=>fw(t,s),Sf=(t,s)=>gw(t,s),Iu=t=>hw(t),th=(t,s)=>t.length===0?Ut.value(s):Ut.value(Fo(s,i1.apply(void 0,t))),pw=t=>Ut.error(Ht(t)),W_=(t,s)=>{const a=vv(t);return a.errors.length>0?pw(a.errors):th(a.values,s)},_i=t=>Ye(t)?t:$n,y1=(t,s,a)=>{let i=t.dom;const d=_i(a);for(;i.parentNode;){i=i.parentNode;const g=ne.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return _.none()},xf=(t,s,a)=>{const i=s(t),d=_i(a);return i.orThunk(()=>d(t)?_.none():y1(t,s,d))},Fu=(t,s)=>Fn(t.element,s.event.target),bw={can:ht,abort:$n,run:Z},Gl=t=>{if(!mc(t,"can")&&!mc(t,"abort")&&!mc(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...bw,...t}},vw=(t,s)=>(...a)=>bo(t,(i,d)=>i&&s(d).apply(void 0,a),!0),yw=(t,s)=>(...a)=>bo(t,(i,d)=>i||s(d).apply(void 0,a),!1),Z_=t=>Ye(t)?{can:ht,abort:$n,run:t}:t,C1=t=>{const s=vw(t,d=>d.can),a=yw(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{Qe(t,g=>{g.run.apply(void 0,d)})}}},Rs=q,ki=Rs("touchstart"),nh=Rs("touchmove"),Lu=Rs("touchend"),Cw=Rs("touchcancel"),ka=Rs("mousedown"),w1=Rs("mousemove"),Qd=Rs("mouseout"),S1=Rs("mouseup"),il=Rs("mouseover"),Oi=Rs("focusin"),ll=Rs("focusout"),Qc=Rs("keydown"),oh=Rs("keyup"),ul=Rs("input"),Ef=Rs("change"),em=Rs("click"),ww=Rs("transitioncancel"),Ai=Rs("transitionend"),Sw=Rs("transitionstart"),yv=Rs("selectstart"),Lo=t=>q("alloy."+t),x1={tap:Lo("tap")},Ri=Lo("focus"),Hu=Lo("blur.post"),ql=Lo("paste.post"),Cc=Lo("receive"),wc=Lo("execute"),sh=Lo("focus.item"),Di=x1.tap,fr=Lo("longpress"),rh=Lo("sandbox.close"),Cv=Lo("typeahead.cancel"),ah=Lo("system.init"),ch=Lo("system.touchmove"),wv=Lo("system.touchend"),tm=Lo("system.scroll"),Mi=Lo("system.resize"),Zr=Lo("system.attached"),Sc=Lo("system.detached"),zu=Lo("system.dismissRequested"),Sv=Lo("system.repositionRequested"),nm=Lo("focusmanager.shifted"),xv=Lo("slotcontainer.visibility"),xw=Lo("system.external.element.scroll"),Ew=Lo("change.tab"),Tw=Lo("dismiss.tab"),Vu=Lo("highlight"),om=Lo("dehighlight"),Zt=(t,s)=>{E1(t,t.element,s,{})},ft=(t,s,a)=>{E1(t,t.element,s,a)},Uu=t=>{Zt(t,wc())},ih=(t,s,a)=>{E1(t,s,a,{})},E1=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},Ev=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},dl=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Gn=t=>Iu(t),_w=(t,s)=>({key:t,value:Gl({abort:s})}),Tv=(t,s)=>({key:t,value:Gl({can:s})}),T1=t=>({key:t,value:Gl({run:(s,a)=>{a.event.prevent()}})}),ve=(t,s)=>({key:t,value:Gl({run:s})}),sm=(t,s,a)=>({key:t,value:Gl({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),j_=t=>s=>ve(t,s),Wu=t=>s=>({key:t,value:Gl({run:(a,i)=>{Fu(a,i)&&s(a,i)}})}),G_=(t,s)=>ve(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{dl(d,d.element,t,i)})}),rm=(t,s,a)=>{const i=s.partUids[a];return G_(t,i)},_v=(t,s)=>ve(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>xf(d.target,C=>a.getSystem().getByDom(C).toOptional(),$n).getOr(a));s(a,g,i)}),Bi=t=>ve(t,(s,a)=>{a.cut()}),kv=t=>ve(t,(s,a)=>{a.stop()}),Tf=(t,s)=>Wu(t)(s),Jn=Wu(Zr()),ml=Wu(Sc()),kw=Wu(ah()),ei=j_(wc()),Ov=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:lh(h.slice(0,1).concat(h.slice(3)))}),t},lh=t=>xe(t,s=>tl(s,"/*")?s.substring(0,s.length-2):s),_f=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:lh(g)}),t},uh=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:lh(g.slice(1))}),t},Oa=t=>({classes:io(t.classes)?[]:t.classes,attributes:io(t.attributes)?{}:t.attributes,styles:io(t.styles)?{}:t.styles}),Ow=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),dh=(t,s,a)=>ei(i=>{a(i,t,s)}),Av=(t,s,a)=>kw((i,d)=>{a(i,t,s)}),Zu=(t,s,a,i,d,g)=>{const h=Ur(t),C=ao(s,[hv("config",t)]);return Rw(h,C,s,a,i,d,g)},Rv=(t,s,a,i,d,g)=>{const h=t,C=ao(s,[rl("config",t)]);return Rw(h,C,s,a,i,d,g)},Aw=(t,s,a)=>Ov((d,...g)=>{const h=[d].concat(g);return d.config({name:q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(w))})},a,s),Dv=t=>({key:t,value:void 0}),Rw=(t,s,a,i,d,g,h)=>{const C=R=>mc(R,a)?R[a]():_.none(),w=Po(d,(R,B)=>Aw(a,R,B)),T={...Po(g,(R,B)=>_f(R,B)),...w,revoke:Dt(Dv,a),config:R=>{const B=Wr(a+"-config",t,R);return{key:a,value:{config:B,me:T,configAsRaw:Vc(()=>Wr(a+"-config",t,R)),initialConfig:R,state:h}}},schema:q(s),exhibit:(R,B)=>_u(C(R),Xe(i,"exhibit"),(P,F)=>F(B,P.config,P.state)).getOrThunk(()=>Oa({})),name:q(a),handlers:R=>C(R).map(B=>Xe(i,"events").getOr(()=>({}))(B.config,B.state)).getOr({})};return T},Rr={init:()=>Aa({readState:q("No State required")})},Aa=t=>t,Oe=t=>Iu(t),_1=Ur([be("fields"),be("name"),te("active",{}),te("apis",{}),te("state",Rr),te("extra",{})]),Us=t=>{const s=Wr("Creating behaviour: "+t.name,_1,t);return Zu(s.fields,s.name,s.active,s.apis,s.extra,s.state)},k1=Ur([be("branchKey"),be("branches"),be("name"),te("active",{}),te("apis",{}),te("state",Rr),te("extra",{})]),Dw=t=>{const s=Wr("Creating behaviour: "+t.name,k1,t);return Rv(As(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Qn=q(void 0),Kl=(t,s)=>{const a=To(t,s);return a===void 0||a===""?[]:a.split(" ")},O1=(t,s,a)=>{const d=Kl(t,s).concat([a]);return Ue(t,s,d.join(" ")),!0},q_=(t,s,a)=>{const i=lo(Kl(t,s),d=>d!==a);return i.length>0?Ue(t,s,i.join(" ")):$o(t,s),!1},Yl=t=>t.dom.classList!==void 0,A1=t=>Kl(t,"class"),Ni=(t,s)=>O1(t,"class",s),Mw=(t,s)=>q_(t,"class",s),Mv=(t,s)=>po(A1(t),s)?Mw(t,s):Ni(t,s),qn=(t,s)=>{Yl(t)?t.dom.classList.add(s):Ni(t,s)},kf=t=>{(Yl(t)?t.dom.classList:A1(t)).length===0&&$o(t,"class")},Ao=(t,s)=>{Yl(t)?t.dom.classList.remove(s):Mw(t,s),kf(t)},Bw=(t,s)=>{const a=Yl(t)?t.dom.classList.toggle(s):Mv(t,s);return kf(t),a},Ra=(t,s)=>Yl(t)&&t.dom.classList.contains(s),Of=(t,s)=>{Qe(s,a=>{qn(t,a)})},Da=(t,s)=>{Qe(s,a=>{Ao(t,a)})},K_=(t,s)=>{Qe(s,a=>{Bw(t,a)})},Y_=(t,s)=>Tu(s,a=>Ra(t,a)),X_=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},J_=t=>Yl(t)?X_(t):A1(t),Ds=(t,s,a,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},jr=t=>({...t,position:_.some(t.position)}),mh=(t,s)=>{Me(t,jr(s))},ju=t=>(za(Js(t,"position"),"fixed")?_.none():G0(t)).orThunk(()=>{const i=ne.fromTag("span");return Lc(t).bind(d=>{hc(d,i);const g=G0(i);return Zc(i),g})}),Bv=t=>ju(t).map(ia).getOrThunk(()=>_o(0,0)),Af=(t,s)=>{const a=t.element;qn(a,s.transitionClass),Ao(a,s.fadeOutClass),qn(a,s.fadeInClass),s.onShow(t)},fl=(t,s)=>{const a=t.element;qn(a,s.transitionClass),Ao(a,s.fadeInClass),qn(a,s.fadeOutClass),s.onHide(t)},Rf=(t,s)=>t.y<s.bottom&&t.bottom>s.y,am=(t,s)=>t.y>=s.y,Gu=(t,s)=>t.bottom<=s.bottom,gl=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),cm=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),im=t=>t.box.x-t.win.x,Q_=(t,s,a)=>{const i=s.win,d=s.box,g=im(s);return Ys(t,h=>{switch(h){case"bottom":return Gu(d,a.bounds)?_.none():_.some(cm(i,g,a));case"top":return am(d,a.bounds)?_.none():_.some(gl(i,g,a));default:return _.none()}}).getOr({location:"no-dock"})},Nv=(t,s,a)=>Tu(t,i=>{switch(i){case"bottom":return Gu(s,a.bounds);case"top":return am(s,a.bounds)}}),R1=(t,s)=>{const a=s.optScrollEnv.fold(q(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return _o(t.bounds.x,a)},Nw=(t,s)=>{const a=s.optScrollEnv.fold(q(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return _o(t.x,a)},Pv=(t,s,a)=>a.getInitialPos().map(i=>{const d=R1(i,s);return{box:ko(d.left,d.top,la(t),vs(t)),location:i.location}}),D1=(t,s,a,i,d)=>{const g=Nw(s,a),h=ko(g.left,g.top,s.width,s.height);i.setInitialPos({style:ur(t),position:Zo(t,"position")||"static",bounds:h,location:d.location})},$v=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>D1(t,s,a,i,d),()=>Z)},M1=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return _.some({morph:"static"});case"absolute":const g=ju(t).getOr(Hr()),h=jo(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return _.some({morph:"absolute",positionCss:Ds("absolute",Xe(i.style,"left").map(w=>s.x-h.x),Xe(i.style,"top").map(w=>s.y-h.y+C),Xe(i.style,"right").map(w=>h.right-s.right),Xe(i.style,"bottom").map(w=>h.bottom-s.bottom))});default:return _.none()}}),Df=(t,s,a)=>Pv(t,s,a).filter(({box:i})=>Nv(a.getModes(),i,s)).bind(({box:i})=>M1(t,i,a)),B1=t=>{switch(t.location){case"top":return _.some({morph:"fixed",positionCss:Ds("fixed",_.some(t.leftX),_.some(t.topY),_.none(),_.none())});case"bottom":return _.some({morph:"fixed",positionCss:Ds("fixed",_.some(t.leftX),_.none(),_.none(),_.some(t.bottomY))});default:return _.none()}},LD=(t,s,a)=>{const i=jo(t),d=zs(),g=Q_(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(D1(t,i,s,a,g),B1(g)):_.none()},ek=(t,s,a)=>Df(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Pv(t,s,a)).bind(({box:i,location:d})=>{const g=zs(),h=im({win:g,box:i}),C=d==="top"?gl(g,h,s):cm(g,h,s);return B1(C)})),Pi=(t,s,a)=>{const i=t.element;return za(Js(i,"position"),"fixed")?ek(i,s,a):LD(i,s,a)},Mf=(t,s,a)=>{const i=t.element;return Pv(i,s,a).bind(({box:d})=>M1(i,d,a))},Pw=(t,s,a,i)=>{const d=jo(t),g=zs(),h=im({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?($v(t,d,s,a,C),B1(C)):_.none()},$w=(t,s,a)=>{a.setDocked(!1),Qe(["left","right","top","bottom","position"],i=>gn(t.element,i)),s.onUndocked(t)},N1=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),mh(t.element,i),(d?s.onDocked:s.onUndocked)(t)},qu=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=Rf(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Of(t.element,[g.fadeOutClass]),g.onHide(t)):(C?Af:fl)(t,g))})})},tk=(t,s,a,i,d)=>{qu(t,s,a,i,!0),N1(t,s,a,d.positionCss)},Iv=(t,s,a,i,d)=>{switch(d.morph){case"static":return $w(t,s,a);case"absolute":return N1(t,s,a,d.positionCss);case"fixed":return tk(t,s,a,i,d)}},fh=(t,s,a)=>{const i=s.lazyViewport(t);qu(t,s,a,i),Pi(t,i,a).each(d=>{Iv(t,s,a,i,d)})},nk=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);Mf(t,d,a).each(g=>{switch(g.morph){case"static":{$w(t,s,a);break}case"absolute":{N1(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Da(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),P1(t,s,a)},P1=(t,s,a)=>{t.getSystem().isConnected()&&fh(t,s,a)},Bf=(t,s,a)=>{a.isDocked()&&nk(t,s,a)},Iw=t=>(s,a,i)=>{const d=a.lazyViewport(s);Pw(s.element,d,i,t).each(h=>{tk(s,a,i,d,h)})},$1=Iw(gl),Fv=Iw(cm);var Lv=Object.freeze({__proto__:null,refresh:P1,reset:Bf,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:$1,forceDockToBottom:Fv}),Lw=Object.freeze({__proto__:null,events:(t,s)=>Gn([Tf(Ai(),(a,i)=>{t.contextual.each(d=>{Ra(a.element,d.transitionClass)&&(Da(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),ve(tm(),(a,i)=>{P1(a,t,s)}),ve(xw(),(a,i)=>{P1(a,t,s)}),ve(Mi(),(a,i)=>{Bf(a,t,s)})])});const $i=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Hc(ne.fromDom(i))},ma=t=>t.dom.innerHTML,Pf=(t,s)=>{const i=Wa(t).dom,d=ne.fromDom(i.createDocumentFragment()),g=$i(s,i);Mu(d,g),hf(t),hc(t,d)},$f=t=>{const s=ne.fromTag("div"),a=ne.fromDom(t.dom.cloneNode(!0));return hc(s,a),ma(s)},hh=(t,s)=>ne.fromDom(t.dom.cloneNode(s)),ok=t=>hh(t,!1),sk=t=>hh(t,!0),lm=t=>{if(K0(t))return"#shadow-root";{const s=ok(t);return $f(s)}},Ma=t=>lm(t),Hw="unknown";var qo;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(qo||(qo={}));const um=pt({}),Ba=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();po(["mousemove","mouseover","mouseout",ah()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:xe(a,g=>po(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Ma(g.target)+")":g.outcome)})}}},HD=(t,s,a)=>{switch(Xe(um.get(),t).orThunk(()=>{const d=No(um.get());return Ys(d,g=>t.indexOf(g)>-1?_.some(um.get()[g]):_.none())}).getOr(qo.NORMAL)){case qo.NORMAL:return a(Na());case qo.LOGGING:{const d=Ba(t,s),g=a(d);return d.write(),g}case qo.STOP:return!0}},I1=["alloy/data/Fields","alloy/debugging/Debugging"],If=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return $t(s,a=>a.indexOf("alloy")>0&&!va(I1,i=>a.indexOf(i)>-1)).getOr(Hw)}else return Hw},dm={logEventCut:Z,logEventStopped:Z,logNoParent:Z,logEventNoHandlers:Z,logEventResponse:Z,write:Z},Ii=(t,s,a)=>HD(t,s,a),Na=q(dm),Hv=q([be("menu"),be("selectedMenu")]),zv=q([be("item"),be("selectedItem")]);q(_t(zv().concat(Hv())));const Vv=q(_t(zv())),mm=jl("initSize",[be("numColumns"),be("numRows")]),rk=()=>vn("markers",Vv()),fm=()=>jl("markers",[be("backgroundMenu")].concat(Hv()).concat(zv())),hl=t=>jl("markers",xe(t,be)),ph=(t,s,a)=>(If(),ws(s,s,a,eh(i=>Ut.value((...d)=>i.apply(void 0,d))))),rn=t=>ph("onHandler",t,bf(Z)),Gr=t=>ph("onKeyboardHandler",t,bf(_.none)),xc=t=>ph("onHandler",t,ol()),Xl=t=>ph("onKeyboardHandler",t,ol()),Kn=(t,s)=>bn(t,q(s)),zw=t=>bn(t,gt),F1=q(mm);var bh=[ao("contextual",[ds("fadeInClass"),ds("fadeOutClass"),ds("transitionClass"),qa("lazyContext"),rn("onShow"),rn("onShown"),rn("onHide"),rn("onHidden")]),Go("lazyViewport",()=>({bounds:zs(),optScrollEnv:_.none()})),Xc("modes",["top","bottom"],je),rn("onDocked"),rn("onUndocked")],ak=Object.freeze({__proto__:null,init:t=>{const s=pt(!1),a=pt(!0),i=Vn(),d=pt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Aa({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Co=Us({fields:bh,name:"docking",active:Lw,apis:Lv,state:ak}),Uv=(t,s,a)=>Fn(s,t.element)&&!Fn(s,a),ck=Gn([Tv(Ri(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Uv(t,i,d)?(console.warn(Ri()+` did not get interpreted by the desired target. 
Originator: `+Ma(i)+`
Target: `+Ma(d)+`
Check the `+Ri()+" event handlers"),!1):!0})]);var ik=Object.freeze({__proto__:null,events:ck});let Ff=0;const qe=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return Ff++,t+"_"+i+Ff+String(a)},lk=q("alloy-id-"),Vw=q("data-alloy-id"),H1=lk(),Wv=Vw(),uk=(t,s)=>{const a=qe(H1+t);return vh(s,a),a},vh=(t,s)=>{Object.defineProperty(t.dom,Wv,{value:s,writable:!0})},yh=t=>{const s=jn(t)?t.dom[Wv]:null;return _.from(s)},gm=t=>qe(t),zD=gt,pl=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Ma(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:q("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:$n}},dk=pl(),Jl=qe("alloy-premade"),Uw=t=>(Object.defineProperty(t.element.dom,Jl,{value:t.uid,writable:!0}),Sf(Jl,t)),Fi=t=>_n(t.dom,Jl),Ww=t=>Xe(t,Jl),Lf=t=>uh((s,...a)=>t(s.getApis(),s,...a),t),mk=(t,s)=>{const a=xe(s,d=>ao(d.name(),[be("config"),te("state",Rr)])),i=Oo("component.behaviours",_t(a),t.behaviours).fold(d=>{throw new Error(Ti(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},gt);return{list:s,data:Po(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return q(g)})}},fk=t=>t.list,gk=t=>t.data,Zv=(t,s)=>{const a={};return ks(t,(i,d)=>{ks(i,(g,h)=>{const C=Xe(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},z1=(t,s,a,i)=>{const d={...s};Qe(a,T=>{d[T.name()]=T.exhibit(t,i)});const g=Zv(d,(T,R)=>({name:T,modification:R})),h=T=>ps(T,(R,B)=>({...B.modification,...R}),{}),C=ps(g.classes,(T,R)=>R.modification.concat(T),[]),w=h(g.attributes),E=h(g.styles);return Oa({classes:C,attributes:w,styles:E})},Zw=(t,s,a,i)=>{try{const d=Pg(a,(g,h)=>{const C=g[s],w=h[s],E=i.indexOf(C),T=i.indexOf(w);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));return E<T?-1:T<E?1:0});return Ut.value(d)}catch(d){return Ut.error([d])}},jv=(t,s)=>({handler:t,purpose:s}),hk=(t,s)=>({cHandler:t,purpose:s}),Ch=(t,s)=>hk(Dt.apply(void 0,[t.handler].concat(s)),t.purpose),Ku=t=>t.cHandler,Hf=(t,s)=>({name:t,handler:s}),V1=(t,s)=>{const a={};return Qe(t,i=>{a[i.name()]=i.handlers(s)}),a},Gv=(t,s,a)=>{const i={...a,...V1(s,t)};return Zv(i,Hf)},U1=(t,s,a,i)=>{const d=Gv(t,a,i);return jw(d,s)},qv=t=>{const s=Z_(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Kv=(t,s)=>Ut.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(xe(s,a=>a.name),null,2)]),Yv=(t,s,a)=>{const i=s[a];return i?Zw("Event: "+a,"name",t,i).map(d=>{const g=xe(d,h=>h.handler);return C1(g)}):Kv(a,t)},jw=(t,s)=>{const a=$g(t,(i,d)=>(i.length===1?Ut.value(i[0].handler):Yv(i,s,d)).map(h=>{const C=qv(h),w=i.length>1?lo(s[d],E=>va(i,T=>T.name===E)).join(" > "):i[0].name;return Sf(d,jv(C,w))}));return W_(a,{})},Ws="alloy.base.behaviour",pk=_t([ws("dom","dom",ol(),_t([be("tag"),te("styles",{}),te("classes",[]),te("attributes",{}),hn("value"),hn("innerHtml")])),be("components"),be("uid"),te("events",{}),te("apis",{}),ws("eventOrder","eventOrder",L_({[wc()]:["disabling",Ws,"toggling","typeaheadevents"],[Ri()]:[Ws,"focusing","keying"],[ah()]:[Ws,"disabling","toggling","representing"],[ul()]:[Ws,"representing","streaming","invalidating"],[Sc()]:[Ws,"representing","item-events","toolbar-button-events","tooltipping"],[ka()]:["focusing",Ws,"item-type-events"],[ki()]:["focusing",Ws,"item-type-events"],[il()]:["item-type-events","tooltipping"],[Cc()]:["receiving","reflecting","tooltipping"]}),qc()),hn("domModification")]),Gw=t=>Oo("custom.definition",pk,t),Yu=t=>({...t.dom,uid:t.uid,domChildren:xe(t.components,s=>s.element)}),hm=t=>t.domModification.fold(()=>Oa({}),Oa),Xv=t=>t.events,ie=t=>t.dom.value,bl=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},bk=(t,s,a)=>Ou(t,s).map(d=>{if(a.exists(h=>!Fn(h,d))){const h=a.map(Fc).getOr("span"),C=ne.fromTag(h);return Wc(d,C),C}else return d}),qw=(t,s,a)=>{a.fold(()=>hc(t,s),i=>{Fn(i,s)||(Wc(i,s),Zc(i))})},wh=(t,s,a)=>{const i=xe(s,a),d=Hc(t);return Qe(d.slice(i.length),Zc),i},Ec=(t,s,a,i)=>{const d=Ou(t,s),g=i(a,d),h=bk(t,s,d);return qw(t,g.element,h),g},Sh=(t,s,a)=>wh(t,s,(i,d)=>Ec(t,d,i,a)),Kw=(t,s)=>wh(t,s,(a,i)=>{const d=Ou(t,i);return qw(t,a,d),a}),Jv=(t,s)=>{const a=No(t),i=No(s),d=Et(i,a),g=Ca(t,(h,C)=>!_n(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},Dr=(t,s)=>{const{class:a,style:i,...d}=$_(s),{toSet:g,toRemove:h}=Jv(t.attributes,d),C=()=>{Qe(h,J=>$o(s,J)),jC(s,g)},w=ur(s),{toSet:E,toRemove:T}=Jv(t.styles,w),R=()=>{Qe(T,J=>gn(s,J)),xa(s,E)},B=J_(s),P=Et(B,t.classes),F=Et(t.classes,B),U=()=>{Of(s,F),Da(s,P)},oe=J=>{Pf(s,J)},W=()=>{const J=t.domChildren;Kw(s,J)},ee=()=>{const J=s,ye=t.value.getOrUndefined();ye!==ie(J)&&bl(J,ye??"")};return C(),U(),R(),t.innerHtml.fold(W,oe),ee(),s},W1=t=>{const s=ne.fromTag(t.tag);jC(s,t.attributes),Of(s,t.classes),xa(s,t.styles),t.innerHtml.each(i=>Pf(s,i));const a=t.domChildren;return Mu(s,a),t.value.each(i=>{bl(s,i)}),s},Yw=(t,s)=>{try{const a=Dr(t,s);return _.some(a)}catch{return _.none()}},vk=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Xw=(t,s)=>{const a=d=>Fc(d)===t.tag&&!vk(t)&&!Fi(d),i=s.filter(a).bind(d=>Yw(t,d)).getOrThunk(()=>W1(t));return vh(i,t.uid),i},yk=t=>{const s=Xe(t,"behaviours").getOr({});return fe(No(s),a=>{const i=s[a];return St(i)?[i.me]:[]})},Jw=(t,s)=>mk(t,s),Ck=t=>{const s=yk(t);return Jw(t,s)},wk=(t,s,a)=>{const i=Yu(t),d=hm(t),g={"alloy.base.modification":d},h=s.length>0?z1(a,g,s,i):d;return Ow(i,h)},Qw=(t,s,a)=>{const i={"alloy.base.behaviour":Xv(t)};return U1(a,t.eventOrder,s,i).getOrDie()},zf=(t,s)=>{const a=()=>J,i=pt(dk),d=_e(Gw(t)),g=Ck(t),h=fk(g),C=gk(g),w=wk(d,h,C),E=Xw(w,s),T=Qw(d,h,C),R=pt(d.components),B=ye=>{i.set(ye)},P=()=>{i.set(pl(a))},F=()=>{const ye=Hc(E),ce=fe(ye,Ae=>i.get().getByDom(Ae).fold(()=>[],Wo));R.set(ce)},U=ye=>{const ce=C;return(Ye(ce[ye.name()])?ce[ye.name()]:()=>{throw new Error("Could not find "+ye.name()+" in "+JSON.stringify(t,null,2))})()},oe=ye=>Ye(C[ye.name()]),W=()=>d.apis,ee=ye=>C[ye]().map(ce=>ce.state.readState()).getOr("not enabled"),J={uid:t.uid,getSystem:i.get,config:U,hasConfigured:oe,spec:t,readState:ee,getApis:W,connect:B,disconnect:P,element:E,syncComponents:F,components:R.get,events:T};return J},Sk=(t,s)=>{const a=Xe(t,"components").getOr([]);return s.fold(()=>xe(a,hr),i=>xe(a,(d,g)=>j1(d,Ou(i,g))))},eS=(t,s)=>{const{events:a,...i}=zD(t),d=Sk(i,s),g={...i,events:{...ik,...a},components:d};return Ut.value(zf(g,s))},Ho=t=>{const s=ne.fromText(t);return Z1({element:s})},Z1=t=>{const s=Wr("external.component",Ur([be("element"),hn("uid")]),t),a=pt(pl()),i=C=>{a.set(C)},d=()=>{a.set(pl(()=>h))},g=s.uid.getOrThunk(()=>gm("external"));vh(s.element,g);const h={uid:g,getSystem:a.get,config:_.none,hasConfigured:$n,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:q("No state"),syncComponents:Z,components:q([]),events:{}};return Uw(h)},tS=gm,nS=t=>_n(t,"uid"),j1=(t,s)=>Ww(t).getOrThunk(()=>{const a=nS(t)?t:{uid:tS(""),...t};return eS(a,s).getOrDie()}),hr=t=>j1(t,_.none()),Mr=Uw;var oS=(t,s,a,i,d)=>t(a,i)?_.some(a):Ye(d)&&d(a)?_.none():s(a,i,d);const sS=(t,s,a)=>{let i=t.dom;const d=Ye(a)?a:$n;for(;i.parentNode;){i=i.parentNode;const g=ne.fromDom(i);if(s(g))return _.some(g);if(d(g))break}return _.none()},Qv=(t,s,a)=>oS((d,g)=>g(d),sS,t,s,a),rS=(t,s)=>{const a=t.dom;return a.parentNode?aS(ne.fromDom(a.parentNode),i=>!Fn(t,i)&&s(i)):_.none()},aS=(t,s)=>{const a=d=>s(ne.fromDom(d));return $t(t.dom.childNodes,a).map(ne.fromDom)},ey=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ne.fromDom(i.childNodes[d]);if(s(g))return _.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return _.none()};return a(t.dom)},ty=(t,s,a)=>Qv(t,s,a).isSome(),G1=t=>j0(t),Ql=(t,s,a)=>sS(t,i=>ca(i,s),a),qr=(t,s)=>rS(t,a=>ca(a,s)),ny=(t,s)=>aS(t,a=>ca(a,s)),xn=(t,s)=>j0(s,t),Li=(t,s,a)=>oS((d,g)=>ca(d,g),Ql,t,s,a),xh="aria-controls",cS=t=>Qv(t,a=>{if(!jn(a))return!1;const i=To(a,"id");return i!==void 0&&i.indexOf(xh)>-1}).bind(a=>{const i=To(a,"id"),d=Eo(a);return xn(d,`[${xh}="${i}"]`)}),q1=()=>{const t=qe(xh);return{id:t,link:i=>{Ue(i,xh,t)},unlink:i=>{$o(i,xh)}}},K1=(t,s)=>cS(s).exists(a=>Xu(t,a)),Xu=(t,s)=>ty(s,a=>Fn(a,t.element),$n)||K1(t,s),Zs=(t,s,a,i,d,g,h,C=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Ju=Jc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),oy=(t,s,a,i,d,g,h,C,w)=>t.fold(s,a,i,d,g,h,C,w),iS=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),xk=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Vf=Ju.southeast,sy=Ju.southwest,ry=Ju.northeast,ay=Ju.northwest,cy=Ju.south,et=Ju.north,Eh=Ju.east,iy=Ju.west,Uf=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},ti=(t,s,a)=>Math.min(Math.max(t,s),a),Ek=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},js=(t,s)=>Bd(["left","right","top","bottom"],a=>Xe(s,a).map(i=>Ek(t,i))),Tk=(t,s,a)=>{const i=(w,E)=>s[w].map(T=>{const R=w==="top"||w==="bottom",B=R?a.top:a.left,F=(w==="left"||w==="top"?Math.max:Math.min)(T,E)+B;return R?ti(F,t.y,t.bottom):ti(F,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),C=i("bottom",t.bottom);return ko(d,g,h-d,C-g)},Qu="layout",ly=t=>t.x,lS=(t,s)=>t.x+t.width/2-s.width/2,pr=(t,s)=>t.x+t.width-s.width,ed=(t,s)=>t.y-s.height,Y1=t=>t.y+t.height,td=(t,s)=>t.y+t.height/2-s.height/2,_k=t=>t.x+t.width,kk=(t,s)=>t.x-s.width,ms=(t,s,a)=>Zs(ly(t),Y1(t),a.southeast(),Vf(),"southeast",js(t,{left:1,top:3}),Qu),ss=(t,s,a)=>Zs(pr(t,s),Y1(t),a.southwest(),sy(),"southwest",js(t,{right:0,top:3}),Qu),fs=(t,s,a)=>Zs(ly(t),ed(t,s),a.northeast(),ry(),"northeast",js(t,{left:1,bottom:2}),Qu),Mn=(t,s,a)=>Zs(pr(t,s),ed(t,s),a.northwest(),ay(),"northwest",js(t,{right:0,bottom:2}),Qu),xs=(t,s,a)=>Zs(lS(t,s),ed(t,s),a.north(),et(),"north",js(t,{bottom:2}),Qu),rs=(t,s,a)=>Zs(lS(t,s),Y1(t),a.south(),cy(),"south",js(t,{top:3}),Qu),uy=(t,s,a)=>Zs(_k(t),td(t,s),a.east(),Eh(),"east",js(t,{left:0}),Qu),X1=(t,s,a)=>Zs(kk(t,s),td(t,s),a.west(),iy(),"west",js(t,{right:1}),Qu),dy=()=>[ms,ss,fs,Mn,rs,xs,uy,X1],uS=()=>[ss,ms,Mn,fs,rs,xs,uy,X1],dS=()=>[fs,Mn,ms,ss,xs,rs],J1=()=>[Mn,fs,ss,ms,xs,rs],Q1=()=>[ms,ss,fs,Mn,rs,xs],pm=()=>[ss,ms,Mn,fs,rs,xs],my=(t,s)=>s.universal?t:lo(t,a=>po(s.channels,a));var bm=Object.freeze({__proto__:null,events:t=>Gn([ve(Cc(),(s,a)=>{const i=t.channels,d=No(i),g=a,h=my(d,g);Qe(h,C=>{const w=i[C],E=w.schema,T=Wr("channel["+C+`] data
Receiver: `+Ma(s.element),E,g.data);w.onReceive(s,T)})})])}),Ok=[vn("channels",Ei(Ut.value,Ur([xc("onReceive"),te("schema",qc())])))];const fa=Us({fields:Ok,name:"receiving",active:bm});var Ak=Object.freeze({__proto__:null,exhibit:(t,s)=>Oa({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Ya=(t,s=!1)=>t.dom.focus({preventScroll:s}),Th=t=>t.dom.blur(),_h=t=>{const s=Eo(t).dom;return t.dom===s.activeElement},Hi=(t=xi())=>_.from(t.dom.activeElement).map(ne.fromDom),Kr=t=>Hi(Eo(t)).filter(s=>t.dom.contains(s.dom)),nd=(t,s)=>{const a=Eo(s),i=Hi(a).bind(g=>{const h=C=>Fn(g,C);return h(s)?_.some(s):ey(s,h)}),d=t(s);return i.each(g=>{Hi(a).filter(h=>Fn(h,g)).fold(()=>{Ya(g)},Z)}),d},fy=Jc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),eb=(t,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,w=h.y-i,E=h.width,T=h.height,R=d-(C+E),B=g-(w+T),P=_.some(C),F=_.some(w),U=_.some(R),oe=_.some(B),W=_.none();return oy(s.direction,()=>Ds(t,P,F,W,W),()=>Ds(t,W,F,U,W),()=>Ds(t,P,W,W,oe),()=>Ds(t,W,W,U,oe),()=>Ds(t,P,F,W,W),()=>Ds(t,P,W,W,oe),()=>Ds(t,P,F,W,W),()=>Ds(t,W,F,U,W))},mS=(t,s)=>t.fold(()=>{const a=s.rect;return Ds("absolute",_.some(a.x),_.some(a.y),_.none(),_.none())},(a,i,d,g)=>eb("absolute",s,a,i,d,g),(a,i,d,g)=>eb("fixed",s,a,i,d,g)),vm=(t,s)=>{const a=Dt(nv,s),i=t.fold(a,a,()=>{const h=Vr();return nv(s).translate(-h.left,-h.top)}),d=Ul(s),g=Ru(s);return ko(i.left,i.top,d,g)},gy=(t,s)=>s.fold(()=>t.fold(zs,zs,ko),a=>t.fold(q(a),q(a),()=>{const i=hy(t,a.x,a.y);return ko(i.left,i.top,a.width,a.height)})),hy=(t,s,a)=>{const i=_o(s,a),d=()=>{const g=Vr();return i.translate(-g.left,-g.top)};return t.fold(q(i),q(i),d)},fS=(t,s,a,i)=>t.fold(s,a,i);fy.none;const gS=fy.relative,kh=fy.fixed,ym=(t,s)=>({anchorBox:t,origin:s}),py=(t,s)=>ym(t,s),by="data-alloy-placement",hS=(t,s)=>{Ue(t,by,s)},pS=t=>Xs(t,by),Rk=t=>$o(t,by),tb=Jc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),bS=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:w,bottom:E,width:T,height:R}=t,B=h>=a&&h<=d,P=C>=i&&C<=g,F=B&&P,U=w<=d&&w>=a,oe=E<=g&&E>=i,W=U&&oe,ee=Math.min(T,h>=a?d-h:w-a),J=Math.min(R,C>=i?g-C:E-i);return{originInBounds:F,sizeInBounds:W,visibleW:ee,visibleH:J}},Dk=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:w,height:E}=t,T=Math.max(a,d-w),R=Math.max(i,g-E),B=ti(h,a,T),P=ti(C,i,R),F=Math.min(B+w,d)-B,U=Math.min(P+E,g)-P;return ko(B,P,F,U)},vS=(t,s,a)=>{const i=q(s.bottom-a.y),d=q(a.bottom-s.y),g=iS(t,d,d,i),h=q(s.right-a.x),C=q(a.right-s.x);return{maxWidth:xk(t,C,C,h),maxHeight:g}},Oh=(t,s,a,i)=>{const d=t.bubble,g=d.offset,h=Tk(i,t.restriction,g),C=t.x+g.left,w=t.y+g.top,E=ko(C,w,s,a),{originInBounds:T,sizeInBounds:R,visibleW:B,visibleH:P}=bS(E,h),F=T&&R,U=F?E:Dk(E,h),oe=U.width>0&&U.height>0,{maxWidth:W,maxHeight:ee}=vS(t.direction,U,i),J={rect:U,maxHeight:ee,maxWidth:W,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return F||t.alwaysFit?tb.fit(J):tb.nofit(J,B,P,oe)},Mk=(t,s,a,i,d,g)=>{const h=i.width,C=i.height,w=(T,R,B,P,F)=>{const U=T(a,i,d,t,g),oe=Oh(U,h,C,g);return oe.fold(q(oe),(W,ee,J,ye)=>(F===ye?J>P||ee>B:!F&&ye)?oe:tb.nofit(R,B,P,F))};return bo(s,(T,R)=>{const B=Dt(w,R);return T.fold(q(T),B)},tb.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Vf(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(gt,gt)},yS=ht,Yr=(t,s,a)=>qg(t,s,yS,a),vy=(t,s,a)=>ev(t,s,yS,a),yy=QC,Cy=["top","bottom","right","left"],nb="data-alloy-transition-timer",Bk=(t,s)=>Y_(t,s.classes),Nk=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),ob=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return Lr(s,(i,d)=>{const g=t[d].map(a),h=i.map(a);return!Vp(g,h)}).isSome()},CS=t=>{const s=g=>{const C=Zo(t,g).split(/\s*,\s*/);return lo(C,Va)},a=g=>{if(Yt(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return tl(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return bo(d,(g,h,C)=>{const w=a(i[C])+a(h);return Math.max(g,w)},0)},wy=(t,s)=>{const a=er(),i=er();let d;const g=E=>{var T;const R=(T=E.raw.pseudoElement)!==null&&T!==void 0?T:"";return Fn(E.target,t)&&Mo(R)&&po(Cy,E.raw.propertyName)},h=E=>{if(dn(E)||g(E)){a.clear(),i.clear();const T=E==null?void 0:E.raw.type;(dn(T)||T===Ai())&&(clearTimeout(d),$o(t,nb),Da(t,s.classes))}},C=Yr(t,Sw(),E=>{g(E)&&(C.unbind(),a.set(Yr(t,Ai(),h)),i.set(Yr(t,ww(),h)))}),w=CS(t);requestAnimationFrame(()=>{d=setTimeout(h,w+17),Ue(t,nb,d)})},Sy=(t,s)=>{Of(t,s.classes),Xs(t,nb).each(a=>{clearTimeout(parseInt(a,10)),$o(t,nb)}),wy(t,s)},Ah=(t,s,a,i,d,g)=>{const h=Nk(i,d,g);if(h||Bk(t,i)){It(t,"position",a.position);const C=vm(s,t),w=mS(s,{...d,rect:C}),E=Bd(Cy,T=>w[T]);ob(a,E)&&(Me(t,E),h&&Sy(t,i),Vl(t))}else Da(t,i.classes)},xy=t=>({width:Ul(t),height:Ru(t)}),wS=(t,s,a,i)=>{gn(s,"max-height"),gn(s,"max-width");const d=xy(s);return Mk(s,i.preference,t,d,a,i.bounds)},SS=(t,s)=>{const a=s.classes;Da(t,a.off),Of(t,a.on)},xS=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},Pk=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},ES=(t,s,a)=>{const i=mS(a.origin,s);a.transition.each(d=>{Ah(t,a.origin,i,d,s,a.lastPlacement)}),mh(t,i)},TS=(t,s)=>{hS(t,s.placement)},_S=(t,s)=>{J0(t,Math.floor(s))},sb=q((t,s)=>{_S(t,s),xa(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Wf=q((t,s)=>{_S(t,s)}),kS=(t,s,a)=>t[s]===void 0?a:t[s],$k=(t,s,a,i,d,g,h,C)=>{const w=kS(h,"maxHeightFunction",sb()),E=kS(h,"maxWidthFunction",Z),T=t.anchorBox,R=t.origin,B={bounds:gy(R,g),origin:R,preference:i,maxHeightFunction:w,maxWidthFunction:E,lastPlacement:d,transition:C};return rb(T,s,a,B)},rb=(t,s,a,i)=>{const d=wS(t,s,a,i);return ES(s,d,i),TS(s,d),SS(s,d),xS(s,d,i),Pk(s,d,i),{layout:d.layout,placement:d.placement}},Ik=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ni=(t,s,a,i=1)=>{const d=t*i,g=s*i,h=w=>Xe(a,w).getOr([]),C=(w,E,T)=>{const R=Et(Ik,T);return{offset:_o(w,E),classesOn:fe(T,h),classesOff:fe(R,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},ab=()=>ni(0,0,{}),cb=gt,ib=(t,s)=>a=>Xr(a)==="rtl"?s:t,Xr=t=>Zo(t,"direction")==="rtl"?"rtl":"ltr";var od;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(od||(od={}));const sd="data-alloy-vertical-dir",Fk=t=>ty(t,s=>jn(s)&&To(s,"data-alloy-vertical-dir")===od.BottomToTop),rd=()=>ao("layouts",[be("onLtr"),be("onRtl"),hn("onBottomLtr"),hn("onBottomRtl")]),Rh=(t,s,a,i,d,g,h)=>{const C=h.map(Fk).getOr(!1),w=s.layouts.map(P=>P.onLtr(t)),E=s.layouts.map(P=>P.onRtl(t)),T=C?s.layouts.bind(P=>P.onBottomLtr.map(F=>F(t))).or(w).getOr(d):w.getOr(a),R=C?s.layouts.bind(P=>P.onBottomRtl.map(F=>F(t))).or(E).getOr(g):E.getOr(i);return ib(T,R)(t)},Lk=(t,s,a)=>{const i=s.hotspot,d=vm(a,i.element),g=Rh(t.element,s,Q1(),pm(),dS(),J1(),_.some(s.hotspot.element));return _.some(cb({anchorBox:d,bubble:s.bubble.getOr(ab()),overrides:s.overrides,layouts:g}))};var Hk=[be("hotspot"),hn("bubble"),te("overrides",{}),rd(),Kn("placement",Lk)];const OS=(t,s,a)=>{const i=hy(a,s.x,s.y),d=ko(i.left,i.top,s.width,s.height),g=Rh(t.element,s,dy(),uS(),dy(),uS(),_.none());return _.some(cb({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var lb=[be("x"),be("y"),te("height",0),te("width",0),te("bubble",ab()),te("overrides",{}),rd(),Kn("placement",OS)];const ub=Jc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),zk=t=>t.fold(gt,(s,a,i)=>s.translate(-a,-i)),Dh=t=>t.fold(gt,gt),Ey=t=>bo(t,(s,a)=>s.translate(a.left,a.top),_o(0,0)),Vk=t=>{const s=xe(t,zk);return Ey(s)},Ty=t=>{const s=xe(t,Dh);return Ey(s)},_y=ub.screen,db=ub.absolute,Uk=(t,s,a)=>{const i=Ld(a.root).dom,d=g=>{const h=Wa(g),C=Wa(t.element);return Fn(h,C)};return _.from(i.frameElement).map(ne.fromDom).filter(d).map(ia)},Cm=(t,s,a)=>{const i=Wa(t.element),d=Vr(i),g=Uk(t,s,a).getOr(d);return db(g,d.left,d.top)},AS=(t,s,a,i)=>{const d=_y(_o(t,s));return _.some(pf(d,a,i))},ky=(t,s,a,i,d)=>t.map(g=>{const h=[s,g.point],C=fS(i,()=>Ty(h),()=>Ty(h),()=>Vk(h)),w=ov(C.left,C.top,g.width,g.height),E=a.showAbove?dS():Q1(),T=a.showAbove?J1():pm(),R=Rh(d,a,E,T,E,T,_.none());return cb({anchorBox:w,bubble:a.bubble.getOr(ab()),overrides:a.overrides,layouts:R})}),RS=(t,s,a)=>{const i=Cm(t,a,s);return s.node.filter(Hs).bind(d=>{const g=d.dom.getBoundingClientRect(),h=AS(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return ky(h,i,s,a,C)})};var mb=[be("node"),be("root"),hn("bubble"),rd(),te("overrides",{}),te("showAbove",!1),Kn("placement",RS)];const Wk="\uFEFF",ad=" ",Zf={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},fb=Jc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),jf=(t,s,a,i)=>t.fold(s,a,i),Gf=t=>t.fold(gt,gt,gt),Zk=fb.before,DS=fb.on,jk=fb.after,gb={before:Zk,on:DS,after:jk,cata:jf,getStart:Gf},eu=Jc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Oy=t=>eu.exact(t.start,t.soffset,t.finish,t.foffset),Ay=t=>t.match({domRange:s=>ne.fromDom(s.startContainer),relative:(s,a)=>gb.getStart(s),exact:(s,a,i,d)=>s}),Gk=eu.domRange,Ry=eu.relative,MS=eu.exact,BS=t=>{const s=Ay(t);return Ld(s)},NS=Zf.create,qf={domRange:Gk,relative:Ry,exact:MS,exactFromRange:Oy,getWin:BS,range:NS},hb=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},wm=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},tu=(t,s,a)=>{const i=t.document.createRange();return hb(i,s),wm(i,a),i},Mh=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},Kf=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),qk=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?_.some(a).map(Kf):_.none()},zi=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?_.some(s).map(Kf):_.none()},Xa=Jc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pb=(t,s,a)=>s(ne.fromDom(a.startContainer),a.startOffset,ne.fromDom(a.endContainer),a.endOffset),Kk=(t,s)=>s.match({domRange:a=>({ltr:q(a),rtl:_.none}),relative:(a,i)=>({ltr:Vc(()=>tu(t,a,i)),rtl:Vc(()=>_.some(tu(t,i,a)))}),exact:(a,i,d,g)=>({ltr:Vc(()=>Mh(t,a,i,d,g)),rtl:Vc(()=>_.some(Mh(t,d,g,a,i)))})}),WD=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Xa.rtl(ne.fromDom(d.endContainer),d.endOffset,ne.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>pb(t,Xa.ltr,a)):pb(t,Xa.ltr,a)},Sm=(t,s)=>{const a=Kk(t,s);return WD(t,a)},Yf=(t,s)=>Sm(t,s).match({ltr:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});Xa.ltr,Xa.rtl;const Xf=(t,s,a)=>lo(VC(t,a),s),br=(t,s)=>B_(s,t),bb=(t,s,a,i)=>{const g=Wa(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},xm=(t,s,a,i)=>{const d=bb(t,s,a,i),g=Fn(t,a)&&s===i;return d.collapsed&&!g},vb=t=>_.from(t.getSelection()),PS=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return _.some(Zf.create(ne.fromDom(s.startContainer),s.startOffset,ne.fromDom(a.endContainer),a.endOffset))}else return _.none()},Dy=t=>{if(t.anchorNode===null||t.focusNode===null)return PS(t);{const s=ne.fromDom(t.anchorNode),a=ne.fromDom(t.focusNode);return xm(s,t.anchorOffset,a,t.focusOffset)?_.some(Zf.create(s,t.anchorOffset,a,t.focusOffset)):PS(t)}},yb=t=>vb(t).filter(s=>s.rangeCount>0).bind(Dy),Ms=(t,s)=>{const a=Yf(t,s);return qk(a)},Cb=(t,s)=>{const a=Yf(t,s);return zi(a)},My=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?_.from(g.dom.nodeValue):_.none();return{get:a,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(Ua,"text"),By=t=>My.get(t),nu=(t,s)=>({element:t,offset:s}),$S=(t,s)=>{const a=Hc(t);if(a.length===0)return nu(t,s);if(s<a.length)return nu(a[s],0);{const i=a[a.length-1],d=Ua(i)?By(i).length:Hc(i).length;return nu(i,d)}},cd=(t,s)=>Ua(t)?nu(t,s):$S(t,s),wb=t=>t.foffset!==void 0,Sb=(t,s)=>s.getSelection.getOrThunk(()=>()=>yb(t))().map(i=>{if(wb(i)){const d=cd(i.start,i.soffset),g=cd(i.finish,i.foffset);return qf.range(d.element,d.offset,g.element,g.offset)}else return i}),Ny=(t,s,a)=>{const i=Ld(s.root).dom,d=Cm(t,a,s),g=Sb(i,s).bind(w=>{if(wb(w))return Cb(i,qf.exactFromRange(w)).orThunk(()=>{const T=ne.fromText(Wk);Wc(w.start,T);const R=Ms(i,qf.exact(T,0,T,1));return Zc(T),R}).bind(T=>AS(T.left,T.top,T.width,T.height));{const E=Po(w,R=>R.dom.getBoundingClientRect()),T={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return AS(T.left,T.top,T.right-T.left,T.bottom-T.top)}}),C=Sb(i,s).bind(w=>wb(w)?jn(w.start)?_.some(w.start):vi(w.start):_.some(w.firstCell)).getOr(t.element);return ky(g,d,s,a,C)};var Em=[hn("getSelection"),be("root"),hn("bubble"),rd(),te("overrides",{}),te("showAbove",!1),Kn("placement",Ny)];const Jf="link-layout",nr=t=>t.x+t.width,IS=(t,s)=>t.x-s.width,Py=(t,s)=>t.y-s.height+t.height,$y=t=>t.y,FS=(t,s,a)=>Zs(nr(t),$y(t),a.southeast(),Vf(),"southeast",js(t,{left:0,top:2}),Jf),Iy=(t,s,a)=>Zs(IS(t,s),$y(t),a.southwest(),sy(),"southwest",js(t,{right:1,top:2}),Jf),LS=(t,s,a)=>Zs(nr(t),Py(t,s),a.northeast(),ry(),"northeast",js(t,{left:0,bottom:3}),Jf),HS=(t,s,a)=>Zs(IS(t,s),Py(t,s),a.northwest(),ay(),"northwest",js(t,{right:1,bottom:3}),Jf),Ja=()=>[FS,Iy,LS,HS],ou=()=>[Iy,FS,HS,LS],zS=(t,s,a)=>{const i=vm(a,s.item.element),d=Rh(t.element,s,Ja(),ou(),Ja(),ou(),_.none());return _.some(cb({anchorBox:i,bubble:ab(),overrides:s.overrides,layouts:d}))};var Tm=[be("item"),rd(),te("overrides",{}),Kn("placement",zS)],Br=As("type",{selection:Em,node:mb,hotspot:Hk,submenu:Tm,makeshift:lb});const Pa=[Ka("classes",je),Yc("mode","all",["all","layout","placement"])],Nr=[te("useFixed",$n),hn("getBounds")],Qa=[vn("anchor",Br),ao("transition",Pa)],xb=()=>{const t=document.documentElement;return kh(0,0,t.clientWidth,t.clientHeight)},ec=t=>{const s=ia(t.element),a=t.element.dom.getBoundingClientRect();return gS(s.left,s.top,a.width,a.height)},_m=(t,s,a,i,d,g)=>{const h=py(s.anchorBox,t);return $k(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},Yk=(t,s,a,i,d)=>{const g=_.none();VS(t,s,a,i,d,g)},VS=(t,s,a,i,d,g)=>{const h=Wr("placement.info",_t(Qa),d),C=h.anchor,w=i.element,E=a.get(i.uid);nd(()=>{It(w,"position","fixed");const T=Js(w,"visibility");It(w,"visibility","hidden");const R=s.useFixed()?xb():ec(t);C.placement(t,C,R).each(B=>{const P=g.orThunk(()=>s.getBounds.map(Ls)),F=_m(R,B,P,i,E,h.transition);a.set(i.uid,F)}),T.fold(()=>{gn(w,"visibility")},B=>{It(w,"visibility",B)}),Js(w,"left").isNone()&&Js(w,"top").isNone()&&Js(w,"right").isNone()&&Js(w,"bottom").isNone()&&za(Js(w,"position"),"fixed")&&gn(w,"position")},w)};var WS=Object.freeze({__proto__:null,position:Yk,positionWithinBounds:VS,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;Qe(["position","left","right","top","bottom"],g=>gn(d,g)),Rk(d),a.clear(i.uid)}}),Ly=Object.freeze({__proto__:null,init:()=>{let t={};return Aa({readState:()=>t,clear:d=>{St(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Xe(t,d)})}});const Gs=Us({fields:Nr,name:"positioning",active:Ak,apis:WS,state:Ly}),Hy=t=>t.getSystem().isConnected(),id=t=>{Zt(t,Sc());const s=t.components();Qe(s,id)},Qf=t=>{const s=t.components();Qe(s,Qf),Zt(t,Zr())},zy=(t,s)=>{t.getSystem().addToWorld(s),Hs(t.element)&&Qf(s)},Eb=t=>{id(t),t.getSystem().removeFromWorld(t)},Bh=(t,s)=>{hc(t.element,s.element)},Vy=t=>{Qe(t.components(),s=>Zc(s.element)),hf(t.element),t.syncComponents()},eg=(t,s,a)=>{const i=t.components();Vy(t);const d=a(s),g=Et(i,d);Qe(g,h=>{id(h),t.getSystem().removeFromWorld(h)}),Qe(d,h=>{Hy(h)?Bh(t,h):(t.getSystem().addToWorld(h),Bh(t,h),Hs(t.element)&&Qf(h))}),t.syncComponents()},Uy=(t,s,a)=>{const i=t.components(),d=fe(s,C=>Ww(C).toArray());Qe(i,C=>{po(d,C)||Eb(C)});const g=a(s),h=Et(i,g);Qe(h,C=>{Hy(C)&&Eb(C)}),Qe(g,C=>{Hy(C)||zy(t,C)}),t.syncComponents()},vl=(t,s)=>{km(t,s,hc)},km=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Hs(t.element)&&Qf(s),t.syncComponents()},ZS=t=>{id(t),Zc(t.element),t.getSystem().removeFromWorld(t)},su=t=>{const s=Lc(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());ZS(t),s.each(a=>{a.syncComponents()})},tc=t=>{const s=t.components();Qe(s,ZS),hf(t.element),t.syncComponents()},jS=(t,s)=>{Om(t,s,hc)},yl=(t,s)=>{Om(t,s,gf)},Om=(t,s,a)=>{a(t,s.element);const i=Hc(s.element);Qe(i,d=>{s.getByDom(d).each(Qf)})},Wy=t=>{const s=Hc(t.element);Qe(s,a=>{t.getByDom(a).each(id)}),Zc(t.element)},Tb=(t,s,a,i)=>{a.get().each(h=>{tc(t)});const d=s.getAttachPoint(t);vl(d,t);const g=t.getSystem().build(i);return vl(t,g),a.set(g),g},GS=(t,s,a,i)=>{const d=Tb(t,s,a,i);return s.onOpen(t,d),d},Jk=(t,s,a,i)=>a.get().map(()=>Tb(t,s,a,i)),Qk=(t,s,a,i,d)=>{ng(t,s),GS(t,s,a,i),d(),_b(t,s)},qS=(t,s,a)=>{a.get().each(i=>{tc(t),su(t),s.onClose(t,i),a.clear()})},ld=(t,s,a)=>a.isOpen(),tg=(t,s,a,i)=>ld(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),Nh=(t,s,a)=>a.get(),e4=(t,s,a,i)=>{Js(t.element,s).fold(()=>{$o(t.element,a)},d=>{Ue(t.element,a,d)}),It(t.element,s,i)},t4=(t,s,a)=>{Xs(t.element,a).fold(()=>gn(t.element,s),i=>It(t.element,s,i))},ng=(t,s,a)=>{const i=s.getAttachPoint(t);It(t.element,"position",Gs.getMode(i)),e4(t,"visibility",s.cloakVisibilityAttr,"hidden")},Zy=t=>va(["top","left","right","bottom"],s=>Js(t,s).isSome()),_b=(t,s,a)=>{Zy(t.element)||gn(t.element,"position"),t4(t,"visibility",s.cloakVisibilityAttr)};var jy=Object.freeze({__proto__:null,cloak:ng,decloak:_b,open:GS,openWhileCloaked:Qk,close:qS,isOpen:ld,isPartOf:tg,getState:Nh,setContent:Jk}),og=Object.freeze({__proto__:null,events:(t,s)=>Gn([ve(rh(),(a,i)=>{qS(a,t,s)})])}),qy=[rn("onOpen"),rn("onClose"),be("isPartOf"),be("getAttachPoint"),te("cloakVisibilityAttr","data-precloak-visibility")],Ky=Object.freeze({__proto__:null,init:()=>{const t=Vn(),s=q("not-implemented");return Aa({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ln=Us({fields:qy,name:"sandboxing",active:og,apis:jy,state:Ky}),Cl=q("dismiss.popups"),Am=q("reposition.popups"),Ph=q("mouse.released"),Yy=Ur([te("isExtraPart",$n),ao("fireEventInstead",[te("event",zu())])]),ru=t=>{const s=Wr("Dismissal",Yy,t);return{[Cl()]:{schema:Ur([be("target")]),onReceive:(a,i)=>{ln.isOpen(a)&&(ln.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>ln.close(a),g=>Zt(a,g.event)))}}}},Xy=Ur([ao("fireEventInstead",[te("event",Sv())]),qa("doReposition")]),kb=t=>{const s=Wr("Reposition",Xy,t);return{[Am()]:{onReceive:a=>{ln.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Zt(a,i.event))}}}},Jy=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Qy=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var Ab=Object.freeze({__proto__:null,onLoad:Jy,onUnload:Qy,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),rg=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Jn((i,d)=>{Jy(i,t,s)}),ml((i,d)=>{Qy(i,t,s)})]:[Av(t,s,Jy)];return Gn(a)}});const Rb=()=>{const t=pt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Aa({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},n4=()=>Aa({readState:Z}),Db=()=>{const t=pt({}),s=pt({});return Aa({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>Xe(t.get(),h).orThunk(()=>Xe(s.get(),h)),update:h=>{const C=t.get(),w=s.get(),E={},T={};Qe(h,R=>{E[R.value]=R,Xe(R,"meta").each(B=>{Xe(B,"text").each(P=>{T[P]=R})})}),t.set({...C,...E}),s.set({...w,...T})},clear:()=>{t.set({}),s.set({})}})};var o4=Object.freeze({__proto__:null,memory:Rb,dataset:Db,manual:n4,init:t=>t.store.manager.state(t)});const $h=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Tc=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},Bs=(t,s,a)=>{s.store.initialValue.each(d=>{$h(t,s,a,d)})},s4=(t,s,a)=>{a.clear()};var Vi=[hn("initialValue"),be("getFallbackEntry"),be("getDataKey"),be("setValue"),Kn("manager",{setValue:$h,getValue:Tc,onLoad:Bs,onUnload:s4,state:Db})];const r4=(t,s,a)=>s.store.getValue(t),YS=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Ih=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var ag=[be("getValue"),te("setValue",Z),hn("initialValue"),Kn("manager",{setValue:YS,getValue:r4,onLoad:Ih,onUnload:Z,state:Rr.init})];const XS=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},JS=(t,s,a)=>a.get(),ZD=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},jD=(t,s,a)=>{a.clear()};var QS=[hn("initialValue"),Kn("manager",{setValue:XS,getValue:JS,onLoad:ZD,onUnload:jD,state:Rb})],ex=[yc("store",{mode:"memory"},As("mode",{memory:QS,manual:ag,dataset:Vi})),rn("onSetValue"),te("resetOnDom",!1)];const Ke=Us({fields:ex,name:"representing",active:rg,apis:Ab,extra:{setValueFrom:(t,s)=>{const a=Ke.getValue(s);Ke.setValue(t,a)}},state:o4}),Ns=(t,s)=>pv(t,{},xe(s,a=>z_(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([bn("dump",gt)])),Fh=t=>t.dump,Ps=(t,s)=>({...Oe(s),...t.dump}),_c={field:Ns,augment:Ps,get:Fh},e2="placeholder",Mm=Jc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Mb=t=>_n(t,"uiType"),ud=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Mm.single(!0,q(a)):Xe(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+No(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),Lh=(t,s,a,i)=>Mb(a)&&a.uiType===e2?ud(t,s,a,i):Mm.single(!1,q(a)),tx=(t,s,a,i)=>Lh(t,s,a,i).fold((g,h)=>{const C=Mb(a)?h(s,a.config,a.validated):h(s),w=Xe(C,"components").getOr([]),E=fe(w,T=>tx(t,s,T,i));return[{...C,components:E}]},(g,h)=>{if(Mb(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(gt)(C)}else return h(s)}),a4=(t,s,a,i)=>fe(a,d=>tx(t,s,d,i)),c4=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:q(t),required:g,used:i,replace:d}},i4=(t,s,a,i)=>{const d=Po(i,(h,C)=>c4(C,h)),g=a4(t,s,a,d);return ks(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},dd=Mm.single,Hh=Mm.multiple,zh=q(e2),Bb=Jc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),$a=te("factory",{sketch:gt}),wl=te("schema",[]),md=be("name"),fd=ws("pname","pname",nn(t=>"<alloy."+qe(t.name)+">"),qc()),l4=bn("schema",()=>[hn("preprocess")]),Nb=te("defaults",q({})),Pb=te("overrides",q({})),u4=_t([$a,wl,md,fd,Nb,Pb]),d4=_t([$a,wl,md,Nb,Pb]),m4=_t([$a,wl,md,fd,Nb,Pb]),f4=_t([$a,l4,md,be("unit"),fd,Nb,Pb]),nx=t=>t.fold(_.some,_.none,_.some,_.some),$b=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},g4=t=>t.fold(gt,gt,gt,gt),Ib=(t,s)=>a=>{const i=Wr("Converting part type",s,a);return t(i)},or=Ib(Bb.required,u4),kc=Ib(Bb.external,d4),nc=Ib(Bb.optional,m4),Fb=Ib(Bb.group,f4),Lb=q("entirety");var ox=Object.freeze({__proto__:null,required:or,external:kc,optional:nc,group:Fb,asNamedPart:nx,name:$b,asCommon:g4,original:Lb});const t2=(t,s,a,i)=>Fo(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),sx=(t,s,a)=>{const i={},d={};return Qe(a,g=>{g.fold(h=>{i[h.pname]=dd(!0,(C,w,E)=>h.factory.sketch(t2(C,h,w,E)))},h=>{const C=s.parts[h.name];d[h.name]=q(h.factory.sketch(t2(s,h,C[Lb()]),C))},h=>{i[h.pname]=dd(!1,(C,w,E)=>h.factory.sketch(t2(C,h,w,E)))},h=>{i[h.pname]=Hh(!0,(C,w,E)=>{const T=C[h.name];return xe(T,R=>h.factory.sketch(Fo(h.defaults(C,R,E),R,h.overrides(C,R))))})})}),{internals:q(i),externals:q(d)}},n2=(t,s)=>{const a={};return Qe(s,i=>{nx(i).each(d=>{const g=rx(t,d.pname);a[d.name]=h=>{const C=Wr("Part: "+d.name+" in "+t,_t(d.schema),h);return{...g,config:h,validated:C}}})}),a},rx=(t,s)=>({uiType:zh(),owner:t,name:s}),ax=(t,s,a)=>({uiType:zh(),owner:t,name:s,config:a,validated:{}}),h4=t=>fe(t,s=>s.fold(_.none,_.some,_.none,_.none).map(a=>jl(a.name,a.schema.concat([zw(Lb())]))).toArray()),p4=t=>xe(t,$b),Hb=(t,s,a)=>sx(t,s,a),o2=(t,s,a)=>i4(_.some(t),s,s.components,a),ke=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Jr=(t,s,a)=>ke(t,s,a).getOrDie("Could not find part: "+a),cx=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return Qe(a,h=>{i[h]=q(g.getByUid(d[h]))}),i},s2=(t,s)=>{const a=t.getSystem();return Po(s.partUids,(i,d)=>q(a.getByUid(i)))},Vh=t=>No(t.partUids),Uh=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return Qe(a,h=>{i[h]=q(g.getByUid(d[h]).getOrDie())}),i},zb=(t,s)=>{const a=p4(s);return Iu(xe(a,i=>({key:i,value:t+"-"+i})))},Wh=t=>ws("partUids","partUids",u1(s=>zb(s.uid,t)),qc());var ix=Object.freeze({__proto__:null,generate:n2,generateOne:ax,schemas:h4,names:p4,substitutes:Hb,components:o2,defaultUids:zb,defaultUidsSchema:Wh,getAllParts:s2,getAllPartNames:Vh,getPart:ke,getPartOrDie:Jr,getParts:cx,getPartsOrDie:Uh});const lx=(t,s)=>(t.length>0?[jl("parts",t)]:[]).concat([be("uid"),te("dom",{}),te("components",[]),zw("originalSpec"),te("debug.sketcher",{})]).concat(s),r2=(t,s,a,i,d)=>{const g=lx(i,d);return Wr(t+" [SpecSchema]",Ur(g.concat(s)),a)},a2=(t,s,a,i)=>{const d=ux(i),g=r2(t,s,d,[],[]);return a(g,d)},cu=(t,s,a,i,d)=>{const g=ux(d),h=h4(a),C=Wh(a),w=r2(t,s,g,h,[C]),E=Hb(t,w,a),T=o2(t,w,E.internals());return i(w,T,g,E.externals())},c2=t=>_n(t,"uid"),ux=t=>c2(t)?t:{...t,uid:gm("uid")},b4=t=>t.uid!==void 0,v4=Ur([be("name"),be("factory"),be("configFields"),te("apis",{}),te("extraApis",{})]),dx=Ur([be("name"),be("factory"),be("configFields"),be("partFields"),te("apis",{}),te("extraApis",{})]),ga=t=>{const s=Wr("Sketcher for "+t.name,v4,t),a=g=>a2(s.name,s.configFields,s.factory,g),i=Po(s.apis,Lf),d=Po(s.extraApis,(g,h)=>_f(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},Pr=t=>{const s=Wr("Sketcher for "+t.name,dx,t),a=h=>cu(s.name,s.configFields,s.partFields,s.factory,h),i=n2(s.name,s.partFields),d=Po(s.apis,Lf),g=Po(s.extraApis,(h,C)=>_f(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},cg=t=>ku("input")(t)&&To(t,"type")!=="radio"||ku("textarea")(t);var y4=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const i2=[be("find")],an=Us({fields:i2,name:"composing",apis:y4}),qD=["input","button","textarea","select"],mx=(t,s,a)=>{(s.disabled()?Vb:jh)(t,s)},fx=(t,s)=>s.useNative===!0&&po(qD,Fc(t.element)),KD=t=>X0(t.element,"disabled"),gd=t=>{Ue(t.element,"disabled","disabled")},Zh=t=>{$o(t.element,"disabled")},C4=t=>To(t.element,"aria-disabled")==="true",w4=t=>{Ue(t.element,"aria-disabled","true")},S4=t=>{Ue(t.element,"aria-disabled","false")},Vb=(t,s,a)=>{s.disableClass.each(d=>{qn(t.element,d)}),(fx(t,s)?gd:w4)(t),s.onDisabled(t)},jh=(t,s,a)=>{s.disableClass.each(d=>{Ao(t.element,d)}),(fx(t,s)?Zh:S4)(t),s.onEnabled(t)},gx=(t,s)=>fx(t,s)?KD(t):C4(t);var ig=Object.freeze({__proto__:null,enable:jh,disable:Vb,isDisabled:gx,onLoad:mx,set:(t,s,a,i)=>{(i?Vb:jh)(t,s)}}),hx=Object.freeze({__proto__:null,exhibit:(t,s)=>Oa({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Gn([_w(wc(),(a,i)=>gx(a,t)),Av(t,s,mx)])}),x4=[Go("disabled",$n),te("useNative",!0),hn("disableClass"),rn("onDisabled"),rn("onEnabled")];const Tt=Us({fields:x4,name:"disabling",active:hx,apis:ig}),l=(t,s,a,i)=>{const d=br(t.element,"."+s.highlightClass);Qe(d,g=>{va(i,C=>Fn(C.element,g))||(Ao(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),Zt(C,om())}))})},m=(t,s,a)=>l(t,s,a,[]),p=(t,s,a,i)=>{H(t,s,a,i)&&(Ao(i.element,s.highlightClass),s.onDehighlight(t,i),Zt(i,om()))},v=(t,s,a,i)=>{l(t,s,a,[i]),H(t,s,a,i)||(qn(i.element,s.highlightClass),s.onHighlight(t,i),Zt(i,Vu()))},S=(t,s,a)=>{Te(t,s).each(i=>{v(t,s,a,i)})},k=(t,s,a)=>{We(t,s).each(i=>{v(t,s,a,i)})},M=(t,s,a,i)=>{se(t,s,a,i).fold(d=>{throw d},d=>{v(t,s,a,d)})},I=(t,s,a,i)=>{const d=Se(t,s);$t(d,i).each(h=>{v(t,s,a,h)})},H=(t,s,a,i)=>Ra(i.element,s.highlightClass),G=(t,s,a)=>xn(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),se=(t,s,a,i)=>{const d=br(t.element,"."+s.itemClass);return _.from(d[i]).fold(()=>Ut.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Te=(t,s,a)=>xn(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),We=(t,s,a)=>{const i=br(t.element,"."+s.itemClass);return(i.length>0?_.some(i[i.length-1]):_.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Le=(t,s,a,i)=>{const d=br(t.element,"."+s.itemClass);return oo(d,h=>Ra(h,s.highlightClass)).bind(h=>{const C=Uf(h,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},Be=(t,s,a)=>Le(t,s,a,-1),ot=(t,s,a)=>Le(t,s,a,1),Se=(t,s,a)=>{const i=br(t.element,"."+s.itemClass);return Pd(xe(i,d=>t.getSystem().getByDom(d).toOptional()))};var Pe=Object.freeze({__proto__:null,dehighlightAll:m,dehighlight:p,highlight:v,highlightFirst:S,highlightLast:k,highlightAt:M,highlightBy:I,isHighlighted:H,getHighlighted:G,getFirst:Te,getLast:We,getPrevious:Be,getNext:ot,getCandidates:Se}),Ct=[be("highlightClass"),be("itemClass"),rn("onHighlight"),rn("onDehighlight")];const ze=Us({fields:Ct,name:"highlighting",apis:Pe}),yn=[8],Bn=[9],kn=[13],qs=[27],as=[32],Sl=[37],hd=[38],pd=[39],En=[40],Qr=(t,s,a)=>{const i=Er(t.slice(0,s)),d=Er(t.slice(s+1));return $t(i.concat(d),a)},ea=(t,s,a)=>{const i=Er(t.slice(0,s));return $t(i,a)},Oc=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return $t(d.concat(i),a)},Ac=(t,s,a)=>{const i=t.slice(s+1);return $t(i,a)},Qt=t=>s=>{const a=s.raw;return po(t,a.which)},zo=t=>s=>Tu(t,a=>a(s)),xl=t=>t.raw.shiftKey===!0,Gh=t=>t.raw.ctrlKey===!0,Ia=he(xl),Ft=(t,s)=>({matches:t,classification:s}),u2=(t,s)=>$t(t,i=>i.matches(s)).map(i=>i.classification),d2=(t,s,a)=>{s.exists(d=>a.exists(g=>Fn(g,d)))||ft(t,nm(),{prevFocus:s,newFocus:a})},Ub=()=>{const t=a=>Kr(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);d2(a,d,g)}}},px=()=>{const t=a=>ze.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(Z,h=>{ze.highlight(a,h)});const g=t(a);d2(a,d,g)}}};var Bm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Bm||(Bm={}));const iu=(t,s,a,i,d)=>{const g=()=>t.concat([te("focusManager",Ub()),yc("focusInside","onFocus",eh(E=>po(["onFocus","onEnterOrSpace","onApi"],E)?Ut.value(E):Ut.error("Invalid value for focusInside"))),Kn("handler",w),Kn("state",s),Kn("sendFocusIn",d)]),h=(E,T,R,B,P)=>{const F=R(E,T,B,P);return u2(F,T.event).bind(U=>U(E,T,B,P))},w={schema:g,processKey:h,toEvents:(E,T)=>{const R=E.focusInside!==Bm.OnFocusMode?_.none():d(E).map(F=>ve(Ri(),(U,oe)=>{F(U,E,T),oe.stop()})),B=(F,U)=>{const oe=Qt(as.concat(kn))(U.event);E.focusInside===Bm.OnEnterOrSpaceMode&&oe&&Fu(F,U)&&d(E).each(W=>{W(F,E,T),U.stop()})},P=[ve(Qc(),(F,U)=>{h(F,U,a,E,T).fold(()=>{B(F,U)},oe=>{U.stop()})}),ve(oh(),(F,U)=>{h(F,U,i,E,T).each(oe=>{U.stop()})})];return Gn(R.toArray().concat(P))}};return w},bx=t=>{const s=[hn("onEscape"),hn("onEnter"),te("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),te("firstTabstop",0),te("useTabstopAt",ht),hn("visibilitySelector")].concat([t]),a=(W,ee)=>{const J=W.visibilitySelector.bind(ye=>Li(ee,ye)).getOr(ee);return vs(J)>0},i=(W,ee)=>{const J=br(W.element,ee.selector),ye=lo(J,ce=>a(ee,ce));return _.from(ye[ee.firstTabstop])},d=(W,ee)=>ee.focusManager.get(W).bind(J=>Li(J,ee.selector)),g=(W,ee)=>a(W,ee)&&W.useTabstopAt(ee),h=(W,ee,J)=>{i(W,ee).each(ye=>{ee.focusManager.set(W,ye)})},C=(W,ee,J,ye,ce)=>ce(ee,J,Ae=>g(ye,Ae)).fold(()=>ye.cyclic?_.some(!0):_.none(),Ae=>(ye.focusManager.set(W,Ae),_.some(!0))),w=(W,ee,J,ye)=>{const ce=br(W.element,J.selector);return d(W,J).bind(Ae=>oo(ce,Dt(Fn,Ae)).bind(pe=>C(W,ce,pe,J,ye)))},E=(W,ee,J)=>{const ye=J.cyclic?Qr:ea;return w(W,ee,J,ye)},T=(W,ee,J)=>{const ye=J.cyclic?Oc:Ac;return w(W,ee,J,ye)},R=W=>Hd(W).bind(jp).exists(ee=>Fn(ee,W)),B=(W,ee,J)=>d(W,J).filter(ye=>!J.useTabstopAt(ye)).bind(ye=>(R(ye)?E:T)(W,ee,J)),P=(W,ee,J)=>J.onEnter.bind(ye=>ye(W,ee)),F=(W,ee,J)=>J.onEscape.bind(ye=>ye(W,ee)),U=q([Ft(zo([xl,Qt(Bn)]),E),Ft(Qt(Bn),T),Ft(zo([Ia,Qt(kn)]),P)]),oe=q([Ft(Qt(qs),F),Ft(Qt(Bn),B)]);return iu(s,Rr.init,U,oe,()=>_.some(h))};var qh=bx(bn("cyclic",$n)),DF=bx(bn("cyclic",ht));const m2=(t,s,a)=>(ih(t,a,wc()),_.some(!0)),Wb=(t,s,a)=>cg(a)&&Qt(as)(s.event)?_.none():m2(t,s,a),Kh=(t,s)=>_.some(!0),E4=[te("execute",Wb),te("useSpace",!1),te("useEnter",!0),te("useControlEnter",!1),te("useDown",!1)],JD=(t,s,a)=>a.execute(t,s,t.element),QD=(t,s,a,i)=>{const d=a.useSpace&&!cg(t.element)?as:[],g=a.useEnter?kn:[],h=a.useDown?En:[],C=d.concat(g).concat(h);return[Ft(Qt(C),JD)].concat(a.useControlEnter?[Ft(zo([Gh,Qt(kn)]),JD)]:[])},MF=(t,s,a,i)=>a.useSpace&&!cg(t.element)?[Ft(Qt(as),Kh)]:[];var eM=iu(E4,Rr.init,QD,MF,()=>_.none());const T4=()=>{const t=Vn();return Aa({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var BF=Object.freeze({__proto__:null,flatgrid:T4,init:t=>t.state(t)});const tM=t=>(s,a,i,d)=>{const g=t(s.element);return f2(g,s,a,i,d)},_4=(t,s)=>{const a=ib(t,s);return tM(a)},k4=(t,s)=>{const a=ib(s,t);return tM(a)},O4=t=>(s,a,i,d)=>f2(t,s,a,i,d),f2=(t,s,a,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),vx=O4,nM=O4,A4=O4,oM=t=>t.offsetWidth<=0&&t.offsetHeight<=0,sM=t=>!oM(t.dom),NF=(t,s)=>oo(t,s).map(a=>({index:a,candidates:t})),si=(t,s,a)=>{const i=h=>Fn(h,s),d=br(t,a),g=lo(d,sM);return NF(g,i)},rM=(t,s)=>oo(t,a=>Fn(s,a)),aM=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<t.length?_.some(t[C]):_.none()})},cM=(t,s,a,i,d)=>aM(t,s,i,(g,h)=>{const w=g===a-1?t.length-g*i:i,E=Uf(h,d,0,w-1);return _.some({row:g,column:E})}),iM=(t,s,a,i,d)=>aM(t,s,i,(g,h)=>{const C=Uf(g,d,0,a-1),E=C===a-1?t.length-C*i:i,T=ti(h,0,E-1);return _.some({row:C,column:T})}),PF=(t,s,a,i)=>cM(t,s,a,i,1),Zb=(t,s,a,i)=>cM(t,s,a,i,-1),R4=(t,s,a,i)=>iM(t,s,a,i,-1),$F=(t,s,a,i)=>iM(t,s,a,i,1),D4=[be("selector"),te("execute",Wb),Gr("onEscape"),te("captureTab",!1),F1()],yx=(t,s,a)=>{xn(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},M4=(t,s)=>s.focusManager.get(t).bind(a=>Li(a,s.selector)),IF=(t,s,a,i)=>M4(t,a).bind(d=>a.execute(t,s,d)),Cx=t=>(s,a,i,d)=>si(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),lM=(t,s,a)=>a.captureTab?_.some(!0):_.none(),FF=(t,s,a)=>a.onEscape(t,s),uM=Cx(Zb),dM=Cx(PF),mM=Cx(R4),B4=Cx($F),LF=q([Ft(Qt(Sl),_4(uM,dM)),Ft(Qt(pd),k4(uM,dM)),Ft(Qt(hd),vx(mM)),Ft(Qt(En),nM(B4)),Ft(zo([xl,Qt(Bn)]),lM),Ft(zo([Ia,Qt(Bn)]),lM),Ft(Qt(as.concat(kn)),IF)]),HF=q([Ft(Qt(qs),FF),Ft(Qt(as),Kh)]);var zF=iu(D4,T4,LF,HF,()=>_.some(yx));const fM=(t,s,a,i,d)=>{const g=C=>Fc(C)==="button"&&To(C,"disabled")==="disabled",h=(C,w,E)=>d(C,w,i,0,E.length-1,E[w],T=>g(E[T])?h(C,T,E):_.from(E[T]));return si(t,a,s).bind(C=>{const w=C.index,E=C.candidates;return h(w,w,E)})},Yh=(t,s,a,i)=>fM(t,s,a,i,(d,g,h,C,w,E,T)=>{const R=ti(g+h,C,w);return R===d?_.from(E):T(R)}),g2=(t,s,a,i)=>fM(t,s,a,i,(d,g,h,C,w,E,T)=>{const R=Uf(g,h,C,w);return R===d?_.none():T(R)}),VF=[be("selector"),te("getInitial",_.none),te("execute",Wb),Gr("onEscape"),te("executeOnMove",!1),te("allowVertical",!0),te("allowHorizontal",!0),te("cycles",!0)],N4=(t,s)=>s.focusManager.get(t).bind(a=>Li(a,s.selector)),P4=(t,s,a)=>N4(t,a).bind(i=>a.execute(t,s,i)),gM=(t,s,a)=>{s.getInitial(t).orThunk(()=>xn(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},$4=(t,s,a)=>(a.cycles?g2:Yh)(t,a.selector,s,-1),I4=(t,s,a)=>(a.cycles?g2:Yh)(t,a.selector,s,1),F4=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?P4(s,a,i):_.some(!0)),hM=(t,s,a)=>a.onEscape(t,s),UF=(t,s,a,i)=>{const d=[...a.allowHorizontal?Sl:[]].concat(a.allowVertical?hd:[]),g=[...a.allowHorizontal?pd:[]].concat(a.allowVertical?En:[]);return[Ft(Qt(d),F4(_4($4,I4))),Ft(Qt(g),F4(k4($4,I4))),Ft(Qt(kn),P4),Ft(Qt(as),P4)]},WF=q([Ft(Qt(as),Kh),Ft(Qt(qs),hM)]);var ZF=iu(VF,Rr.init,UF,WF,()=>_.some(gM));const jb=(t,s,a)=>_.from(t[s]).bind(i=>_.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),pM=(t,s,a,i)=>{const g=t[s].length,h=Uf(a,i,0,g-1);return jb(t,s,h)},h2=(t,s,a,i)=>{const d=Uf(a,i,0,t.length-1),g=t[d].length,h=ti(s,0,g-1);return jb(t,d,h)},bM=(t,s,a,i)=>{const g=t[s].length,h=ti(a+i,0,g-1);return jb(t,s,h)},L4=(t,s,a,i)=>{const d=ti(a+i,0,t.length-1),g=t[d].length,h=ti(s,0,g-1);return jb(t,d,h)},Fa=(t,s,a)=>pM(t,s,a,1),jF=(t,s,a)=>pM(t,s,a,-1),vM=(t,s,a)=>h2(t,a,s,-1),yM=(t,s,a)=>h2(t,a,s,1),GF=(t,s,a)=>bM(t,s,a,-1),CM=(t,s,a)=>bM(t,s,a,1),wM=(t,s,a)=>L4(t,a,s,-1),qF=(t,s,a)=>L4(t,a,s,1),KF=[jl("selectors",[be("row"),be("cell")]),te("cycles",!0),te("previousSelector",_.none),te("execute",Wb)],YF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return xn(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},XF=(t,s,a)=>Kr(t.element).bind(i=>a.execute(t,s,i)),SM=(t,s)=>xe(t,a=>br(a,s.selectors.cell)),wx=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return Li(i,d.selectors.row).bind(h=>{const C=br(h,d.selectors.cell);return rM(C,i).bind(w=>{const E=br(a,d.selectors.row);return rM(E,h).bind(T=>{const R=SM(E,d);return g(R,T,w).map(B=>B.cell)})})})},xM=wx(jF,GF),H4=wx(Fa,CM),EM=wx(vM,wM),TM=wx(yM,qF),JF=q([Ft(Qt(Sl),_4(xM,H4)),Ft(Qt(pd),k4(xM,H4)),Ft(Qt(hd),vx(EM)),Ft(Qt(En),nM(TM)),Ft(Qt(as.concat(kn)),XF)]),QF=q([Ft(Qt(as),Kh)]);var e8=iu(KF,Rr.init,JF,QF,()=>_.some(YF));const t8=[be("selector"),te("execute",Wb),te("moveOnTab",!1)],z4=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),_M=(t,s,a)=>{xn(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Nm=(t,s,a)=>g2(t,a.selector,s,-1),V4=(t,s,a)=>g2(t,a.selector,s,1),kM=(t,s,a,i)=>a.moveOnTab?A4(Nm)(t,s,a,i):_.none(),OM=(t,s,a,i)=>a.moveOnTab?A4(V4)(t,s,a,i):_.none(),n8=q([Ft(Qt(hd),A4(Nm)),Ft(Qt(En),A4(V4)),Ft(zo([xl,Qt(Bn)]),kM),Ft(zo([Ia,Qt(Bn)]),OM),Ft(Qt(kn),z4),Ft(Qt(as),z4)]),Gb=q([Ft(Qt(as),Kh)]);var o8=iu(t8,Rr.init,n8,Gb,()=>_.some(_M));const s8=[Gr("onSpace"),Gr("onEnter"),Gr("onShiftEnter"),Gr("onLeft"),Gr("onRight"),Gr("onTab"),Gr("onShiftTab"),Gr("onUp"),Gr("onDown"),Gr("onEscape"),te("stopSpaceKeyup",!1),hn("focusIn")],AM=(t,s,a)=>[Ft(Qt(as),a.onSpace),Ft(zo([Ia,Qt(kn)]),a.onEnter),Ft(zo([xl,Qt(kn)]),a.onShiftEnter),Ft(zo([xl,Qt(Bn)]),a.onShiftTab),Ft(zo([Ia,Qt(Bn)]),a.onTab),Ft(Qt(hd),a.onUp),Ft(Qt(En),a.onDown),Ft(Qt(Sl),a.onLeft),Ft(Qt(pd),a.onRight),Ft(Qt(as),a.onSpace)],r8=(t,s,a)=>[...a.stopSpaceKeyup?[Ft(Qt(as),Kh)]:[],Ft(Qt(qs),a.onEscape)];var a8=iu(s8,Rr.init,AM,r8,t=>t.focusIn);const c8=qh.schema(),RM=DF.schema(),U4=ZF.schema(),W4=zF.schema(),i8=e8.schema(),lg=eM.schema(),DM=o8.schema(),MM=a8.schema();var l8=Object.freeze({__proto__:null,acyclic:c8,cyclic:RM,flow:U4,flatgrid:W4,matrix:i8,execution:lg,menu:DM,special:MM});const u8=t=>mc(t,"setGridSize"),ct=Dw({branchKey:"mode",branches:l8,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{u8(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:BF}),qb=(t,s)=>{nd(()=>{eg(t,s,()=>xe(s,t.getSystem().build))},t.element)},Z4=(t,s)=>{nd(()=>{Uy(t,s,()=>Sh(t.element,s,t.getSystem().buildOrPatch))},t.element)},j4=(t,s,a,i)=>{Eb(s);const d=Ec(t.element,a,i,t.getSystem().buildOrPatch);zy(t,d),t.syncComponents()},bd=(t,s,a)=>{const i=t.getSystem().build(a);km(t,i,s)},ug=(t,s,a,i)=>{su(s),bd(t,(d,g)=>dr(d,g,a),i)},d8=(t,s,a,i)=>(s.reuseDom?Z4:qb)(t,i),m8=(t,s,a,i)=>{bd(t,hc,i)},BM=(t,s,a,i)=>{bd(t,tv,i)},Pm=(t,s,a,i)=>{const d=Kb(t);$t(d,h=>Fn(i.element,h.element)).each(su)},Kb=(t,s)=>t.components(),NM=(t,s,a,i,d)=>{const g=Kb(t);return _.from(g[i]).map(h=>(d.fold(()=>su(h),C=>{(s.reuseDom?j4:ug)(t,h,i,C)}),h))};var PM=Object.freeze({__proto__:null,append:m8,prepend:BM,remove:Pm,replaceAt:NM,replaceBy:(t,s,a,i,d)=>{const g=Kb(t);return oo(g,i).bind(h=>NM(t,s,a,h,d))},set:d8,contents:Kb});const Bt=Us({fields:[Jo("reuseDom",!0)],name:"replacing",apis:PM}),G4=(t,s)=>{const a=Gn(s);return Us({fields:[be("enabled")],name:t,active:{events:q(a)}})},zt=(t,s)=>{const a=G4(t,s);return{key:t,value:{config:{},me:a,configAsRaw:q({}),initialConfig:{},state:Rr}}},$M=(t,s)=>{s.ignore||(Ya(t.element),s.onFocus(t))};var Sx=Object.freeze({__proto__:null,focus:$M,blur:(t,s)=>{s.ignore||Th(t.element)},isFocused:t=>_h(t.element)}),FM=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Oa(a)},events:t=>Gn([ve(Ri(),(s,a)=>{$M(s,t),a.stop()})].concat(t.stopMousedown?[ve(ka(),(s,a)=>{a.event.prevent()})]:[]))}),g8=[rn("onFocus"),te("stopMousedown",!1),te("ignore",!1)];const Ot=Us({fields:g8,name:"focusing",active:FM,apis:Sx}),LM=t=>({init:()=>{const a=pt(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),HM=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},zM=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?qn(t.element,i):Ao(t.element,i)})},p2=(t,s,a,i)=>{const d=a.get();a.set(i),zM(t,s,a),HM(t,s,a),d!==i&&s.onToggled(t,i)},xx=(t,s,a)=>{p2(t,s,a,!a.get())},h8=(t,s,a)=>{p2(t,s,a,!0)},p8=(t,s,a)=>{p2(t,s,a,!1)},b8=(t,s,a)=>a.get(),VM=(t,s,a)=>{p2(t,s,a,s.selected)};var UM=Object.freeze({__proto__:null,onLoad:VM,toggle:xx,isOn:b8,on:h8,off:p8,set:p2}),WM=Object.freeze({__proto__:null,exhibit:()=>Oa({}),events:(t,s)=>{const a=dh(t,s,xx),i=Av(t,s,VM);return Gn(Ht([t.toggleOnExecute?[a]:[],[i]]))}});const b2=(t,s,a)=>{Ue(t.element,"aria-pressed",a),s.syncWithExpanded&&Ex(t,s,a)},v8=(t,s,a)=>{Ue(t.element,"aria-selected",a)},v2=(t,s,a)=>{Ue(t.element,"aria-checked",a)},Ex=(t,s,a)=>{Ue(t.element,"aria-expanded",a)};var ZM=[te("selected",!1),hn("toggleClass"),te("toggleOnExecute",!0),rn("onToggled"),yc("aria",{mode:"none"},As("mode",{pressed:[te("syncWithExpanded",!1),Kn("update",b2)],checked:[Kn("update",v2)],expanded:[Kn("update",Ex)],selected:[Kn("update",v8)],none:[Kn("update",Z)]}))];const Gt=Us({fields:ZM,name:"toggling",active:WM,apis:UM,state:LM(!1)}),jM=()=>{const t=(s,a)=>{a.stop(),Uu(s)};return[ve(em(),t),ve(Di(),t),Bi(ki()),Bi(ka())]},Tx=t=>{const s=a=>ei((i,d)=>{a(i),d.stop()});return Gn(Ht([t.map(s).toArray(),jM()]))},K4="alloy.item-hover",GM="alloy.item-focus",Y4="alloy.item-toggled",qM=t=>{(Kr(t.element).isNone()||Ot.isFocused(t))&&(Ot.isFocused(t)||Ot.focus(t),ft(t,K4,{item:t}))},KM=t=>{ft(t,GM,{item:t})},YM=(t,s)=>{ft(t,Y4,{item:t,state:s})},y2=q(K4),X4=q(GM),J4=q(Y4),y8=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),gt),C8=(t,s)=>({aria:{mode:s?"selected":"checked"},...Nd(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Ye(t.onToggled)&&t.onToggled(a,i),YM(a,i)}}),w8=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:y8(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:_c.augment(t.itemBehaviours,[t.toggling.fold(Gt.revoke,s=>Gt.config(C8(s,t.role.exists(a=>a==="option")))),Ot.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{KM(s)}}),ct.config({mode:"execution"}),Ke.config({store:{mode:"memory",initialValue:t.data}}),zt("item-type-events",[...jM(),ve(il(),qM),ve(sh(),Ot.focus)])]),components:t.components,eventOrder:t.eventOrder}),S8=[be("data"),be("components"),be("dom"),te("hasSubmenu",!1),hn("toggling"),hn("role"),_c.field("itemBehaviours",[Gt,Ot,ct,Ke]),te("ignoreFocus",!1),te("domModification",{}),Kn("builder",w8),te("eventOrder",{})],XM=t=>({dom:t.dom,components:t.components,events:Gn([kv(sh())])}),JM=[be("dom"),be("components"),Kn("builder",XM)],Q4=q("item-widget"),e3=q([or({name:"widget",overrides:t=>({behaviours:Oe([Ke.config({store:{mode:"manual",getValue:s=>t.data,setValue:Z}})])})})]),x8=t=>{const s=Hb(Q4(),t,e3()),a=o2(Q4(),t,s.internals()),i=g=>ke(g,t,"widget").map(h=>(ct.focusIn(h),h)),d=(g,h)=>cg(h.event.target)?_.none():(()=>(t.autofocus&&h.setSource(g.element),_.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Gn([ei((g,h)=>{i(g).each(C=>{h.stop()})}),ve(il(),qM),ve(sh(),(g,h)=>{t.autofocus?i(g):Ot.focus(g)})]),behaviours:_c.augment(t.widgetBehaviours,[Ke.config({store:{mode:"memory",initialValue:t.data}}),Ot.config({ignore:t.ignoreFocus,onFocus:g=>{KM(g)}}),ct.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:Qn(),onLeft:d,onRight:d,onEscape:(g,h)=>!Ot.isFocused(g)&&!t.autofocus?(Ot.focus(g),_.some(!0)):(t.autofocus&&h.setSource(g.element),_.none())})])}},E8=[be("uid"),be("data"),be("components"),be("dom"),te("autofocus",!1),te("ignoreFocus",!1),_c.field("widgetBehaviours",[Ke,Ot,ct]),te("domModification",{}),Wh(e3()),Kn("builder",x8)],T8=As("type",{widget:E8,item:S8,separator:JM}),_8=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),QM=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),k8=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),O8=q([Fb({factory:{sketch:t=>{const s=Wr("menu.spec item",T8,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>_n(s,"uid")?s:{...s,uid:gm("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),A8=q([Ss("role"),be("value"),be("items"),be("dom"),be("components"),te("eventOrder",{}),Ns("menuBehaviours",[ze,Ke,an,ct]),yc("movement",{mode:"menu",moveOnTab:!0},As("mode",{grid:[F1(),Kn("config",_8)],matrix:[Kn("config",QM),be("rowSelector"),te("previousSelector",_.none)],menu:[te("moveOnTab",!0),Kn("config",k8)]})),rk(),te("fakeFocus",!1),te("focusManager",Ub()),rn("onHighlight"),rn("onDehighlight"),te("showMenuRole",!0)]),e5=q("alloy.menu-focus"),R8=(t,s)=>{const a=br(t.element,'[role="menuitemradio"][aria-checked="true"]');Qe(a,i=>{Fn(i,s.element)||t.getSystem().getByDom(i).each(d=>{Gt.off(d)})})},Xh=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ps(t.menuBehaviours,[ze.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ke.config({store:{mode:"memory",initialValue:t.value}}),an.config({find:_.some}),ct.config(t.movement.config(t,t.movement))]),events:Gn([ve(X4(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{ze.highlight(d,C),g.stop(),ft(d,e5(),{menu:d,item:C})})}),ve(y2(),(d,g)=>{const h=g.event.item;ze.highlight(d,h)}),ve(J4(),(d,g)=>{const{item:h,state:C}=g.event;C&&To(h.element,"role")==="menuitemradio"&&R8(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Jh=Pr({name:"Menu",configFields:A8(),partFields:O8(),factory:Xh}),D8=t=>ef(t,(s,a)=>({k:s,v:a})),dg=(t,s,a,i)=>Xe(a,i).bind(d=>Xe(t,d).bind(g=>{const h=dg(t,s,a,g);return _.some([g].concat(h))})).getOr([]),t5=(t,s)=>{const a={};ks(t,(h,C)=>{Qe(h,w=>{a[w]=C})});const i=s,d=D8(s),g=Po(d,(h,C)=>[C].concat(dg(a,i,d,C)));return Po(a,h=>Xe(g,h).getOr([h]))},M8=()=>{const t=pt({}),s=pt({}),a=pt({}),i=Vn(),d=pt({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(ce,Ae)=>{s.set({...s.get(),[ce]:{type:"prepared",menu:Ae}})},w=(ce,Ae,He,pe)=>{i.set(ce),t.set(He),s.set(Ae),d.set(pe);const rt=t5(pe,He);a.set(rt)},E=ce=>Lr(t.get(),(Ae,He)=>Ae===ce),T=(ce,Ae,He)=>U(ce).bind(pe=>E(ce).bind(rt=>Ae(rt).map(Je=>({triggeredMenu:pe,triggeringItem:Je,triggeringPath:He})))),R=(ce,Ae)=>{const He=lo(W(ce).toArray(),pe=>U(pe).isSome());return Xe(a.get(),ce).bind(pe=>{const rt=Er(He.concat(pe)),Je=fe(rt,(yt,dt)=>T(yt,Ae,rt.slice(0,dt+1)).fold(()=>za(i.get(),yt)?[]:[_.none()],fn=>[_.some(fn)]));return xo(Je)})},B=ce=>Xe(t.get(),ce).map(Ae=>{const He=Xe(a.get(),ce).getOr([]);return[Ae].concat(He)}),P=ce=>Xe(a.get(),ce).bind(Ae=>Ae.length>1?_.some(Ae.slice(1)):_.none()),F=ce=>Xe(a.get(),ce),U=ce=>oe(ce).bind($m),oe=ce=>Xe(s.get(),ce),W=ce=>Xe(t.get(),ce);return{setMenuBuilt:C,setContents:w,expand:B,refresh:F,collapse:P,lookupMenu:oe,lookupItem:W,otherMenus:ce=>{const Ae=d.get();return Et(No(Ae),ce)},getPrimary:()=>i.get().bind(U),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:R}},$m=t=>t.type==="prepared"?_.some(t.menu):_.none(),n5={init:M8,extractPreparedMenu:$m},o5=qe("tiered-menu-item-highlight"),ri=qe("tiered-menu-item-dehighlight");var ha;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ha||(ha={}));const s5=(t,s)=>{const a=Vn(),i=(Ne,st,Lt)=>Po(Lt,(xt,bt)=>{const Pt=()=>Jh.sketch({...xt,value:bt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Hn,Cn)=>{ft(Hn,o5,{menuComp:Hn,itemComp:Cn})},onDehighlight:(Hn,Cn)=>{ft(Hn,ri,{menuComp:Hn,itemComp:Cn})},focusManager:t.fakeFocus?px():Ub()});return bt===st?{type:"prepared",menu:Ne.getSystem().build(Pt())}:{type:"notbuilt",nbMenu:Pt}}),d=n5.init(),g=Ne=>{const st=i(Ne,t.data.primary,t.data.menus),Lt=w();return d.setContents(t.data.primary,st,t.data.expansions,Lt),d.getPrimary()},h=Ne=>Ke.getValue(Ne).value,C=(Ne,st,Lt)=>Ys(st,xt=>{if(!xt.getSystem().isConnected())return _.none();const bt=ze.getCandidates(xt);return $t(bt,Pt=>h(Pt)===Lt)}),w=Ne=>Po(t.data.menus,(st,Lt)=>fe(st.items,xt=>xt.type==="separator"?[]:[xt.data.value])),E=ze.highlight,T=(Ne,st)=>{E(Ne,st),ze.getHighlighted(st).orThunk(()=>ze.getFirst(st)).each(Lt=>{t.fakeFocus?ze.highlight(st,Lt):ih(Ne,Lt.element,sh())})},R=(Ne,st)=>Pd(xe(st,Lt=>Ne.lookupMenu(Lt).bind(xt=>xt.type==="prepared"?_.some(xt.menu):_.none()))),B=(Ne,st,Lt)=>{const xt=R(st,st.otherMenus(Lt));Qe(xt,bt=>{Da(bt.element,[t.markers.backgroundMenu]),t.stayInDom||Bt.remove(Ne,bt)})},P=Ne=>a.get().getOrThunk(()=>{const st={},Lt=br(Ne.element,`.${t.markers.item}`),xt=lo(Lt,bt=>To(bt,"aria-haspopup")==="true");return Qe(xt,bt=>{Ne.getSystem().getByDom(bt).each(Pt=>{const Hn=h(Pt);st[Hn]=Pt})}),a.set(st),st}),F=(Ne,st)=>{const Lt=P(Ne);ks(Lt,(xt,bt)=>{const Pt=po(st,bt);Ue(xt.element,"aria-expanded",Pt)})},U=(Ne,st,Lt)=>_.from(Lt[0]).bind(xt=>st.lookupMenu(xt).bind(bt=>{if(bt.type==="notbuilt")return _.none();{const Pt=bt.menu,Hn=R(st,Lt.slice(1));return Qe(Hn,Cn=>{qn(Cn.element,t.markers.backgroundMenu)}),Hs(Pt.element)||Bt.append(Ne,Mr(Pt)),Da(Pt.element,[t.markers.backgroundMenu]),T(Ne,Pt),B(Ne,st,Lt),_.some(Pt)}}));let oe;(function(Ne){Ne[Ne.HighlightSubmenu=0]="HighlightSubmenu",Ne[Ne.HighlightParent=1]="HighlightParent"})(oe||(oe={}));const W=(Ne,st,Lt)=>{if(Lt.type==="notbuilt"){const xt=Ne.getSystem().build(Lt.nbMenu());return d.setMenuBuilt(st,xt),xt}else return Lt.menu},ee=(Ne,st,Lt=oe.HighlightSubmenu)=>{if(st.hasConfigured(Tt)&&Tt.isDisabled(st))return _.some(st);{const xt=h(st);return d.expand(xt).bind(bt=>(F(Ne,bt),_.from(bt[0]).bind(Pt=>d.lookupMenu(Pt).bind(Hn=>{const Cn=W(Ne,Pt,Hn);return Hs(Cn.element)||Bt.append(Ne,Mr(Cn)),t.onOpenSubmenu(Ne,st,Cn,Er(bt)),Lt===oe.HighlightSubmenu?(ze.highlightFirst(Cn),U(Ne,d,bt)):(ze.dehighlightAll(Cn),_.some(st))}))))}},J=(Ne,st)=>{const Lt=h(st);return d.collapse(Lt).bind(xt=>(F(Ne,xt),U(Ne,d,xt).map(bt=>(t.onCollapseMenu(Ne,st,bt),bt))))},ye=(Ne,st)=>{const Lt=h(st);return d.refresh(Lt).bind(xt=>(F(Ne,xt),U(Ne,d,xt)))},ce=(Ne,st)=>cg(st.element)?_.none():ee(Ne,st,oe.HighlightSubmenu),Ae=(Ne,st)=>cg(st.element)?_.none():J(Ne,st),He=(Ne,st)=>J(Ne,st).orThunk(()=>t.onEscape(Ne,st).map(()=>Ne)),pe=Ne=>(st,Lt)=>Li(Lt.getSource(),`.${t.markers.item}`).bind(xt=>st.getSystem().getByDom(xt).toOptional().bind(bt=>Ne(st,bt).map(ht))),rt=Gn([ve(e5(),(Ne,st)=>{const Lt=st.event.item;d.lookupItem(h(Lt)).each(()=>{const xt=st.event.menu;ze.highlight(Ne,xt);const bt=h(st.event.item);d.refresh(bt).each(Pt=>B(Ne,d,Pt))})}),ei((Ne,st)=>{const Lt=st.event.target;Ne.getSystem().getByDom(Lt).each(xt=>{h(xt).indexOf("collapse-item")===0&&J(Ne,xt),ee(Ne,xt,oe.HighlightSubmenu).fold(()=>{t.onExecute(Ne,xt)},Z)})}),Jn((Ne,st)=>{g(Ne).each(Lt=>{Bt.append(Ne,Mr(Lt)),t.onOpenMenu(Ne,Lt),t.highlightOnOpen===ha.HighlightMenuAndItem?T(Ne,Lt):t.highlightOnOpen===ha.HighlightJustMenu&&E(Ne,Lt)})}),ve(o5,(Ne,st)=>{t.onHighlightItem(Ne,st.event.menuComp,st.event.itemComp)}),ve(ri,(Ne,st)=>{t.onDehighlightItem(Ne,st.event.menuComp,st.event.itemComp)}),...t.navigateOnHover?[ve(y2(),(Ne,st)=>{const Lt=st.event.item;ye(Ne,Lt),ee(Ne,Lt,oe.HighlightParent),t.onHover(Ne,Lt)})]:[]]),Je=Ne=>ze.getHighlighted(Ne).bind(ze.getHighlighted),yt=Ne=>{Je(Ne).each(st=>{J(Ne,st)})},dt=Ne=>{d.getPrimary().each(st=>{T(Ne,st)})},fn=Ne=>_.from(Ne.components()[0]).filter(st=>To(st.element,"role")==="menu"),Jt={collapseMenu:yt,highlightPrimary:dt,repositionMenus:Ne=>{d.getPrimary().bind(Lt=>Je(Ne).bind(xt=>{const bt=h(xt),Pt=V0(d.getMenus()),Hn=Pd(xe(Pt,n5.extractPreparedMenu));return d.getTriggeringPath(bt,Cn=>C(Ne,Hn,Cn))}).map(xt=>({primary:Lt,triggeringPath:xt}))).fold(()=>{fn(Ne).each(Lt=>{t.onRepositionMenu(Ne,Lt,[])})},({primary:Lt,triggeringPath:xt})=>{t.onRepositionMenu(Ne,Lt,xt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ps(t.tmenuBehaviours,[ct.config({mode:"special",onRight:pe(ce),onLeft:pe(Ae),onEscape:pe(He),focusIn:(Ne,st)=>{d.getPrimary().each(Lt=>{ih(Ne,Lt.element,sh())})}}),ze.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),an.config({find:Ne=>ze.getHighlighted(Ne)}),Bt.config({})]),eventOrder:t.eventOrder,apis:Jt,events:rt}},r5=q("collapse-item"),B8=(t,s,a)=>({primary:t,menus:s,expansions:a}),_x=(t,s)=>({primary:t,menus:Sf(t,s),expansions:{}}),a5=t=>({value:qe(r5()),meta:{text:t}}),Qh=ga({name:"TieredMenu",configFields:[Xl("onExecute"),Xl("onEscape"),xc("onOpenMenu"),xc("onOpenSubmenu"),rn("onRepositionMenu"),rn("onCollapseMenu"),te("highlightOnOpen",ha.HighlightMenuAndItem),jl("data",[be("primary"),be("menus"),be("expansions")]),te("fakeFocus",!1),rn("onHighlightItem"),rn("onDehighlightItem"),rn("onHover"),fm(),be("dom"),te("navigateOnHover",!0),te("stayInDom",!1),Ns("tmenuBehaviours",[ct,ze,an,Bt]),te("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:s5,extraApis:{tieredData:B8,singleData:_x,collapseItem:a5}}),N8=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Q1(),onRtl:()=>pm()}}:{},C=E=>E.length===2,w=E=>C(E)?h:{};return Qh.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(ln.close(s),t.onEscape.map(E=>E(s)),_.some(!0)),onExecute:()=>_.some(!0),onOpenMenu:(E,T)=>{Gs.positionWithinBounds(g().getOrDie(),T,a,d())},onOpenSubmenu:(E,T,R,B)=>{const P=g().getOrDie();Gs.position(P,R,{anchor:{type:"submenu",item:T,...w(B)}})},onRepositionMenu:(E,T,R)=>{const B=g().getOrDie();Gs.positionWithinBounds(B,T,a,d()),Qe(R,P=>{const F=w(P.triggeringPath);Gs.position(B,P.triggeredMenu,{anchor:{type:"submenu",item:P.triggeringItem,...F}})})}})},kx=(t,s)=>{const a=(B,P)=>t.getRelated(B).exists(U=>Xu(U,P)),i=(B,P)=>{ln.setContent(B,P)},d=(B,P,F)=>{const U=_.none;g(B,P,F,U)},g=(B,P,F,U)=>{const oe=t.lazySink(B).getOrDie();ln.openWhileCloaked(B,P,()=>Gs.positionWithinBounds(oe,B,F,U())),Ke.setValue(B,_.some({mode:"position",config:F,getBounds:U}))},h=(B,P,F)=>{C(B,P,F,_.none)},C=(B,P,F,U)=>{const oe=N8(t,B,P,F,U);ln.open(B,oe),Ke.setValue(B,_.some({mode:"menu",menu:oe}))},w=B=>{ln.isOpen(B)&&(Ke.setValue(B,_.none()),ln.close(B))},E=B=>ln.getState(B),T=B=>{ln.isOpen(B)&&Ke.getValue(B).each(P=>{switch(P.mode){case"menu":ln.getState(B).each(Qh.repositionMenus);break;case"position":const F=t.lazySink(B).getOrDie();Gs.positionWithinBounds(F,B,P.config,P.getBounds());break}})},R={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:w,getContent:E,reposition:T,isOpen:ln.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Ps(t.inlineBehaviours,[ln.config({isPartOf:(B,P,F)=>Xu(P,F)||a(B,F),getAttachPoint:B=>t.lazySink(B).getOrDie(),onOpen:B=>{t.onShow(B)},onClose:B=>{t.onHide(B)}}),Ke.config({store:{mode:"memory",initialValue:_.none()}}),fa.config({channels:{...ru({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(B=>({fireEventInstead:{event:B.event}})).getOr({})}),...kb({...t.fireRepositionEventInstead.map(B=>({fireEventInstead:{event:B.event}})).getOr({}),doReposition:T})}})]),eventOrder:t.eventOrder,apis:R}},mo=ga({name:"InlineView",configFields:[be("lazySink"),rn("onShow"),rn("onHide"),al("onEscape"),Ns("inlineBehaviours",[ln,Ke,fa]),ao("fireDismissalEventInstead",[te("event",zu())]),ao("fireRepositionEventInstead",[te("event",Sv())]),te("getRelated",_.none),te("isExtraPart",$n),te("eventOrder",_.none)],factory:kx,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var C2=tinymce.util.Tools.resolve("tinymce.util.Delay"),ep=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c5=tinymce.util.Tools.resolve("tinymce.EditorManager"),Yb=tinymce.util.Tools.resolve("tinymce.Env"),Rc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Rc||(Rc={}));var Xb;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Xb||(Xb={}));const Wn=t=>s=>s.options.get(t),w2=t=>s=>_.from(t(s)),i5=t=>{const s=Yb.deviceType.isPhone(),a=Yb.deviceType.isTablet()||s,i=t.options.register,d=h=>Yt(h)||h===!1,g=h=>Yt(h)||Zn(h);i("skin",{processor:h=>Yt(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:ep.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>Yt(h)||no(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>no(h)||Yt(h)||Sn(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),ts(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Xb.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||no(h),default:!Yb.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},Ox=Wn("readonly"),t3=Wn("height"),tp=Wn("width"),Jb=w2(Wn("min_width")),Ax=w2(Wn("min_height")),S2=w2(Wn("max_width")),n3=w2(Wn("max_height")),l5=w2(Wn("style_formats")),u5=Wn("style_formats_merge"),d5=Wn("style_formats_autohide"),Rx=Wn("content_langs"),o3=Wn("removed_menuitems"),np=Wn("toolbar_mode"),Dx=Wn("toolbar_groups"),s3=Wn("toolbar_location"),m5=Wn("fixed_toolbar_container"),P8=Wn("fixed_toolbar_container_target"),f5=Wn("toolbar_persist"),g5=Wn("toolbar_sticky_offset"),r3=Wn("menubar"),Mx=Wn("toolbar"),h5=Wn("file_picker_callback"),Bx=Wn("file_picker_validator_handler"),a3=Wn("font_size_input_default_unit"),c3=Wn("file_picker_types"),p5=Wn("typeahead_urls"),Nx=Wn("anchor_top"),b5=Wn("anchor_bottom"),v5=Wn("draggable_modal"),y5=Wn("statusbar"),C5=Wn("elementpath"),i3=Wn("branding"),l3=Wn("resize"),Px=Wn("paste_as_text"),w5=Wn("sidebar_show"),x2=Wn("promotion"),S5=Wn("help_accessibility"),x5=Wn("default_font_stack"),u3=t=>t.options.get("skin")===!1,$x=t=>t.options.get("menubar")!==!1,d3=t=>{const s=t.options.get("skin_url");if(u3(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return c5.baseURL+"/skins/ui/"+a}},Ix=t=>_.from(t.options.get("skin_url")),m3=t=>t.options.get("line_height_formats").split(" "),Fx=t=>{const s=Mx(t),a=Yt(s),i=Sn(s)&&s.length>0;return!op(t)&&(i||a||s===!0)},f3=t=>{const s=ts(9,i=>t.options.get("toolbar"+(i+1))),a=lo(s,Yt);return Rt(a.length>0,a)},op=t=>f3(t).fold(()=>{const s=Mx(t);return mt(s,Yt)&&s.length>0},ht),Im=t=>s3(t)===Xb.bottom,E5=t=>{var s;if(!t.inline)return _.none();const a=(s=m5(t))!==null&&s!==void 0?s:"";if(a.length>0)return xn(Hr(),a);const i=P8(t);return St(i)?_.some(ne.fromDom(i)):_.none()},Qb=t=>t.inline&&E5(t).isSome(),E2=t=>E5(t).getOrThunk(()=>zc(Eo(ne.fromDom(t.getElement())))),Lx=t=>t.inline&&!$x(t)&&!Fx(t)&&!op(t),e0=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Qb(t)&&!Lx(t),mg=t=>!Qb(t)&&t.options.get("ui_mode")==="split",g3=t=>{const s=t.options.get("menu");return Po(s,a=>({...a,items:a.items}))};var $8=Object.freeze({__proto__:null,get ToolbarMode(){return Rc},get ToolbarLocation(){return Xb},register:i5,getSkinUrl:d3,getSkinUrlOption:Ix,isReadOnly:Ox,isSkinDisabled:u3,getHeightOption:t3,getWidthOption:tp,getMinWidthOption:Jb,getMinHeightOption:Ax,getMaxWidthOption:S2,getMaxHeightOption:n3,getUserStyleFormats:l5,shouldMergeStyleFormats:u5,shouldAutoHideStyleFormats:d5,getLineHeightFormats:m3,getContentLanguages:Rx,getRemovedMenuItems:o3,isMenubarEnabled:$x,isMultipleToolbars:op,isToolbarEnabled:Fx,isToolbarPersist:f5,getMultipleToolbarsOption:f3,getUiContainer:E2,useFixedContainer:Qb,isSplitUiMode:mg,getToolbarMode:np,isDraggableModal:v5,isDistractionFree:Lx,isStickyToolbar:e0,getStickyToolbarOffset:g5,getToolbarLocation:s3,isToolbarLocationBottom:Im,getToolbarGroups:Dx,getMenus:g3,getMenubar:r3,getToolbar:Mx,getFilePickerCallback:h5,getFilePickerTypes:c3,useTypeaheadUrls:p5,getAnchorTop:Nx,getAnchorBottom:b5,getFilePickerValidatorHandler:Bx,getFontSizeInputDefaultUnit:a3,useStatusBar:y5,useElementPath:C5,promotionEnabled:x2,useBranding:i3,getResize:l3,getPasteAsText:Px,getSidebarShow:w5,useHelpAccessibility:S5,getDefaultFontStack:x5});const T5=["visible","hidden","clip"],h3=t=>Ll(t).length>0&&!po(T5,t),Hx=t=>{if(sf(t)){const s=Zo(t,"overflow-x"),a=Zo(t,"overflow-y");return h3(s)||h3(a)}else return!1},I8=t=>{const s=Xf(t,Hx),a=s.length===0?Y0(t).map(yi).map(i=>Xf(i,Hx)).getOr([]):s;return ya(a).map(i=>({element:i,others:a.slice(1)}))},Fm=(t,s)=>mg(t)?I8(s):_.none(),sp=t=>{const s=[...xe(t.others,jo),zs()];return ow(jo(t.element),s)},vr=ga({name:"Button",factory:t=>{const s=Tx(t.action),a=t.dom.tag,i=g=>Xe(t.dom,"attributes").bind(h=>Xe(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:_c.augment(t.buttonBehaviours,[Ot.config({}),ct.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[te("uid",void 0),be("dom"),te("components",[]),_c.field("buttonBehaviours",[Ot,ct]),hn("action"),hn("role"),te("eventOrder",{})]}),F8=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return bo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},p3=t=>Array.prototype.slice.call(t.dom.classList,0),lu=t=>{const s=ne.fromHtml(t),a=Hc(s),i=F8(s),d=p3(s),g=a.length===0?{}:{innerHtml:ma(s)};return{tag:Fc(s),classes:d,attributes:i,...g}},Tn=t=>{const s=b4(t)&&mc(t,"uid")?t.uid:gm("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var L8=Object.freeze({__proto__:null,exhibit:(t,s)=>Oa({attributes:Iu([{key:s.tabAttr,value:"true"}])})}),H8=[te("tabAttr","data-alloy-tabstop")];const Yn=Us({fields:H8,name:"tabstopping",active:L8}),k5=qe("tooltip.exclusive"),T2=qe("tooltip.show"),_2=qe("tooltip.hide"),Vx=qe("tooltip.immediateHide"),Ux=qe("tooltip.immediateShow"),O5=(t,s,a)=>{t.getSystem().broadcastOn([k5],{})};var z8=Object.freeze({__proto__:null,hideAllExclusive:O5,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Bt.set(d,i)})}}),V8=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(su(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()){O5(h);const C=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Gn(t.mode==="normal"?[ve(il(),E=>{Zt(h,T2)}),ve(Qd(),E=>{Zt(h,_2)})]:[]),behaviours:Oe([Bt.config({})])});s.setTooltip(w),vl(C,w),t.onShow(h,w),Gs.position(C,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const w=t.lazySink(h).getOrDie();Gs.position(w,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[ve(Oi(),h=>{Zt(h,Ux)}),ve(Hu(),h=>{Zt(h,Vx)}),ve(il(),h=>{Zt(h,T2)}),ve(Qd(),h=>{Zt(h,_2)})];case"follow-highlight":return[ve(Vu(),(h,C)=>{Zt(h,T2)}),ve(om(),h=>{Zt(h,_2)})];case"children-normal":return[ve(Oi(),(h,C)=>{Kr(h.element).each(w=>{ca(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Zt(h,Ux)},E=>{s.isShowing()&&(t.onShow(h,E),d(h))})})}),ve(Hu(),h=>{Kr(h.element).fold(()=>{Zt(h,Vx)},Z)}),ve(il(),h=>{xn(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Zt(h,T2)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),ve(Qd(),h=>{xn(h.element,"[data-mce-tooltip]:hover").fold(()=>{Zt(h,_2)},Z)})];default:return[ve(Oi(),(h,C)=>{Kr(h.element).each(w=>{ca(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Zt(h,Ux)},E=>{s.isShowing()&&(t.onShow(h,E),d(h))})})}),ve(Hu(),h=>{Kr(h.element).fold(()=>{Zt(h,Vx)},Z)})]}};return Gn(Ht([[ve(T2,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),ve(_2,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),ve(Ux,h=>{s.resetTimer(()=>{i(h)},0)}),ve(Vx,h=>{s.resetTimer(()=>{a(h)},0)}),ve(Cc(),(h,C)=>{const w=C;w.universal||po(w.channels,k5)&&a(h)}),ml(h=>{a(h)})],g()]))}}),U8=[be("lazySink"),be("tooltipDom"),te("exclusive",!0),te("tooltipComponents",[]),Go("delayForShow",q(300)),Go("delayForHide",q(300)),Yc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),te("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:q([rs,xs,ms,fs,ss,Mn]),onRtl:q([rs,xs,ms,fs,ss,Mn])},bubble:ni(0,-2,{})})),rn("onHide"),rn("onShow")],b3=Object.freeze({__proto__:null,init:()=>{const t=Vn(),s=Vn(),a=()=>{t.on(clearTimeout)},i=(g,h)=>{a(),t.set(setTimeout(g,h))},d=q("not-implemented");return Aa({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const sr=Us({fields:U8,name:"tooltipping",active:V8,state:b3,apis:z8}),{entries:A5,setPrototypeOf:R5,isFrozen:D5,getPrototypeOf:W8,getOwnPropertyDescriptor:Z8}=Object;let{freeze:Dc,seal:uu,create:j8}=Object,{apply:v3,construct:k2}=typeof Reflect<"u"&&Reflect;v3||(v3=function(s,a,i){return s.apply(a,i)}),Dc||(Dc=function(s){return s}),uu||(uu=function(s){return s}),k2||(k2=function(s,a){return new s(...a)});const G8=El(Array.prototype.forEach),q8=El(Array.prototype.pop),O2=El(Array.prototype.push),Wx=El(String.prototype.toLowerCase),y3=El(String.prototype.toString),K8=El(String.prototype.match),du=El(String.prototype.replace),Y8=El(String.prototype.indexOf),X8=El(String.prototype.trim),Ui=El(RegExp.prototype.test),A2=J8(TypeError);function El(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return v3(t,s,i)}}function J8(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return k2(t,a)}}function On(t,s,a){var i;a=(i=a)!==null&&i!==void 0?i:Wx,R5&&R5(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const h=a(g);h!==g&&(D5(s)||(s[d]=h),g=h)}t[g]=!0}return t}function t0(t){const s=j8(null);for(const[a,i]of A5(t))s[a]=i;return s}function n0(t,s){for(;t!==null;){const i=Z8(t,s);if(i){if(i.get)return El(i.get);if(typeof i.value=="function")return El(i.value)}t=W8(t)}function a(i){return console.warn("fallback value for",i),null}return a}const M5=Dc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),C3=Dc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),w3=Dc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),B5=Dc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),S3=Dc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),x3=Dc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zx=Dc(["#text"]),E3=Dc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R2=Dc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D2=Dc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M2=Dc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vd=uu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),T3=uu(/<%[\w\W]*|[\w\W]*%>/gm),Q8=uu(/\${[\w\W]*}/gm),e7=uu(/^data-[\-\w.\u00B7-\uFFFF]/),t7=uu(/^aria-[\-\w]+$/),N5=uu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B2=uu(/^(?:\w+script|data):/i),n7=uu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_3=uu(/^html$/i);var jx=Object.freeze({__proto__:null,MUSTACHE_EXPR:vd,ERB_EXPR:T3,TMPLIT_EXPR:Q8,DATA_ATTR:e7,ARIA_ATTR:t7,IS_ALLOWED_URI:N5,IS_SCRIPT_OR_DATA:B2,ATTR_WHITESPACE:n7,DOCTYPE_NAME:_3});const o7=()=>typeof window>"u"?null:window,k3=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function Gx(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o7();const s=sn=>Gx(sn);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,i=a.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:w,NodeFilter:E,NamedNodeMap:T=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:R,DOMParser:B,trustedTypes:P}=t,F=w.prototype,U=n0(F,"cloneNode"),oe=n0(F,"nextSibling"),W=n0(F,"childNodes"),ee=n0(F,"parentNode");if(typeof h=="function"){const sn=d.createElement("template");sn.content&&sn.content.ownerDocument&&(d=sn.content.ownerDocument)}let J,ye="";const{implementation:ce,createNodeIterator:Ae,createDocumentFragment:He,getElementsByTagName:pe}=d,{importNode:rt}=a;let Je={};s.isSupported=typeof A5=="function"&&typeof ee=="function"&&ce&&ce.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:yt,ERB_EXPR:dt,TMPLIT_EXPR:fn,DATA_ATTR:un,ARIA_ATTR:Jt,IS_SCRIPT_OR_DATA:Ne,ATTR_WHITESPACE:st}=jx;let{IS_ALLOWED_URI:Lt}=jx,xt=null;const bt=On({},[...M5,...C3,...w3,...S3,...Zx]);let Pt=null;const Hn=On({},[...E3,...R2,...D2,...M2]);let Cn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),sa=null,hi=null,wu=!0,Fr=!0,pi=!1,el=!0,ic=!1,Rd=!1,$p=!1,BD=!1,L0=!1,x_=!1,CF=!1,JG=!0,QG=!1;const _q="user-content-";let Bj=!0,ND=!1,E_={},T_=null;const eq=On({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let tq=null;const nq=On({},["audio","video","img","source","image","track"]);let Nj=null;const oq=On({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wF="http://www.w3.org/1998/Math/MathML",SF="http://www.w3.org/2000/svg",Ip="http://www.w3.org/1999/xhtml";let __=Ip,Pj=!1,$j=null;const kq=On({},[wF,SF,Ip],y3);let FC;const Oq=["application/xhtml+xml","text/html"],Aq="text/html";let lc,k_=null;const Rq=d.createElement("form"),sq=function(me){return me instanceof RegExp||me instanceof Function},Ij=function(me){if(!(k_&&k_===me)){if((!me||typeof me!="object")&&(me={}),me=t0(me),FC=Oq.indexOf(me.PARSER_MEDIA_TYPE)===-1?FC=Aq:FC=me.PARSER_MEDIA_TYPE,lc=FC==="application/xhtml+xml"?y3:Wx,xt="ALLOWED_TAGS"in me?On({},me.ALLOWED_TAGS,lc):bt,Pt="ALLOWED_ATTR"in me?On({},me.ALLOWED_ATTR,lc):Hn,$j="ALLOWED_NAMESPACES"in me?On({},me.ALLOWED_NAMESPACES,y3):kq,Nj="ADD_URI_SAFE_ATTR"in me?On(t0(oq),me.ADD_URI_SAFE_ATTR,lc):oq,tq="ADD_DATA_URI_TAGS"in me?On(t0(nq),me.ADD_DATA_URI_TAGS,lc):nq,T_="FORBID_CONTENTS"in me?On({},me.FORBID_CONTENTS,lc):eq,sa="FORBID_TAGS"in me?On({},me.FORBID_TAGS,lc):{},hi="FORBID_ATTR"in me?On({},me.FORBID_ATTR,lc):{},E_="USE_PROFILES"in me?me.USE_PROFILES:!1,wu=me.ALLOW_ARIA_ATTR!==!1,Fr=me.ALLOW_DATA_ATTR!==!1,pi=me.ALLOW_UNKNOWN_PROTOCOLS||!1,el=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ic=me.SAFE_FOR_TEMPLATES||!1,Rd=me.WHOLE_DOCUMENT||!1,L0=me.RETURN_DOM||!1,x_=me.RETURN_DOM_FRAGMENT||!1,CF=me.RETURN_TRUSTED_TYPE||!1,BD=me.FORCE_BODY||!1,JG=me.SANITIZE_DOM!==!1,QG=me.SANITIZE_NAMED_PROPS||!1,Bj=me.KEEP_CONTENT!==!1,ND=me.IN_PLACE||!1,Lt=me.ALLOWED_URI_REGEXP||N5,__=me.NAMESPACE||Ip,Cn=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&sq(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Cn.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&sq(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Cn.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Cn.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ic&&(Fr=!1),x_&&(L0=!0),E_&&(xt=On({},[...Zx]),Pt=[],E_.html===!0&&(On(xt,M5),On(Pt,E3)),E_.svg===!0&&(On(xt,C3),On(Pt,R2),On(Pt,M2)),E_.svgFilters===!0&&(On(xt,w3),On(Pt,R2),On(Pt,M2)),E_.mathMl===!0&&(On(xt,S3),On(Pt,D2),On(Pt,M2))),me.ADD_TAGS&&(xt===bt&&(xt=t0(xt)),On(xt,me.ADD_TAGS,lc)),me.ADD_ATTR&&(Pt===Hn&&(Pt=t0(Pt)),On(Pt,me.ADD_ATTR,lc)),me.ADD_URI_SAFE_ATTR&&On(Nj,me.ADD_URI_SAFE_ATTR,lc),me.FORBID_CONTENTS&&(T_===eq&&(T_=t0(T_)),On(T_,me.FORBID_CONTENTS,lc)),Bj&&(xt["#text"]=!0),Rd&&On(xt,["html","head","body"]),xt.table&&(On(xt,["tbody"]),delete sa.tbody),me.TRUSTED_TYPES_POLICY){if(typeof me.TRUSTED_TYPES_POLICY.createHTML!="function")throw A2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw A2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');J=me.TRUSTED_TYPES_POLICY,ye=J.createHTML("")}else J===void 0&&(J=k3(P,i)),J!==null&&typeof ye=="string"&&(ye=J.createHTML(""));Dc&&Dc(me),k_=me}},rq=On({},["mi","mo","mn","ms","mtext"]),aq=On({},["foreignobject","desc","title","annotation-xml"]),Dq=On({},["title","style","font","a","script"]),xF=On({},C3);On(xF,w3),On(xF,B5);const Fj=On({},S3);On(Fj,x3);const Mq=function(me){let it=ee(me);(!it||!it.tagName)&&(it={namespaceURI:__,tagName:"template"});const Nt=Wx(me.tagName),hs=Wx(it.tagName);return $j[me.namespaceURI]?me.namespaceURI===SF?it.namespaceURI===Ip?Nt==="svg":it.namespaceURI===wF?Nt==="svg"&&(hs==="annotation-xml"||rq[hs]):!!xF[Nt]:me.namespaceURI===wF?it.namespaceURI===Ip?Nt==="math":it.namespaceURI===SF?Nt==="math"&&aq[hs]:!!Fj[Nt]:me.namespaceURI===Ip?it.namespaceURI===SF&&!aq[hs]||it.namespaceURI===wF&&!rq[hs]?!1:!Fj[Nt]&&(Dq[Nt]||!xF[Nt]):!!(FC==="application/xhtml+xml"&&$j[me.namespaceURI]):!1},LC=function(me){O2(s.removed,{element:me});try{me.parentNode.removeChild(me)}catch{me.remove()}},PD=function(me,it){try{O2(s.removed,{attribute:it.getAttributeNode(me),from:it})}catch{O2(s.removed,{attribute:null,from:it})}if(it.removeAttribute(me),me==="is"&&!Pt[me])if(L0||x_)try{LC(it)}catch{}else try{it.setAttribute(me,"")}catch{}},cq=function(me){let it,Nt;if(BD)me="<remove></remove>"+me;else{const Dd=K8(me,/^[\r\n\t ]+/);Nt=Dd&&Dd[0]}FC==="application/xhtml+xml"&&__===Ip&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");const hs=J?J.createHTML(me):me;if(__===Ip)try{it=new B().parseFromString(hs,FC)}catch{}if(!it||!it.documentElement){it=ce.createDocument(__,"template",null);try{it.documentElement.innerHTML=Pj?ye:hs}catch{}}const uc=it.body||it.documentElement;return me&&Nt&&uc.insertBefore(d.createTextNode(Nt),uc.childNodes[0]||null),__===Ip?pe.call(it,Rd?"html":"body")[0]:Rd?it.documentElement:uc},iq=function(me){return Ae.call(me.ownerDocument||me,me,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},Bq=function(me){return me instanceof R&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof T)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},EF=function(me){return typeof C=="object"?me instanceof C:me&&typeof me=="object"&&typeof me.nodeType=="number"&&typeof me.nodeName=="string"},Fp=function(me,it,Nt){Je[me]&&G8(Je[me],hs=>{hs.call(s,it,Nt,k_)})},lq=function(me){let it;if(Fp("beforeSanitizeElements",me,null),Bq(me))return LC(me),!0;const Nt=lc(me.nodeName);if(Fp("uponSanitizeElement",me,{tagName:Nt,allowedTags:xt}),me.hasChildNodes()&&!EF(me.firstElementChild)&&(!EF(me.content)||!EF(me.content.firstElementChild))&&Ui(/<[/\w]/g,me.innerHTML)&&Ui(/<[/\w]/g,me.textContent))return LC(me),!0;if(!xt[Nt]||sa[Nt]){if(!sa[Nt]&&dq(Nt)&&(Cn.tagNameCheck instanceof RegExp&&Ui(Cn.tagNameCheck,Nt)||Cn.tagNameCheck instanceof Function&&Cn.tagNameCheck(Nt)))return!1;if(Bj&&!T_[Nt]){const hs=ee(me)||me.parentNode,uc=W(me)||me.childNodes;if(uc&&hs){const Dd=uc.length;for(let wr=Dd-1;wr>=0;--wr)hs.insertBefore(U(uc[wr],!0),oe(me))}}return LC(me),!0}return me instanceof w&&!Mq(me)||(Nt==="noscript"||Nt==="noembed"||Nt==="noframes")&&Ui(/<\/no(script|embed|frames)/i,me.innerHTML)?(LC(me),!0):(ic&&me.nodeType===3&&(it=me.textContent,it=du(it,yt," "),it=du(it,dt," "),it=du(it,fn," "),me.textContent!==it&&(O2(s.removed,{element:me.cloneNode()}),me.textContent=it)),Fp("afterSanitizeElements",me,null),!1)},uq=function(me,it,Nt){if(JG&&(it==="id"||it==="name")&&(Nt in d||Nt in Rq))return!1;if(!(Fr&&!hi[it]&&Ui(un,it))){if(!(wu&&Ui(Jt,it))){if(!Pt[it]||hi[it]){if(!(dq(me)&&(Cn.tagNameCheck instanceof RegExp&&Ui(Cn.tagNameCheck,me)||Cn.tagNameCheck instanceof Function&&Cn.tagNameCheck(me))&&(Cn.attributeNameCheck instanceof RegExp&&Ui(Cn.attributeNameCheck,it)||Cn.attributeNameCheck instanceof Function&&Cn.attributeNameCheck(it))||it==="is"&&Cn.allowCustomizedBuiltInElements&&(Cn.tagNameCheck instanceof RegExp&&Ui(Cn.tagNameCheck,Nt)||Cn.tagNameCheck instanceof Function&&Cn.tagNameCheck(Nt))))return!1}else if(!Nj[it]){if(!Ui(Lt,du(Nt,st,""))){if(!((it==="src"||it==="xlink:href"||it==="href")&&me!=="script"&&Y8(Nt,"data:")===0&&tq[me])){if(!(pi&&!Ui(Ne,du(Nt,st,"")))){if(Nt)return!1}}}}}}return!0},dq=function(me){return me.indexOf("-")>0},mq=function(me){let it,Nt,hs,uc;Fp("beforeSanitizeAttributes",me,null);const{attributes:Dd}=me;if(!Dd)return;const wr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pt};for(uc=Dd.length;uc--;){it=Dd[uc];const{name:Md,namespaceURI:Lj}=it;Nt=Md==="value"?it.value:X8(it.value);const Pq=Nt;if(hs=lc(Md),wr.attrName=hs,wr.attrValue=Nt,wr.keepAttr=!0,wr.forceKeepAttr=void 0,Fp("uponSanitizeAttribute",me,wr),Nt=wr.attrValue,wr.forceKeepAttr)continue;if(!wr.keepAttr){PD(Md,me);continue}if(!el&&Ui(/\/>/i,Nt)){PD(Md,me);continue}ic&&(Nt=du(Nt,yt," "),Nt=du(Nt,dt," "),Nt=du(Nt,fn," "));const fq=lc(me.nodeName);if(!uq(fq,hs,Nt)){PD(Md,me);continue}if(QG&&(hs==="id"||hs==="name")&&(PD(Md,me),Nt=_q+Nt),J&&typeof P=="object"&&typeof P.getAttributeType=="function"&&!Lj)switch(P.getAttributeType(fq,hs)){case"TrustedHTML":{Nt=J.createHTML(Nt);break}case"TrustedScriptURL":{Nt=J.createScriptURL(Nt);break}}if(Nt!==Pq)try{Lj?me.setAttributeNS(Lj,Md,Nt):me.setAttribute(Md,Nt)}catch{PD(Md,me)}}Fp("afterSanitizeAttributes",me,null)},Nq=function sn(me){let it;const Nt=iq(me);for(Fp("beforeSanitizeShadowDOM",me,null);it=Nt.nextNode();)Fp("uponSanitizeShadowNode",it,null),!lq(it)&&(it.content instanceof g&&sn(it.content),mq(it));Fp("afterSanitizeShadowDOM",me,null)};return s.sanitize=function(sn){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it,Nt,hs,uc;if(Pj=!sn,Pj&&(sn="<!-->"),typeof sn!="string"&&!EF(sn))if(typeof sn.toString=="function"){if(sn=sn.toString(),typeof sn!="string")throw A2("dirty is not a string, aborting")}else throw A2("toString is not a function");if(!s.isSupported)return sn;if($p||Ij(me),s.removed=[],typeof sn=="string"&&(ND=!1),ND){if(sn.nodeName){const Md=lc(sn.nodeName);if(!xt[Md]||sa[Md])throw A2("root node is forbidden and cannot be sanitized in-place")}}else if(sn instanceof C)it=cq("<!---->"),Nt=it.ownerDocument.importNode(sn,!0),Nt.nodeType===1&&Nt.nodeName==="BODY"||Nt.nodeName==="HTML"?it=Nt:it.appendChild(Nt);else{if(!L0&&!ic&&!Rd&&sn.indexOf("<")===-1)return J&&CF?J.createHTML(sn):sn;if(it=cq(sn),!it)return L0?null:CF?ye:""}it&&BD&&LC(it.firstChild);const Dd=iq(ND?sn:it);for(;hs=Dd.nextNode();)lq(hs)||(hs.content instanceof g&&Nq(hs.content),mq(hs));if(ND)return sn;if(L0){if(x_)for(uc=He.call(it.ownerDocument);it.firstChild;)uc.appendChild(it.firstChild);else uc=it;return(Pt.shadowroot||Pt.shadowrootmode)&&(uc=rt.call(a,uc,!0)),uc}let wr=Rd?it.outerHTML:it.innerHTML;return Rd&&xt["!doctype"]&&it.ownerDocument&&it.ownerDocument.doctype&&it.ownerDocument.doctype.name&&Ui(_3,it.ownerDocument.doctype.name)&&(wr="<!DOCTYPE "+it.ownerDocument.doctype.name+`>
`+wr),ic&&(wr=du(wr,yt," "),wr=du(wr,dt," "),wr=du(wr,fn," ")),J&&CF?J.createHTML(wr):wr},s.setConfig=function(sn){Ij(sn),$p=!0},s.clearConfig=function(){k_=null,$p=!1},s.isValidAttribute=function(sn,me,it){k_||Ij({});const Nt=lc(sn),hs=lc(me);return uq(Nt,hs,it)},s.addHook=function(sn,me){typeof me=="function"&&(Je[sn]=Je[sn]||[],O2(Je[sn],me))},s.removeHook=function(sn){if(Je[sn])return q8(Je[sn])},s.removeHooks=function(sn){Je[sn]&&(Je[sn]=[])},s.removeAllHooks=function(){Je={}},s}var s7=Gx();const O3=t=>s7().sanitize(t);var ai=tinymce.util.Tools.resolve("tinymce.util.I18n");const r7={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},P5="temporary-placeholder",A3=t=>()=>Xe(t,P5).getOr("!not found!"),R3=(t,s)=>{const a=t.toLowerCase();if(ai.isRtl()){const i=aa(a,"-rtl");return _n(s,i)?i:a}else return a},$5=(t,s)=>Xe(s,R3(t,s)),I5=(t,s)=>{const a=s();return $5(t,a).getOrThunk(A3(a))},F5=(t,s,a)=>{const i=s();return $5(t,i).or(a).getOrThunk(A3(i))},L5=t=>ai.isRtl()?_n(r7,t):!1,D3=()=>zt("add-focusable",[Jn(t=>{ny(t.element,"svg").each(s=>Ue(s,"focusable","false"))})]),M3=(t,s,a,i)=>{var d,g;const h=L5(s)?["tox-icon--flip"]:[],C=Xe(a,R3(s,a)).or(i).getOrThunk(A3(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:C},behaviours:Oe([...(g=t.behaviours)!==null&&g!==void 0?g:[],D3()])}},oc=(t,s,a,i=_.none())=>M3(s,t,a(),i),H5=(t,s,a)=>{const i=a(),d=$t(t,g=>_n(i,R3(g,i)));return M3(s,d.getOr(P5),i,_.none())},a7={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},qx=ga({name:"Notification",factory:t=>{const s=qe("notification-text"),a=Tn({dom:lu(`<p id=${s}>${O3(t.backstageProvider.translate(t.text))}</p>`),behaviours:Oe([Bt.config({})])}),i=F=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${F}%`}}}),d=F=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${F}%`}}),g=Tn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Oe([Bt.config({})])}),w={updateProgress:(F,U)=>{F.getSystem().isConnected()&&g.getOpt(F).each(oe=>{Bt.set(oe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(U)]},d(U)])})},updateText:(F,U)=>{if(F.getSystem().isConnected()){const oe=a.get(F);Bt.set(oe,[Ho(U)])}}},E=Ht([t.icon.toArray(),t.level.toArray(),t.level.bind(F=>_.from(a7[F])).toArray()]),T=Tn(vr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[oc("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Oe([Yn.config({}),sr.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:F=>{t.onAction(F)}})),R=H5(E,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Oe([Bt.config({})])},P=[R,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(F=>["tox-notification","tox-notification--in",`tox-notification--${F}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Oe([Yn.config({}),Ot.config({}),ct.config({mode:"special",onEscape:F=>(t.onAction(F),_.some(!0))})]),components:P.concat(t.progress?[g.asSpec()]:[]).concat([T.asSpec()]),apis:w}},configFields:[hn("level"),be("progress"),hn("icon"),be("onAction"),be("text"),be("iconProvider"),be("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var c7=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>{const T=jo(ne.fromDom(t.getContentAreaContainer()));return _.some(T)},h=T=>{g().each(R=>{Qe(T,B=>{la(B.element)>R.width&&It(B.element,"width",R.width+"px")})})};return{open:(T,R,B)=>{const P=()=>{const W=ce=>{Bt.remove(ce,F),U()},ee=(ce,Ae)=>{Hc(ce.element).length===0?J(ce,Ae):ye(ce,Ae)},J=(ce,Ae)=>{mo.hide(ce),i.clear(),Ae&&t.focus()},ye=(ce,Ae)=>{Ae&&ct.focusIn(ce)};i.on(ce=>{R();const Ae=B();W(ce),ee(ce,Ae)})},F=hr(qx.sketch({text:T.text,level:po(["success","error","warning","warn","info"],T.type)?T.type:void 0,progress:T.progressBar===!0,icon:T.icon,onAction:P,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const W=Mr(F);i.on(ee=>{Bt.append(ee,W),mo.reposition(ee),Co.refresh(ee),h(ee.components())})}else{const W=hr(mo.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Oe([ct.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Bt.config({}),...e0(t)&&!d.header.isPositionedAtTop()?[]:[Co.config({contextual:{lazyContext:()=>_.some(jo(ne.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:ce=>Fm(t,ce.element).map(He=>({bounds:sp(He),optScrollEnv:_.some({currentScrollTop:He.element.dom.scrollTop,scrollElmTop:ia(He.element).top})})).getOrThunk(()=>({bounds:zs(),optScrollEnv:_.none()}))})]])})),ee=Mr(F),J={maxHeightFunction:Wf()},ye={...d.anchors.banner(),overrides:J};i.set(W),a.add(W),mo.showWithinBounds(W,ee,{anchor:ye},g)}Zn(T.timeout)&&T.timeout>0&&C2.setEditorTimeout(t,()=>{P()},T.timeout);const U=()=>{i.on(W=>{mo.reposition(W),Co.refresh(W),h(W.components())})};return{close:P,reposition:U,text:W=>{qx.updateText(F,W)},settings:T,getEl:()=>F.element.dom,progressBar:{value:W=>{qx.updateProgress(F,W)}}}},close:T=>{T.close()},getArgs:T=>T.settings}};const z5={setup:(t,s)=>{const a=(d,g)=>{ft(d,Qc(),{raw:g})},i=()=>t.getMenu().bind(ze.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Uu),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(ze.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var Kx;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(Kx||(Kx={}));var Tl=Kx;const Yx="tox-menu-nav__js",Xx="tox-collection__item",B3="tox-swatch",V5={normal:Yx,color:B3},Jx="tox-collection__item--enabled",N3="tox-collection__group-heading",P3="tox-collection__item-icon",Qx="tox-collection__item-label",U5="tox-collection__item-accessory",W5="tox-collection__item-caret",$3="tox-collection__item-checkmark",rp="tox-collection__item--active",I3="tox-collection__item-container",Z5="tox-collection__item-container--column",fg="tox-collection__item-container--row",i7="tox-collection__item-container--align-right",F3="tox-collection__item-container--align-left",eE="tox-collection__item-container--valign-top",l7="tox-collection__item-container--valign-middle",j5="tox-collection__item-container--valign-bottom",L3=t=>Xe(V5,t).getOr(Yx),G5=t=>t==="color"?"tox-swatches":"tox-menu",N2=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:G5(t),tieredMenu:"tox-tiered-menu"}),gg=t=>{const s=N2(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:L3(t)}},u7=(t,s,a)=>{const i=N2(a);return{tag:"div",classes:Ht([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},q5=[Jh.parts.items({})],P2=(t,s,a)=>{const i=N2(a);return{dom:{tag:"div",classes:Ht([[i.tieredMenu]])},markers:gg(a)}},H3=q([hn("data"),te("inputAttributes",{}),te("inputStyles",{}),te("tag","input"),te("inputClasses",[]),rn("onSetValue"),te("styles",{}),te("eventOrder",{}),Ns("inputBehaviours",[Ke,Ot]),te("selectOnFocus",!0)]),z3=t=>Oe([Ot.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=ie(a);a.dom.setSelectionRange(0,i.length)}:Z})]),d7=t=>({...z3(t),...Ps(t.inputBehaviours,[Ke.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>ie(s.element),setValue:(s,a)=>{ie(s.element)!==a&&bl(s.element,a)}},onSetValue:t.onSetValue})])}),V3=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),m7=(t,s)=>({uid:t.uid,dom:V3(t),components:[],behaviours:d7(t),eventOrder:t.eventOrder}),ap=ga({name:"Input",configFields:H3(),factory:m7}),K5=qe("refetch-trigger-event"),Y5=qe("redirect-menu-item-interaction"),U3="tox-menu__searcher",hg=t=>xn(t.element,`.${U3}`).bind(s=>t.getSystem().getByDom(s).toOptional()),W3=hg,f7=(t,s)=>{Ke.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},X5=t=>{const s=Ke.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},g7=(t,s)=>{Xs(s.element,"id").each(a=>Ue(t.element,"aria-activedescendant",a))},h7=t=>{const s=(d,g)=>(g.cut(),_.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return ft(d,Y5,h),_.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Xx]},components:[ap.sketch({inputClasses:[U3,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Oe([zt(i,[ve(ul(),d=>{Zt(d,K5)}),ve(Qc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),ct.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,ct.name()]}})]}},tE="tox-collection--results__js",$2=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:qe("aria-item-search-result-id"),"aria-selected":"false"}}}:t},Z3=(t,s)=>a=>{const i=ra(a,s);return xe(i,d=>({dom:t,components:d}))},J5=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Jh.parts.items({preprocess:t!=="auto"?Z3({tag:"div",classes:["tox-swatches__row"]},t):gt})]}]}),p7=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Jh.parts.items({preprocess:Z3({tag:"div",classes:["tox-collection__group"]},t)})]}),j3=(t,s)=>{const a=[];let i=[];return Qe(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(_n(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),xe(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},nE=(t,s,a)=>Jh.parts.items({preprocess:i=>{const d=xe(i,a);return t!=="auto"&&t>1?Z3({tag:"div",classes:["tox-collection__group"]},t)(d):j3(d,(g,h)=>s[h].type==="separator")}}),Q5=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[nE(t,s,gt)]}),eB=(t,s,a=!0)=>{const i=qe("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",tE].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[nE(t,s,$2)]}},tB=(t,s,a)=>{const i=qe("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[h7({i18n:ai.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],tE],attributes:{id:i}},components:[nE(t,s,$2)]}]}},nB=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Jh.parts.items({preprocess:a=>j3(a,(i,d)=>t[d].type==="separator")})]}),I2=t=>va(t,s=>"icon"in s&&s.icon!==void 0),Lm=t=>(console.error(Ti(t)),console.log(t),_.none()),b7=(t,s,a,i,d)=>{const g=nB(a);return{value:t,dom:g.dom,components:g.components,items:a}},G3=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?Q5(i,a):d.searchMode.searchMode==="search-with-field"?tB(i,a,d.searchMode):eB(i,a);if(d.menuType==="color"){const h=J5(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=Q5(i,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=p7(i);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:u7(s,i,d.menuType),components:q5,items:a}},cs=ds("type"),oE=ds("name"),sE=ds("label"),Hm=ds("text"),oB=ds("title"),sB=ds("icon"),F2=ds("value"),v7=qa("fetch"),y7=qa("getSubmenuItems"),o0=qa("onAction"),q3=qa("onItemAction"),pg=Go("onSetup",()=>Z),C7=Ss("name"),bg=Ss("text"),rB=Ss("role"),Wi=Ss("icon"),L2=Ss("tooltip"),rE=Ss("label"),aE=Ss("shortcut"),aB=al("select"),cE=Jo("active",!1),w7=Jo("borderless",!1),_l=Jo("enabled",!0),H2=Jo("primary",!1),iE=t=>te("columns",t),K3=te("meta",{}),Y3=Go("onAction",Z),cp=t=>Ar("type",t),X3=t=>ws("name","name",nn(()=>qe(`${t}-name`)),je),S7=t=>ws("value","value",nn(()=>qe(`${t}-value`)),qc()),cB=_t([cs,bg]),iB=t=>Oo("separatormenuitem",cB,t),lB=_t([cp("autocompleteitem"),cE,_l,K3,F2,bg,Wi]),x7=t=>Oo("Autocompleter.Separator",cB,t),E7=t=>Oo("Autocompleter.Item",lB,t),z2=[_l,L2,Wi,bg,pg],Mc=_t([cs,o0,aE].concat(z2)),kl=t=>Oo("toolbarbutton",Mc,t),J3=[cE].concat(z2),Q3=_t(J3.concat([cs,o0,aE])),lE=t=>Oo("ToggleButton",Q3,t),uB=[Go("predicate",$n),Yc("scope","node",["node","editor"]),Yc("position","selection",["node","selection","line"])],T7=z2.concat([cp("contextformbutton"),H2,o0,bn("original",gt)]),V2=J3.concat([cp("contextformbutton"),H2,o0,bn("original",gt)]),uE=z2.concat([cp("contextformbutton")]),eO=J3.concat([cp("contextformtogglebutton")]),_7=As("type",{contextformbutton:T7,contextformtogglebutton:V2}),mu=_t([cp("contextform"),Go("initValue",q("")),rE,Ka("commands",_7),rl("launch",As("type",{contextformbutton:uE,contextformtogglebutton:eO}))].concat(uB)),k7=t=>Oo("ContextForm",mu,t),O7=_t([cp("contexttoolbar"),ds("items")].concat(uB)),Zi=t=>Oo("ContextToolbar",O7,t),U2=[cs,ds("src"),Ss("alt"),Xc("classes",[],je)],Ol=_t(U2),A7=[cs,Hm,C7,Xc("classes",["tox-collection__item-label"],je)],Ln=_t(A7),ip=us(()=>$u("type",{cardimage:Ol,cardtext:Ln,cardcontainer:dE})),dE=_t([cs,Ar("direction","horizontal"),Ar("align","left"),Ar("valign","middle"),Ka("items",ip)]),lp=[_l,bg,rB,aE,S7("menuitem"),K3],tO=_t([cs,rE,Ka("items",ip),pg,Y3].concat(lp)),nO=t=>Oo("cardmenuitem",tO,t),R7=_t([cs,cE,Wi].concat(lp)),oO=t=>Oo("choicemenuitem",R7,t),dB=[cs,ds("fancytype"),Y3],mB=[te("initData",{})].concat(dB),fB=[al("select"),pv("initData",{},[Jo("allowCustomColors",!0),Ar("storageKey","default"),cl("colors",qc())])].concat(dB),sO=As("fancytype",{inserttable:mB,colorswatch:fB}),gB=t=>Oo("fancymenuitem",sO,t),mE=_t([cs,pg,Y3,Wi].concat(lp)),D7=t=>Oo("menuitem",mE,t),M7=_t([cs,y7,pg,Wi].concat(lp)),B7=t=>Oo("nestedmenuitem",M7,t),N7=_t([cs,Wi,cE,pg,o0].concat(lp)),P7=t=>Oo("togglemenuitem",N7,t),fE=(t,s,a)=>{const i=br(t.element,"."+a);if(i.length>0){const d=oo(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return _.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return _.none()},hB=(t,s)=>Oe([zt(t,s)]),s0={namedEvents:hB,unnamedEvents:t=>hB(qe("unnamed-events"),t)},pB=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),bB="silver.readonly",$7=_t([H_("readonly")]),W2=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&Qe(d,g=>{g.broadcastOn([Cl()],{target:i})}),Qe(d,g=>{g.broadcastOn([bB],{readonly:s})})},gE=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&W2(s,!0)}),t.on("SwitchMode",()=>W2(s,t.mode.isReadOnly())),Ox(t)&&t.mode.set("readonly")},Es=()=>fa.config({channels:{[bB]:{schema:$7,onReceive:(t,s)=>{Tt.set(t,s.readonly)}}}}),Al={item:t=>Tt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Tt.config({disabled:t}),splitButton:t=>Tt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Tt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},hE=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},zm=(t,s)=>Jn(a=>{hE(t,a)(d=>{const g=t.onSetup(d);Ye(g)&&s.set(g)})}),ta=(t,s)=>ml(a=>hE(t,a)(s.get())),I7=(t,s)=>ei((a,i)=>{hE(t,a)(t.onAction),!t.triggersSubmenu&&s===Tl.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Zt(a,rh()),i.stop())}),rO={[wc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},up=Pd,dp=(t,s,a,i)=>{const d=pt(Z);return{type:"item",dom:s.dom,components:up(s.optComponents),data:t.data,eventOrder:rO,hasSubmenu:t.triggersSubmenu,itemBehaviours:Oe([zt("item-events",[I7(t,a),zm(t,d),ta(t,d)]),Al.item(()=>!t.enabled||i.isDisabled()),Es(),Bt.config({})].concat(t.itemBehaviours))}},r0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),pE=t=>{const s=Yb.os.isMacOS()||Yb.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=xe(g,C=>{const w=C.toLowerCase().trim();return _n(d,w)?d[w]:C});return s?h.join(""):h.join("+")},bE=(t,s,a=[P3])=>oc(t,{tag:"div",classes:a},s),aO=t=>({dom:{tag:"div",classes:[Qx]},components:[Ho(ai.translate(t))]}),vB=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),F7=(t,s)=>({dom:{tag:"div",classes:[Qx]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Ho(ai.translate(s))]}]}),L7=t=>({dom:{tag:"div",classes:[U5]},components:[Ho(pE(t))]}),yB=t=>bE("checkmark",t,[$3]),H7=t=>bE("chevron-right",t,[W5]),CB=t=>bE("chevron-down",t,[W5]),wB=(t,s)=>{const a=t.direction==="vertical"?Z5:fg,i=t.align==="left"?F3:i7;return{dom:{tag:"div",classes:[I3,a,i,(()=>{switch(t.valign){case"top":return eE;case"middle":return l7;case"bottom":return j5}})()]},components:s}},SB=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),z7=(t,s,a)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(E=>F5(E,s.icons,a)),C=t.ariaLabel.map(E=>({"aria-label":s.translate(E),"data-mce-name":E})).getOr({});return{dom:(()=>{const E=B3,T=h.getOr(""),R={tag:"div",attributes:C,classes:[E]};return g===i?{...R,tag:"button",classes:[...R.classes,"tox-swatches__picker-btn"],innerHtml:T}:g===d?{...R,classes:[...R.classes,"tox-swatch--remove"],innerHtml:T}:St(g)?{...R,attributes:{...R.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:T}:R})(),optComponents:[]}},xB=t=>{const s=t.map(a=>({attributes:{id:qe("menu-item"),"aria-label":ai.translate(a)}})).getOr({});return{tag:"div",classes:[Yx,Xx],...s}},V7=(t,s,a,i)=>{const d={tag:"div",classes:[P3]},g=B=>oc(B,d,s.icons,i),h=()=>_.some({dom:d}),C=a?t.iconContent.map(g).orThunk(h):_.none(),w=t.checkMark,E=_.from(t.meta).fold(()=>aO,B=>_n(B,"style")?Dt(F7,B.style):aO),T=t.htmlContent.fold(()=>t.textContent.map(E),B=>_.some(vB(B,[Qx])));return{dom:xB(t.ariaLabel),optComponents:[C,T,t.shortcutContent.map(L7),w,t.caret]}},yd=(t,s,a,i=_.none())=>t.presets==="color"?z7(t,s,i):V7(t,s,a,i),EB=(t,s,a)=>Xe(t,"tooltipWorker").map(i=>[sr.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Wf}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{sr.setComponents(d,[Z1({element:ne.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[sr.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),TB=t=>ep.DOM.encode(t),cO=(t,s)=>{const a=ai.translate(t),i=TB(a);if(s.length>0){const d=new RegExp(pB(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},_B=(t,s,a,i,d,g,h,C=!0)=>{const w=yd({presets:i,textContent:_.none(),htmlContent:a?t.text.map(T=>cO(T,s)):_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:_.none(),checkMark:_.none(),caret:_.none(),value:t.value},h.providers,C,t.icon),E=t.text.filter(T=>!a&&T!=="");return dp({data:r0(t),enabled:t.enabled,getApi:q({}),onAction:T=>d(t.value,t.meta),onSetup:q(Z),triggersSubmenu:!1,itemBehaviours:EB(t,h,E)},w,g,h.providers)},iO=(t,s)=>xe(t,a=>{switch(a.type){case"cardcontainer":return wB(a,iO(a.items,s));case"cardimage":return SB(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>po(s.cardText.highlightOn,g))?_.from(s.cardText.matchText).getOr(""):"";return vB(cO(a.text,d),a.classes)}}),lO=(t,s,a,i)=>{const d=h=>({isEnabled:()=>!Tt.isDisabled(h),setEnabled:C=>{Tt.set(h,!C),Qe(br(h.element,"*"),w=>{h.getSystem().getByDom(w).each(E=>{E.hasConfigured(Tt)&&Tt.set(E,!C)})})}}),g={dom:xB(t.label),optComponents:[_.some({dom:{tag:"div",classes:[I3,fg]},components:iO(t.items,i)})]};return dp({data:r0({text:_.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:_.from(i.itemBehaviours).getOr([])},g,s,a.providers)},uO=(t,s,a,i,d,g,h,C=!0)=>{const w=R=>({setActive:B=>{Gt.set(R,B)},isActive:()=>Gt.isOn(R),isEnabled:()=>!Tt.isDisabled(R),setEnabled:B=>Tt.set(R,!B)}),E=yd({presets:a,textContent:s?t.text:_.none(),htmlContent:_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:_.none(),checkMark:s?_.some(yB(h.icons)):_.none(),caret:_.none(),value:t.value},h,C),T=t.text.filter(q(!s)).map(R=>sr.config(h.tooltips.getConfig({tooltipText:h.translate(R)})));return Fo(dp({data:r0(t),enabled:t.enabled,getApi:w,onAction:R=>i(t.value),onSetup:R=>(R.setActive(d),Z),triggersSubmenu:!1,itemBehaviours:[...T.toArray()]},E,g,h),{toggling:{toggleClass:Jx,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},vE=n2(Q4(),e3()),dO=t=>({value:AB(t)}),kB=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,mO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,OB=t=>kB.test(t)||mO.test(t),AB=t=>U0(t,"#").toUpperCase(),U7=t=>OB(t)?_.some({value:AB(t)}):_.none(),RB=t=>({value:t.value.replace(kB,(a,i,d,g)=>i+i+d+d+g+g)}),DB=t=>{const s=RB(t),a=mO.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},yE=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Z2=t=>{const s=yE(t.red)+yE(t.green)+yE(t.blue);return dO(s)},MB=Math.min,BB=Math.max,CE=Math.round,W7=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Z7=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,mp=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),fO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},NB=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=BB(0,MB(g,1)),h=BB(0,MB(h,1)),g===0)return s=a=i=CE(255*h),mp(s,a,i,1);const C=d/60,w=h*g,E=w*(1-Math.abs(C%2-1)),T=h-w;switch(Math.floor(C)){case 0:s=w,a=E,i=0;break;case 1:s=E,a=w,i=0;break;case 2:s=0,a=w,i=E;break;case 3:s=0,a=E,i=w;break;case 4:s=E,a=0,i=w;break;case 5:s=w,a=0,i=E;break;default:s=a=i=0}return s=CE(255*(s+T)),a=CE(255*(a+T)),i=CE(255*(i+T)),mp(s,a,i,1)},j2=t=>{const s=DB(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return mp(a,i,d,1)},PB=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return mp(d,g,h,C)},wE=t=>{const s=W7.exec(t);if(s!==null)return _.some(PB(s[1],s[2],s[3],"1"));const a=Z7.exec(t);return a!==null?_.some(PB(a[1],a[2],a[3],a[4])):_.none()},$B=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,IB=mp(255,0,0,1),j7=t=>{t.dispatch("SkinLoaded")},G7=(t,s)=>{t.dispatch("SkinLoadError",s)},q7=t=>{t.dispatch("ResizeEditor")},a0=(t,s)=>{t.dispatch("ResizeContent",s)},FB=(t,s)=>{t.dispatch("ScrollContent",s)},LB=(t,s)=>{t.dispatch("TextColorChange",s)},K7=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},Y7=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),X7=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},J7=(t,s)=>{t.dispatch("StylesTextUpdate",s)},Q7=(t,s)=>{t.dispatch("AlignTextUpdate",s)},gO=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},HB=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},zB=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},eL=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},c0=(t,s)=>()=>{t(),s()},pa=t=>fp(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),tL=(t,s)=>a=>{const i=er(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},SE=(t,s)=>a=>{const i=pa(t)(a),d=tL(t,s)(a);return()=>{i(),d()}},fp=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},VB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Bc=(t,s)=>()=>t.execCommand(s);var gp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const UB={},nL=(t,s=10)=>{const a=gp.getItem(t),i=Yt(a)?JSON.parse(a):[],g=(E=>s-E.length<0?E.slice(0,s):E)(i),h=E=>{Ee(g,E).each(C),g.unshift(E),g.length>s&&g.pop(),gp.setItem(t,JSON.stringify(g))},C=E=>{g.splice(E,1)};return{add:h,state:()=>g.slice(0)}},WB=t=>Xe(UB,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=gp.getItem(s);if(dn(a)){const d=gp.getItem("tinymce-custom-colors");gp.setItem(s,St(d)?d:"[]")}const i=nL(s,10);return UB[t]=i,i}),xE=t=>xe(WB(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),EE=(t,s)=>{WB(t).add(s)},hp=(t,s,a)=>({hue:t,saturation:s,value:a}),TE=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(C===w)return i=C,hp(0,0,i*100);const E=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-E/(w-C)),a=(w-C)/w,i=w,hp(Math.round(s),Math.round(a*100),Math.round(i*100))},oL=t=>TE(j2(t)),ZB=t=>Z2(NB(t)),hO=t=>U7(t).orThunk(()=>wE(t).map(Z2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return Z2(mp(d,g,h,C))}),G2="forecolor",i0="hilitecolor",jB=5,sL=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+hO(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Cd=t=>s=>s.options.get(t),pO="#000000",rL=t=>{const s=t.options.register,a=d=>mt(d,Yt)?{value:sL(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>Zn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:i,default:bO(t)}),s("color_cols_foreground",{processor:i,default:GB(t,G2)}),s("color_cols_background",{processor:i,default:GB(t,i0)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:pO}),s("color_default_background",{processor:"string",default:pO})},_E=(t,s)=>s===G2&&t.options.isSet("color_map_foreground")?Cd("color_map_foreground")(t):s===i0&&t.options.isSet("color_map_background")?Cd("color_map_background")(t):Cd("color_map")(t),bO=(t,s="default")=>Math.max(jB,Math.ceil(Math.sqrt(_E(t,s).length))),GB=(t,s)=>{const a=Cd("color_cols")(t),i=bO(t,s);return a===bO(t)?i:a},qB=(t,s="default")=>Math.round((()=>s===G2?Cd("color_cols_foreground")(t):s===i0?Cd("color_cols_background")(t):Cd("color_cols")(t))()),KB=Cd("custom_colors"),aL=Cd("color_default_foreground"),cL=Cd("color_default_background"),iL="rgba(0, 0, 0, 0)",lL=t=>wE(t).exists(s=>s.alpha!==0),YB=t=>xf(t,s=>{if(jn(s)){const a=Zo(s,"background-color");return Rt(lL(a),a)}else return _.none()}).getOr(iL),XB=(t,s)=>{const a=ne.fromDom(t.selection.getStart()),i=s==="hilitecolor"?YB(a):Zo(a,"color");return wE(i).map(d=>"#"+Z2(d).value)},uL=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},wd=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},dL=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{uL(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{wd(t,s)})},JB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},q2=(t,s,a,i)=>{a==="custom"?sN(t)(g=>{g.each(h=>{EE(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},XB(t,s).getOr(pO)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},Ts=(t,s,a)=>t.concat(xE(s).concat(JB(a))),QB=(t,s,a)=>i=>{i(Ts(t,s,a))},vO=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},eN=(t,s)=>{t.setTooltip(s)},tN=(t,s)=>a=>{const i=XB(t,s);return za(i,a.toUpperCase())},yO=(t,s,a)=>{if(Mo(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=Ts(_E(t,s),s,!1),g=$t(d,h=>h.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},nN=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:yO(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:tN(t,a),columns:qB(t,a),fetch:QB(_E(t,a),a,KB(t)),onAction:d=>{q2(t,a,i.get(),Z)},onItemAction:(d,g)=>{q2(t,a,g,h=>{i.set(h),LB(t,{name:s,color:h})})},onSetup:d=>{vO(d,s,i.get());const g=h=>{h.name===s&&(vO(d,h.name,h.color),eN(d,yO(t,a,h.color)))};return t.on("TextColorChange",g),c0(pa(t)(d),()=>{t.off("TextColorChange",g)})}})},oN=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(eN(g,yO(t,a,d.get())),vO(g,s,d.get()),pa(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:tN(t,a),initData:{storageKey:a},onAction:g=>{q2(t,a,g.value,h=>{d.set(h),LB(t,{name:s,color:h})})}}]})},sN=t=>(s,a)=>{let i=!1;const d=C=>{const E=C.getData().colorpicker;i?(s(_.from(E)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(C,w)=>{w.name==="hex-valid"&&(i=w.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:Z,onCancel:()=>{s(_.none())}})},mL=t=>{dL(t);const s=aL(t),a=cL(t),i=pt(s),d=pt(a);nN(t,"forecolor","forecolor",i),nN(t,"backcolor","hilitecolor",d),oN(t,"forecolor","forecolor","Text color",i),oN(t,"backcolor","hilitecolor","Background color",d)},CO=(t,s,a,i,d,g,h,C)=>{const w=I2(s),T=fL(s,a,i,d!=="color"?"normal":"color",g,h,C);return G3(t,w,T,i,{menuType:d})},fL=(t,s,a,i,d,g,h)=>Pd(xe(t,C=>C.type==="choiceitem"?oO(C).fold(Lm,w=>_.some(uO(w,a===1,i,s,g(w.value),d,h,I2(t)))):_.none())),kE=(t,s)=>{const a=gg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?xn(d.element,"[aria-checked=true]"):_.none()}},gL=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${B3}`:`.${Xx}`}},hL=(t,s)=>{const a=pL(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...CO(qe("menu-value"),a,C=>{t.onAction({value:C})},i,d,Tl.CLOSE_ON_EXECUTE,t.select.getOr($n),s.shared.providers),markers:gg(d),movement:kE(i,d),showMenuRole:!1};return{type:"widget",data:{value:qe("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vE.widget(Jh.sketch(h))]}},pL=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>Ts(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(JB(a)))},rN=qe("cell-over"),aN=qe("cell-execute"),bL=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),vL=(t,s,a)=>{const i=h=>ft(h,rN,{row:t,col:s}),d=h=>ft(h,aN,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return hr({dom:{tag:"div",attributes:{role:"button",["aria-label"]:a}},behaviours:Oe([zt("insert-table-picker-cell",[ve(il(),Ot.focus),ve(wc(),d),ve(em(),g),ve(Di(),g)]),Gt.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ot.config({onFocus:i})])})},yL=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=t(d+1,h+1);g.push(vL(d,h,C))}i.push(g)}return i},CL=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Gt.set(t[g][h],g<=s&&h<=a)},wL=t=>fe(t,s=>xe(s,Mr)),cN=(t,s)=>Ho(`${s}x${t}`),SL={inserttable:(t,s)=>{const d=bL(s),g=yL(d,10,10),h=cN(0,0),C=Tn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Oe([Bt.config({})])});return{type:"widget",data:{value:qe("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vE.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:wL(g).concat(C.asSpec()),behaviours:Oe([zt("insert-table-picker",[Jn(w=>{Bt.set(C.get(w),[h])}),_v(rN,(w,E,T)=>{const{row:R,col:B}=T.event;CL(g,R,B,10,10),Bt.set(C.get(w),[cN(R+1,B+1)])}),_v(aN,(w,E,T)=>{const{row:R,col:B}=T.event;t.onAction({numRows:R+1,numColumns:B+1}),Zt(w,rh())})]),ct.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:hL},iN=(t,s)=>Xe(SL,t.fancytype).map(a=>a(t,s)),xL=(t,s,a,i=!0,d=!1)=>{const g=d?CB(a.icons):H7(a.icons),h=w=>({isEnabled:()=>!Tt.isDisabled(w),setEnabled:E=>Tt.set(w,!E),setIconFill:(E,T)=>{xn(w.element,`svg path[class="${E}"], rect[class="${E}"]`).each(R=>{Ue(R,"fill",T)})},setTooltip:E=>{const T=a.translate(E);Ue(w.element,"aria-label",T)}}),C=yd({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.some(g),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return dp({data:r0(t),getApi:h,enabled:t.enabled,onAction:Z,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},lN=(t,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!Tt.isDisabled(h),setEnabled:C=>Tt.set(h,!C)}),g=yd({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.none(),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return dp({data:r0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},EL=t=>({type:"separator",dom:{tag:"div",classes:[Xx,N3]},components:t.text.map(Ho).toArray()}),TL=(t,s,a,i=!0)=>{const d=h=>({setActive:C=>{Gt.set(h,C)},isActive:()=>Gt.isOn(h),isEnabled:()=>!Tt.isDisabled(h),setEnabled:C=>Tt.set(h,!C)}),g=yd({iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,checkMark:_.some(yB(a.icons)),caret:_.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return Fo(dp({data:r0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:Jx,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},_L=_B,wO=EL,kL=lN,OL=xL,AL=TL,RL=iN,uN=lO;var ML=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),dN=[vn("others",Ei(Ut.value,qc()))],BL=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(No(g.others).length===0)throw new Error("Cannot find any known coupled components");return Xe(t,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const E=Xe(h.others,C).getOrDie("No information found for coupled component: "+C)(g),T=g.getSystem().build(E);return t[C]=T,T}),i=(g,h,C)=>s(h,C).orThunk(()=>(Xe(h.others,C).getOrDie("No information found for coupled component: "+C),_.none())),d=q({});return Aa({readState:d,getExisting:i,getOrCreate:a})}});const Ko=Us({fields:dN,name:"coupling",apis:ML,state:BL}),SO=t=>{let s=_.none(),a=[];const i=E=>SO(T=>{d(R=>{T(E(R))})}),d=E=>{h()?w(E):a.push(E)},g=E=>{h()||(s=_.some(E),C(a),a=[])},h=()=>s.isSome(),C=E=>{Qe(E,w)},w=E=>{s.each(T=>{setTimeout(()=>{E(T)},0)})};return t(g),{get:d,map:i,isReady:h}},NL={nu:SO,pure:t=>SO(s=>{s(t)})},PL=t=>{setTimeout(()=>{throw t},0)},l0=t=>{const s=w=>{t().then(w,PL)};return{map:w=>l0(()=>t().then(w)),bind:w=>l0(()=>t().then(E=>w(E).toPromise())),anonBind:w=>l0(()=>t().then(()=>w.toPromise())),toLazy:()=>NL.nu(s),toCached:()=>{let w=null;return l0(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},$r={nu:t=>l0(()=>new Promise(t)),pure:t=>l0(()=>Promise.resolve(t))},mN=q("sink"),fN=q(nc({name:mN(),overrides:q({dom:{tag:"div"},behaviours:Oe([Gs.config({useFixed:ht})]),events:Gn([Bi(Qc()),Bi(ka()),Bi(em())])})})),xO=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},$L=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},IL=(t,s,a,i,d,g,h)=>{const C=$L(t,s,i),w=gN(i,t);return C.map(E=>E.bind(T=>{const R=T.menus[T.primary];return _.from(R).each(B=>{t.listRole.each(P=>{B.role=P})}),_.from(Qh.sketch({...g.menu(),uid:gm(""),data:T,highlightOnOpen:h,onOpenMenu:(B,P)=>{const F=w().getOrDie();Gs.position(F,P,{anchor:a}),ln.decloak(d)},onOpenSubmenu:(B,P,F)=>{const U=w().getOrDie();Gs.position(U,F,{anchor:{type:"submenu",item:P}}),ln.decloak(d)},onRepositionMenu:(B,P,F)=>{const U=w().getOrDie();Gs.position(U,P,{anchor:a}),Qe(F,oe=>{Gs.position(U,oe.triggeredMenu,{anchor:{type:"submenu",item:oe.triggeringItem}})})},onEscape:()=>(Ot.focus(i),ln.close(d),_.some(!0))}))}))},OE=(t,s,a,i,d,g,h)=>{const C=xO(t,a);return IL(t,s,C,a,i,d,h).map(E=>(E.fold(()=>{ln.isOpen(i)&&ln.close(i)},T=>{ln.cloak(i),ln.open(i,T),g(i)}),i))},FL=(t,s,a,i,d,g,h)=>(ln.close(i),$r.pure(i)),EO=(t,s,a,i,d,g)=>{const h=Ko.getCoupled(a,"sandbox");return(ln.isOpen(h)?FL:OE)(t,s,a,h,i,d,g)},TO=(t,s,a)=>{const i=an.getCurrent(s).getOr(s),d=la(t.element);a?It(i.element,"min-width",d+"px"):pn(i.element,d)},gN=(t,s)=>t.getSystem().getByUid(s.uid+"-"+mN()).map(a=>()=>Ut.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Ut.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),hN=t=>{ln.getState(t).each(s=>{Qh.repositionMenus(s)})},_O=(t,s,a)=>{const i=q1(),d=(C,w)=>{const E=xO(t,s);i.link(s.element),t.matchWidth&&TO(E.hotspot,w,t.useMinWidth),t.onOpen(E,C,w),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,w)},g=(C,w)=>{i.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,w)},h=gN(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:_c.augment(t.sandboxBehaviours,[Ke.config({store:{mode:"memory",initialValue:s}}),ln.config({onOpen:d,onClose:g,isPartOf:(C,w,E)=>Xu(w,E)||Xu(s,E),getAttachPoint:()=>h().getOrDie()}),an.config({find:C=>ln.getState(C).bind(w=>an.getCurrent(w))}),fa.config({channels:{...ru({isExtraPart:$n}),...kb({doReposition:hN})}})])}},kO=t=>{const s=Ko.getCoupled(t,"sandbox");hN(s)},AE=()=>[te("sandboxClasses",[]),_c.field("sandboxBehaviours",[an,fa,ln,Ke])],LL=q([be("dom"),be("fetch"),rn("onOpen"),Gr("onExecute"),te("getHotspot",_.some),te("getAnchorOverrides",q({})),rd(),Ns("dropdownBehaviours",[Gt,Ko,ct,Ot]),be("toggleClass"),te("eventOrder",{}),hn("lazySink"),te("matchWidth",!1),te("useMinWidth",!1),hn("role"),hn("listRole")].concat(AE())),HL=q([kc({schema:[fm(),te("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),fN()]),pN=(t,s,a,i)=>{const d=T=>Xe(t.dom,"attributes").bind(R=>Xe(R,T)),g=T=>{ln.getState(T).each(R=>{Qh.highlightPrimary(R)})},h=(T,R,B)=>EO(t,gt,T,i,R,B),C=T=>{h(T,g,ha.HighlightMenuAndItem).get(Z)},w={expand:T=>{Gt.isOn(T)||h(T,Z,ha.HighlightNone).get(Z)},open:T=>{Gt.isOn(T)||h(T,Z,ha.HighlightMenuAndItem).get(Z)},refetch:T=>Ko.getExistingCoupled(T,"sandbox").fold(()=>h(T,Z,ha.HighlightMenuAndItem).map(Z),B=>OE(t,gt,T,B,i,Z,ha.HighlightMenuAndItem).map(Z)),isOpen:Gt.isOn,close:T=>{Gt.isOn(T)&&h(T,Z,ha.HighlightMenuAndItem).get(Z)},repositionMenus:T=>{Gt.isOn(T)&&kO(T)}},E=(T,R)=>(Uu(T),_.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ps(t.dropdownBehaviours,[Gt.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Ko.config({others:{sandbox:T=>_O(t,T,{onOpen:()=>Gt.on(T),onClose:()=>Gt.off(T)})}}),ct.config({mode:"special",onSpace:E,onEnter:E,onDown:(T,R)=>{if(ji.isOpen(T)){const B=Ko.getCoupled(T,"sandbox");g(B)}else ji.open(T);return _.some(!0)},onEscape:(T,R)=>ji.isOpen(T)?(ji.close(T),_.some(!0)):_.none()}),Ot.config({})]),events:Tx(_.some(C)),eventOrder:{...t.eventOrder,[wc()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),T=>({role:T})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ji=Pr({name:"Dropdown",configFields:LL(),partFields:HL(),factory:pN,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),zL=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},VL=t=>{const s=Ke.getValue(t),a=hg(t).map(X5);ji.refetch(s).get(()=>{const i=Ko.getCoupled(s,"sandbox");a.each(d=>hg(i).each(g=>f7(g,d)))})},UL=(t,s)=>{WL(t).each(a=>{Ev(t,a.element,s.event.eventType,s.event.interactionEvent)})},WL=t=>ln.getState(t).bind(ze.getHighlighted).bind(ze.getHighlighted),ZL=t=>Ra(t.element,tE)?_.some(t.element):xn(t.element,"."+tE),K2=(t,s,a)=>{W3(t).each(i=>{g7(i,a),ZL(s).each(g=>{Xs(g,"id").each(h=>Ue(i.element,"aria-controls",h))})}),Ue(a.element,"aria-selected","true")},jL=(t,s,a)=>{Ue(a.element,"aria-selected","false")},RE=t=>{W3(t).each(s=>Ot.focus(s))},GL=t=>Ko.getExistingCoupled(t,"sandbox").bind(hg).map(X5).map(a=>a.fetchPattern).getOr("");var DE;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(DE||(DE={}));const qL=(t,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:_.none(),icon:C.text.isSome()?_.none():C.icon}:C;switch(t.type){case"menuitem":return D7(t).fold(Lm,C=>_.some(kL(h(C),s,g,i)));case"nestedmenuitem":return B7(t).fold(Lm,C=>_.some(OL(h(C),s,g,i,d)));case"togglemenuitem":return P7(t).fold(Lm,C=>_.some(AL(h(C),s,g,i)));case"separator":return iB(t).fold(Lm,C=>_.some(wO(C)));case"fancymenuitem":return gB(t).fold(Lm,C=>RL(C,a));default:return console.error("Unknown item in general menu",t),_.none()}},KL=(t,s,a,i,d,g,h)=>{const C=i===1,w=!C||I2(t);return Pd(xe(t,E=>{switch(E.type){case"separator":return x7(E).fold(Lm,T=>_.some(wO(T)));case"cardmenuitem":return nO(E).fold(Lm,T=>_.some(uN({...T,onAction:R=>{T.onAction(R),a(T.value,T.meta)}},d,g,{itemBehaviours:EB(T.meta,g,_.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return E7(E).fold(Lm,T=>_.some(_L(T,s,C,"normal",a,d,g,w)))}}))},YL=(t,s,a,i,d,g)=>{const h=I2(s),C=Pd(xe(s,T=>{const R=P=>d?!_n(P,"text"):h,B=P=>qL(P,a,i,R(P),d);return T.type==="nestedmenuitem"&&T.getSubmenuItems().length<=0?B({...T,enabled:!1}):B(T)})),w=zL(g);return(d?b7:G3)(t,h,C,1,w)},u0=t=>Qh.singleData(t.value,t),d0=(t,s,a,i)=>{const d=kE(s,i),g=gg(i);return{data:u0({...t,movement:d,menuBehaviours:s0.unnamedEvents(s!=="auto"?[]:[Jn((h,C)=>{fE(h,4,g.item).each(({numColumns:w,numRows:E})=>{ct.setGridSize(h,E,w)})})])}),menu:{markers:gg(i),fakeFocus:a===DE.ContentFocus}}},bN=t=>Zf.create(ne.fromDom(t.startContainer),t.startOffset,ne.fromDom(t.endContainer),t.endOffset),JL={register:(t,s)=>{const a=qe("autocompleter"),i=pt(!1),d=pt(!1),g=Vn(),h=hr(mo.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Oe([zt("dismissAutocompleter",[ve(zu(),()=>R()),ve(Vu(),(W,ee)=>{Xs(ee.event.target,"id").each(J=>Ue(ne.fromDom(t.getBody()),"aria-activedescendant",J))})])]),lazySink:s.getSink})),C=()=>mo.isOpen(h),w=d.get,E=()=>{if(C()){mo.hide(h),t.dom.remove(a,!1);const W=ne.fromDom(t.getBody());Xs(W,"aria-owns").filter(ee=>ee===a).each(()=>{$o(W,"aria-owns"),$o(W,"aria-activedescendant")})}},T=()=>mo.getContent(h).bind(W=>ns(W.components(),0)),R=()=>t.execCommand("mceAutocompleterClose"),B=W=>{const ee=Ys(W,J=>_.from(J.columns)).getOr(1);return fe(W,J=>{const ye=J.items;return KL(ye,J.matchText,(ce,Ae)=>{const He={hide:()=>R(),reload:pe=>{E(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:pe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(pe=>{i.set(!0),J.onAction(He,pe,ce,Ae),i.set(!1)})},ee,Tl.BUBBLE_TO_SANDBOX,s,J.highlightOn)})},P=(W,ee)=>{const J=Ys(W,ye=>_.from(ye.columns)).getOr(1);mo.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(bN),root:ne.fromDom(t.getBody())}},d0(G3("autocompleter-value",!0,ee,J,{menuType:"normal"}),J,DE.ContentFocus,"normal")),T().each(ze.highlightFirst)},F=W=>{const ee=B(W);ee.length>0?(P(W,ee),Ue(ne.fromDom(t.getBody()),"aria-owns",a),t.inline||U()):E()},U=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const W=t.getDoc().documentElement,ee=t.selection.getNode(),J=sk(h.element);xa(J,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ee.offsetTop}px`,left:`${ee.offsetLeft}px`}),t.dom.add(W,J.dom),xn(J,'[role="menu"]').each(ye=>{gn(ye,"position"),gn(ye,"max-height")})};t.on("AutocompleterStart",({lookupData:W})=>{d.set(!0),i.set(!1),F(W)}),t.on("AutocompleterUpdate",({lookupData:W})=>F(W)),t.on("AutocompleterUpdateActiveRange",({range:W})=>g.set(W)),t.on("AutocompleterEnd",()=>{E(),d.set(!1),i.set(!1),g.clear()});const oe={cancelIfNecessary:R,isMenuOpen:C,isActive:w,isProcessingAction:i.get,getMenu:T};z5.setup(oe,t)}},Y2=(t,s,a)=>Li(t,s,a).isSome(),vN=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},yN=5,QL=400,CN=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?_.none():_.some(s.touches[0])},eH=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>yN||i>yN},tH=t=>{const s=Vn(),a=pt(!1),i=vN(E=>{t.triggerEvent(fr(),E),a.set(!0)},QL),d=E=>(CN(E).each(T=>{i.cancel();const R={x:T.clientX,y:T.clientY,target:E.target};i.schedule(E),a.set(!1),s.set(R)}),_.none()),g=E=>(i.cancel(),CN(E).each(T=>{s.on(R=>{eH(T,R)&&s.clear()})}),_.none()),h=E=>{i.cancel();const T=R=>Fn(R.target,E.target);return s.get().filter(T).map(R=>a.get()?(E.prevent(),!1):t.triggerEvent(Di(),E))},C=Iu([{key:ki(),value:d},{key:nh(),value:g},{key:Lu(),value:h}]);return{fireIfReady:(E,T)=>Xe(C,T).bind(R=>R(E))}},nH=t=>t.raw.which===yn[0]&&!po(["input","textarea"],Fc(t.target))&&!Y2(t.target,'[contenteditable="true"]'),oH=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=tH(a),g=xe(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),P=>Yr(t,P,F=>{d.fireIfReady(F,P).each(oe=>{oe&&F.kill()}),a.triggerEvent(P,F)&&F.kill()})),h=Vn(),C=Yr(t,"paste",P=>{d.fireIfReady(P,"paste").each(U=>{U&&P.kill()}),a.triggerEvent("paste",P)&&P.kill(),h.set(setTimeout(()=>{a.triggerEvent(ql(),P)},0))}),w=Yr(t,"keydown",P=>{a.triggerEvent("keydown",P)?P.kill():a.stopBackspace&&nH(P)&&P.prevent()}),E=Yr(t,"focusin",P=>{a.triggerEvent("focusin",P)&&P.kill()}),T=Vn(),R=Yr(t,"focusout",P=>{a.triggerEvent("focusout",P)&&P.kill(),T.set(setTimeout(()=>{a.triggerEvent(Hu(),P)},0))});return{unbind:()=>{Qe(g,P=>{P.unbind()}),w.unbind(),E.unbind(),R.unbind(),C.unbind(),h.on(clearTimeout),T.on(clearTimeout)}}},wN=(t,s)=>{const a=Xe(t,"target").getOr(s);return pt(a)},SN=(t,s)=>{const a=pt(!1),i=pt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},m0=t=>{const s=pt(!1);return{stop:()=>{s.set(!0)},cut:Z,isStopped:s.get,isCut:$n,event:t,setSource:Y("Cannot set source of a broadcasted event"),getSource:Y("Cannot get source of a broadcasted event")}},fu=Jc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),xN=(t,s,a,i,d,g)=>{const h=t(s,i),C=SN(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),fu.complete()),w=>{const E=w.descHandler;return Ku(E)(C),C.isStopped()?(g.logEventStopped(s,w.element,E.purpose),fu.stopped()):C.isCut()?(g.logEventCut(s,w.element,E.purpose),fu.complete()):Lc(w.element).fold(()=>(g.logNoParent(s,w.element,E.purpose),fu.complete()),R=>(g.logEventResponse(s,w.element,E.purpose),fu.resume(R)))})},OO=(t,s,a,i,d,g)=>xN(t,s,a,i,d,g).fold(ht,h=>OO(t,s,a,h,d,g),$n),EN=(t,s,a,i,d)=>{const g=wN(a,i);return xN(t,s,a,i,g,d)},ME=(t,s,a)=>{const i=m0(s);return Qe(t,d=>{const g=d.descHandler;Ku(g)(i)}),i.isStopped()},sH=(t,s,a,i)=>f0(t,s,a,a.target,i),f0=(t,s,a,i,d)=>{const g=wN(a,i);return OO(t,s,a,i,g,d)},X2=(t,s)=>({element:t,descHandler:s}),rH=(t,s)=>({id:t,descHandler:s}),aH=()=>{const t={},s=(h,C,w)=>{ks(w,(E,T)=>{const R=t[T]!==void 0?t[T]:{};R[C]=Ch(E,h),t[T]=R})},a=(h,C)=>yh(C).bind(w=>Xe(h,w)).map(w=>X2(C,w));return{registerId:s,unregisterId:h=>{ks(t,(C,w)=>{_n(C,h)&&delete C[h]})},filterByType:h=>Xe(t,h).map(C=>$g(C,(w,E)=>rH(E,w))).getOr([]),find:(h,C,w)=>Xe(t,C).bind(E=>xf(w,T=>a(E,T),h))}},cH=()=>{const t=aH(),s={},a=E=>{const T=E.element;return yh(T).getOrThunk(()=>uk("uid-",E.element))},i=(E,T)=>{const R=s[T];if(R===E)g(E);else throw new Error('The tagId "'+T+'" is already used by: '+Ma(R.element)+`
Cannot use it for: `+Ma(E.element)+`
The conflicting element is`+(Hs(R.element)?" ":" not ")+"already in the DOM")},d=E=>{const T=a(E);mc(s,T)&&i(E,T);const R=[E];t.registerId(R,T,E.events),s[T]=E},g=E=>{yh(E.element).each(T=>{delete s[T],t.unregisterId(T)})};return{find:(E,T,R)=>t.find(E,T,R),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>Xe(s,E)}},gu=ga({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Fh(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[te("components",[]),Ns("containerBehaviours",[]),te("events",{}),te("domModification",{}),te("eventOrder",{})]}),AO=t=>{const s=W=>Lc(t.element).fold(ht,ee=>Fn(W,ee)),a=cH(),i=(W,ee)=>a.find(s,W,ee),d=oH(t.element,{triggerEvent:(W,ee)=>Ii(W,ee.target,J=>sH(i,W,ee,J))}),g={debugInfo:q("real"),triggerEvent:(W,ee,J)=>{Ii(W,ee,ye=>f0(i,W,J,ee,ye))},triggerFocus:(W,ee)=>{yh(W).fold(()=>{Ya(W)},J=>{Ii(Ri(),W,ye=>(EN(i,Ri(),{originator:ee,kill:Z,prevent:Z,target:W},W,ye),!1))})},triggerEscape:(W,ee)=>{g.triggerEvent("keydown",W.element,ee.event)},getByUid:W=>U(W),getByDom:W=>oe(W),build:hr,buildOrPatch:j1,addToGui:W=>{w(W)},removeFromGui:W=>{E(W)},addToWorld:W=>{h(W)},removeFromWorld:W=>{C(W)},broadcast:W=>{B(W)},broadcastOn:(W,ee)=>{P(W,ee)},broadcastEvent:(W,ee)=>{F(W,ee)},isConnected:ht},h=W=>{W.connect(g),Ua(W.element)||(a.register(W),Qe(W.components(),h),g.triggerEvent(ah(),W.element,{target:W.element}))},C=W=>{Ua(W.element)||(Qe(W.components(),C),a.unregister(W)),W.disconnect()},w=W=>{vl(t,W)},E=W=>{su(W)},T=()=>{d.unbind(),Zc(t.element)},R=W=>{const ee=a.filter(Cc());Qe(ee,J=>{const ye=J.descHandler;Ku(ye)(W)})},B=W=>{R({universal:!0,data:W})},P=(W,ee)=>{R({universal:!1,channels:W,data:ee})},F=(W,ee)=>{const J=a.filter(W);return ME(J,ee)},U=W=>a.getById(W).fold(()=>Ut.error(new Error('Could not find component with uid: "'+W+'" in system.')),Ut.value),oe=W=>{const ee=yh(W).getOr("not found");return U(ee)};return h(t),{root:t,element:t.element,destroy:T,add:w,remove:E,getByUid:U,getByDom:oe,addToWorld:h,removeFromWorld:C,broadcast:B,broadcastOn:P,broadcastEvent:F}},BE=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:xe(t.items,s.interpreter)}),iH=q([te("prefix","form-field"),Ns("fieldBehaviours",[an,Ke])]),RO=q([nc({schema:[be("dom")],name:"label"}),nc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[be("text")],name:"aria-descriptor"}),or({factory:{sketch:t=>{const s=U_(t,["factory"]);return t.factory.sketch(s)}},schema:[be("factory")],name:"field"})]),lH=(t,s,a,i)=>{const d=Ps(t.fieldBehaviours,[an.config({find:C=>ke(C,t,"field")}),Ke.config({store:{mode:"manual",getValue:C=>an.getCurrent(C).bind(Ke.getValue),setValue:(C,w)=>{an.getCurrent(C).each(E=>{Ke.setValue(E,w)})}}})]),g=Gn([Jn((C,w)=>{const E=cx(C,t,["label","field","aria-descriptor"]);E.field().each(T=>{const R=qe(t.prefix);E.label().each(B=>{Ue(B.element,"for",R),Ue(T.element,"id",R)}),E["aria-descriptor"]().each(B=>{const P=qe(t.prefix);Ue(B.element,"id",P),Ue(T.element,"aria-describedby",P)})})})]),h={getField:C=>ke(C,t,"field"),getLabel:C=>ke(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},An=Pr({name:"FormField",configFields:iH(),partFields:RO(),factory:lH,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var uH=tinymce.util.Tools.resolve("tinymce.html.Entities");const g0=(t,s,a,i)=>{const d=mH(t,s,a,i);return An.sketch(d)},dH=(t,s)=>g0(t,s,[],[]),mH=(t,s,a,i)=>({dom:DO(a),components:t.toArray().concat([s]),fieldBehaviours:Oe(i)}),fH=()=>DO([]),DO=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),vg=(t,s)=>An.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ho(s.translate(t))]}),sc=qe("form-component-change"),J2=qe("form-close"),yg=qe("form-cancel"),Sd=qe("form-action"),h0=qe("form-submit"),NE=qe("form-block"),MO=qe("form-unblock"),TN=qe("form-tabchange"),_N=qe("form-resize"),gH=(t,s,a)=>{const i=t.label.map(P=>vg(P,s)),d=s.icons(),g=P=>{var F;return(F=d[P])!==null&&F!==void 0?F:P},h=P=>(F,U)=>{Li(U.event.target,"[data-collection-item-value]").each(oe=>{P(F,U,oe,To(oe,"data-collection-item-value"))})},C=(P,F)=>{const U=xe(F,ee=>{const J=ai.translate(ee.text),ye=t.columns===1?`<div class="tox-collection__item-label">${J}</div>`:"",ce=`<div class="tox-collection__item-icon">${g(ee.icon)}</div>`,Ae={_:" "," - ":" ","-":" "},He=J.replace(/\_| \- |\-/g,rt=>Ae[rt]),pe=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${He}" class="tox-collection__item${pe}" tabindex="-1" data-collection-item-value="${uH.encodeAllRaw(ee.value)}" aria-label="${He}">${ce}${ye}</div>`}),oe=t.columns!=="auto"&&t.columns>1?ra(U,t.columns):[U],W=xe(oe,ee=>`<div class="tox-collection__group">${ee.join("")}</div>`);Pf(P.element,W.join(""))},w=h((P,F,U,oe)=>{F.stop(),s.isDisabled()||ft(P,Sd,{name:t.name,value:oe})}),E=[ve(il(),h((P,F,U)=>{Ya(U)})),ve(em(),w),ve(Di(),w),ve(Oi(),h((P,F,U)=>{xn(P.element,"."+rp).each(oe=>{Ao(oe,rp)}),qn(U,rp)})),ve(ll(),h(P=>{xn(P.element,"."+rp).each(F=>{Ao(F,rp),Th(F)})})),ei(h((P,F,U,oe)=>{ft(P,Sd,{name:t.name,value:oe})}))],T=(P,F)=>xe(br(P.element,".tox-collection__item"),F),R=An.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:gt},behaviours:Oe([Tt.config({disabled:s.isDisabled,onDisabled:P=>{T(P,F=>{qn(F,"tox-collection__item--state-disabled"),Ue(F,"aria-disabled",!0)})},onEnabled:P=>{T(P,F=>{Ao(F,"tox-collection__item--state-disabled"),$o(F,"aria-disabled")})}}),Es(),Bt.config({}),sr.config({...s.tooltips.getConfig({tooltipText:"",onShow:P=>{xn(P.element,"."+rp+"[data-mce-tooltip]").each(F=>{Xs(F,"data-mce-tooltip").each(U=>{sr.setComponents(P,s.tooltips.getComponents({tooltipText:U}))})})}}),mode:"children-keyboard-focus",anchor:P=>({type:"node",node:xn(P.element,"."+rp).orThunk(()=>G1(".tox-collection__item")),root:P.element,layouts:{onLtr:q([rs,xs,ms,fs,ss,Mn]),onRtl:q([rs,xs,ms,fs,ss,Mn])},bubble:ni(0,-2,{})})}),Ke.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(P,F)=>{C(P,F),t.columns==="auto"&&fE(P,5,"tox-collection__item").each(({numRows:U,numColumns:oe})=>{ct.setGridSize(P,U,oe)}),Zt(P,_N)}}),Yn.config({}),ct.config(gL(t.columns,"normal")),zt("collection-events",E)]),eventOrder:{[wc()]:["disabling","alloy.base.behaviour","collection-events"],[Oi()]:["collection-events","tooltipping"]}});return g0(i,R,["tox-form__group--collection"],[])},hH=["input","textarea"],BO=t=>{const s=Fc(t);return po(hH,s)},pp=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Ao(a,s.invalidClass),s.notify.each(i=>{BO(t.element)&&Ue(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Pf(d,i.validHtml)}),i.onValid(t)})},kN=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);qn(d,s.invalidClass),s.notify.each(g=>{BO(t.element)&&Ue(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Pf(h,i)}),g.onInvalid(t,i)})},ON=(t,s,a)=>s.validator.fold(()=>$r.pure(Ut.value(!0)),i=>i.validate(t)),NO=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),ON(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(kN(t,s,a,d),Ut.error(d)),d=>(pp(t,s),Ut.value(d))):Ut.error("No longer in system")));var Gi=Object.freeze({__proto__:null,markValid:pp,markInvalid:kN,query:ON,run:NO,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Ra(a,s.invalidClass)}}),RN=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Gn([ve(a.onEvent,i=>{NO(i,t,s).get(gt)})].concat(a.validateOnLoad?[Jn(i=>{NO(i,t,s).get(Z)})]:[]))).getOr({})}),pH=[be("invalidClass"),te("getRoot",_.none),ao("notify",[te("aria","alert"),te("getContainer",_.none),te("validHtml",""),rn("onValid"),rn("onInvalid"),rn("onValidate")]),ao("validator",[be("validate"),te("onEvent","input"),te("validateOnLoad",!0)])];const xd=Us({fields:pH,name:"invalidating",active:RN,apis:Gi,extra:{validation:t=>s=>{const a=Ke.getValue(s);return $r.pure(t(a))}}});var DN=Object.freeze({__proto__:null,events:()=>Gn([_w(yv(),ht)]),exhibit:()=>Oa({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const p0=Us({fields:[],name:"unselecting",active:DN}),bH=(t,s)=>ji.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Oe([Al.button(s.providers.isDisabled),Es(),p0.config({}),Yn.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>$r.nu(i=>t.fetch(i)).map(i=>_.from(u0(Fo(CO(qe("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Tl.CLOSE_ON_EXECUTE,$n,s.providers),{movement:kE(t.columns,t.presets)})))),parts:{menu:P2(!1,1,t.presets)}}),MN=qe("color-input-change"),$O=qe("color-swatch-change"),BN=qe("color-picker-cancel"),NN=(t,s,a,i)=>{const d=An.parts.field({factory:ap,inputClasses:["tox-textfield"],data:i,onSetValue:E=>xd.run(E).get(Z),inputBehaviours:Oe([Tt.config({disabled:s.providers.isDisabled}),Es(),Yn.config({}),xd.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>vi(E.element),notify:{onValid:E=>{const T=Ke.getValue(E);ft(E,MN,{color:T})}},validator:{validateOnLoad:!1,validate:E=>{const T=Ke.getValue(E);if(T.length===0)return $r.pure(Ut.value(!0));{const R=ne.fromTag("span");It(R,"background-color",T);const B=Js(R,"background-color").fold(()=>Ut.error("blah"),P=>Ut.value(T));return $r.pure(B)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>vg(E,s.providers)),h=(E,T)=>{ft(E,$O,{value:T})},C=(E,T)=>{w.getOpt(E).each(R=>{T==="custom"?a.colorPicker(B=>{B.fold(()=>Zt(R,BN),P=>{h(R,P),EE(t.storageKey,P)})},"#ffffff"):T==="remove"?h(R,""):h(R,T)})},w=Tn(bH({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ss,ms,rs],onLtr:()=>[ms,ss,rs]},components:[],fetch:QB(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return An.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:Oe([zt("form-field-events",[ve(MN,(E,T)=>{w.getOpt(E).each(R=>{It(R.element,"background-color",T.event.color)}),ft(E,sc,{name:t.name})}),ve($O,(E,T)=>{An.getField(E).each(R=>{Ke.setValue(R,T.event.value),an.getCurrent(E).each(Ot.focus)})}),ve(BN,(E,T)=>{An.getField(E).each(R=>{an.getCurrent(E).each(Ot.focus)})})])])})},PN=nc({schema:[be("dom")],name:"label"}),Vm=t=>nc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Gn([sm(ki(),(d,g,h)=>i(d,h),[s]),sm(ka(),(d,g,h)=>i(d,h),[s]),sm(w1(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),vH=Vm("top-left"),yH=Vm("top"),CH=Vm("top-right"),wH=Vm("right"),SH=Vm("bottom-right"),xH=Vm("bottom"),IO=Vm("bottom-left"),EH=Vm("left"),TH=or({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Gn([rm(ki(),t,"spectrum"),rm(nh(),t,"spectrum"),rm(Lu(),t,"spectrum"),rm(ka(),t,"spectrum"),rm(w1(),t,"spectrum"),rm(S1(),t,"spectrum")])})}),Q2=t=>xl(t.event),_H=or({schema:[bn("mouseIsDown",()=>pt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:Oe([ct.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,Q2(g)),onRight:(d,g)=>a.onRight(d,t,Q2(g)),onUp:(d,g)=>a.onUp(d,t,Q2(g)),onDown:(d,g)=>a.onDown(d,t,Q2(g))}),Yn.config({}),Ot.config({})]),events:Gn([ve(ki(),i),ve(nh(),i),ve(ka(),i),ve(w1(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var kH=[PN,EH,wH,yH,xH,vH,CH,IO,SH,TH,_H];const eC=q("slider.change.value"),OH=t=>t.type.indexOf("touch")!==-1,FO=t=>{const s=t.event.raw;if(OH(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?_.some(a.touches[0]).map(i=>_o(i.clientX,i.clientY)):_.none()}else{const a=s;return a.clientX!==void 0?_.some(a).map(i=>_o(i.clientX,i.clientY)):_.none()}},AH="top",$N="right",IN="bottom",RH="left",bp=t=>t.model.minX,vp=t=>t.model.minY,PE=t=>t.model.minX-1,$E=t=>t.model.minY-1,yp=t=>t.model.maxX,Cg=t=>t.model.maxY,tC=t=>t.model.maxX+1,nC=t=>t.model.maxY+1,IE=(t,s,a)=>s(t)-a(t),LO=t=>IE(t,yp,bp),FE=t=>IE(t,Cg,vp),FN=t=>LO(t)/2,LN=t=>FE(t)/2,b0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,HN=t=>t.snapToGrid,LE=t=>t.snapStart,Ed=t=>t.rounded,HE=(t,s)=>t[s+"-edge"]!==void 0,v0=t=>HE(t,RH),zN=t=>HE(t,$N),zE=t=>HE(t,AH),VN=t=>HE(t,IN),Um=t=>t.model.value.get(),wg=(t,s)=>({x:t,y:s}),qi=(t,s)=>{ft(t,eC(),{value:s})},DH=(t,s)=>{qi(t,wg(PE(s),$E(s)))},HO=(t,s)=>{qi(t,$E(s))},zO=(t,s)=>{qi(t,wg(FN(s),$E(s)))},VO=(t,s)=>{qi(t,wg(tC(s),$E(s)))},MH=(t,s)=>{qi(t,tC(s))},ci=(t,s)=>{qi(t,wg(tC(s),LN(s)))},BH=(t,s)=>{qi(t,wg(tC(s),nC(s)))},NH=(t,s)=>{qi(t,nC(s))},UN=(t,s)=>{qi(t,wg(FN(s),nC(s)))},WN=(t,s)=>{qi(t,wg(PE(s),nC(s)))},PH=(t,s)=>{qi(t,PE(s))},$H=(t,s)=>{qi(t,wg(PE(s),LN(s)))},UO=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),WO=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),ZN=(t,s,a)=>Math.max(s,Math.min(a,t)),IH=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return ZN(s+h,s-1,a+1)},g=>{const h=(t-g)%i,C=Math.round(h/i),w=Math.floor((t-g)/i),E=Math.floor((a-g)/i),T=Math.min(E,w+C),R=g+T*i;return Math.max(g,R)}),FH=(t,s,a)=>Math.min(a,Math.max(t,s))-s,ZO=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:w,hasMinEdge:E,hasMaxEdge:T,minBound:R,maxBound:B,screenRange:P}=t,F=E?s-1:s,U=T?a+1:a;if(d<R)return F;if(d>B)return U;{const oe=FH(d,R,B),W=ZN(oe/P*i+s,F,U);return h&&W>=s&&W<=a?IH(W,s,a,g,C):w?Math.round(W):W}},jN=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:w,centerMinEdge:E,centerMaxEdge:T}=t;return d<s?g?0:E:d>a?h?C:T:(d-s)/i*w},jO="top",GN="right",GO="bottom",oC="left",qN="width",KN="height",hu=t=>t.element.dom.getBoundingClientRect(),Ki=(t,s)=>t[s],y0=t=>{const s=hu(t);return Ki(s,oC)},YN=t=>{const s=hu(t);return Ki(s,GN)},C0=t=>{const s=hu(t);return Ki(s,jO)},Cp=t=>{const s=hu(t);return Ki(s,GO)},qO=t=>{const s=hu(t);return Ki(s,qN)},KO=t=>{const s=hu(t);return Ki(s,KN)},YO=(t,s,a)=>(t+s)/2-a,XN=(t,s)=>{const a=hu(t),i=hu(s),d=Ki(a,oC),g=Ki(a,GN),h=Ki(i,oC);return YO(d,g,h)},JN=(t,s)=>{const a=hu(t),i=hu(s),d=Ki(a,jO),g=Ki(a,GO),h=Ki(i,jO);return YO(d,g,h)},wp=(t,s)=>{ft(t,eC(),{value:s})},XO=(t,s,a)=>{const i={min:bp(s),max:yp(s),range:LO(s),value:a,step:b0(s),snap:HN(s),snapStart:LE(s),rounded:Ed(s),hasMinEdge:v0(s),hasMaxEdge:zN(s),minBound:y0(t),maxBound:YN(t),screenRange:qO(t)};return ZO(i)},LH=(t,s,a)=>{const i=XO(t,s,a);return wp(t,i),i},QN=(t,s)=>{const a=bp(s);wp(t,a)},eP=(t,s)=>{const a=yp(s);wp(t,a)},JO=(t,s,a,i)=>{const g=(t>0?WO:UO)(Um(a),bp(a),yp(a),b0(a,i));return wp(s,g),_.some(g)},QO=t=>(s,a,i)=>JO(t,s,a,i).map(ht),La=t=>FO(t).map(a=>a.left),tP=(t,s,a,i,d)=>{const h=qO(t),C=i.bind(T=>_.some(XN(T,t))).getOr(0),w=d.bind(T=>_.some(XN(T,t))).getOr(h),E={min:bp(s),max:yp(s),range:LO(s),value:a,hasMinEdge:v0(s),hasMaxEdge:zN(s),minBound:y0(t),minOffset:0,maxBound:YN(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return jN(E)},eA=(t,s,a,i,d,g)=>{const h=tP(s,g,a,i,d);return y0(s)-y0(t)+h},HH=(t,s,a,i)=>{const d=Um(a),g=eA(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),h=la(s.element)/2;It(s.element,"left",g-h+"px")},nP=QO(-1),zH=QO(1),VH=_.none,UH=_.none,oP={"top-left":_.none(),top:_.none(),"top-right":_.none(),right:_.some(MH),"bottom-right":_.none(),bottom:_.none(),"bottom-left":_.none(),left:_.some(PH)};var Td=Object.freeze({__proto__:null,setValueFrom:LH,setToMin:QN,setToMax:eP,findValueOfOffset:XO,getValueFromEvent:La,findPositionOfValue:eA,setPositionFromValue:HH,onLeft:nP,onRight:zH,onUp:VH,onDown:UH,edgeActions:oP});const w0=(t,s)=>{ft(t,eC(),{value:s})},VE=(t,s,a)=>{const i={min:vp(s),max:Cg(s),range:FE(s),value:a,step:b0(s),snap:HN(s),snapStart:LE(s),rounded:Ed(s),hasMinEdge:zE(s),hasMaxEdge:VN(s),minBound:C0(t),maxBound:Cp(t),screenRange:KO(t)};return ZO(i)},UE=(t,s,a)=>{const i=VE(t,s,a);return w0(t,i),i},tA=(t,s)=>{const a=vp(s);w0(t,a)},WH=(t,s)=>{const a=Cg(s);w0(t,a)},ZH=(t,s,a,i)=>{const g=(t>0?WO:UO)(Um(a),vp(a),Cg(a),b0(a,i));return w0(s,g),_.some(g)},sP=t=>(s,a,i)=>ZH(t,s,a,i).map(ht),jH=t=>FO(t).map(a=>a.top),GH=(t,s,a,i,d)=>{const h=KO(t),C=i.bind(T=>_.some(JN(T,t))).getOr(0),w=d.bind(T=>_.some(JN(T,t))).getOr(h),E={min:vp(s),max:Cg(s),range:FE(s),value:a,hasMinEdge:zE(s),hasMaxEdge:VN(s),minBound:C0(t),minOffset:0,maxBound:Cp(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return jN(E)},nA=(t,s,a,i,d,g)=>{const h=GH(s,g,a,i,d);return C0(s)-C0(t)+h},qH=(t,s,a,i)=>{const d=Um(a),g=nA(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),h=vs(s.element)/2;It(s.element,"top",g-h+"px")},rP=_.none,KH=_.none,_d=sP(-1),WE=sP(1),YH={"top-left":_.none(),top:_.some(HO),"top-right":_.none(),right:_.none(),"bottom-right":_.none(),bottom:_.some(NH),"bottom-left":_.none(),left:_.none()};var XH=Object.freeze({__proto__:null,setValueFrom:UE,setToMin:tA,setToMax:WH,findValueOfOffset:VE,getValueFromEvent:jH,findPositionOfValue:nA,setPositionFromValue:qH,onLeft:rP,onRight:KH,onUp:_d,onDown:WE,edgeActions:YH});const sC=(t,s)=>{ft(t,eC(),{value:s})},rC=(t,s)=>({x:t,y:s}),oA=(t,s,a)=>{const i=XO(t,s,a.left),d=VE(t,s,a.top),g=rC(i,d);return sC(t,g),g},ZE=(t,s,a,i,d)=>{const g=t>0?WO:UO,h=s?Um(i).x:g(Um(i).x,bp(i),yp(i),b0(i,d)),C=s?g(Um(i).y,vp(i),Cg(i),b0(i,d)):Um(i).y;return sC(a,rC(h,C)),_.some(h)},Sg=(t,s)=>(a,i,d)=>ZE(t,s,a,i,d).map(ht),aC=(t,s)=>{const a=bp(s),i=vp(s);sC(t,rC(a,i))},aP=(t,s)=>{const a=yp(s),i=Cg(s);sC(t,rC(a,i))},cP=t=>FO(t),iP=(t,s,a,i)=>{const d=Um(a),g=eA(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),h=nA(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),C=la(s.element)/2,w=vs(s.element)/2;It(s.element,"left",g-C+"px"),It(s.element,"top",h-w+"px")},lP=Sg(-1,!1),JH=Sg(1,!1),QH=Sg(-1,!0),ez=Sg(1,!0),tz={"top-left":_.some(DH),top:_.some(zO),"top-right":_.some(VO),right:_.some(ci),"bottom-right":_.some(BH),bottom:_.some(UN),"bottom-left":_.some(WN),left:_.some($H)};var nz=Object.freeze({__proto__:null,setValueFrom:oA,setToMin:aC,setToMax:aP,getValueFromEvent:cP,setPositionFromValue:iP,onLeft:lP,onRight:JH,onUp:QH,onDown:ez,edgeActions:tz});const uP=[te("stepSize",1),te("speedMultiplier",10),te("onChange",Z),te("onChoose",Z),te("onInit",Z),te("onDragStart",Z),te("onDragEnd",Z),te("snapToGrid",!1),te("rounded",!0),hn("snapStart"),vn("model",As("mode",{x:[te("minX",0),te("maxX",100),bn("value",t=>pt(t.mode.minX)),be("getInitialValue"),Kn("manager",Td)],y:[te("minY",0),te("maxY",100),bn("value",t=>pt(t.mode.minY)),be("getInitialValue"),Kn("manager",XH)],xy:[te("minX",0),te("maxX",100),te("minY",0),te("maxY",100),bn("value",t=>pt({x:t.mode.minX,y:t.mode.minY})),be("getInitialValue"),Kn("manager",nz)]})),Ns("sliderBehaviours",[ct,Ke]),bn("mouseIsDown",()=>pt(!1))],Rl=Pr({name:"Slider",configFields:uP,partFields:kH,factory:(t,s,a,i)=>{const d=ce=>Jr(ce,t,"thumb"),g=ce=>Jr(ce,t,"spectrum"),h=ce=>ke(ce,t,"left-edge"),C=ce=>ke(ce,t,"right-edge"),w=ce=>ke(ce,t,"top-edge"),E=ce=>ke(ce,t,"bottom-edge"),T=t.model,R=T.manager,B=(ce,Ae)=>{R.setPositionFromValue(ce,Ae,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:w,getBottomEdge:E,getSpectrum:g})},P=(ce,Ae)=>{T.value.set(Ae);const He=d(ce);B(ce,He)},F=(ce,Ae)=>{P(ce,Ae);const He=d(ce);return t.onChange(ce,He,Ae),_.some(!0)},U=ce=>{R.setToMin(ce,t)},oe=ce=>{R.setToMax(ce,t)},W=ce=>{const Ae=()=>{ke(ce,t,"thumb").each(pe=>{const rt=T.value.get();t.onChoose(ce,pe,rt)})},He=t.mouseIsDown.get();t.mouseIsDown.set(!1),He&&Ae()},ee=(ce,Ae)=>{Ae.stop(),t.mouseIsDown.set(!0),t.onDragStart(ce,d(ce))},J=(ce,Ae)=>{Ae.stop(),t.onDragEnd(ce,d(ce)),W(ce)},ye=ce=>{ke(ce,t,"spectrum").map(ct.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ps(t.sliderBehaviours,[ct.config({mode:"special",focusIn:ye}),Ke.config({store:{mode:"manual",getValue:ce=>T.value.get(),setValue:P}}),fa.config({channels:{[Ph()]:{onReceive:W}}})]),events:Gn([ve(eC(),(ce,Ae)=>{F(ce,Ae.event.value)}),Jn((ce,Ae)=>{const He=T.getInitialValue();T.value.set(He);const pe=d(ce);B(ce,pe);const rt=g(ce);t.onInit(ce,pe,rt,T.value.get())}),ve(ki(),ee),ve(Lu(),J),ve(ka(),(ce,Ae)=>{ye(ce),ee(ce,Ae)}),ve(S1(),J)]),apis:{resetToMin:U,resetToMax:oe,setValue:P,refresh:B},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),jE=qe("rgb-hex-update"),dP=qe("slider-update"),sA=qe("palette-update"),cC=(t,s)=>{const a=Rl.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Rl.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Rl.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[a,i],sliderBehaviours:Oe([Ot.config({})]),onChange:(d,g,h)=>{Ue(d.element,"aria-valuenow",Math.floor(360-h*3.6)),ft(d,dP,{value:h})}})},mP="form",fP=[Ns("formBehaviours",[Ke])],gP=t=>"<alloy.field."+t+">",sz=t=>{const s=(()=>{const g=[];return{field:(C,w)=>(g.push(C),ax(mP,gP(C),w)),record:q(g)}})(),a=t(s),i=s.record(),d=xe(i,g=>or({name:g,pname:gP(g)}));return cu(mP,fP,d,az,a)},rz=(t,s)=>t.fold(()=>Ut.error(s),Ut.value),az=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ps(t.formBehaviours,[Ke.config({store:{mode:"manual",getValue:a=>{const i=s2(a,t);return Po(i,(d,g)=>d().bind(h=>{const C=an.getCurrent(h);return rz(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Ma(h.element)))}).map(Ke.getValue))},setValue:(a,i)=>{ks(i,(d,g)=>{ke(a,t,g).each(h=>{an.getCurrent(h).each(C=>{Ke.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>ke(a,t,i).bind(an.getCurrent)}}),Sp={getField:Lf((t,s,a)=>t.getField(s,a)),sketch:sz},hP=qe("valid-input"),rA=qe("invalid-input"),GE=qe("validating-input"),pu="colorcustom.rgb.",aA=(t,s,a,i)=>{const d=(B,P)=>xd.config({invalidClass:s("invalid"),notify:{onValidate:F=>{ft(F,GE,{type:B})},onValid:F=>{ft(F,hP,{type:B,value:Ke.getValue(F)})},onInvalid:F=>{ft(F,rA,{type:B,value:Ke.getValue(F)})}},validator:{validate:F=>{const U=Ke.getValue(F),oe=P(U)?Ut.value(!0):Ut.error(t("aria.input.invalid"));return $r.pure(oe)},validateOnLoad:!1}}),g=(B,P,F,U,oe)=>{const W=t(pu+"range"),ee=An.parts.label({dom:{tag:"label",attributes:{"aria-label":U}},components:[Ho(F)]}),J=An.parts.field({data:oe,factory:ap,inputAttributes:{type:"text",...P==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Oe([d(P,B),Yn.config({})]),onSetValue:He=>{xd.isInvalid(He)&&xd.run(He).get(Z)}}),ye=[ee,J],ce=P!=="hex"?[An.parts["aria-descriptor"]({text:W})]:[],Ae=ye.concat(ce);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Ae}},h=(B,P)=>{const F=Z2(P);return Sp.getField(B,"hex").each(U=>{Ot.isFocused(U)||Ke.setValue(B,{hex:F.value})}),F},C=(B,P)=>{const F=P.red,U=P.green,oe=P.blue;Ke.setValue(B,{red:F,green:U,blue:oe})},w=Tn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),E=(B,P)=>{w.getOpt(B).each(F=>{It(F.element,"background-color","#"+P.value)})};return ga({factory:()=>{const B={red:pt(_.some(255)),green:pt(_.some(255)),blue:pt(_.some(255)),hex:pt(_.some("ffffff"))},P=(dt,fn)=>{const un=j2(fn);C(dt,un),W(un)},F=dt=>B[dt].get(),U=(dt,fn)=>{B[dt].set(fn)},oe=()=>F("red").bind(dt=>F("green").bind(fn=>F("blue").map(un=>mp(dt,fn,un,1)))),W=dt=>{const fn=dt.red,un=dt.green,Jt=dt.blue;U("red",_.some(fn)),U("green",_.some(un)),U("blue",_.some(Jt))},ee=(dt,fn)=>{const un=fn.event;un.type!=="hex"?U(un.type,_.none()):i(dt)},J=(dt,fn)=>{a(dt);const un=dO(fn);U("hex",_.some(un.value));const Jt=j2(un);C(dt,Jt),W(Jt),ft(dt,jE,{hex:un}),E(dt,un)},ye=(dt,fn,un)=>{const Jt=parseInt(un,10);U(fn,_.some(Jt)),oe().each(Ne=>{const st=h(dt,Ne);ft(dt,jE,{hex:st}),E(dt,st)})},ce=dt=>dt.type==="hex",Ae=(dt,fn)=>{const un=fn.event;ce(un)?J(dt,un.value):ye(dt,un.type,un.value)},He=dt=>({label:t(pu+dt+".label"),description:t(pu+dt+".description")}),pe=He("red"),rt=He("green"),Je=He("blue"),yt=He("hex");return Fo(Sp.sketch(dt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[dt.field("red",An.sketch(g(fO,"red",pe.label,pe.description,255))),dt.field("green",An.sketch(g(fO,"green",rt.label,rt.description,255))),dt.field("blue",An.sketch(g(fO,"blue",Je.label,Je.description,255))),dt.field("hex",An.sketch(g(OB,"hex",yt.label,yt.description,"ffffff"))),w.asSpec()],formBehaviours:Oe([xd.config({invalidClass:s("form-invalid")}),zt("rgb-form-events",[ve(hP,Ae),ve(rA,ee),ve(GE,ee)])])})),{apis:{updateHex:(dt,fn)=>{Ke.setValue(dt,{hex:fn.value}),P(dt,fn),E(dt,fn)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(B,P,F)=>{B.updateHex(P,F)}},extraApis:{}})},pP=(t,s)=>{const a=Rl.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Rl.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,T)=>{const{width:R,height:B}=E,P=E.getContext("2d");if(P===null)return;P.fillStyle=T,P.fillRect(0,0,R,B);const F=P.createLinearGradient(0,0,R,0);F.addColorStop(0,"rgba(255,255,255,1)"),F.addColorStop(1,"rgba(255,255,255,0)"),P.fillStyle=F,P.fillRect(0,0,R,B);const U=P.createLinearGradient(0,0,0,B);U.addColorStop(0,"rgba(0,0,0,0)"),U.addColorStop(1,"rgba(0,0,0,1)"),P.fillStyle=U,P.fillRect(0,0,R,B)},g=(E,T)=>{const R=E.components()[0].element.dom,B=hp(T,100,100),P=NB(B);d(R,$B(P))},h=(E,T)=>{const R=TE(j2(T));Rl.setValue(E,{x:R.saturation,y:100-R.value}),Ue(E.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",R.saturation,R.value]))};return ga({factory:E=>{const T=q({x:0,y:0}),R=(F,U,oe)=>{Zn(oe)||Ue(F.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(oe.x),Math.floor(100-oe.y)])),ft(F,sA,{value:oe})},B=(F,U,oe,W)=>{d(oe.element.dom,$B(IB))},P=Oe([an.config({find:_.some}),Ot.config({})]);return Rl.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:T},rounded:!1,components:[a,i],onChange:R,onInit:B,sliderBehaviours:P})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,T,R)=>{g(T,R)},setThumb:(E,T,R)=>{h(T,R)}},extraApis:{}})},bP=(t,s)=>{const a=d=>{const g=aA(t,s,d.onValidHex,d.onInvalidHex),h=pP(t,s),C=Ae=>(100-Ae)/100*360,w=Ae=>100-Ae/360*100,E={paletteRgba:pt(IB),paletteHue:pt(0)},T=Tn(cC(t,s)),R=Tn(h.sketch({})),B=Tn(g.sketch({})),P=(Ae,He,pe)=>{R.getOpt(Ae).each(rt=>{h.setHue(rt,pe)})},F=(Ae,He)=>{B.getOpt(Ae).each(pe=>{g.updateHex(pe,He)})},U=(Ae,He,pe)=>{T.getOpt(Ae).each(rt=>{Rl.setValue(rt,w(pe))})},oe=(Ae,He)=>{R.getOpt(Ae).each(pe=>{h.setThumb(pe,He)})},W=(Ae,He)=>{const pe=j2(Ae);E.paletteRgba.set(pe),E.paletteHue.set(He)},ee=(Ae,He,pe,rt)=>{W(He,pe),Qe(rt,Je=>{Je(Ae,He,pe)})},J=()=>{const Ae=[F];return(He,pe)=>{const rt=pe.event.value,Je=E.paletteHue.get(),yt=hp(Je,rt.x,100-rt.y),dt=ZB(yt);ee(He,dt,Je,Ae)}},ye=()=>{const Ae=[P,F];return(He,pe)=>{const rt=C(pe.event.value),Je=E.paletteRgba.get(),yt=TE(Je),dt=hp(rt,yt.saturation,yt.value),fn=ZB(dt);ee(He,fn,rt,Ae)}},ce=()=>{const Ae=[P,U,oe];return(He,pe)=>{const rt=pe.event.hex,Je=oL(rt);ee(He,rt,Je.hue,Ae)}};return{uid:d.uid,dom:d.dom,components:[R.asSpec(),T.asSpec(),B.asSpec()],behaviours:Oe([zt("colour-picker-events",[ve(jE,ce()),ve(sA,J()),ve(dP,ye())]),an.config({find:Ae=>B.getOpt(Ae)}),ct.config({mode:"acyclic"})])}};return ga({name:"ColourPicker",configFields:[be("dom"),te("onValidHex",Z),te("onInvalidHex",Z)],factory:a})},Yi={self:()=>an.config({find:_.some}),memento:t=>an.config({find:t.getOpt}),childAt:t=>an.config({find:s=>Ou(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},yP=_t([te("preprocess",gt),te("postprocess",gt)]),iz=(t,s)=>{const a=Wr("RepresentingConfigs.memento processors",yP,s);return Ke.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Ke.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=t.get(i);Ke.setValue(h,g)}}})},xp=(t,s,a)=>Ke.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),CP=(t,s,a)=>xp(t,i=>s(i.element),(i,d)=>a(i.element,d)),lz=t=>CP(t,ma,Pf),qE=t=>Ke.config({store:{mode:"memory",initialValue:t}}),wP={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},SP=t=>s=>Yt(s)?t.translate(wP[s]):t.translate(s),uz=(t,s,a)=>{const i=w=>"tox-"+w,d=bP(SP(s),i),g=w=>{ft(w,Sd,{name:"hex-valid",value:!0})},h=w=>{ft(w,Sd,{name:"hex-valid",value:!1})},C=Tn(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:h}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:Oe([xp(a,w=>{const E=C.get(w);return an.getCurrent(E).bind(B=>Ke.getValue(B).hex).map(B=>"#"+U0(B,"#")).getOr("")},(w,E)=>{const T=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,R=_.from(T.exec(E)).bind(F=>ns(F,1)),B=C.get(w);an.getCurrent(B).fold(()=>{console.log("Can not find form")},F=>{Ke.setValue(F,{hex:R.getOr("")}),Sp.getField(F,"hex").each(U=>{Zt(U,ul())})})}),Yi.self()])}};var dz=tinymce.util.Tools.resolve("tinymce.Resource");const xP=t=>_n(t,"init"),KE=t=>{const s=Vn(),a=Tn({dom:{tag:t.tag}}),i=Vn(),d=!xP(t)&&t.onFocus.isSome()?[Ot.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),Yn.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Oe([zt("custom-editor-events",[Jn(g=>{a.getOpt(g).each(h=>{(xP(t)?t.init(h.element.dom):dz.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{i.on(w=>{C.setValue(w)}),i.clear(),s.set(C)})})})]),xp(_.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Yi.self()].concat(d)),components:[a.asSpec()]}};var Wm=tinymce.util.Tools.resolve("tinymce.util.Tools");const mz=(t,s)=>{const a=Wm.explode(s.getOption("images_file_types")),i=d=>va(a,g=>tl(d.name.toLowerCase(),`.${g.toLowerCase()}`));return lo(dc(t),i)},EP=(t,s,a)=>{const i=(B,P)=>{P.stop()},d=B=>(P,F)=>{Qe(B,U=>{U(P,F)})},g=(B,P)=>{var F;if(!Tt.isDisabled(B)){const U=P.event.raw;C(B,(F=U.dataTransfer)===null||F===void 0?void 0:F.files)}},h=(B,P)=>{const F=P.event.raw.target;C(B,F.files)},C=(B,P)=>{P&&(Ke.setValue(B,mz(P,s)),ft(B,sc,{name:t.name}))},w=Tn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Oe([zt("input-file-events",[Bi(em()),Bi(Di())])])}),E=B=>({uid:B.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Oe([qE(a.getOr([])),Yi.self(),Tt.config({}),Gt.config({toggleClass:"dragenter",toggleOnExecute:!1}),zt("dropzone-events",[ve("dragenter",d([i,Gt.toggle])),ve("dragleave",d([i,Gt.toggle])),ve("dragover",i),ve("drop",d([i,g])),ve(Ef(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ho(s.translate("Drop an image here"))]},vr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ho(s.translate("Browse for an image")),w.asSpec()],action:P=>{w.get(P).element.dom.click()},buttonBehaviours:Oe([Yn.config({}),Al.button(s.isDisabled),Es()])})]}]}),T=t.label.map(B=>vg(B,s)),R=An.parts.field({factory:{sketch:E}});return g0(T,R,["tox-form__group--stretched"],[])},TP=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:xe(t.items,s.interpreter)}),fz=(t,s)=>{let a=null,i=null;return{cancel:()=>{co(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,co(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,t.apply(null,C)},s))}}},gz=(t,s)=>{let a=null;return{cancel:()=>{co(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{co(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},iC=(t,s)=>{let a=null;const i=()=>{co(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},iA=qe("alloy-fake-before-tabstop"),YE=qe("alloy-fake-after-tabstop"),_P=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Oe([Ot.config({ignore:!0}),Yn.config({})])}),kP=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[_P([iA]),s,_P([YE])],behaviours:Oe([Yi.childAt(1)])}),OP=(t,s)=>{ft(t,Qc(),{raw:{which:9,shiftKey:s}})},AP=(t,s)=>{const a=s.element;Ra(a,iA)?OP(t,!0):Ra(a,YE)&&OP(t,!1)},S0=t=>Y2(t,["."+iA,"."+YE].join(","),$n),XE=qe("update-dialog"),RP=qe("update-title"),DP=qe("update-body"),MP=qe("update-footer"),lA=qe("body-send-message"),JE=qe("dialog-focus-shifted"),QE=Ga().browser,lC=QE.isSafari(),hz=QE.isFirefox(),BP=lC||hz,pz=QE.isChromium(),bz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,NP=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),vz=(t,s)=>{const a=t.body;return _.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!pz&&!lC||St(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},PP=(t,s,a)=>{const i=t.dom;_.from(i.contentDocument).fold(a,d=>{let g=0;const h=vz(d,s).map(w=>(g=w.scrollTop,w)).forall(bz),C=()=>{const w=i.contentWindow;St(w)&&(h?NP(w,"bottom"):!h&&BP&&g!==0&&NP(w,g))};lC&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),lC||C()})},uA=Rt(BP,lC?500:200).map(t=>fz(PP,t)),yz=(t,s)=>{const a=pt(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>Ue(g,"srcdoc",d);s?uA.fold(q(PP),C=>C.throttle)(g,d,h):h()}a.set(d)}}},Cz=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(R=>({title:R})).getOr({}),...a.map(R=>({srcdoc:R})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=yz(a,t.streamContent),w=t.label.map(R=>vg(R,s)),E=R=>kP(_.from(g),{uid:R.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Oe([Yn.config({}),Ot.config({}),xp(a,C.getValue,C.setValue),fa.config({channels:{[JE]:{onReceive:(B,P)=>{P.newFocus.each(F=>{vi(B.element).each(U=>{(Fn(B.element,F)?qn:Ao)(U,"tox-navobj-bordered-focus")})})}}}})])}),T=An.parts.field({factory:{sketch:E}});return g0(w,T,["tox-form__group--stretched"],[])},wz=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[Yr(t,"load",i),Yr(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>Qe(d,h=>h.unbind());t.dom.complete&&i()}),uC=(t,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},dA=(t,s,a)=>{const i=la(t),d=vs(t);return Math.min(i/s,d/a,1)},Sz=(t,s)=>{const a=pt(s.getOr({url:""})),i=Tn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=Tn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(w,E)=>{const T={url:E.url};E.zoom.each(B=>T.zoom=B),E.cachedWidth.each(B=>T.cachedWidth=B),E.cachedHeight.each(B=>T.cachedHeight=B),a.set(T);const R=()=>{const{cachedWidth:B,cachedHeight:P,zoom:F}=T;if(!io(B)&&!io(P)){if(io(F)){const oe=dA(w.element,B,P);T.zoom=oe}const U=uC(la(w.element),vs(w.element),B,P,T.zoom);d.getOpt(w).each(oe=>{xa(oe.element,U)})}};i.getOpt(w).each(B=>{const P=B.element;E.url!==To(P,"src")&&(Ue(P,"src",E.url),Ao(w.element,"tox-imagepreview__loaded")),R(),wz(P).then(F=>{w.getSystem().isConnected()&&(qn(w.element,"tox-imagepreview__loaded"),T.cachedWidth=F.dom.naturalWidth,T.cachedHeight=F.dom.naturalHeight,R())})})},h={};t.height.each(w=>h.height=w);const C=s.map(w=>({url:w.url,zoom:_.from(w.zoom),cachedWidth:_.from(w.cachedWidth),cachedHeight:_.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Oe([Yi.self(),xp(C,()=>a.get(),g)])}},xz=(t,s,a)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=Tn({dom:{tag:"label",classes:[i,...d,...g]},components:[Ho(s.providers.translate(t.label))]}),C=xe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Oe([Yi.self(),Bt.config({}),lz(_.none()),ct.config({mode:"acyclic"}),zt("label",[Jn(w=>{t.for.each(E=>{a(E).each(T=>{h.getOpt(w).each(R=>{var B;const P=(B=To(T.element,"id"))!==null&&B!==void 0?B:qe("form-field");Ue(T.element,"id",P),Ue(R.element,"for",P)})})})})])])}},eT=qe("toolbar.button.execute"),Ez=t=>ei((s,a)=>{hE(t,s)(i=>{ft(s,eT,{buttonApi:i}),t.onAction(i)})}),Zm=qe("common-button-display-events"),mA={[wc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Zr()]:["toolbar-button-events",Zm],[Sc()]:["toolbar-button-events","dropdown-events","tooltipping"],[ka()]:["focusing","alloy.base.behaviour",Zm]},fA=t=>It(t.element,"width",Zo(t.element,"width")),$P=(t,s,a)=>oc(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),tT=(t,s)=>$P(t,s,[]),jm=(t,s)=>$P(t,s,[Bt.config({})]),IP=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Ho(a.translate(t))],behaviours:Oe([Bt.config({})])}),ii=qe("update-menu-text"),xg=qe("update-menu-icon"),gA=(t,s,a,i)=>{const d=pt(Z),g=t.text.map(U=>Tn(IP(U,s,a.providers))),h=t.icon.map(U=>Tn(jm(U,a.providers.icons))),C=(U,oe)=>{const W=Ke.getValue(U);return Ot.focus(W),ft(W,"keydown",{raw:oe.event.raw}),ji.close(W),_.some(!0)},w=t.role.fold(()=>({}),U=>({role:U})),E=_.from(t.listRole).map(U=>({listRole:U})).getOr({}),T=t.ariaLabel.fold(()=>({}),U=>({"aria-label":a.providers.translate(U)})),R=oc("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),B=qe("common-button-display-events"),P="dropdown-events";return Tn(ji.sketch({...t.uid?{uid:t.uid}:{},...w,...E,dom:{tag:"button",classes:[s,`${s}--select`].concat(xe(t.classes,U=>`${s}--${U}`)),attributes:{...T,...St(i)?{"data-mce-name":i}:{}}},components:up([h.map(U=>U.asSpec()),g.map(U=>U.asSpec()),_.some(R)]),matchWidth:!0,useMinWidth:!0,onOpen:(U,oe,W)=>{t.searchable&&RE(W)},dropdownBehaviours:Oe([...t.dropdownBehaviours,Al.button(()=>t.disabled||a.providers.isDisabled()),Es(),p0.config({}),Bt.config({}),...t.tooltip.map(U=>sr.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(U)}))).toArray(),zt(P,[zm(t,d),ta(t,d)]),zt(B,[Jn((U,oe)=>fA(U))]),zt("menubutton-update-display-text",[ve(ii,(U,oe)=>{g.bind(W=>W.getOpt(U)).each(W=>{Bt.set(W,[Ho(a.providers.translate(oe.event.text))])})}),ve(xg,(U,oe)=>{h.bind(W=>W.getOpt(U)).each(W=>{Bt.set(W,[jm(oe.event.icon,a.providers.icons)])})})])]),eventOrder:Fo(mA,{[ka()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Zr()]:["toolbar-button-events",sr.name(),P,B]}),sandboxBehaviours:Oe([ct.config({mode:"special",onLeft:C,onRight:C}),zt("dropdown-sandbox-events",[ve(K5,(U,oe)=>{VL(U),oe.stop()}),ve(Y5,(U,oe)=>{UL(U,oe),oe.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...P2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:K2,onCollapseMenu:(U,oe,W)=>{ze.getHighlighted(W).each(ee=>{K2(U,W,ee)})},onDehighlightItem:jL}}},getAnchorOverrides:()=>({maxHeightFunction:(U,oe)=>{sb()(U,oe-10)}}),fetch:U=>$r.nu(Dt(t.fetch,U))})).asSpec()},FP=t=>Yt(t),hA=t=>t.type==="separator",LP=t=>_n(t,"getSubmenuItems"),Tz={type:"separator"},_z=(t,s)=>{const a=bo(t,(i,d)=>FP(d)?d===""?i:d==="|"?i.length>0&&!hA(i[i.length-1])?i.concat([Tz]):i:_n(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&hA(a[a.length-1])&&a.pop(),a},kz=(t,s)=>{const a=t.getSubmenuItems(),i=zP(a,s),d=Fo(i.menus,{[t.value]:i.items}),g=Fo(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},HP=t=>{const s=Xe(t,"value").getOrThunk(()=>qe("generated-menu-item"));return Fo({value:s},t)},zP=(t,s)=>{const a=_z(Yt(t)?t.split(" "):t,s);return ps(a,(i,d)=>{if(LP(d)){const g=HP(d),h=kz(g,s);return{menus:Fo(i.menus,h.menus),items:[h.item,...i.items],expansions:Fo(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},VP=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),Oz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),x0=(t,s,a,i)=>{const d=qe("primary-menu"),g=zP(t,a.shared.providers.menuItems());if(g.items.length===0)return _.none();const h=VP(i),C=YL(d,g.items,s,a,i.isHorizontalMenu,h),w=Oz(i),E=Po(g.menus,(R,B)=>YL(B,R,s,a,!1,w)),T=Fo(E,Sf(d,C));return _.from(Qh.tieredData(d,T,g.expansions))},E0=t=>!_n(t,"items"),UP="data-value",WP=(t,s,a,i,d)=>xe(a,g=>E0(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{Ke.setValue(t,g.value),ft(t,sc,{name:s}),Ot.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>WP(t,s,g.items,i,d)}),pA=(t,s)=>Ys(t,a=>E0(a)?Rt(a.value===s,a):pA(a.items,s)),bA=(t,s,a)=>{const i=va(t.items,E=>!E0(E)),d=s.shared.providers,g=a.bind(E=>pA(t.items,E)).orThunk(()=>ya(t.items).filter(E0)),h=t.label.map(E=>vg(E,d)),C=An.parts.field({dom:{},factory:{sketch:E=>gA({uid:E.uid,text:g.map(T=>T.text),icon:_.none(),tooltip:_.none(),role:Rt(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(T,R)=>{const B=WP(T,t.name,t.items,Ke.getValue(T),i);R(x0(B,Tl.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:_.none()}))},onSetup:q(Z),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yn.config({}),xp(g.map(T=>T.value),T=>To(T.element,UP),(T,R)=>{pA(t.items,R).each(B=>{Ue(T.element,UP,B.value),ft(T,ii,{text:B.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return An.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ht([h.toArray(),[w]]),fieldBehaviours:Oe([Tt.config({disabled:q(!t.enabled),onDisabled:E=>{An.getField(E).each(Tt.disable)},onEnabled:E=>{An.getField(E).each(Tt.enable)}})])})},Az=(t,s)=>({dom:{tag:"div",classes:t.classes},components:xe(t.items,s.shared.interpreter)}),ZP=(t,s)=>{const a=xe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Sf("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Ps(t.selectBehaviours,[Ot.config({}),Ke.config({store:{mode:"manual",getValue:d=>ie(d.element),setValue:(d,g)=>{const h=ya(t.options);$t(t.options,w=>w.value===g).isSome()?bl(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>bl(d.element,w.value))},...i}})])}},Rz=ga({name:"HtmlSelect",configFields:[be("options"),Ns("selectBehaviours",[Ot,Ke]),te("selectClasses",[]),te("selectAttributes",{}),hn("data")],factory:ZP}),jP=(t,s,a)=>{const i=xe(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>vg(w,s)),g=An.parts.field({dom:{},...a.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:i,factory:Rz,selectBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||s.isDisabled()}),Yn.config({}),zt("selectbox-change",[ve(Ef(),(w,E)=>{ft(w,sc,{name:t.name})})])])}),h=t.size>1?_.none():_.some(oc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Ht([[g],h.toArray()])};return An.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ht([d.toArray(),[C]]),fieldBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{An.getField(w).each(Tt.disable)},onEnabled:w=>{An.getField(w).each(Tt.enable)}}),Es()])})},Dz=q([te("field1Name","field1"),te("field2Name","field2"),xc("onLockedChange"),hl(["lockClass"]),te("locked",!1),_c.field("coupledFieldBehaviours",[an,Ke])]),Mz=(t,s,a)=>ke(t,s,a).bind(an.getCurrent),GP=(t,s)=>or({factory:An,name:t,overrides:a=>({fieldBehaviours:Oe([zt("coupled-input-behaviour",[ve(ul(),i=>{Mz(i,a,s).each(d=>{ke(i,a,"lock").each(g=>{Gt.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),Bz=q([GP("field1","field2"),GP("field2","field1"),or({factory:vr,schema:[be("dom")],name:"lock",overrides:t=>({buttonBehaviours:Oe([Gt.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Nz=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:_c.augment(t.coupledFieldBehaviours,[an.config({find:_.some}),Ke.config({store:{mode:"manual",getValue:d=>{const g=Uh(d,t,["field1","field2"]);return{[t.field1Name]:Ke.getValue(g.field1()),[t.field2Name]:Ke.getValue(g.field2())}},setValue:(d,g)=>{const h=Uh(d,t,["field1","field2"]);mc(g,t.field1Name)&&Ke.setValue(h.field1(),g[t.field1Name]),mc(g,t.field2Name)&&Ke.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>ke(d,t,"field1"),getField2:d=>ke(d,t,"field2"),getLock:d=>ke(d,t,"lock")}}),Nc=Pr({name:"FormCoupledInputs",configFields:Dz(),partFields:Bz(),factory:Nz,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),Pz=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},vA=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Ut.value({value:i,unit:d})}else return Ut.error(t)},yA=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>_n(a,d);return t.unit===s?_.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?_.some(t.value):_.some(t.value/a[t.unit]*a[s]):_.none()},CA=t=>_.none(),$z=(t,s)=>a=>yA(a,s).map(i=>({value:i*t,unit:s})),Iz=(t,s)=>{const a=vA(t).toOptional(),i=vA(s).toOptional();return _u(a,i,(d,g)=>yA(d,g.unit).map(h=>g.value/h).map(h=>$z(h,g.unit)).getOr(CA)).getOr(CA)},qP=(t,s)=>{let a=CA;const i=qe("ratio-event"),d=P=>oc(P,{tag:"span",classes:["tox-icon","tox-lock-icon__"+P]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),C=Nc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||s.isDisabled()}),Es(),Yn.config({}),sr.config(s.tooltips.getConfig({tooltipText:h}))])}),w=P=>({dom:{tag:"div",classes:["tox-form__group"]},components:P}),E=P=>An.parts.field({factory:ap,inputClasses:["tox-textfield"],inputBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||s.isDisabled()}),Es(),Yn.config({}),zt("size-input-events",[ve(Oi(),(F,U)=>{ft(F,i,{isField1:P})}),ve(Ef(),(F,U)=>{ft(F,sc,{name:t.name})})])]),selectOnFocus:!1}),T=P=>({dom:{tag:"label",classes:["tox-label"]},components:[Ho(s.translate(P))]}),R=Nc.parts.field1(w([An.parts.label(T("Width")),E(!0)])),B=Nc.parts.field2(w([An.parts.label(T("Height")),E(!1)]));return Nc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[R,B,w([T(ad),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(P,F,U)=>{vA(Ke.getValue(P)).each(oe=>{a(oe).each(W=>{Ke.setValue(F,Pz(W))})})},coupledFieldBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:P=>{Nc.getField1(P).bind(An.getField).each(Tt.disable),Nc.getField2(P).bind(An.getField).each(Tt.disable),Nc.getLock(P).each(Tt.disable)},onEnabled:P=>{Nc.getField1(P).bind(An.getField).each(Tt.enable),Nc.getField2(P).bind(An.getField).each(Tt.enable),Nc.getLock(P).each(Tt.enable)}}),Es(),zt("size-input-events2",[ve(i,(P,F)=>{const U=F.event.isField1,oe=U?Nc.getField1(P):Nc.getField2(P),W=U?Nc.getField2(P):Nc.getField1(P),ee=oe.map(Ke.getValue).getOr(""),J=W.map(Ke.getValue).getOr("");a=Iz(ee,J)})])])})},Fz=(t,s,a)=>{const i=Rl.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ho(s.translate(t.label))]}),d=Rl.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Rl.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Rl.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Oe([Yi.self(),Ot.config({})]),onChoose:(h,C,w)=>{ft(h,sc,{name:t.name,value:w})},onChange:(h,C,w)=>{ft(h,sc,{name:t.name,value:w})}})},Lz=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:xe(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:xe(C,d)}),h=C=>({dom:{tag:"tbody"},components:xe(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:Oe([Yn.config({}),Ot.config({})])}},KP=(t,s)=>{const a=t.label.map(P=>vg(P,s)),i=[Tt.config({disabled:()=>t.disabled||s.isDisabled()}),Es(),ct.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:P=>(Zt(P,h0),_.some(!0))}),zt("textfield-change",[ve(ul(),(P,F)=>{ft(P,sc,{name:t.name})}),ve(ql(),(P,F)=>{ft(P,sc,{name:t.name})})]),Yn.config({})],d=t.validation.map(P=>xd.config({getRoot:F=>vi(F.element),invalidClass:"tox-invalid",validator:{validate:F=>{const U=Ke.getValue(F),oe=P.validator(U);return $r.pure(oe===!0?Ut.value(U):Ut.error(oe))},validateOnLoad:P.validateOnLoad}})).toArray(),g=t.placeholder.fold(q({}),P=>({placeholder:s.translate(P)})),h=t.inputMode.fold(q({}),P=>({inputmode:P})),C={...g,...h},w=An.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(P=>({data:P})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:Oe(Ht([i,d])),selectOnFocus:!1,factory:ap}),E=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,R=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),B=[Tt.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:P=>{An.getField(P).each(Tt.disable)},onEnabled:P=>{An.getField(P).each(Tt.enable)}}),Es()];return g0(a,E,R,B)},YP=(t,s,a)=>KP({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:_.none(),maximized:t.maximized,data:a},s),XP=(t,s,a)=>KP({name:t.name,multiline:!0,label:t.label,inputMode:_.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:_.none(),maximized:t.maximized,data:a},s),T0=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Dl=t=>t.dimension.property,Ep=(t,s)=>t.dimension.getDimension(s),nT=(t,s)=>{const a=T0(t,s);Da(a,[s.shrinkingClass,s.growingClass])},wA=(t,s)=>{Ao(t.element,s.openClass),qn(t.element,s.closedClass),It(t.element,Dl(s),"0px"),Vl(t.element)},SA=(t,s)=>{Ao(t.element,s.closedClass),qn(t.element,s.openClass),gn(t.element,Dl(s))},xA=(t,s,a,i)=>{a.setCollapsed(),It(t.element,Dl(s),Ep(s,t.element)),nT(t,s),wA(t,s),s.onStartShrink(t),s.onShrunk(t)},Hz=(t,s,a,i)=>{const d=i.getOrThunk(()=>Ep(s,t.element));a.setCollapsed(),It(t.element,Dl(s),d),Vl(t.element);const g=T0(t,s);Ao(g,s.growingClass),qn(g,s.shrinkingClass),wA(t,s),s.onStartShrink(t)},JP=(t,s,a)=>{const i=Ep(s,t.element);(i==="0px"?xA:Hz)(t,s,a,_.some(i))},QP=(t,s,a)=>{const i=T0(t,s),d=Ra(i,s.shrinkingClass),g=Ep(s,t.element);SA(t,s);const h=Ep(s,t.element);(d?()=>{It(t.element,Dl(s),g),Vl(t.element)}:()=>{wA(t,s)})(),Ao(i,s.shrinkingClass),qn(i,s.growingClass),SA(t,s),It(t.element,Dl(s),h),a.setExpanded(),s.onStartGrow(t)},e$=(t,s,a)=>{if(a.isExpanded()){gn(t.element,Dl(s));const i=Ep(s,t.element);It(t.element,Dl(s),i)}},t$=(t,s,a)=>{a.isExpanded()||QP(t,s,a)},zz=(t,s,a)=>{a.isExpanded()&&JP(t,s,a)},Vz=(t,s,a)=>{a.isExpanded()&&xA(t,s,a)},n$=(t,s,a)=>a.isExpanded(),Uz=(t,s,a)=>a.isCollapsed(),o$=(t,s,a)=>{const i=T0(t,s);return Ra(i,s.growingClass)===!0},Mt=(t,s,a)=>{const i=T0(t,s);return Ra(i,s.shrinkingClass)===!0};var s$=Object.freeze({__proto__:null,refresh:e$,grow:t$,shrink:zz,immediateShrink:Vz,hasGrown:n$,hasShrunk:Uz,isGrowing:o$,isShrinking:Mt,isTransitioning:(t,s,a)=>o$(t,s)||Mt(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?JP:QP)(t,s,a)},disableTransitions:nT,immediateGrow:(t,s,a)=>{a.isExpanded()||(SA(t,s),It(t.element,Dl(s),Ep(s,t.element)),nT(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),wG=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return Oa(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Sf(s.dimension.property,"0px")})},events:(t,s)=>Gn([Tf(Ai(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(nT(a,t),s.isExpanded()&&gn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),dC=[be("closedClass"),be("openClass"),be("shrinkingClass"),be("growingClass"),hn("getAnimationRoot"),rn("onShrunk"),rn("onStartShrink"),rn("onGrown"),rn("onStartGrow"),te("expanded",!1),vn("dimension",As("property",{width:[Kn("property","width"),Kn("getDimension",t=>la(t)+"px")],height:[Kn("property","height"),Kn("getDimension",t=>vs(t)+"px")]}))],r$=Object.freeze({__proto__:null,init:t=>{const s=pt(t.expanded),a=()=>"expanded: "+s.get();return Aa({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Dt(s.set,!1),setExpanded:Dt(s.set,!0),readState:a})}});const rc=Us({fields:dC,name:"sliding",active:wG,apis:s$,state:r$}),a$=t=>({isEnabled:()=>!Tt.isDisabled(t),setEnabled:s=>Tt.set(t,!s),setActive:s=>{const a=t.element;s?(qn(a,"tox-tbtn--enabled"),Ue(a,"aria-pressed",!0)):(Ao(a,"tox-tbtn--enabled"),$o(a,"aria-pressed"))},isActive:()=>Ra(t.element,"tox-tbtn--enabled"),setText:s=>{ft(t,ii,{text:s})},setIcon:s=>ft(t,xg,{icon:s})}),mC=(t,s,a,i,d=!0,g)=>gA({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,C)=>{const w={pattern:t.search.isSome()?GL(h):""};t.fetch(E=>{C(x0(E,Tl.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},w,a$(h))},onSetup:t.onSetup,getApi:a$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Yn.config({})]:[]]},s,a.shared,g),c$=(t,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(w=>{s().getOpt(w).each(E=>{Ya(E.element),ft(E,Sd,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(xe(t,h=>{const C=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...C,onAction:i(h),onSetup:d(h)}}))}},sT=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Ho(t)]}),EA=qe("leaf-label-event-id"),TA=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>mC(w,"tox-mbtn",g,_.none(),a)),C=[sT(t.title)];return h.each(w=>C.push(w)),vr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Qc()]:[EA,"keying"]},buttonBehaviours:Oe([...a?[Yn.config({})]:[],Gt.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),fa.config({channels:{[`update-active-item-${i}`]:{onReceive:(w,E)=>{(E.value===t.id?Gt.on:Gt.off)(w)}}}}),zt(EA,[Jn((w,E)=>{d.each(T=>{(T===t.id?Gt.on:Gt.off)(w)})}),ve(Qc(),(w,E)=>{const T=E.event.raw.code==="ArrowLeft",R=E.event.raw.code==="ArrowRight";T?(Ql(w.element,".tox-tree--directory").each(B=>{w.getSystem().getByDom(B).each(P=>{ny(B,".tox-tree--directory__label").each(F=>{P.getSystem().getByDom(F).each(Ot.focus)})})}),E.stop()):R&&E.stop()})])])})},qz=(t,s,a)=>oc(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),Kz=(t,s)=>qz(t,s,[]),i$=qe("directory-label-event-id"),Yz=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(C=>mC(C,"tox-mbtn",i,_.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[Kz("chevron-right",i.shared.providers.icons)]},sT(t.title)];d.each(C=>{g.push(C)});const h=C=>{Ql(C.element,".tox-tree--directory").each(w=>{C.getSystem().getByDom(w).each(E=>{const T=!Gt.isOn(E);Gt.toggle(E),ft(C,"expand-tree-node",{expanded:T,node:t.id})})})};return vr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Qc()]:[i$,"keying"]},buttonBehaviours:Oe([...s?[Yn.config({})]:[],zt(i$,[ve(Qc(),(C,w)=>{const E=w.event.raw.code==="ArrowRight",T=w.event.raw.code==="ArrowLeft";E&&a&&w.stop(),(E||T)&&Ql(C.element,".tox-tree--directory").each(R=>{C.getSystem().getByDom(R).each(B=>{!Gt.isOn(B)&&E||Gt.isOn(B)&&T?(h(C),w.stop()):T&&!Gt.isOn(B)&&(Ql(B.element,".tox-tree--directory").each(P=>{ny(P,".tox-tree--directory__label").each(F=>{B.getSystem().getByDom(F).each(Ot.focus)})}),w.stop())})})})])])})},Xz=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?TA({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):_A({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Oe([rc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Bt.config({})])}),Jz=qe("directory-event-id"),_A=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,w=pt(g),E=R=>C.map(B=>B.type==="leaf"?TA({leaf:B,selectedId:h,onLeafAction:s,visible:R,treeId:i,backstage:d}):_A({directory:B,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:R,treeId:i,backstage:d})),T=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Yz({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),Xz({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:T,treeId:i,backstage:d})],behaviours:Oe([zt(Jz,[Jn((R,B)=>{Gt.set(R,T)}),ve("expand-tree-node",(R,B)=>{const{expanded:P,node:F}=B.event;w.set(P?[...w.get(),F]:w.get().filter(U=>U!==F))})]),Gt.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(R,B)=>{const P=R.components()[1],F=E(B);B?rc.grow(P):rc.shrink(P),Bt.set(P,F)}})])}},Qz=qe("tree-event-id"),eV=(t,s)=>{const a=t.onLeafAction.getOr(Z),i=t.onToggleExpand.getOr(Z),d=t.defaultExpandedIds,g=pt(d),h=pt(t.defaultSelectedId),C=qe("tree-id"),w=(E,T)=>t.items.map(R=>R.type==="leaf"?TA({leaf:R,selectedId:E,onLeafAction:a,visible:!0,treeId:C,backstage:s}):_A({directory:R,selectedId:E,onLeafAction:a,expandedIds:T,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:Oe([ct.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),zt(Qz,[ve("expand-tree-node",(E,T)=>{const{expanded:R,node:B}=T.event;g.set(R?[...g.get(),B]:g.get().filter(P=>P!==B)),i(g.get(),{expanded:R,node:B})})]),fa.config({channels:{[`update-active-item-${C}`]:{onReceive:(E,T)=>{h.set(_.some(T.value)),Bt.set(E,w(_.some(T.value),g.get()))}}}}),Bt.config({})])}};var nV=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Gn([ve(t.event,i),ml(()=>s.cancel())].concat(t.cancelEvent.map(d=>[ve(d,()=>s.cancel())]).getOr([])))}});const l$=t=>{const s=pt(null);return Aa({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var oV=Object.freeze({__proto__:null,throttle:l$,init:t=>t.stream.streams.state(t)});const sV=(t,s)=>{const a=t.stream,i=iC(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var rV=[vn("stream",As("mode",{throttle:[be("delay"),te("stopEvent",!0),Kn("streams",{setup:sV,state:l$})]})),te("event","input"),hn("cancelEvent"),xc("onStream")];const kA=Us({fields:rV,name:"streaming",active:nV,state:oV}),rT=(t,s,a)=>{const i=Ke.getValue(a);Ke.setValue(s,i),d$(s)},u$=(t,s)=>{const a=t.element,i=ie(a),d=a.dom;To(a,"type")!=="number"&&s(d,i)},d$=t=>{u$(t,(s,a)=>s.setSelectionRange(a.length,a.length))},aV=(t,s)=>{u$(t,(a,i)=>a.setSelectionRange(s,i.length))},m$=(t,s,a)=>{if(t.selectsOver){const i=Ke.getValue(s),d=t.getDisplayText(i),g=Ke.getValue(a);return t.getDisplayText(g).indexOf(d)===0?_.some(()=>{rT(t,s,a),aV(s,d.length)}):_.none()}else return _.none()},OA=q("alloy.typeahead.itemexecute"),cV=(t,s,a,i)=>{const d=(R,B,P)=>{t.previewing.set(!1);const F=Ko.getCoupled(R,"sandbox");if(ln.isOpen(F))an.getCurrent(F).each(U=>{ze.getHighlighted(U).fold(()=>{P(U)},()=>{dl(F,U.element,"keydown",B)})});else{const U=oe=>{an.getCurrent(oe).each(P)};OE(t,h(R),R,F,i,U,ha.HighlightMenuAndItem).get(Z)}},g=z3(t),h=R=>B=>B.map(P=>{const F=V0(P.menus),U=fe(F,W=>lo(W.items,ee=>ee.type==="item"));return Ke.getState(R).update(xe(U,W=>W.data)),P}),C=R=>an.getCurrent(R),w="typeaheadevents",E=[Ot.config({}),Ke.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:R=>ie(R.element),getFallbackEntry:R=>({value:R,meta:{}}),setValue:(R,B)=>{bl(R.element,t.model.getDisplayText(B))},...t.initialData.map(R=>Sf("initialValue",R)).getOr({})}}),kA.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(R,B)=>{const P=Ko.getCoupled(R,"sandbox");if(Ot.isFocused(R)&&ie(R.element).length>=t.minChars){const U=C(P).bind(W=>ze.getHighlighted(W).map(Ke.getValue));t.previewing.set(!0);const oe=W=>{C(P).each(ee=>{U.fold(()=>{t.model.selectsOver&&ze.highlightFirst(ee)},J=>{ze.highlightBy(ee,ye=>Ke.getValue(ye).value===J.value),ze.getHighlighted(ee).orThunk(()=>(ze.highlightFirst(ee),_.none()))})})};OE(t,h(R),R,P,i,oe,ha.HighlightJustMenu).get(Z)}},cancelEvent:Cv()}),ct.config({mode:"special",onDown:(R,B)=>(d(R,B,ze.highlightFirst),_.some(!0)),onEscape:R=>{const B=Ko.getCoupled(R,"sandbox");return ln.isOpen(B)?(ln.close(B),_.some(!0)):_.none()},onUp:(R,B)=>(d(R,B,ze.highlightLast),_.some(!0)),onEnter:R=>{const B=Ko.getCoupled(R,"sandbox"),P=ln.isOpen(B);if(P&&!t.previewing.get())return C(B).bind(F=>ze.getHighlighted(F)).map(F=>(ft(R,OA(),{item:F}),!0));{const F=Ke.getValue(R);return Zt(R,Cv()),t.onExecute(B,R,F),P&&ln.close(B),_.some(!0)}}}),Gt.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Ko.config({others:{sandbox:R=>_O(t,R,{onOpen:()=>Gt.on(R),onClose:()=>{t.lazyTypeaheadComp.get().each(B=>$o(B.element,"aria-activedescendant")),Gt.off(R)}})}}),zt(w,[Jn(R=>{t.lazyTypeaheadComp.set(_.some(R))}),ml(R=>{t.lazyTypeaheadComp.set(_.none())}),ei(R=>{const B=Z;EO(t,h(R),R,i,B,ha.HighlightMenuAndItem).get(Z)}),ve(OA(),(R,B)=>{const P=Ko.getCoupled(R,"sandbox");rT(t.model,R,B.event.item),Zt(R,Cv()),t.onItemExecute(R,P,B.event.item,Ke.getValue(R)),ln.close(P),d$(R)})].concat(t.dismissOnBlur?[ve(Hu(),R=>{const B=Ko.getCoupled(R,"sandbox");Kr(B.element).isNone()&&ln.close(B)})]:[]))],T={[Sc()]:[Ke.name(),kA.name(),w],...t.eventOrder};return{uid:t.uid,dom:V3(Fo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Ps(t.typeaheadBehaviours,E)},eventOrder:T}},iV=q([hn("lazySink"),be("fetch"),te("minChars",5),te("responseTime",1e3),rn("onOpen"),te("getHotspot",_.some),te("getAnchorOverrides",q({})),te("layouts",_.none()),te("eventOrder",{}),pv("model",{},[te("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),te("selectsOver",!0),te("populateFromBrowse",!0)]),rn("onSetValue"),Gr("onExecute"),rn("onItemExecute"),te("inputClasses",[]),te("inputAttributes",{}),te("inputStyles",{}),te("matchWidth",!0),te("useMinWidth",!1),te("dismissOnBlur",!0),hl(["openClass"]),hn("initialData"),hn("listRole"),Ns("typeaheadBehaviours",[Ot,Ke,kA,ct,Gt,Ko]),bn("lazyTypeaheadComp",()=>pt(_.none)),bn("previewing",()=>pt(!0))].concat(H3()).concat(AE())),lV=q([kc({schema:[fm()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{m$(t.model,d,i).fold(()=>{t.model.selectsOver?(ze.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&rT(t.model,d,i),Xs(i.element,"id").each(g=>Ue(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(ft(i,OA(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&rT(t.model,i,a)})}})})]),uV=Pr({name:"Typeahead",configFields:iV(),partFields:lV(),factory:cV}),Ml=t=>({...t,toCached:()=>Ml(t.toCached()),bindFuture:w=>Ml(t.bind(E=>E.fold(T=>$r.pure(Ut.error(T)),T=>w(T)))),bindResult:w=>Ml(t.map(E=>E.bind(w))),mapResult:w=>Ml(t.map(E=>E.map(w))),mapError:w=>Ml(t.map(E=>E.mapError(w))),foldResult:(w,E)=>t.map(T=>T.fold(w,E)),withTimeout:(w,E)=>Ml($r.nu(T=>{let R=!1;const B=setTimeout(()=>{R=!0,T(Ut.error(E()))},w);t.get(P=>{R||(clearTimeout(B),T(P))})}))}),AA=t=>Ml($r.nu(t)),f$=t=>Ml($r.pure(Ut.value(t))),RA={nu:AA,wrap:Ml,pure:f$,value:f$,error:t=>Ml($r.pure(Ut.error(t))),fromResult:t=>Ml($r.pure(t)),fromFuture:t=>Ml(t.map(Ut.value)),fromPromise:t=>AA(s=>{t.then(a=>{s(Ut.value(a))},a=>{s(Ut.error(a))})})},aT=(t,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),T=>({action:T})),w={buttonBehaviours:Oe([Al.button(()=>!t.enabled||h.isDisabled()),Es(),Yn.config({}),...g.map(T=>sr.config(h.tooltips.getConfig({tooltipText:h.translate(T)}))).toArray(),zt("button press",[T1("click"),T1("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},E=Fo(w,{dom:i});return Fo(E,{components:d})},g$=(t,s,a,i=[],d)=>{const g=t.tooltip.map(E=>({"aria-label":a.translate(E)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(E=>tT(E,a.icons)),w=up([C]);return aT(t,s,i,h,w,t.tooltip,a)},cT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},h$=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(P=>tT(P,a.icons)),C=[h.getOrThunk(()=>Ho(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),R={tag:"button",classes:[...cT(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},B=t.icon.map(q(g));return aT(t,s,i,R,C,B,a)},DA=(t,s,a,i=[],d=[])=>{const g=h$(t,_.some(s),a,i,d);return vr.sketch(g)},p$=(t,s)=>a=>{s==="custom"?ft(a,Sd,{name:t,value:{}}):s==="submit"?Zt(a,h0):s==="cancel"?Zt(a,yg):console.error("Unknown button type: ",s)},gV=(t,s)=>s==="menu",bu=(t,s)=>s==="custom"||s==="cancel"||s==="submit",iT=(t,s)=>s==="togglebutton",lT=(t,s,a)=>{var i,d;const g=t.icon.map(J=>jm(J,s.icons)).map(Tn),h=J=>{ft(J,Sd,{name:t.name,value:{setIcon:ye=>{g.map(ce=>ce.getOpt(J).each(Ae=>{Bt.set(Ae,[jm(ye,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:C==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},E=w.tooltip.or(t.text).map(J=>({"aria-label":s.translate(J)})).getOr({}),T=cT(C??"secondary"),R=t.icon.isSome()&&t.text.isSome(),B={tag:"button",classes:[...T.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...R?["tox-button--icon-and-text"]:[]],attributes:{...E,...St(a)?{"data-mce-name":a}:{}}},P=[],F=s.translate(t.text.getOr("")),U=Ho(F),W=[...up([g.map(J=>J.asSpec())]),...t.text.isSome()?[U]:[]],ee=aT(w,_.some(h),P,B,W,t.tooltip,s);return vr.sketch(ee)},uT=(t,s,a)=>{if(gV(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:_.none(),onSetup:C=>(C.setEnabled(t.enabled),Z),fetch:c$(d.items,i,a)},h=Tn(mC(g,"tox-tbtn",a,_.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(bu(t,s)){const i=p$(t.name,s),d={...t,borderless:!1};return DA(d,i,a.shared.providers,[])}else{if(iT(t,s))return lT(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},MA=(t,s)=>{const a=p$(t.name,"custom");return dH(_.none(),An.parts.field({factory:vr,...h$(t,_.some(a),s,[qE(""),Yi.self()])}))},hV={type:"separator"},BA=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Z}),dT=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:Z}),NA=t=>xe(t,BA),pV=(t,s)=>lo(s,a=>a.type===t),b$=(t,s)=>NA(pV(t,s)),v$=t=>b$("header",t.targets),bV=t=>b$("anchor",t.targets),vV=t=>_.from(t.anchorTop).map(s=>dT("<top>",s)).toArray(),PA=t=>_.from(t.anchorBottom).map(s=>dT("<bottom>",s)).toArray(),yV=t=>xe(t,s=>dT(s,s)),CV=t=>bo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(hV,a),[]),mT=(t,s)=>{const a=t.toLowerCase();return lo(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return _r(g.toLowerCase(),a)||_r(h.toLowerCase(),a)})},y$=(t,s,a)=>{var i,d;const g=Ke.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],w=>{const E=mT(h,yV(a.getHistory(t)));return t==="file"?CV([E,mT(h,v$(w)),mT(h,Ht([vV(w),bV(w),PA(w)]))]):E})},C$=qe("aria-invalid"),wV=(t,s,a,i)=>{const d=s.shared.providers,g=ee=>{const J=Ke.getValue(ee);a.addToHistory(J.value,t.filetype)},h={...i.map(ee=>({initialData:ee})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":C$,type:"url"},minChars:0,responseTime:0,fetch:ee=>{const J=y$(t.filetype,ee,a),ye=x0(J,Tl.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:_.none()});return $r.pure(ye)},getHotspot:ee=>F.getOpt(ee),onSetValue:(ee,J)=>{ee.hasConfigured(xd)&&xd.run(ee).get(Z)},typeaheadBehaviours:Oe([...a.getValidationHandler().map(ee=>xd.config({getRoot:J=>vi(J.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(J,ye)=>{T.getOpt(J).each(ce=>{Ue(ce.element,"title",d.translate(ye))})}},validator:{validate:J=>{const ye=Ke.getValue(J);return RA.nu(ce=>{ee({type:t.filetype,url:ye.value},Ae=>{if(Ae.status==="invalid"){const He=Ut.error(Ae.message);ce(He)}else{const He=Ut.value(Ae.message);ce(He)}})})},validateOnLoad:!1}})).toArray(),Tt.config({disabled:()=>!t.enabled||d.isDisabled()}),Yn.config({}),zt("urlinput-events",[ve(ul(),ee=>{const J=ie(ee.element),ye=J.trim();ye!==J&&bl(ee.element,ye),t.filetype==="file"&&ft(ee,sc,{name:t.name})}),ve(Ef(),ee=>{ft(ee,sc,{name:t.name}),g(ee)}),ve(ql(),ee=>{ft(ee,sc,{name:t.name}),g(ee)})])]),eventOrder:{[ul()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ee=>ee.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:P2(!1,1,"normal")},onExecute:(ee,J,ye)=>{ft(J,h0,{})},onItemExecute:(ee,J,ye,ce)=>{g(ee),ft(ee,sc,{name:t.name})}},C=An.parts.field({...h,factory:uV}),w=t.label.map(ee=>vg(ee,d)),T=Tn(((ee,J,ye=ee,ce=ee)=>oc(ye,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ee],attributes:{title:d.translate(ce),"aria-live":"polite",...J.fold(()=>({}),Ae=>({id:Ae}))}},d.icons))("invalid",_.some(C$),"warning")),R=Tn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[T.asSpec()]}),B=a.getUrlPicker(t.filetype),P=qe("browser.url.event"),F=Tn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,R.asSpec()],behaviours:Oe([Tt.config({disabled:()=>!t.enabled||d.isDisabled()})])}),U=Tn(DA({name:t.name,icon:_.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:_.none(),borderless:!0},ee=>Zt(ee,P),d,[],["tox-browse-url"])),oe=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ht([[F.asSpec()],B.map(()=>U.asSpec()).toArray()])}),W=ee=>{an.getCurrent(ee).each(J=>{const ye=Ke.getValue(J),ce={fieldname:t.name,...ye};B.each(Ae=>{Ae(ce).get(He=>{Ke.setValue(J,He),ft(ee,sc,{name:t.name})})})})};return An.sketch({dom:fH(),components:w.toArray().concat([oe()]),fieldBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ee=>{An.getField(ee).each(Tt.disable),U.getOpt(ee).each(Tt.disable)},onEnabled:ee=>{An.getField(ee).each(Tt.enable),U.getOpt(ee).each(Tt.enable)}}),Es(),zt("url-input-events",[ve(P,W)])])})},SV=(t,s)=>{const a=I5(t.icon,s.icons);return gu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[vr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>ft(i,Sd,{name:"alert-banner",value:t.url}),buttonBehaviours:Oe([D3()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},xV=(t,s)=>{t.dom.checked=s},w$=t=>t.dom.checked,vu=(t,s,a)=>{const i=w=>(w.element.dom.click(),_.some(!0)),d=An.parts.field({factory:{sketch:gt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Oe([Yi.self(),Tt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{vi(w.element).each(E=>qn(E,"tox-checkbox--disabled"))},onEnabled:w=>{vi(w.element).each(E=>Ao(E,"tox-checkbox--disabled"))}}),Yn.config({}),Ot.config({}),CP(a,w$,xV),ct.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),zt("checkbox-events",[ve(Ef(),(w,E)=>{ft(w,sc,{name:t.name})})])])}),g=An.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ho(s.translate(t.label))],behaviours:Oe([p0.config({})])}),h=w=>oc(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),C=Tn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return An.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Oe([Tt.config({disabled:()=>!t.enabled||s.isDisabled()}),Es()])})},$A=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=zt("htmlpanel",[Jn(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?gu.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Oe([sr.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{xn(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Kr(d.element)).each(g=>{Xs(g,"data-mce-tooltip").each(h=>{sr.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:xn(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Kr(d.element).filter(g=>Xs(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:q([rs,xs,ms,fs,ss,Mn]),onRtl:q([rs,xs,ms,fs,ss,Mn])},bubble:ni(0,-2,{})})}),i])}):gu.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Oe([Yn.config({}),Ot.config({}),i])})},$s=t=>(s,a,i,d,g)=>Xe(a,"name").fold(()=>t(a,d,_.none(),g),h=>s.field(h,t(a,d,Xe(i,h),g))),EV=t=>(s,a,i,d,g)=>{const h=Fo(a,{source:"dynamic"});return $s(t)(s,h,i,d,g)},TV={bar:$s((t,s)=>BE(t,s.shared)),collection:$s((t,s,a)=>gH(t,s.shared.providers,a)),alertbanner:$s((t,s)=>SV(t,s.shared.providers)),input:$s((t,s,a)=>YP(t,s.shared.providers,a)),textarea:$s((t,s,a)=>XP(t,s.shared.providers,a)),label:$s((t,s,a,i)=>xz(t,s.shared,i)),iframe:EV((t,s,a)=>Cz(t,s.shared.providers,a)),button:$s((t,s)=>MA(t,s.shared.providers)),checkbox:$s((t,s,a)=>vu(t,s.shared.providers,a)),colorinput:$s((t,s,a)=>NN(t,s.shared,s.colorinput,a)),colorpicker:$s((t,s,a)=>uz(t,s.shared.providers,a)),dropzone:$s((t,s,a)=>EP(t,s.shared.providers,a)),grid:$s((t,s)=>TP(t,s.shared)),listbox:$s((t,s,a)=>bA(t,s,a)),selectbox:$s((t,s,a)=>jP(t,s.shared.providers,a)),sizeinput:$s((t,s)=>qP(t,s.shared.providers)),slider:$s((t,s,a)=>Fz(t,s.shared.providers,a)),urlinput:$s((t,s,a)=>wV(t,s,s.urlinput,a)),customeditor:$s(KE),htmlpanel:$s((t,s)=>$A(t,s.shared.providers)),imagepreview:$s((t,s,a)=>Sz(t,a)),table:$s((t,s)=>Lz(t,s.shared.providers)),tree:$s((t,s)=>eV(t,s)),panel:$s((t,s)=>Az(t,s))},_V={field:(t,s)=>s,record:q([])},S$=(t,s,a,i,d)=>{const g=Fo(i,{shared:{interpreter:h=>fT(t,h,a,g,d)}});return fT(t,s,a,g,d)},fT=(t,s,a,i,d)=>Xe(TV,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,i,d)),IA=(t,s,a,i)=>fT(_V,t,s,a,i),Tp="layout-inset",x$=t=>t.x,yr=(t,s)=>t.x+t.width/2-s.width/2,fC=(t,s)=>t.x+t.width-s.width,FA=t=>t.y,_0=(t,s)=>t.y+t.height-s.height,E$=(t,s)=>t.y+t.height/2-s.height/2,gT=(t,s,a)=>Zs(fC(t,s),_0(t,s),a.insetSouthwest(),ay(),"southwest",js(t,{right:0,bottom:3}),Tp),hT=(t,s,a)=>Zs(x$(t),_0(t,s),a.insetSoutheast(),ry(),"southeast",js(t,{left:1,bottom:3}),Tp),gC=(t,s,a)=>Zs(fC(t,s),FA(t),a.insetNorthwest(),sy(),"northwest",js(t,{right:0,top:2}),Tp),hC=(t,s,a)=>Zs(x$(t),FA(t),a.insetNortheast(),Vf(),"northeast",js(t,{left:1,top:2}),Tp),Bl=(t,s,a)=>Zs(yr(t,s),FA(t),a.insetNorth(),cy(),"north",js(t,{top:2}),Tp),pC=(t,s,a)=>Zs(yr(t,s),_0(t,s),a.insetSouth(),et(),"south",js(t,{bottom:3}),Tp),T$=(t,s,a)=>Zs(fC(t,s),E$(t,s),a.insetEast(),iy(),"east",js(t,{right:0}),Tp),LA=(t,s,a)=>Zs(x$(t),E$(t,s),a.insetWest(),Eh(),"west",js(t,{left:1}),Tp),pT=t=>{switch(t){case"north":return Bl;case"northeast":return hC;case"northwest":return gC;case"south":return pC;case"southeast":return hT;case"southwest":return gT;case"east":return T$;case"west":return LA}},HA=(t,s,a,i,d)=>pS(i).map(pT).getOr(Bl)(t,s,a,i,d),_$=t=>{switch(t){case"north":return pC;case"northeast":return hT;case"northwest":return gT;case"south":return Bl;case"southeast":return hC;case"southwest":return gC;case"east":return LA;case"west":return T$}},kV=(t,s,a,i,d)=>pS(i).map(_$).getOr(Bl)(t,s,a,i,d),k0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},OV=(t,s,a)=>{const d={maxHeightFunction:Wf()},g=()=>({type:"node",root:zc(Eo(t())),node:_.from(t()),bubble:ni(12,12,k0),layouts:{onRtl:()=>[hC],onLtr:()=>[gC]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:ni(-12,12,k0),layouts:{onRtl:()=>[ms,ss,rs],onLtr:()=>[ss,ms,rs]},overrides:d});return()=>a()?g():h()},AV=(t,s,a,i)=>{const g={maxHeightFunction:Wf()},h=()=>({type:"node",root:zc(Eo(s())),node:_.from(s()),bubble:ni(12,12,k0),layouts:{onRtl:()=>[Bl],onLtr:()=>[Bl]},overrides:g}),C=()=>t?{type:"node",root:zc(Eo(s())),node:_.from(s()),bubble:ni(0,-Ru(s()),k0),layouts:{onRtl:()=>[xs],onLtr:()=>[xs]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:ni(0,0,k0),layouts:{onRtl:()=>[xs],onLtr:()=>[xs]},overrides:g};return()=>i()?h():C()},k$=(t,s,a)=>{const i=()=>({type:"node",root:zc(Eo(t())),node:_.from(t()),layouts:{onRtl:()=>[Bl],onLtr:()=>[Bl]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[rs],onLtr:()=>[rs]}});return()=>a()?i():d()},TG=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:ne.fromDom(d),lastCell:ne.fromDom(g)};return _.some(h)}return _.some(qf.range(ne.fromDom(a.startContainer),a.startOffset,ne.fromDom(a.endContainer),a.endOffset))}}),_G=t=>s=>({type:"node",root:t(),node:s}),RV=(t,s,a,i)=>{const d=Qb(t),g=()=>ne.fromDom(t.getBody()),h=()=>ne.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:OV(h,s,C),inlineBottomDialog:AV(t.inline,h,a,C),banner:k$(h,s,C),cursor:TG(t,g),node:_G(g)}},DV=t=>(s,a)=>{sN(t)(s,a)},MV=t=>()=>KB(t),O$=t=>s=>_E(t,s),zA=t=>s=>qB(t,s),BV=t=>({colorPicker:DV(t),hasCustomColors:MV(t),getColors:O$(t),getColorCols:zA(t)}),NV=t=>()=>v5(t),A$=t=>({isDraggableModal:NV(t)}),PV=t=>{const s=pt(Im(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},R$=t=>mc(t,"items"),D$=t=>mc(t,"format"),M$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],VA=t=>_n(t,"items"),B$=t=>_n(t,"block"),$V=t=>_n(t,"inline"),IV=t=>_n(t,"selector"),N$=t=>bo(t,(s,a)=>{if(VA(a)){const i=N$(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if($V(a)||B$(a)||IV(a)){const d=`custom-${Yt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),FV=(t,s)=>{const a=N$(s),i=d=>{Qe(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},UA=t=>l5(t).map(s=>{const a=FV(t,s);return u5(t)?M$.concat(a):a}).getOr(M$),LV=t=>{const s=No(t);return s.length===1&&po(s,"title")},bC=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),P$=(t,s,a,i)=>{const d=w=>bC(w,a,i),g=w=>{const E=C(w.items);return{...w,type:"submenu",getStyleItems:q(E)}},h=w=>{const E=Yt(w.name)?w.name:qe(w.title),T=`custom-${E}`,R={...w,type:"formatter",format:T,isSelected:a(T),getStylePreview:i(T)};return t.formatter.register(E,R),R},C=w=>xe(w,E=>R$(E)?g(E):D$(E)?d(E):LV(E)?{...E,type:"separator"}:h(E));return C(s)},bT=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const w=t.formatter.get(C);return w!==void 0?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):_.none()},i=pt([]),d=pt([]),g=pt(!1);return t.on("PreInit",C=>{const w=UA(t),E=P$(t,w,s,a);i.set(E)}),t.on("addStyleModifications",C=>{const w=P$(t,C.items,s,a);d.set(w),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),w=d.get();return C.concat(w)}}},HV=t=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Ho(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:q(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(w,E)=>{i++,C.onShow&&C.onShow(w,E)},onHide:(w,E)=>{i--,C.onHide&&C.onHide(w,E)}}),getComponents:g}},WA=t=>St(t)&&t.nodeType===1,vC=Wm.trim,ZA=t=>s=>!!(WA(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),zV=ZA("true"),$$=ZA("false"),jA=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),I$=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return zV(s)}return!1},VV=(t,s)=>xe(br(ne.fromDom(s),t),a=>a.dom),vT=t=>t.innerText||t.textContent,yT=t=>t.id?t.id:qe("h"),UV=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,WV=t=>UV(t)&&GA(t),_p=t=>t&&/^(H[1-6])$/.test(t.nodeName),GA=t=>I$(t)&&!$$(t),ZV=t=>_p(t)&&GA(t),F$=t=>_p(t)?parseInt(t.nodeName.substr(1),10):0,qA=t=>{var s;const a=yT(t),i=()=>{t.id=a};return jA("header",(s=vT(t))!==null&&s!==void 0?s:"","#"+a,F$(t),i)},KA=t=>{const s=t.id||t.name,a=vT(t);return jA("anchor",a||"#"+s,"#"+s,0,Z)},jV=t=>xe(lo(t,ZV),qA),GV=t=>xe(lo(t,WV),KA),qV=t=>VV("h1,h2,h3,h4,h5,h6,a:not([href])",t),YA=t=>vC(t.title).length>0,KV={find:t=>{const s=qV(t);return lo(jV(s).concat(GV(s)),YA)}},CT="tinymce-url-history",L$=5,H$=t=>Yt(t)&&/^https?/.test(t),YV=t=>Sn(t)&&t.length<=L$&&Tu(t,H$),z$=t=>So(t)&&Lr(t,s=>!YV(s)).isNone(),XA=()=>{const t=gp.getItem(CT);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+CT+" was not valid JSON",a),{};throw a}return z$(s)?s:(console.log("Local storage "+CT+" was not valid format",s),{})},XV=t=>{if(!z$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));gp.setItem(CT,JSON.stringify(t))},yC=t=>{const s=XA();return Xe(s,t).getOr([])},JV=(t,s)=>{if(!H$(t))return;const a=XA(),i=Xe(a,s).getOr([]),d=lo(i,g=>g!==t);a[s]=[t].concat(d).slice(0,L$),XV(a)},V$=t=>!!t,JA=t=>Po(Wm.makeMap(t,/[, ]/),V$),wT=t=>_.from(h5(t)),QV=t=>{const s=_.from(c3(t)).filter(V$).map(JA);return wT(t).fold($n,a=>s.fold(ht,i=>No(i).length>0?i:!1))},e9=(t,s)=>{const a=QV(t);return no(a)?a?wT(t):_.none():a[s]?wT(t):_.none()},t9=(t,s)=>e9(t,s).map(a=>i=>$r.nu(d=>{const g=(C,w)=>{if(!Yt(C))throw new Error("Expected value to be string");if(w!==void 0&&!So(w))throw new Error("Expected meta to be a object");d({value:C,meta:w})},h={filetype:s,fieldname:i.fieldname,..._.from(i.meta).getOr({})};a.call(t,g,i.value,h)})),U$=t=>_.from(t).filter(Yt).getOrUndefined(),n9=t=>p5(t)?_.some({targets:KV.find(t.getBody()),anchorTop:U$(Nx(t)),anchorBottom:U$(b5(t))}):_.none(),o9=t=>_.from(Bx(t)),s9=t=>({getHistory:yC,addToHistory:JV,getLinkInformation:()=>n9(t),getValidationHandler:()=>o9(t),getUrlPicker:s=>t9(t,s)}),r9=(t,s,a,i)=>{const d=pt(!1),g=PV(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ai.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:HV(t.dialog)},C=s9(s),w=bT(s),E=BV(s),T=A$(s),R=()=>d.get(),B=W=>d.set(W),P={shared:{providers:h,anchors:RV(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:w,colorinput:E,dialog:T,isContextMenuOpen:R,setContextMenuState:B},F=W=>_.none(),U={...P,shared:{...P.shared,interpreter:W=>IA(W,{},U,F),getSink:t.popup}},oe={...P,shared:{...P.shared,interpreter:W=>IA(W,{},oe,F),getSink:t.dialog}};return{popup:U,dialog:oe}},a9=(t,s,a)=>{const i=(pe,rt)=>{Qe([s,...a],Je=>{Je.broadcastEvent(pe,rt)})},d=(pe,rt)=>{Qe([s,...a],Je=>{Je.broadcastOn([pe],rt)})},g=pe=>d(Cl(),{target:pe.target}),h=xi(),C=Yr(h,"touchstart",g),w=Yr(h,"touchmove",pe=>i(ch(),pe)),E=Yr(h,"touchend",pe=>i(wv(),pe)),T=Yr(h,"mousedown",g),R=Yr(h,"mouseup",pe=>{pe.raw.button===0&&d(Ph(),{target:pe.target})}),B=pe=>d(Cl(),{target:ne.fromDom(pe.target)}),P=pe=>{pe.button===0&&d(Ph(),{target:ne.fromDom(pe.target)})},F=()=>{Qe(t.editorManager.get(),pe=>{t!==pe&&pe.dispatch("DismissPopups",{relatedTarget:t})})},U=pe=>i(tm(),yy(pe)),oe=pe=>{d(Am(),{}),i(Mi(),yy(pe))},W=Eo(ne.fromDom(t.getElement())),ee=vy(W,"scroll",pe=>{requestAnimationFrame(()=>{const rt=t.getContainer();if(rt!=null){const yt=Fm(t,s.element).map(dt=>[dt.element,...dt.others]).getOr([]);va(yt,dt=>Fn(dt,pe.target))&&(t.dispatch("ElementScroll",{target:pe.target.dom}),i(xw(),pe))}})}),J=()=>d(Am(),{}),ye=pe=>{pe.state&&d(Cl(),{target:ne.fromDom(t.getContainer())})},ce=pe=>{d(Cl(),{target:ne.fromDom(pe.relatedTarget.getContainer())})},Ae=pe=>t.dispatch("focusin",pe),He=pe=>t.dispatch("focusout",pe);t.on("PostRender",()=>{t.on("click",B),t.on("tap",B),t.on("mouseup",P),t.on("mousedown",F),t.on("ScrollWindow",U),t.on("ResizeWindow",oe),t.on("ResizeEditor",J),t.on("AfterProgressState",ye),t.on("DismissPopups",ce),Qe([s,...a],pe=>{pe.element.dom.addEventListener("focusin",Ae),pe.element.dom.addEventListener("focusout",He)})}),t.on("remove",()=>{t.off("click",B),t.off("tap",B),t.off("mouseup",P),t.off("mousedown",F),t.off("ScrollWindow",U),t.off("ResizeWindow",oe),t.off("ResizeEditor",J),t.off("AfterProgressState",ye),t.off("DismissPopups",ce),Qe([s,...a],pe=>{pe.element.dom.removeEventListener("focusin",Ae),pe.element.dom.removeEventListener("focusout",He)}),T.unbind(),C.unbind(),w.unbind(),E.unbind(),R.unbind(),ee.unbind()}),t.on("detach",()=>{Qe([s,...a],Wy),Qe([s,...a],pe=>pe.destroy())})},rr=ix,kd=ox,W$=q([te("shell",!1),be("makeItem"),te("setupItem",Z),_c.field("listBehaviours",[Bt])]),ST=nc({name:"items",overrides:()=>({behaviours:Oe([Bt.config({})])})}),Z$=q([ST]),i9=q("CustomList"),l9=(t,s,a,i)=>{const d=(C,w)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const T=Bt.contents(E),R=w.length,B=R-T.length,P=B>0?ts(B,()=>t.makeItem()):[],F=T.slice(R);Qe(F,oe=>Bt.remove(E,oe)),Qe(P,oe=>Bt.append(E,oe));const U=Bt.contents(E);Qe(U,(oe,W)=>{t.setupItem(C,oe,w[W],W)})})},g=t.shell?{behaviours:[Bt.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?_.some(C):ke(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Ps(t.listBehaviours,g.behaviours),apis:{setItems:d}}},j$=Pr({name:i9(),configFields:W$(),partFields:Z$(),factory:l9,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),O0=q([be("dom"),te("shell",!0),Ns("toolbarBehaviours",[Bt])]),u9=q([nc({name:"groups",overrides:()=>({behaviours:Oe([Bt.config({})])})})]),d9=(t,s,a,i)=>{const d=(C,w)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{Bt.set(E,w)})},g=C=>t.shell?_.some(C):ke(C,t,"groups"),h=t.shell?{behaviours:[Bt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Ps(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:Z},domModification:{attributes:{role:"group"}}}},Nl=Pr({name:"Toolbar",configFields:O0(),partFields:u9(),factory:d9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),G$=Z,m9=$n,QA=q([]);var f9=Object.freeze({__proto__:null,setup:G$,isDocked:m9,getBehaviours:QA});const eR=q(qe("toolbar-height-change")),Od={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Eg="tox-tinymce--toolbar-sticky-on",tR="tox-tinymce--toolbar-sticky-off",CC=(t,s)=>{const a=Wa(s),d=Ld(s).dom.innerHeight,g=Vr(a),h=ne.fromDom(t.elm),C=jc(h),w=vs(h),E=C.y,T=E+w,R=ia(s),B=vs(s),P=R.top,F=P+B,U=Math.abs(P-g.top)<2,oe=Math.abs(F-(g.top+d))<2;if(U&&E<F)e1(g.left,E-B,a);else if(oe&&T>P){const W=E-d+w+B;e1(g.left,W,a)}},kp=(t,s)=>po(Co.getModes(t),s),xT=t=>{const s=i=>Ru(i)+(parseInt(Zo(i,"margin-top"),10)||0)+(parseInt(Zo(i,"margin-bottom"),10)||0),a=t.element;vi(a).each(i=>{const d="padding-"+Co.getModes(t)[0];if(Co.isDocked(t)){const g=la(i);It(a,"width",g+"px"),It(i,d,s(a)+"px")}else gn(a,"width"),gn(i,d)})},nR=(t,s)=>{s?(Ao(t,Od.fadeOutClass),Of(t,[Od.transitionClass,Od.fadeInClass])):(Ao(t,Od.fadeInClass),Of(t,[Od.fadeOutClass,Od.transitionClass]))},oR=(t,s)=>{const a=ne.fromDom(t.getContainer());s?(qn(a,Eg),Ao(a,tR)):(qn(a,tR),Ao(a,Eg))},AG=(t,s)=>{const a=Wa(s);Hi(a).filter(i=>!Fn(s,i)).filter(i=>Fn(i,ne.fromDom(a.dom.body))||fc(t,i)).each(()=>Ya(s))},g9=(t,s)=>Kr(t).orThunk(()=>s().toOptional().bind(a=>Kr(a.element))),h9=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Co.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(xT)}),t.on("SkinLoaded",()=>{a().each(i=>{Co.isDocked(i)?Co.reset(i):Co.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Co.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Co.refresh(d);const g=d.element;sM(g)&&CC(i,g)})}),t.on("PostRender",()=>{oR(t,!1)})},p9=t=>t().map(Co.isDocked).getOr(!1),b9=()=>[fa.config({channels:{[eR()]:{onReceive:xT}}})],q$=(t,s)=>{const a=Vn(),i=s.getSink,d=C=>{i().each(w=>C(w.element))},g=C=>{t.inline||xT(C),oR(t,Co.isDocked(C)),C.getSystem().broadcastOn([Am()],{}),i().each(w=>w.getSystem().broadcastOn([Am()],{}))},h=t.inline?[]:b9();return[Ot.config({}),Co.config({contextual:{lazyContext:C=>{const w=Ru(C.element),E=t.inline?t.getContentAreaContainer():t.getContainer();return _.from(E).map(T=>{const R=jo(ne.fromDom(T));return Fm(t,C.element).fold(()=>{const P=R.height-w,F=R.y+(kp(C,"top")?0:w);return ko(R.x,F,R.width,P)},P=>{const F=sv(R,sp(P)),U=kp(C,"top")?F.y:F.y+w;return ko(F.x,U,F.width,F.height-w)})})},onShow:()=>{d(C=>nR(C,!0))},onShown:C=>{d(w=>Da(w,[Od.transitionClass,Od.fadeInClass])),a.get().each(w=>{AG(C.element,w),a.clear()})},onHide:C=>{g9(C.element,i).fold(a.clear,a.set),d(w=>nR(w,!1))},onHidden:()=>{d(C=>Da(C,[Od.transitionClass]))},...Od},lazyViewport:C=>Fm(t,C.element).fold(()=>{const E=zs(),T=g5(t),R=E.y+(kp(C,"top")?T:0),B=E.height-(kp(C,"bottom")?T:0);return{bounds:ko(E.x,R,E.width,B),optScrollEnv:_.none()}},E=>({bounds:sp(E),optScrollEnv:_.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:ia(E.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var A0=Object.freeze({__proto__:null,setup:h9,isDocked:p9,getBehaviours:q$});const wC=t=>{const s=t.editor,a=t.sticky?q$:QA;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Oe(a(s,t.sharedBackstage))}},sR=_t([cs,vn("items",Jg([mv([oE,Ka("items",je)]),je]))].concat(z2)),v9=t=>Oo("GroupToolbarButton",sR,t),y9=[Ss("text"),Ss("tooltip"),Ss("icon"),yc("search",!1,Jg([vc,_t([Ss("placeholder")])],t=>no(t)?t?_.some({placeholder:_.none()}):_.none():_.some(t))),qa("fetch"),Go("onSetup",()=>Z)],ET=_t([cs,...y9]),K$=t=>Oo("menubutton",ET,t),SC=_t([cs,L2,Wi,bg,aB,v7,pg,Yc("presets","normal",["normal","color","listpreview"]),iE(1),o0,q3]),Y$=t=>Oo("SplitButton",SC,t);var rR=ga({factory:(t,s)=>{const a=(d,g)=>{const h=xe(g,C=>{const w={type:"menubutton",text:C.text,fetch:T=>{T(C.getItems())}},E=K$(w).mapError(T=>Ti(T)).getOrDie();return mC(E,"tox-mbtn",s.backstage,_.some("menuitem"))});Bt.set(d,h)},i={focus:ct.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Oe([Bt.config({}),zt("menubar-events",[Jn(d=>{t.onSetup(d)}),ve(il(),(d,g)=>{xn(d.element,".tox-mbtn--active").each(h=>{Li(g.event.target,".tox-mbtn").each(C=>{Fn(h,C)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(C).each(E=>{ji.expand(E),ji.close(w),Ot.focus(E)})})})})}),ve(nm(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{ji.isOpen(h)&&(ji.expand(C),ji.close(h))})})})]),ct.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),_.some(!0))}),Yn.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[be("dom"),be("uid"),be("onEscape"),be("backstage"),te("onSetup",Z)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const C9="⚡️Upgrade",w9="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",S9=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:w9,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:C9}}]}),X$="container",J$=[Ns("slotBehaviours",[])],aR=t=>"<alloy.field."+t+">",cR=t=>{const s=(()=>{const g=[];return{slot:(C,w)=>(g.push(C),ax(X$,aR(C),w)),record:q(g)}})(),a=t(s),i=s.record(),d=xe(i,g=>or({name:g,pname:aR(g)}));return cu(X$,J$,d,x9,a)},x9=(t,s)=>{const a=U=>Vh(t),i=(U,oe)=>ke(U,t,oe),d=(U,oe)=>(W,ee)=>ke(W,t,ee).map(J=>U(J,ee)).getOr(oe),g=U=>(oe,W)=>{Qe(W,ee=>U(oe,ee))},h=(U,oe)=>To(U.element,"aria-hidden")!=="true",C=(U,oe)=>{if(!h(U)){const W=U.element;gn(W,"display"),$o(W,"aria-hidden"),ft(U,xv(),{name:oe,visible:!0})}},w=(U,oe)=>{if(h(U)){const W=U.element;It(W,"display","none"),Ue(W,"aria-hidden","true"),ft(U,xv(),{name:oe,visible:!1})}},E=d(h,!1),T=d(w),R=g(T),B=U=>R(U,a()),P=d(C),F={getSlotNames:a,getSlot:i,isShowing:E,hideSlot:T,hideAllSlots:B,showSlot:P};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fh(t.slotBehaviours),apis:F}},ar={...Po({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Lf(t)),sketch:cR},Q$=_t([Wi,L2,Go("onShow",Z),Go("onHide",Z),pg]),E9=t=>Oo("sidebar",Q$,t),T9=t=>{const{sidebars:s}=t.ui.registry.getAll();Qe(No(s),a=>{const i=s[a],d=()=>za(_.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}}})})},_9=t=>({element:()=>t.element.dom}),k9=(t,s)=>{const a=xe(No(s),i=>{const d=s[i],g=_e(E9(d));return{name:i,getApi:_9,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return xe(a,i=>{const d=pt(Z);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:s0.unnamedEvents([zm(i,d),ta(i,d),ve(xv(),(g,h)=>{const C=h.event;$t(a,E=>E.name===C.name).each(E=>{(C.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},lR=t=>ar.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:k9(s,t),slotBehaviours:s0.unnamedEvents([Jn(a=>ar.hideAllSlots(a))])})),uR=(t,s,a)=>{an.getCurrent(t).each(d=>{Bt.set(d,[lR(s)]);const g=a==null?void 0:a.toLowerCase();Yt(g)&&_n(s,g)&&an.getCurrent(d).each(h=>{ar.showSlot(h,g),rc.immediateGrow(d),gn(d.element,"width"),TT(t.element,"region")})})},TT=(t,s)=>{Ue(t,"role",s)},dR=(t,s)=>{an.getCurrent(t).each(i=>{an.getCurrent(i).each(g=>{rc.hasGrown(i)?ar.isShowing(g,s)?(rc.shrink(i),TT(t.element,"presentation")):(ar.hideAllSlots(g),ar.showSlot(g,s),TT(t.element,"region")):(ar.hideAllSlots(g),ar.showSlot(g,s),rc.grow(i),TT(t.element,"region"))})})},O9=t=>an.getCurrent(t).bind(a=>rc.isGrowing(a)||rc.hasGrown(a)?an.getCurrent(a).bind(g=>$t(ar.getSlotNames(g),h=>ar.isShowing(g,h))):_.none()),mR=qe("FixSizeEvent"),fR=qe("AutoSizeEvent"),A9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Oe([Yn.config({}),Ot.config({}),rc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{an.getCurrent(s).each(ar.hideAllSlots),Zt(s,fR)},onGrown:s=>{Zt(s,fR)},onStartGrow:s=>{ft(s,mR,{width:Js(s.element,"width").getOr("")})},onStartShrink:s=>{ft(s,mR,{width:la(s.element)+"px"})}}),Bt.config({}),an.config({find:s=>{const a=Bt.contents(s);return ya(a)}})])}],behaviours:Oe([Yi.childAt(0),zt("sidebar-sliding-events",[ve(mR,(s,a)=>{It(s.element,"width",a.event.width)}),ve(fR,(s,a)=>{gn(s.element,"width")})])])});var e6=Object.freeze({__proto__:null,block:(t,s,a,i)=>{Ue(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Oe([ct.config({mode:"special",onTab:()=>_.some(!0),onShiftTab:()=>_.some(!0)}),Ot.config({})]),h=i(d,g),C=d.getSystem().build(h);Bt.append(d,Mr(C)),C.hasConfigured(ct)&&s.focus&&ct.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Bt.remove(d,C))},unblock:(t,s,a)=>{$o(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),R9=[Go("getRoot",_.none),Jo("focus",!0),rn("onBlock"),rn("onUnblock")],M9=Object.freeze({__proto__:null,init:()=>{const t=sw(),s=a=>{t.set({destroy:a})};return Aa({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const yu=Us({fields:R9,name:"blocking",apis:e6,state:M9}),B9=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:lu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),t6=t=>an.getCurrent(t).each(s=>Ya(s.element,!0)),N9=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;_.from(t.iframeElement).map(ne.fromDom).each(d=>{s?(Xs(d,a).each(g=>Ue(d,i,g)),Ue(d,a,-1)):($o(d,a),Xs(d,i).each(g=>{Ue(d,a,g),$o(d,i)}))})},n6=(t,s,a,i)=>{const d=s.element;if(N9(t,a),a)yu.block(s,B9(i)),gn(d,"display"),$o(d,"aria-hidden"),t.hasFocus()&&t6(s);else{const g=an.getCurrent(s).exists(h=>_h(h.element));yu.unblock(s),It(d,"display","none"),Ue(d,"aria-hidden","true"),g&&t.focus()}},P9=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Oe([Bt.config({}),yu.config({focus:!1}),an.config({find:s=>ya(s.components())})]),components:[]}),$9=t=>t.type==="focusin",I9=t=>$9(t)?(t.composed?ya(t.composedPath()):_.from(t.target)).map(ne.fromDom).filter(jn).exists(a=>Ra(a,"mce-pastebin")):!1,MG=(t,s,a)=>{const i=pt(!1),d=Vn(),g=C=>{i.get()&&!I9(C)&&(C.preventDefault(),t6(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),n6(t,s(),C,a.providers),K7(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Zn(C.time)){const w=C2.setEditorTimeout(t,()=>h(C.state),C.time);d.set(w)}else h(C.state),d.clear()})},BG=(t,s)=>bo(t,(d,g)=>s(g,d.len).fold(q(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,_T=(t,s,a)=>({within:t,extra:s,withinWidth:a}),gR=(t,s,a)=>{const i=BG(t,(C,w)=>{const E=a(C);return _.some({element:C,start:w,finish:w+E,width:E})}),d=lo(i,C=>C.finish<=s),g=ps(d,(C,w)=>C+w.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},kT=t=>xe(t,s=>s.element),F9=(t,s,a)=>{const i=kT(t.concat(s));return _T(i,[],a)},li=(t,s,a,i)=>{const d=kT(t).concat([a]);return _T(d,kT(s),i)},L9=(t,s,a)=>_T(kT(t),[],a),o6=(t,s,a)=>{const i=gR(s,t,a);return i.extra.length===0?_.some(i):_.none()},s6=(t,s,a,i)=>{const d=o6(t,s,a).getOrThunk(()=>gR(s,t-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?F9(g,h,C):h.length>=1?li(g,h,i,C):L9(g,h,C)},r6=(t,s)=>{const a=xe(s,i=>Mr(i));Nl.setGroups(t,a)},xC=t=>Ys(t,s=>Kr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),a6=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Jr(t,s,"primary"),g=Ko.getCoupled(t,"overflowGroup");It(d.element,"visibility","hidden");const h=i.concat([g]),C=xC(h);a([]),r6(d,h);const w=la(d.element),E=s6(w,s.builtGroups.get(),T=>Math.ceil(T.element.dom.getBoundingClientRect().width),g);E.extra.length===0?(Bt.remove(d,g),a([])):(r6(d,E.within),a(E.extra)),gn(d.element,"visibility"),Vl(d.element),C.each(Ot.focus)},EC=q([Ns("splitToolbarBehaviours",[Ko]),bn("builtGroups",()=>pt([]))]),H9=q([hl(["overflowToggledClass"]),al("getOverflowBounds"),be("lazySink"),bn("overflowGroups",()=>pt([])),rn("onOpened"),rn("onClosed")].concat(EC())),OT=q([or({factory:Nl,schema:O0(),name:"primary"}),kc({schema:O0(),name:"overflow"}),kc({name:"overflow-button"}),kc({name:"overflow-group"})]),hR=q((t,s)=>{af(t,Math.floor(s))}),z9=q([hl(["toggledClass"]),be("lazySink"),qa("fetch"),al("getBounds"),ao("fireDismissalEventInstead",[te("event",zu())]),rd(),rn("onToggled")]),Xi=q([kc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Oe([Gt.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),kc({factory:Nl,schema:O0(),name:"toolbar",overrides:t=>({toolbarBehaviours:Oe([ct.config({mode:"cyclic",onEscape:s=>(ke(s,t,"button").each(Ot.focus),_.none())})])})})]),AT=Vn(),RT=(t,s)=>{AT.set(!0),DT(t,s),AT.clear()},DT=(t,s)=>{const a=Ko.getCoupled(t,"toolbarSandbox");ln.isOpen(a)?ln.close(a):ln.open(a,s.toolbar())},MT=(t,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();Gs.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:hR()}}},d)},c6=(t,s,a,i,d)=>{Nl.setGroups(s,d),MT(t,s,a,i),Gt.on(t)},i6=(t,s,a)=>{const i=q1(),d=(h,C)=>{const w=AT.get().getOr(!1);a.fetch().get(E=>{c6(t,C,a,s.layouts,E),i.link(t.element),w||ct.focusIn(C)})},g=()=>{Gt.off(t),AT.get().getOr(!1)||Ot.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Oe([ct.config({mode:"special",onEscape:h=>(ln.close(h),_.some(!0))}),ln.config({onOpen:d,onClose:g,isPartOf:(h,C,w)=>Xu(C,w)||Xu(t,w),getAttachPoint:()=>a.lazySink(t).getOrDie()}),fa.config({channels:{...ru({isExtraPart:$n,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...kb({doReposition:()=>{ln.getState(Ko.getCoupled(t,"toolbarSandbox")).each(h=>{MT(t,h,a,s.layouts)})}})}})])}},Tg=Pr({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...vr.sketch({...i.button(),action:d=>{DT(d,i)},buttonBehaviours:_c.augment({dump:i.button().buttonBehaviours},[Ko.config({others:{toolbarSandbox:d=>i6(d,a,t)}})])}),apis:{setGroups:(d,g)=>{ln.getState(Ko.getCoupled(d,"toolbarSandbox")).each(h=>{c6(d,h,t,a.layouts,g)})},reposition:d=>{ln.getState(Ko.getCoupled(d,"toolbarSandbox")).each(g=>{MT(d,g,t,a.layouts)})},toggle:d=>{DT(d,i)},toggleWithoutFocusing:d=>{RT(d,i)},getToolbar:d=>ln.getState(Ko.getCoupled(d,"toolbarSandbox")),isOpen:d=>ln.isOpen(Ko.getCoupled(d,"toolbarSandbox"))}}),configFields:z9(),partFields:Xi(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),V9=q([be("items"),hl(["itemSelector"]),Ns("tgroupBehaviours",[ct])]),U9=q([Fb({name:"items",unit:"item"})]),W9=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ps(t.tgroupBehaviours,[ct.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),BT=Pr({name:"ToolbarGroup",configFields:V9(),partFields:U9(),factory:W9}),l6=t=>xe(t,s=>Mr(s)),pR=(t,s,a)=>{a6(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{Tg.setGroups(d,l6(i))})})},u6=(t,s,a,i)=>{const d=Tn(Tg.sketch({fetch:()=>$r.nu(g=>{g(l6(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ss,ms],onRtl:()=>[ms,ss],onBottomLtr:()=>[Mn,fs],onBottomRtl:()=>[fs,Mn]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ps(t.splitToolbarBehaviours,[Ko.config({others:{overflowGroup:()=>BT.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(xe(h,g.getSystem().build)),pR(g,d,t)},refresh:g=>pR(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Tg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Tg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Tg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Tg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Tg.getToolbar)},domModification:{attributes:{role:"group"}}}},bR=Pr({name:"SplitFloatingToolbar",configFields:H9(),partFields:OT(),factory:u6,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),Z9=q([hl(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),rn("onOpened"),rn("onClosed")].concat(EC())),j9=q([or({factory:Nl,schema:O0(),name:"primary"}),or({factory:Nl,schema:O0(),name:"overflow",overrides:t=>({toolbarBehaviours:Oe([rc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{ke(s,t,"overflow-button").each(a=>{Gt.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{ke(s,t,"overflow-button").each(Gt.on)}}),ct.config({mode:"acyclic",onEscape:s=>(ke(s,t,"overflow-button").each(Ot.focus),_.some(!0))})])})}),kc({name:"overflow-button",overrides:t=>({buttonBehaviours:Oe([Gt.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),kc({name:"overflow-group"})]),d6=(t,s)=>ke(t,s,"overflow").map(rc.hasGrown).getOr(!1),NT=(t,s,a)=>{ke(t,s,"overflow-button").each(i=>{ke(t,s,"overflow").each(d=>{if(PT(t,s),rc.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||ct.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||Ot.focus(i),g(h),s.onClosed=g}}rc.toggleGrow(d)})})},PT=(t,s)=>{ke(t,s,"overflow").each(a=>{a6(t,s,i=>{const d=xe(i,g=>Mr(g));Nl.setGroups(a,d)}),ke(t,s,"overflow-button").each(i=>{rc.hasGrown(a)&&Gt.on(i)}),rc.refresh(a)})},G9=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const w=xe(C,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ps(t.splitToolbarBehaviours,[Ko.config({others:{overflowGroup:h=>BT.sketch({...i["overflow-group"](),items:[vr.sketch({...i["overflow-button"](),action:C=>{Zt(h,d)}})]})}}),zt("toolbar-toggle-events",[ve(d,h=>{NT(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),PT(h,t)},refresh:h=>PT(h,t),toggle:h=>{NT(h,t,!1)},toggleWithoutFocusing:h=>{NT(h,t,!0)},isOpen:h=>d6(h,t)},domModification:{attributes:{role:"group"}}}},vR=Pr({name:"SplitSlidingToolbar",configFields:Z9(),partFields:j9(),factory:G9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),m6=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[BT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Oe([Yn.config({}),Ot.config({})])}},TC=t=>BT.sketch(m6(t)),f6=(t,s)=>{const a=Jn(i=>{const d=xe(t.initGroups,TC);Nl.setGroups(i,d)});return Oe([Al.toolbarButton(t.providers.isDisabled),Es(),ct.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),zt("toolbar-events",[a])])},g6=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":m6({title:_.none(),items:[]}),"overflow-button":g$({name:"more",icon:_.some("more-drawer"),enabled:!0,tooltip:_.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:_.none(),borderless:!1},_.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:f6(t,s)}},q9=t=>{const s=g6(t),a=4,i=bR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return bR.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=jc(d),h=Zp(d),C=jc(h),w=Math.max(h.dom.scrollHeight,C.height);return ko(g.x+a,C.y,g.width-a*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},K9=t=>{const s=vR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=vR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=g6(t);return vR.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([eR()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([eR()],{type:"closed"}),t.onToggled(d,!1)}})},$T=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Nl.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Rc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Nl.parts.groups({})],toolbarBehaviours:f6(t,s)})},h6=[bg,Wi,Ss("tooltip"),Yc("buttonType","secondary",["primary","secondary"]),Jo("borderless",!1),qa("onAction")],Y9=[...h6,Hm,Or("type",["button"])],X9=[...h6,Jo("active",!1),Or("type",["togglebutton"])],p6={button:Y9,togglebutton:X9},J9=[Or("type",["group"]),Xc("buttons",[],As("type",p6))],b6=As("type",{...p6,group:J9}),Q9=_t([Xc("buttons",[],b6),qa("onShow"),qa("onHide")]),eU=t=>Oo("view",Q9,t),yR=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(J=>jm(J,s.icons)).map(Tn),C=(()=>J=>{const ye=He=>{g.map(pe=>pe.getOpt(J).each(rt=>{Bt.set(rt,[jm(He,s.icons)])}))},ce=He=>{const pe=J.element;He?(qn(pe,"tox-button--enabled"),Ue(pe,"aria-pressed",!0)):(Ao(pe,"tox-button--enabled"),$o(pe,"aria-pressed"))},Ae=()=>Ra(J.element,"tox-button--enabled");if(d)return t.onAction({setIcon:ye,setActive:ce,isActive:Ae});if(t.type==="button")return t.onAction({setIcon:ye})})(),w={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:_.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},E=cT((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),T=d?t.text.map(s.translate):_.some(s.translate(t.text)),R=T.map(Ho),B=w.tooltip.or(T).map(J=>({"aria-label":s.translate(J)})).getOr({}),P=g.map(J=>J.asSpec()),F=up([P,R]),U=t.icon.isSome()&&R.isSome(),oe={tag:"button",classes:E.concat(...t.icon.isSome()&&!U?["tox-button--icon"]:[]).concat(...U?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:B},W=[],ee=aT(w,_.some(C),W,oe,F,t.tooltip,s);return vr.sketch(ee)},v6=(t,s)=>yR(t,s),IT=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:xe(t.buttons,a=>v6(a,s))}),y6=Ga().deviceType,C6=y6.isPhone(),tU=y6.isTablet(),nU=t=>{let s=!1;const a=xe(t.buttons,i=>i.type==="group"?(s=!0,IT(i,t.providers)):v6(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...C6||tU?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Oe([Ot.config({}),ct.config({mode:"flow",selector:"button, .tox-button",focusInside:Bm.OnEnterOrSpaceMode})]),components:s?a:[gu.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),gu.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},PG=t=>({uid:t.uid,behaviours:Oe([Ot.config({}),Yn.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),oU=(t,s,a,i)=>{const d={getPane:g=>rr.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Oe([Ot.config({}),ct.config({mode:"cyclic",focusInside:Bm.OnEnterOrSpaceMode})]),apis:d}};var R0=Pr({name:"silver.View",configFields:[be("viewConfig")],partFields:[nc({factory:{sketch:nU},schema:[be("buttons"),be("providers")],name:"header"}),nc({factory:{sketch:PG},schema:[],name:"pane"})],factory:oU,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const CR=(t,s,a)=>$g(s,(i,d)=>{const g=_e(eU(i));return t.slot(d,R0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[R0.parts.header({buttons:g.buttons,providers:a})]:[],R0.parts.pane({})]}))}),sU=(t,s)=>ar.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:CR(a,t,s),slotBehaviours:s0.unnamedEvents([Jn(i=>ar.hideAllSlots(i))])})),_C=t=>$t(ar.getSlotNames(t),s=>ar.isShowing(t,s)),w6=t=>{const s=t.element;It(s,"display","none"),Ue(s,"aria-hidden","true")},S6=t=>{const s=t.element;gn(s,"display"),$o(s,"aria-hidden")},wR=t=>({getContainer:q(t)}),x6=(t,s,a)=>{ar.getSlot(t,s).each(i=>{R0.getPane(i).each(d=>{a(i)(wR(d.element.dom))})})},E6=(t,s)=>x6(t,s,R0.getOnShow),D0=(t,s)=>x6(t,s,R0.getOnHide);var FT=ga({factory:(t,s)=>{const g={setViews:(h,C)=>{Bt.set(h,[sU(C,s.backstage.shared.providers)])},whichView:h=>an.getCurrent(h).bind(_C),toggleView:(h,C,w,E)=>an.getCurrent(h).exists(T=>{const R=_C(T),B=R.exists(F=>E===F),P=ar.getSlot(T,E).isSome();return P&&(ar.hideAllSlots(T),B?(w6(h),C()):(w(),S6(h),ar.showSlot(T,E),E6(T,E)),R.each(F=>D0(T,F))),P})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Oe([Bt.config({}),an.config({find:h=>{const C=Bt.contents(h);return ya(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[be("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const aU=(t,s,a)=>{let i=!1;const d=h=>{qr(h,".tox-statusbar").each(C=>{Zo(C,"display")==="none"&&To(C,"aria-hidden")==="true"?(gn(C,"display"),$o(C,"aria-hidden")):(It(C,"display","none"),Ue(C,"aria-hidden","true"))})},g={getSocket:h=>rr.getPart(h,t,"socket"),setSidebar:(h,C,w)=>{rr.getPart(h,t,"sidebar").each(E=>uR(E,C,w))},toggleSidebar:(h,C)=>{rr.getPart(h,t,"sidebar").each(w=>dR(w,C))},whichSidebar:h=>rr.getPart(h,t,"sidebar").bind(O9).getOrNull(),getHeader:h=>rr.getPart(h,t,"header"),getToolbar:h=>rr.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{rr.getPart(h,t,"toolbar").each(w=>{const E=xe(C,TC);w.getApis().setGroups(w,E)})},setToolbars:(h,C)=>{rr.getPart(h,t,"multiple-toolbar").each(w=>{const E=xe(C,T=>xe(T,TC));j$.setItems(w,E)})},refreshToolbar:h=>{rr.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{rr.getPart(h,t,"toolbar").each(C=>{uo(C.getApis().toggle,w=>w(C))})},toggleToolbarDrawerWithoutFocusing:h=>{rr.getPart(h,t,"toolbar").each(C=>{uo(C.getApis().toggleWithoutFocusing,w=>w(C))})},isToolbarDrawerToggled:h=>rr.getPart(h,t,"toolbar").bind(C=>_.from(C.getApis().isOpen).map(w=>w(C))).getOr(!1),getThrobber:h=>rr.getPart(h,t,"throbber"),focusToolbar:h=>{rr.getPart(h,t,"toolbar").orThunk(()=>rr.getPart(h,t,"multiple-toolbar")).each(w=>{ct.focusIn(w)})},setMenubar:(h,C)=>{rr.getPart(h,t,"menubar").each(w=>{rR.setMenus(w,C)})},focusMenubar:h=>{rr.getPart(h,t,"menubar").each(C=>{rR.focus(C)})},setViews:(h,C)=>{rr.getPart(h,t,"viewWrapper").each(w=>{FT.setViews(w,C)})},toggleView:(h,C)=>rr.getPart(h,t,"viewWrapper").exists(w=>FT.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>rr.getPart(h,t,"viewWrapper").bind(FT.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),rr.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),It(w,"display","none"),Ue(w,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),rr.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),gn(w,"display"),$o(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},cU=kd.optional({factory:rR,name:"menubar",schema:[be("backstage")]}),SR=t=>t.type===Rc.sliding?K9:t.type===Rc.floating?q9:$T,iU=kd.optional({factory:{sketch:t=>j$.sketch({uid:t.uid,dom:t.dom,listBehaviours:Oe([ct.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>$T({type:t.type,uid:qe("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),_.some(!0))}),setupItem:(s,a,i,d)=>{Nl.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[be("dom"),be("onEscape")]}),lU=kd.optional({factory:{sketch:t=>{const s=SR(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),_.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[be("dom"),be("onEscape"),be("getSink")]}),T6=kd.optional({factory:{sketch:wC},name:"header",schema:[be("dom")]}),_6=kd.optional({factory:{sketch:S9},name:"promotion",schema:[be("dom")]}),LT=kd.optional({name:"socket",schema:[be("dom")]}),xR=kd.optional({factory:{sketch:A9},name:"sidebar",schema:[be("dom")]}),uU=kd.optional({factory:{sketch:P9},name:"throbber",schema:[be("dom")]}),dU=kd.optional({factory:FT,name:"viewWrapper",schema:[be("backstage")]}),k6=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),mU=kd.optional({factory:{sketch:k6},name:"editorContainer",schema:[]});var Xn=Pr({name:"OuterContainer",factory:aU,configFields:[be("dom"),be("behaviours")],partFields:[T6,cU,lU,iU,LT,xR,_6,uU,dU,mU],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const fU="file edit view insert format tools table help",ER={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},gU=(t,s,a)=>{const i=o3(a).split(/[ ,]/);return{text:t.title,getItems:()=>fe(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:va(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},TR=t=>t.split(" "),HT=(t,s)=>{const a={...ER,...s.menus},i=No(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?TR(fU):TR(s.menubar===!1?"":s.menubar),g=lo(d,C=>{const w=_n(ER,C);return i?w||Xe(s.menus,C).exists(E=>_n(E,"items")):w}),h=xe(g,C=>{const w=a[C];return gU({title:w.title,items:TR(w.items)},s,t)});return lo(h,C=>{const w=E=>Yt(E)||E.type!=="separator";return C.getItems().length>0&&va(C.getItems(),w)})},hU=t=>{const s=()=>{t._skinLoaded=!0,j7(t)};return()=>{t.initialized?s():t.on("init",s)}},pU=(t,s)=>()=>G7(t,{message:s}),_R=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),kR=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),O6=async(t,s)=>{const i="ui/"+Ix(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(Yt(d))kR(t,i,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return _R(t,h,t.ui.styleSheetLoader)}},bU=async(t,s)=>{if(N_(ne.fromDom(t.getElement()))){const d="ui/"+Ix(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(Yt(g))kR(t,d,g,ep.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,C=s+`/skin.shadowdom${h}.css`;return _R(t,C,ep.DOM.styleSheetLoader)}}},A6=async(t,s)=>{const a=()=>{const d=d3(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};Ix(s).fold(a,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);Yt(h)?kR(s,g,h,s.ui.styleSheetLoader):a()});const i=d3(s);if(!u3(s)&&Yt(i))return Promise.all([O6(s,i),bU(s,i)]).then()},R6=(t,s)=>A6(t,s).then(hU(s),pU(s,"Skin could not be loaded")),vU=Dt(R6,!1),yU=Dt(R6,!0),Op=(t,s,a)=>Mo(a)?t.translate(s):t.translate([s,t.translate(a)]),CU=(t,s)=>{const a=(h,C,w,E)=>{const T=t.shared.providers.translate(h.title);if(h.type==="separator")return _.some({type:"separator",text:T});if(h.type==="submenu"){const R=fe(h.getStyleItems(),B=>i(B,C,E));return C===0&&R.length<=0?_.none():_.some({type:"nestedmenuitem",text:T,enabled:R.length>0,getSubmenuItems:()=>fe(h.getStyleItems(),B=>i(B,C,E))})}else return _.some({type:"togglemenuitem",text:T,icon:h.icon,active:h.isSelected(E),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),R=>({meta:{style:R}}))})},i=(h,C,w)=>{const E=h.type==="formatter"&&s.isInvalid(h);return C===0?E?[]:a(h,C,!1,w).toArray():a(h,C,E,w).toArray()},d=h=>{const C=s.getCurrentValue(),w=s.shouldHide?0:1;return fe(h,E=>i(E,w,C))};return{validateItems:d,getFetch:(h,C)=>(w,E)=>{const T=C(),R=d(T),B=x0(R,Tl.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:_.none()});E(B)}}},M0=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>xe(a.data,d=>bC(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:CU(t,s),getStyleItems:i}},kC=(t,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=M0(s,a),w=pt(a.tooltip),E=R=>({getComponent:q(R),setTooltip:B=>{const P=s.shared.providers.translate(B);Ue(R.element,"aria-label",P),w.set(B)}}),T=R=>{const B=P=>R.setTooltip(Op(t,i(P.value),P.value));return t.on(d,B),c0(fp(t,"NodeChange",P=>{const F=P.getComponent();a.updateText(F),Tt.set(P.getComponent(),!t.selection.isEditable())})(R),()=>t.off(d,B))};return gA({text:a.icon.isSome()?_.none():a.text,icon:a.icon,ariaLabel:_.some(a.tooltip),tooltip:_.none(),role:_.none(),fetch:h.getFetch(s,C),onSetup:T,getApi:E,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[sr.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:R=>{if(a.tooltip!==w.get()){const B=s.shared.providers.translate(w.get());sr.setComponents(R,s.shared.providers.tooltips.getComponents({tooltipText:B}))}}})})]},"tox-tbtn",s.shared,g)},OR=t=>xe(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),AR=t=>({type:"basic",data:t});var B0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(B0||(B0={}));const wU=(t,s)=>s===B0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),RR=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:OR(wU(i,a))}},SU="Align",D6=q("Alignment {0}"),M6="left",DR=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],B6=t=>{const s=()=>$t(DR,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),i=C=>_.none,d=C=>{const E=s().fold(q(M6),T=>T.title.toLowerCase());ft(C,xg,{icon:`align-${E}`}),Q7(t,{value:E})},g=AR(DR),h=C=>()=>$t(DR,w=>w.format===C.format).each(w=>t.execCommand(w.command));return{tooltip:Op(t,D6(),M6),text:_.none(),icon:_.some("align-left"),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},xU=(t,s)=>kC(t,s,B6(t),D6,"AlignTextUpdate","align"),N6=(t,s)=>{const a=M0(s,B6(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(SU),onSetup:pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},OC=(t,s)=>{const a=s(),i=xe(a,d=>d.format);return _.from(t.formatter.closest(i)).bind(d=>$t(a,g=>g.format===d))},MR="Blocks",BR=q("Block {0}"),Ad="Paragraph",NR=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?_.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):_.none()},i=g=>{const C=OC(t,()=>d.data).fold(q(Ad),w=>w.title);ft(g,ii,{text:C}),zB(t,{value:C})},d=RR(t,"block_formats",B0.SemiColon);return{tooltip:Op(t,BR(),Ad),text:_.some(Ad),icon:_.none(),isSelectedFor:s,getCurrentValue:_.none,getPreviewFor:a,onAction:VB(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},EU=(t,s)=>kC(t,s,NR(t),BR,"BlocksTextUpdate","blocks"),TU=(t,s)=>{const a=M0(s,NR(t));t.ui.registry.addNestedMenuItem("blocks",{text:MR,onSetup:pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_U="Fonts",P6=q("Font {0}"),PR="System Font",kU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],$6=t=>{const s=t.split(/\s*,\s*/);return xe(s,a=>a.replace(/^['"]+|['"]+$/g,""))},$R=(t,s)=>s.length>0&&Tu(s,a=>t.indexOf(a.toLowerCase())>-1),OU=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=$6(t.toLowerCase());return $R(a,kU)||$R(a,s)}else return!1},I6=t=>{const s=()=>{const w=F=>F?$6(F)[0]:"",E=t.queryCommandValue("FontName"),T=C.data,R=E?E.toLowerCase():"",B=x5(t);return{matchOpt:$t(T,F=>{const U=F.format;return U.toLowerCase()===R||w(U).toLowerCase()===w(R).toLowerCase()}).orThunk(()=>Rt(OU(R,B),{title:PR,format:R})),font:E}},a=w=>E=>E.exists(T=>T.format===w),i=()=>{const{matchOpt:w}=s();return w},d=w=>()=>_.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:E,font:T}=s(),R=E.fold(q(T),B=>B.title);ft(w,ii,{text:R}),eL(t,{value:R})},C=RR(t,"font_family_formats",B0.SemiColon);return{tooltip:Op(t,P6(),PR),text:_.some(PR),icon:_.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:$n}},IR=(t,s)=>kC(t,s,I6(t),P6,"FontFamilyTextUpdate","fontfamily"),AU=(t,s)=>{const a=M0(s,I6(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(_U),onSetup:pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},RU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},DU=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),MU=(t,s)=>va(s,a=>va(RU[a],i=>t===i)),zT=(t,s)=>_.from(DU.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return MU(g,s)?_.some({value:d,unit:g}):_.none()}),BU=(t,s)=>zT(t,s).map(({value:a,unit:i})=>a+i),FR={tab:q(9),escape:q(27),enter:q(13),backspace:q(8),delete:q(46),left:q(37),up:q(38),right:q(39),down:q(40),space:q(32),home:q(36),end:q(35),pageUp:q(33),pageDown:q(34)},F6=(t,s,a,i)=>{let d=_.none();const g=J=>J.map(ye=>Ke.getValue(ye)).getOr(""),h=fp(t,"NodeChange SwitchMode",J=>{const ye=J.getComponent();d=_.some(ye),a.updateInputValue(ye),Tt.set(ye,!t.selection.isEditable())}),C=J=>({getComponent:q(J)}),w=pt(Z),E=qe("custom-number-input-events"),T=(J,ye,ce)=>{const Ae=g(d),He=a.getNewValue(Ae,J),pe=Ae.length-`${He}`.length,rt=d.map(yt=>yt.element.dom.selectionStart-pe),Je=d.map(yt=>yt.element.dom.selectionEnd-pe);a.onAction(He,ce),d.each(yt=>{Ke.setValue(yt,He),ye&&(rt.each(dt=>yt.element.dom.selectionStart=dt),Je.each(dt=>yt.element.dom.selectionEnd=dt))})},R=(J,ye)=>T((ce,Ae)=>ce-Ae,J,ye),B=(J,ye)=>T((ce,Ae)=>ce+Ae,J,ye),P=J=>vi(J.element).fold(_.none,ye=>(Ya(ye),_.some(!0))),F=J=>_h(J.element)?(jp(J.element).each(ye=>Ya(ye)),_.some(!0)):_.none(),U=(J,ye,ce,Ae)=>{const He=pt(Z),pe=s.shared.providers.translate(ce),rt=qe("altExecuting"),Je=fp(t,"NodeChange SwitchMode",dt=>{Tt.set(dt.getComponent(),!t.selection.isEditable())}),yt=dt=>{Tt.isDisabled(dt)||J(!0)};return vr.sketch({dom:{tag:"button",attributes:{"aria-label":pe,"data-mce-name":ye},classes:Ae.concat(ye)},components:[tT(ye,s.shared.providers.icons)],buttonBehaviours:Oe([Tt.config({}),sr.config(s.shared.providers.tooltips.getConfig({tooltipText:pe})),zt(rt,[zm({onSetup:Je,getApi:C},He),ta({getApi:C},He),ve(Qc(),(dt,fn)=>{(fn.event.raw.keyCode===FR.space()||fn.event.raw.keyCode===FR.enter())&&(Tt.isDisabled(dt)||J(!1))}),ve(em(),yt),ve(Lu(),yt)])]),eventOrder:{[Qc()]:[rt,"keying"],[em()]:[rt,"alloy.base.behaviour"],[Lu()]:[rt,"alloy.base.behaviour"],[Zr()]:["alloy.base.behaviour",rt,"tooltipping"],[Sc()]:[rt,"tooltipping"]}})},oe=Tn(U(J=>R(!1,J),"minus","Decrease font size",[])),W=Tn(U(J=>B(!1,J),"plus","Increase font size",[])),ee=Tn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[ap.sketch({inputBehaviours:Oe([Tt.config({}),zt(E,[zm({onSetup:h,getApi:C},w),ta({getApi:C},w)]),zt("input-update-display-text",[ve(ii,(J,ye)=>{Ke.setValue(J,ye.event.text)}),ve(ll(),J=>{a.onAction(Ke.getValue(J))}),ve(Ef(),J=>{a.onAction(Ke.getValue(J))})]),ct.config({mode:"special",onEnter:J=>(T(gt,!0,!0),_.some(!0)),onEscape:P,onUp:J=>(B(!0,!1),_.some(!0)),onDown:J=>(R(!0,!1),_.some(!0)),onLeft:(J,ye)=>(ye.cut(),_.none()),onRight:(J,ye)=>(ye.cut(),_.none())})])})],behaviours:Oe([Ot.config({}),ct.config({mode:"special",onEnter:F,onSpace:F,onEscape:P}),zt("input-wrapper-events",[ve(il(),J=>{Qe([oe,W],ye=>{const ce=ne.fromDom(ye.get(J).element.dom);_h(ce)&&Th(ce)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...St(i)?{"data-mce-name":i}:{}}},components:[oe.asSpec(),ee.asSpec(),W.asSpec()],behaviours:Oe([Ot.config({}),ct.config({mode:"flow",focusInside:Bm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:J=>_h(J.element)?_.none():(Ya(J.element),_.some(!0))})])}},L6="Font sizes",H6=q("Font size {0}"),LR="12pt",NU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},PU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},$U=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},z6=(t,s)=>/[0-9.]+px$/.test(t)?$U(parseInt(t,10)*72/96,s||0)+"pt":Xe(PU,t).getOr(t),IU=t=>Xe(NU,t).getOr(""),HR=t=>{const s=()=>{let w=_.none();const E=C.data,T=t.queryCommandValue("FontSize");if(T)for(let R=3;w.isNone()&&R>=0;R--){const B=z6(T,R),P=IU(B);w=$t(E,F=>F.format===T||F.format===B||F.format===P)}return{matchOpt:w,size:T}},a=w=>E=>E.exists(T=>T.format===w),i=()=>{const{matchOpt:w}=s();return w},d=q(_.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:E,size:T}=s(),R=E.fold(q(T),B=>B.title);ft(w,ii,{text:R}),gO(t,{value:R})},C=RR(t,"font_size_formats",B0.Space);return{tooltip:Op(t,H6(),LR),text:_.some(LR),icon:_.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:$n}},FU=(t,s)=>kC(t,s,HR(t),H6,"FontSizeTextUpdate","fontsize"),LU=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},HU=16,zU=t=>t>=0,VU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>ft(i,ii,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{zT(i,["unsupportedLength","empty"]);const g=s(),h=zT(i,["unsupportedLength","empty"]).or(zT(g,["unsupportedLength","empty"])),C=h.map(B=>B.value).getOr(HU),w=a3(t),E=h.map(B=>B.unit).filter(B=>B!=="").getOr(w),T=d(C,LU(E).step),R=`${zU(T)?T:C}${E}`;return R!==g&&HB(t,{value:R}),R}}},UU=(t,s)=>F6(t,s,VU(t),"fontsizeinput"),WU=(t,s)=>{const a=M0(s,HR(t));t.ui.registry.addNestedMenuItem("fontsize",{text:L6,onSetup:pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},V6="Formats",U6=t=>Mo(t)?"Formats":"Format {0}",W6=(t,s)=>{const a="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?_.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):_.none()},g=h=>{const C=R=>R$(R)?fe(R.items,C):D$(R)?[{title:R.title,format:R.format}]:[],w=fe(UA(t),C),T=OC(t,q(w)).fold(q({title:a,tooltipLabel:""}),R=>({title:R.title,tooltipLabel:R.title}));ft(h,ii,{text:T.title}),J7(t,{value:T.tooltipLabel})};return{tooltip:Op(t,U6(""),""),text:_.some(a),icon:_.none(),isSelectedFor:i,getCurrentValue:_.none,getPreviewFor:d,onAction:VB(t),updateText:g,shouldHide:d5(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},ZU=(t,s)=>{const a={type:"advanced",...s.styles};return kC(t,s,W6(t,a),U6,"StylesTextUpdate","styles")},jU=(t,s)=>{const a={type:"advanced",...s.styles},i=M0(s,W6(t,a));t.ui.registry.addNestedMenuItem("styles",{text:V6,onSetup:pa(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},GU=q([be("toggleClass"),be("fetch"),xc("onExecute"),te("getHotspot",_.some),te("getAnchorOverrides",q({})),rd(),xc("onItemExecute"),hn("lazySink"),be("dom"),rn("onOpen"),Ns("splitDropdownBehaviours",[Ko,ct,Ot]),te("matchWidth",!1),te("useMinWidth",!1),te("eventOrder",{}),hn("role"),hn("listRole")].concat(AE())),qU=or({factory:vr,schema:[be("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Oe([Ot.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Uu)},buttonBehaviours:Oe([Gt.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),KU=or({factory:vr,schema:[be("dom")],name:"button",defaults:()=>({buttonBehaviours:Oe([Ot.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),Z6=q([qU,KU,nc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[be("text")],name:"aria-descriptor"}),kc({schema:[fm()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),fN()]),YU=(t,s,a,i)=>{const d=T=>{an.getCurrent(T).each(R=>{ze.highlightFirst(R),ct.focusIn(R)})},g=T=>{EO(t,gt,T,i,d,ha.HighlightMenuAndItem).get(Z)},h=T=>(g(T),_.some(!0)),C=T=>{const R=Jr(T,t,"button");return Uu(R),_.some(!0)},w={...Gn([Jn((T,R)=>{ke(T,t,"aria-descriptor").each(P=>{const F=qe("aria");Ue(P.element,"id",F),Ue(T.element,"aria-describedby",F)})})]),...Tx(_.some(g))},E={repositionMenus:T=>{Gt.isOn(T)&&kO(T)}};return{uid:t.uid,dom:t.dom,components:s,apis:E,eventOrder:{...t.eventOrder,[wc()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:Ps(t.splitDropdownBehaviours,[Ko.config({others:{sandbox:T=>{const R=Jr(T,t,"arrow");return _O(t,T,{onOpen:()=>{Gt.on(R),Gt.on(T)},onClose:()=>{Gt.off(R),Gt.off(T)}})}}}),ct.config({mode:"special",onSpace:C,onEnter:C,onDown:h}),Ot.config({}),Gt.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},VT=Pr({name:"SplitDropdown",configFields:GU(),partFields:Z6(),factory:YU,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),zR=t=>({isEnabled:()=>!Tt.isDisabled(t),setEnabled:s=>Tt.set(t,!s),setText:s=>ft(t,ii,{text:s}),setIcon:s=>ft(t,xg,{icon:s})}),XU=t=>({setActive:s=>{Gt.set(t,s)},isActive:()=>Gt.isOn(t),isEnabled:()=>!Tt.isDisabled(t),setEnabled:s=>Tt.set(t,!s),setText:s=>ft(t,ii,{text:s}),setIcon:s=>ft(t,xg,{icon:s})}),VR=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),UR=qe("focus-button"),WR=(t,s,a,i,d,g)=>{const h=s.map(w=>Tn(IP(w,"tox-tbtn",d))),C=t.map(w=>Tn(jm(w,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...VR(a,d),...St(g)?{"data-mce-name":g}:{}}},components:up([C.map(w=>w.asSpec()),h.map(w=>w.asSpec())]),eventOrder:{[ka()]:["focusing","alloy.base.behaviour",Zm],[Zr()]:[Zm,"toolbar-group-button-events"]},buttonBehaviours:Oe([Al.toolbarButton(d.isDisabled),Es(),zt(Zm,[Jn((w,E)=>fA(w)),ve(ii,(w,E)=>{h.bind(T=>T.getOpt(w)).each(T=>{Bt.set(T,[Ho(d.translate(E.event.text))])})}),ve(xg,(w,E)=>{C.bind(T=>T.getOpt(w)).each(T=>{Bt.set(T,[jm(E.event.icon,d.icons)])})}),ve(ka(),(w,E)=>{E.event.prevent(),Zt(w,UR)})])].concat(i.getOr([])))}},JU=(t,s,a,i,d)=>{const g=s.shared,h=pt(Z),C={toolbarButtonBehaviours:[],getApi:zR,onSetup:t.onSetup},w=[zt("toolbar-group-button-events",[zm(C,h),ta(C,h)])];return Tg.sketch({lazySink:g.getSink,fetch:()=>$r.nu(E=>{E(xe(a(t.items),TC))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:WR(t.icon,t.text,t.tooltip,_.some(w),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},j6=(t,s,a,i)=>{var d;const g=pt(Z),h=WR(t.icon,t.text,t.tooltip,_.none(),a,i);return vr.sketch({dom:h.dom,components:h.components,eventOrder:mA,buttonBehaviours:{...Oe([zt("toolbar-button-events",[Ez({onAction:t.onAction,getApi:s.getApi}),zm(s,g),ta(s,g)]),...t.tooltip.map(C=>sr.config(a.tooltips.getConfig({tooltipText:a.translate(C)+t.shortcut.map(w=>` (${pE(w)})`).getOr("")}))).toArray(),Al.toolbarButton(()=>!t.enabled||a.isDisabled()),Es()].concat(s.toolbarButtonBehaviours)),[Zm]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Zm]}})},N0=(t,s,a)=>G6(t,s,[],a),G6=(t,s,a,i)=>j6(t,{toolbarButtonBehaviours:a.length>0?[zt("toolbarButtonWith",a)]:[],getApi:zR,onSetup:t.onSetup},s,i),QU=(t,s,a)=>q6(t,s,[],a),q6=(t,s,a,i)=>j6(t,{toolbarButtonBehaviours:[Bt.config({}),Gt.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[zt("toolbarToggleButtonWith",a)]:[]),getApi:XU,onSetup:t.onSetup},s,i),eW=(t,s,a)=>i=>$r.nu(d=>s.fetch(d)).map(d=>_.from(u0(Fo(CO(qe("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Tl.CLOSE_ON_EXECUTE,s.select.getOr($n),a),{movement:kE(s.columns,s.presets),menuBehaviours:s0.unnamedEvents(s.columns!=="auto"?[]:[Jn((g,h)=>{fE(g,4,L3(s.presets)).each(({numRows:C,numColumns:w})=>{ct.setGridSize(g,C,w)})})])})))),tW=(t,s,a)=>{const i=pt(t.tooltip.getOr("")),d=C=>({isEnabled:()=>!Tt.isDisabled(C),setEnabled:w=>Tt.set(C,!w),setIconFill:(w,E)=>{xn(C.element,`svg path[class="${w}"], rect[class="${w}"]`).each(T=>{Ue(T,"fill",E)})},setActive:w=>{Ue(C.element,"aria-pressed",w),xn(C.element,"span").each(E=>{C.getSystem().getByDom(E).each(T=>Gt.set(T,w))})},isActive:()=>xn(C.element,"span").exists(w=>C.getSystem().getByDom(w).exists(Gt.isOn)),setText:w=>xn(C.element,"span").each(E=>C.getSystem().getByDom(E).each(T=>ft(T,ii,{text:w}))),setIcon:w=>xn(C.element,"span").each(E=>C.getSystem().getByDom(E).each(T=>ft(T,xg,{icon:w}))),setTooltip:w=>{const E=s.providers.translate(w);Ue(C.element,"aria-label",E),i.set(w)}}),g=pt(Z),h={getApi:d,onSetup:t.onSetup};return VT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...VR(t.tooltip,s.providers),...St(a)?{"data-mce-name":a}:{}}},onExecute:C=>{const w=d(C);w.isEnabled()&&t.onAction(w)},onItemExecute:(C,w,E)=>{},splitDropdownBehaviours:Oe([Al.splitButton(s.providers.isDisabled),Es(),zt("split-dropdown-events",[Jn((C,w)=>fA(C)),ve(UR,Ot.focus),zm(h,g),ta(h,g)]),p0.config({}),...t.tooltip.map(C=>sr.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(C),onShow:w=>{if(i.get()!==C){const E=s.providers.translate(i.get());sr.setComponents(w,s.providers.tooltips.getComponents({tooltipText:E}))}}})})).toArray()]),eventOrder:{[Zr()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Sc()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:eW(d,t,s.providers),parts:{menu:P2(!1,t.columns,t.presets)},components:[VT.parts.button(WR(t.icon,t.text,_.none(),_.some([Gt.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),VT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:I5("chevron-down",s.providers.icons)},buttonBehaviours:Oe([Al.splitButton(s.providers.isDisabled),Es(),D3()])}),VT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},nW=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],AC=(t,s)=>(a,i,d,g)=>{const h=t(a).mapError(C=>Ti(C)).getOrDie();return s(h,i,d,g)},oW={button:AC(kl,(t,s,a,i)=>N0(t,s.shared.providers,i)),togglebutton:AC(lE,(t,s,a,i)=>QU(t,s.shared.providers,i)),menubutton:AC(K$,(t,s,a,i)=>mC(t,"tox-tbtn",s,_.none(),!1,i)),splitbutton:AC(Y$,(t,s,a,i)=>tW(t,s.shared,i)),grouptoolbarbutton:AC(v9,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>UT(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,_.none()),h={[sd]:s.shared.header.isPositionedAtTop()?od.TopToBottom:od.BottomToTop};switch(np(a)){case Rc.floating:return JU(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},ZR=(t,s,a,i)=>Xe(oW,t.type).fold(()=>(console.error("skipping button defined by",t),_.none()),d=>_.some(d(t,s,a,i))),K6={styles:ZU,fontsize:FU,fontsizeinput:UU,fontfamily:IR,blocks:EU,align:xU},sW=t=>{const s=xe(nW,a=>{const i=lo(a.items,d=>_n(t,d)||_n(K6,d));return{name:a.name,items:i}});return lo(s,a=>a.items.length>0)},Y6=t=>{const s=t.split("|");return xe(s,a=>({items:a.trim().split(" ")}))},X6=t=>mt(t,s=>_n(s,"name")&&_n(s,"items")),rW=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?sW(a):Yt(s)?Y6(s):X6(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},aW=(t,s,a,i,d,g)=>Xe(s,a.toLowerCase()).orThunk(()=>g.bind(h=>Ys(h,C=>Xe(s,C+a.toLowerCase())))).fold(()=>Xe(K6,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),_.none()):ZR(h,d,t,a.toLowerCase())),UT=(t,s,a,i)=>{const d=rW(s),g=xe(d,h=>{const C=fe(h.items,w=>w.trim().length===0?[]:aW(t,s.buttons,w,s.allowToolbarGroups,a,i).toArray());return{title:_.from(t.translate(h.name)),items:C}});return lo(g,h=>h.items.length>0)},J6=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(mt(g,Yt)){const C=g.map(w=>{const E={toolbar:w,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return UT(t,E,i,_.none())});Xn.setToolbars(d,C)}else Xn.setToolbar(d,UT(t,a,i,_.none()))},Q6=Ga(),cW=Q6.os.isiOS()&&Q6.os.version.major<=12,eI=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=pt(_o(d.innerWidth,d.innerHeight)),C=pt(_o(g.offsetWidth,g.offsetHeight)),w=()=>{const B=h.get();(B.left!==d.innerWidth||B.top!==d.innerHeight)&&(h.set(_o(d.innerWidth,d.innerHeight)),a0(t))},E=()=>{const B=t.getDoc().documentElement,P=C.get();(P.left!==B.offsetWidth||P.top!==B.offsetHeight)&&(C.set(_o(B.offsetWidth,B.offsetHeight)),a0(t))},T=B=>{FB(t,B)};i.bind(d,"resize",w),i.bind(d,"scroll",T);const R=vy(ne.fromDom(t.getBody()),"load",E);t.on("hide",()=>{Qe(a,B=>{It(B.element,"display","none")})}),t.on("show",()=>{Qe(a,B=>{gn(B.element,"display")})}),t.on("NodeChange",E),t.on("remove",()=>{R.unbind(),i.unbind(d,"resize",w),i.unbind(d,"scroll",T),d=null})},iW=(t,s,a)=>{mg(t)&&yl(a.mainUi.mothership.element,a.popupUi.mothership),jS(s,a.dialogUi.mothership)};var lW=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=pt(0),w=g.outerContainer;vU(t);const E=ne.fromDom(d.targetNode),T=zc(Eo(E));yl(E,g.mothership),iW(t,T,s),t.on("SkinLoaded",()=>{Xn.setSidebar(w,a.sidebar,w5(t)),J6(t,s,a,i),C.set(t.getWin().innerWidth),Xn.setMenubar(w,HT(t,a)),Xn.setViews(w,a.views),eI(t,s)});const R=Xn.getSocket(w).getOrDie("Could not find expected socket element");if(cW){xa(R.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const U=gz(()=>{t.dispatch("ScrollContent")},20),oe=Yr(R.element,"scroll",U.throttle);t.on("remove",oe.unbind)}gE(t,s),t.addCommand("ToggleSidebar",(U,oe)=>{Xn.toggleSidebar(w,oe),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var U;return(U=Xn.whichSidebar(w))!==null&&U!==void 0?U:""}),t.addCommand("ToggleView",(U,oe)=>{if(Xn.toggleView(w,oe)){const W=w.element;g.mothership.broadcastOn([Cl()],{target:W}),Qe(h,ee=>{ee.broadcastOn([Cl()],{target:W})}),co(Xn.whichView(w))&&(t.focus(),t.nodeChanged(),Xn.refreshToolbar(w))}}),t.addQueryValueHandler("ToggleView",()=>{var U;return(U=Xn.whichView(w))!==null&&U!==void 0?U:""});const B=np(t),P=()=>{Xn.refreshToolbar(s.mainUi.outerContainer)};(B===Rc.sliding||B===Rc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const U=t.getWin().innerWidth;U!==C.get()&&(P(),C.set(U))});const F={setEnabled:U=>{W2(s,!U)},isEnabled:()=>!Tt.isDisabled(w)};return{iframeContainer:R.element.dom,editorContainer:w.element.dom,api:F}}});const tI=t=>/^[0-9\.]+(|px)$/i.test(""+t)?_.some(parseInt(""+t,10)):_.none(),P0=t=>Zn(t)?t+"px":t,WT=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},ZT=t=>{const s=t3(t),a=Ax(t),i=n3(t);return tI(s).map(d=>WT(d,a,i))},jT=t=>ZT(t).getOr(t3(t)),jR=t=>{const s=tp(t),a=Jb(t),i=S2(t);return tI(s).map(d=>WT(d,a,i))},uW=t=>jR(t).getOr(tp(t)),{ToolbarLocation:GR,ToolbarMode:nI}=$8,dW=40,mW=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=ep.DOM,w=Qb(t),E=e0(t),T=S2(t).or(jR(t)),R=i.shared.header,B=R.isPositionedAtTop,P=150,F=np(t),U=F===nI.sliding||F===nI.floating,oe=pt(!1),W=()=>oe.get()&&!t.removed,ee=Jt=>U?Jt.fold(q(0),Ne=>Ne.components().length>1?vs(Ne.components()[1].element):0):0,J=Jt=>{switch(s3(t)){case GR.auto:const Ne=Xn.getToolbar(g.outerContainer),st=ee(Ne),Lt=vs(Jt.element)-st,xt=jo(s);if(xt.y>Lt)return"top";{const Pt=Zp(s),Hn=Math.max(Pt.dom.scrollHeight,vs(Pt));return xt.bottom<Hn-Lt||zs().bottom<xt.bottom-Lt?"bottom":"top"}case GR.bottom:return"bottom";case GR.top:default:return"top"}},ye=Jt=>{d.on(Ne=>{Co.setModes(Ne,[Jt]),R.setDockingMode(Jt);const st=B()?od.TopToBottom:od.BottomToTop;Ue(Ne.element,sd,st)})},ce=()=>{d.on(Jt=>{const Ne=T.getOrThunk(()=>o1().width-Ci(s).left-10);It(Jt.element,"max-width",Ne+"px")})},Ae=(Jt,Ne)=>{d.on(st=>{const Lt=Xn.getToolbar(g.outerContainer),xt=ee(Lt),bt=jo(s),Pt=He(t,g.outerContainer.element),Hn=()=>Pt.fold(()=>bt.x,Fr=>{const pi=jo(Fr);return Fn(Fr,Hr())?bt.x:bt.x-pi.x}),Cn=()=>Pt.fold(()=>B()?Math.max(bt.y-vs(st.element)+xt,0):bt.bottom,Fr=>{var pi;const el=jo(Fr),ic=(pi=Fr.dom.scrollTop)!==null&&pi!==void 0?pi:0,$p=Fn(Fr,Hr())?Math.max(bt.y-vs(st.element)+xt,0):bt.y-el.y+ic-vs(st.element)+xt;return B()?$p:bt.bottom}),sa=Hn(),hi=Rt(Jt,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Fr=>Fr>P).map(Fr=>{const pi=Ne.getOr(Vr()),el=window.innerWidth-(sa-pi.left),ic=Math.max(Math.min(Fr,el),P);return el<Fr&&It(g.outerContainer.element,"width",ic+"px"),{width:ic+"px"}}).getOr({width:"max-content"}),wu={position:"absolute",left:Math.round(sa)+"px",top:Cn()+"px"};xa(g.outerContainer.element,{...wu,...hi})})},He=(Jt,Ne)=>mg(Jt)?ju(Ne):_.none(),pe=()=>{Qe(h,Jt=>{Jt.broadcastOn([Am()],{})})},rt=()=>!w&&(ia(g.outerContainer.element).left+Ul(g.outerContainer.element)>=window.innerWidth-dW||Js(g.outerContainer.element,"width").isSome())?(It(g.outerContainer.element,"position","absolute"),It(g.outerContainer.element,"left","0px"),gn(g.outerContainer.element,"width"),!0):!1,Je=Jt=>{if(!W())return;w||ce();const Ne=Vr(),st=w?!1:rt();if(U&&Xn.refreshToolbar(g.outerContainer),!w){const Lt=Vr(),xt=Rt(Ne.left!==Lt.left,Ne);Ae(st,xt),xt.each(bt=>{e1(bt.left,Lt.top)})}E&&d.on(Jt),pe()},yt=()=>w||!E||!W()?!1:d.get().exists(Jt=>{const Ne=R.getDockingMode(),st=J(Jt);return st!==Ne?(ye(st),!0):!1});return{isVisible:W,isPositionedAtTop:B,show:()=>{oe.set(!0),It(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),Qe(h,Jt=>{gn(Jt.element,"display")}),yt(),mg(t)?Je(Jt=>Co.isDocked(Jt)?Co.reset(Jt):Co.refresh(Jt)):Je(Co.refresh)},hide:()=>{oe.set(!1),It(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),Qe(h,Jt=>{It(Jt.element,"display","none")})},update:Je,updateMode:()=>{yt()&&Je(Co.reset)},repositionPopups:pe}},RC=(t,s)=>{const a=jo(t);return{pos:s?a.y:a.bottom,bounds:a}},oI=(t,s,a,i)=>{const d=pt(RC(s,a.isPositionedAtTop())),g=E=>{const{pos:T,bounds:R}=RC(s,a.isPositionedAtTop()),{pos:B,bounds:P}=d.get(),F=R.height!==P.height||R.width!==P.width;d.set({pos:T,bounds:R}),F&&a0(t,E),a.isVisible()&&(B!==T?a.update(Co.reset):F&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Co.reset)),t.on("NodeChange keydown",E=>{requestAnimationFrame(()=>g(E))});let h=0;const C=iC(()=>a.update(Co.refresh),33);t.on("ScrollWindow",()=>{const E=Vr().left;E!==h&&(h=E,C.throttle()),a.updateMode()}),mg(t)&&t.on("ElementScroll",E=>{a.update(Co.refresh)});const w=er();w.set(vy(ne.fromDom(t.getBody()),"load",E=>g(E.raw))),t.on("remove",()=>{w.clear()})};var sI=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,h=Vn(),C=ne.fromDom(d.targetNode),w=mW(t,C,s,i,h),E=f5(t);yU(t);const T=()=>{if(h.isSet()){w.show();return}h.set(Xn.getHeader(g.outerContainer).getOrDie());const B=E2(t);mg(t)?(yl(C,g.mothership),yl(C,s.popupUi.mothership)):jS(B,g.mothership),jS(B,s.dialogUi.mothership);const P=()=>{J6(t,s,a,i),Xn.setMenubar(g.outerContainer,HT(t,a)),w.show(),oI(t,C,w,E),t.nodeChanged()};E?t.once("SkinLoaded",P):P()};t.on("show",T),t.on("hide",w.hide),E||(t.on("focus",T),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||E)&&T()}),gE(t,s);const R={show:T,hide:w.hide,setEnabled:B=>{W2(s,!B)},isEnabled:()=>!Tt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:R}}});const rI=()=>{const t=Vn(),s=Vn(),a=Vn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],w=>Fn(C.element,w.element)?[C]:[C,w]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},gW="contexttoolbar-show",qR="contexttoolbar-hide",hW=t=>({hide:()=>Zt(t,rh()),getValue:()=>Ke.getValue(t)}),aI=(t,s)=>ve(eT,(a,i)=>{const d=t.get(a),g=hW(d);s.onAction(g,i.event.buttonApi)}),pW=(t,s,a)=>{const{primary:i,...d}=s.original,g=_e(kl({...d,type:"button",onAction:Z}));return G6(g,a,[aI(t,s)])},bW=(t,s,a)=>{const{primary:i,...d}=s.original,g=_e(lE({...d,type:"togglebutton",onAction:Z}));return q6(g,a,[aI(t,s)])},vW=t=>t.type==="contextformtogglebutton",DC=(t,s,a)=>vW(s)?bW(t,s,a):pW(t,s,a),yW=(t,s,a)=>{const i=xe(s,h=>Tn(DC(t,h,a)));return{asSpecs:()=>xe(i,h=>h.asSpec()),findPrimary:h=>Ys(s,(C,w)=>C.primary?_.from(i[w]).bind(E=>E.getOpt(h)).filter(he(Tt.isDisabled)):_.none())}},cI=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=Tn(ap.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Oe([ct.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(Uu(h),!0)),onLeft:(g,h)=>(h.cut(),_.none()),onRight:(g,h)=>(h.cut(),_.none())})])})),d=yW(i,t.commands,s);return[{title:_.none(),items:[i.asSpec()]},{title:_.none(),items:d.asSpecs()}]},iI={renderContextForm:(t,s,a)=>$T({type:t,uid:qe("context-toolbar"),initGroups:cI(s,a),onEscape:_.none,cyclicKeying:!0,providers:a}),buildInitGroups:cI},lI=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,uI=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=q0(ne.fromDom(t.startContainer),t.startOffset).element;return(Ua(a)?Lc(a):_.some(a)).filter(jn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},KR=t=>{const s=t.selection.getRng(),a=uI(s);if(t.inline){const i=Vr();return ko(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=jc(ne.fromDom(t.getBody()));return ko(i.x+a.left,i.y+a.top,a.width,a.height)}},CW=(t,s)=>s.filter(a=>Hs(a)&&sf(a)).map(jc).getOrThunk(()=>KR(t)),wW=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},SW=(t,s,a,i,d,g)=>{const h=ne.fromDom(t.getContainer()),C=xn(h,".tox-editor-header").getOr(h),w=jo(C),E=w.y>=s.bottom,T=i&&!E;if(t.inline&&T)return{y:Math.max(w.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!T)return{y:a.y,bottom:Math.min(w.y-g,a.bottom)};const R=d==="line"?jo(h):s;return T?{y:Math.max(w.bottom+g,a.y),bottom:Math.min(R.bottom-g,a.bottom)}:{y:Math.max(R.y+g,a.y),bottom:Math.min(w.y-g,a.bottom)}},dI=(t,s,a,i=0)=>{const d=o1(window),g=jo(ne.fromDom(t.getContentAreaContainer())),h=$x(t)||Fx(t)||op(t),{x:C,width:w}=wW(g,d,i);if(t.inline&&!h)return ko(C,d.y,w,d.height);{const E=s.header.isPositionedAtTop(),{y:T,bottom:R}=SW(t,g,d,E,a,i);return ko(C,T,w,R-T)}},_g=12,YR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},mI={maxHeightFunction:Wf(),maxWidthFunction:hR()},xW=(t,s)=>{const a=t.selection.getRng(),i=q0(ne.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Fn(i.element,s)},fI=(t,s,a)=>{const i=Js(t,"position");It(t,"position",s);const d=a(t);return i.each(g=>It(t,"position",g)),d},GT=t=>t==="node",gI=(t,s,a,i,d)=>{const g=KR(t),h=i.lastElement().exists(C=>Fn(a,C));if(xW(t,a))return h?HA:Bl;if(h)return fI(s,i.getMode(),()=>lI(g,jo(s),-20)&&!i.isReposition()?kV:HA);{const C=i.getMode()==="fixed"?d.y+Vr().top:d.y,w=vs(s)+_g;return C+w<=g.y?Bl:pC}},hI=(t,s,a,i)=>{const d=w=>(E,T,R,B,P)=>{const F=gI(t,B,w,a,P),U={...E,y:P.y,height:P.height};return{...F(U,T,R,B,P),alwaysFit:!0}},g=w=>GT(i)?[d(w)]:[];return s?{onLtr:w=>[rs,ms,ss,fs,Mn,xs].concat(g(w)),onRtl:w=>[rs,ss,ms,Mn,fs,xs].concat(g(w))}:{onLtr:w=>[xs,rs,fs,ms,Mn,ss].concat(g(w)),onRtl:w=>[xs,rs,Mn,ss,fs,ms].concat(g(w))}},EW=(t,s,a,i)=>s==="line"?{bubble:ni(_g,0,YR),layouts:{onLtr:()=>[uy],onRtl:()=>[X1]},overrides:mI}:{bubble:ni(0,_g,YR,1/_g),layouts:hI(t,a,i,s),overrides:mI},kg=(t,s)=>{const a=lo(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Qm(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},qT=t=>{if(t.length<=1)return t;{const s=g=>va(t,h=>h.position===g),a=g=>lo(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=xe(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},KT=t=>{if(t.length<=1)return t;{const s=i=>$t(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>lo(t,d=>d.position===i))}},XR=(t,s,a)=>{const i=kg(t,s);if(i.contextForms.length>0)return _.some({elem:t,toolbars:[i.contextForms[0]]});{const d=kg(t,a);if(d.contextForms.length>0)return _.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=qT(i.contextToolbars.concat(d.contextToolbars));return _.some({elem:t,toolbars:g})}else return _.none()}},JR=(t,s,a)=>t(s)?_.none():y1(s,i=>{if(jn(i)){const{contextToolbars:d,contextForms:g}=kg(i,a.inNodeScope),h=g.length>0?g:KT(d);return h.length>0?_.some({elem:i,toolbars:h}):_.none()}else return _.none()},t),pI=(t,s)=>{const a=ne.fromDom(s.getBody()),i=h=>Fn(h,a),d=h=>!i(h)&&!fc(a,h),g=ne.fromDom(s.selection.getNode());return d(g)?_.none():XR(g,t.inNodeScope,t.inEditorScope).orThunk(()=>JR(i,g,t))},YT=(t,s)=>{const a={},i=[],d=[],g={},h={},C=(T,R)=>{const B=_e(k7(R));a[T]=B,B.launch.map(P=>{g["form:"+T]={...R.launch,type:P.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(B)}}}),B.scope==="editor"?d.push(B):i.push(B),h[T]=B},w=(T,R)=>{Zi(R).each(B=>{R.scope==="editor"?d.push(B):i.push(B),h[T]=B})},E=No(t);return Qe(E,T=>{const R=t[T];R.type==="contextform"?C(T,R):R.type==="contexttoolbar"&&w(T,R)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},QR=qe("forward-slide"),eD=qe("backward-slide"),MC=qe("change-slide-event"),tD="tox-pop--resizing",bI=t=>{const s=pt([]);return mo.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),mo.getContent(a).each(i=>{gn(i.element,"visibility")}),Ao(a.element,tD),gn(a.element,"width")},inlineBehaviours:Oe([zt("context-toolbar-events",[Tf(Ai(),(a,i)=>{i.event.raw.propertyName==="width"&&(Ao(a.element,tD),gn(a.element,"width"))}),ve(MC,(a,i)=>{const d=a.element;gn(d,"width");const g=la(d);mo.setContent(a,i.event.contents),qn(d,tD);const h=la(d);It(d,"width",g+"px"),mo.getContent(a).each(C=>{i.event.focus.bind(w=>(Ya(w),Kr(d))).orThunk(()=>(ct.focusIn(C),Hi(Eo(d))))}),setTimeout(()=>{It(a.element,"width",h+"px")},0)}),ve(QR,(a,i)=>{mo.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Hi(Eo(a.element))}]))}),ft(a,MC,{contents:i.event.forwardContents,focus:_.none()})}),ve(eD,(a,i)=>{Hp(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),ft(a,MC,{contents:Mr(d.bar),focus:d.focus})})})]),ct.config({mode:"special",onEscape:a=>Hp(s.get()).fold(()=>t.onEscape(),i=>(Zt(a,eD),_.some(!0)))})]),lazySink:()=>Ut.value(t.sink)})},nD="tox-pop--transition",TW=(t,s,a,i)=>{const d=i.backstage,g=d.shared,h=Ga().deviceType.isTouch,C=Vn(),w=Vn(),E=Vn(),T=hr(bI({sink:a,onEscape:()=>(t.focus(),_.some(!0))})),R=()=>{const Je=E.get().getOr("node"),yt=GT(Je)?1:0;return dI(t,g,Je,yt)},B=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),P=Je=>za(_u(Je,C.get(),Fn),!0),F=()=>{if(B()){const Je=R(),yt=za(E.get(),"node")?CW(t,C.get()):KR(t);return Je.height<=0||!lI(yt,Je,.01)}else return!0},U=()=>{C.clear(),w.clear(),E.clear(),mo.hide(T)},oe=()=>{if(mo.isOpen(T)){const Je=T.element;gn(Je,"display"),F()?It(Je,"display","none"):(w.set(0),mo.reposition(T))}},W=Je=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Je],behaviours:Oe([ct.config({mode:"acyclic"}),zt("pop-dialog-wrap-events",[Jn(yt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>ct.focusIn(yt))}),ml(yt=>{t.shortcuts.remove("ctrl+F9")})])])}),ee=Vc(()=>YT(s,Je=>{const yt=ce([Je]);ft(T,QR,{forwardContents:W(yt)})})),J=(Je,yt)=>UT(t,{buttons:Je,toolbar:yt.items,allowToolbarGroups:!1},i.backstage,_.some(["form:"])),ye=(Je,yt)=>iI.buildInitGroups(Je,yt),ce=Je=>{const{buttons:yt}=t.ui.registry.getAll(),dt=ee(),fn={...yt,...dt.formNavigators},un=np(t)===Rc.scrolling?Rc.scrolling:Rc.default,Jt=Ht(xe(Je,Ne=>Ne.type==="contexttoolbar"?J(fn,Ne):ye(Ne,g.providers)));return $T({type:un,uid:qe("context-toolbar"),initGroups:Jt,onEscape:_.none,cyclicKeying:!0,providers:g.providers})},Ae=(Je,yt)=>{const dt=Je==="node"?g.anchors.node(yt):g.anchors.cursor(),fn=EW(t,Je,h(),{lastElement:C.get,isReposition:()=>za(w.get(),0),getMode:()=>Gs.getMode(a)});return Fo(dt,fn)},He=(Je,yt)=>{if(rt.cancel(),!B())return;const dt=ce(Je),fn=Je[0].position,un=Ae(fn,yt);E.set(fn),w.set(1);const Jt=T.element;gn(Jt,"display"),P(yt)||(Ao(Jt,nD),Gs.reset(a,T)),mo.showWithinBounds(T,W(dt),{anchor:un,transition:{classes:[nD],mode:"placement"}},()=>_.some(R())),yt.fold(C.clear,C.set),F()&&It(Jt,"display","none")};let pe=!1;const rt=iC(()=>{if(!(!t.hasFocus()||t.removed||pe))if(Ra(T.element,nD))rt.throttle();else{const Je=ee();pI(Je,t).fold(U,yt=>{He(yt.toolbars,_.some(yt.elem))})}},17);t.on("init",()=>{t.on("remove",U),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",oe),t.on("click keyup focus SetContent",rt.throttle),t.on(qR,U),t.on(gW,Je=>{const yt=ee();Xe(yt.lookupTable,Je.toolbarKey).each(dt=>{He([dt],Rt(Je.target!==t,Je.target)),mo.getContent(T).each(ct.focusIn)})}),t.on("focusout",Je=>{C2.setEditorTimeout(t,()=>{Kr(a.element).isNone()&&Kr(T.element).isNone()&&U()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&U()}),t.on("ExecCommand",({command:Je})=>{Je.toLowerCase()==="toggleview"&&U()}),t.on("AfterProgressState",Je=>{Je.state?U():t.hasFocus()&&rt.throttle()}),t.on("dragstart",()=>{pe=!0}),t.on("dragend drop",()=>{pe=!1}),t.on("NodeChange",Je=>{Kr(T.element).fold(rt.throttle,Z)})})},XT=t=>{Qe([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Bc(t,a.cmd),onSetup:SE(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:pa(t),onAction:Bc(t,"JustifyNone")})},oD=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Vn();return xe(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const w=T=>{T&&(g.on(R=>R.setActive(!1)),g.set(C)),C.setActive(T)};w(za(d,s.hash(h)));const E=s.watcher(t,h,w);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},_W=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:m3,hash:s=>BU(s,["fixed","relative","empty"]).getOr(s),display:gt,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>_.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:pa(t),onMenuSetup:pa(t)}),kW=t=>_.from(Rx(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:q(a),hash:i=>io(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=ne.fromDom(i.selection.getNode());return xf(d,g=>_.some(g).filter(jn).bind(h=>Xs(h,"lang").map(w=>{const E=Xs(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=er();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),c0(d.clear,pa(t)(i))},onMenuSetup:pa(t)})),OW=t=>{oD(t,_W(t)),kW(t).each(s=>oD(t,s))},AW=(t,s)=>{N6(t,s),AU(t,s),jU(t,s),TU(t,s),WU(t,s)},RW=t=>fp(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),vI=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:RW(t),onAction:Bc(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:pa(t),onAction:Bc(t,"indent")})},yI=t=>{vI(t)},sD=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),c0(()=>t.off("PastePlainTextToggle",i),pa(t)(a))},CI=t=>{const s=pt(Px(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:sD(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:sD(t,s)})},rD=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},wI=t=>{Wm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:SE(t,s.name),onAction:rD(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:SE(t,a),onAction:rD(t,a),shortcut:i})}},SI=t=>{Wm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Bc(t,s.action),shortcut:s.shortcut})}),Wm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:pa(t),onAction:Bc(t,s.action)})})},DW=t=>{Wm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Bc(t,s.action),onSetup:SE(t,s.name)})})},FG=t=>{wI(t),SI(t),DW(t)},MW=t=>{Wm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Bc(t,s.action)})}),Wm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:pa(t),onAction:Bc(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:pa(t),onAction:rD(t,"code")})},BW=t=>{FG(t),MW(t)},JT=(t,s)=>fp(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),NW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:JT(t,"hasUndo"),onAction:Bc(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:JT(t,"hasRedo"),onAction:Bc(t,"redo")})},PW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:JT(t,"hasUndo"),onAction:Bc(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:JT(t,"hasRedo"),onAction:Bc(t,"redo"),shortcut:"Meta+Y"})},$W=t=>{NW(t),PW(t)},IW=t=>fp(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),FW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:IW(t),onAction:Bc(t,"mceToggleVisualAid")})},LW=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Bc(t,"mceToggleVisualAid")})},HW=t=>{LW(t),FW(t)},zW=(t,s)=>{XT(t),BW(t),AW(t,s),$W(t),mL(t),HW(t),yI(t),OW(t),CI(t)},VW=t=>Yt(t)?t.split(/[ ,]/):t,xI=t=>s=>s.options.get(t),EI=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Yt(a)||mt(a,Yt)?{value:VW(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},TI=xI("contextmenu_never_use_native"),UW=xI("contextmenu_avoid_overlap"),WW=t=>_I(t).length===0,_I=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:lo(a,i=>_n(s,i))},BC=(t,s)=>({type:"makeshift",x:t,y:s}),ZW=(t,s,a)=>BC(t.x+s,t.y+a),kI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,jW=t=>{if(kI(t)){const s=t.touches[0];return BC(s.pageX,s.pageY)}else return BC(t.pageX,t.pageY)},GW=t=>{if(kI(t)){const s=t.touches[0];return BC(s.clientX,s.clientY)}else return BC(t.clientX,t.clientY)},aD=(t,s)=>{const a=ep.DOM.getPos(t);return ZW(s,a.x,a.y)},qW=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?jW(s):aD(t.getContentAreaContainer(),GW(s)):OI(t),OI=t=>({type:"selection",root:ne.fromDom(t.selection.getNode())}),cD=t=>({type:"node",node:_.some(ne.fromDom(t.selection.getNode())),root:ne.fromDom(t.getBody())}),iD=(t,s,a)=>{switch(a){case"node":return cD(t);case"point":return qW(t,s);case"selection":return OI(t)}},AI=(t,s,a,i,d,g)=>{const h=a(),C=iD(t,s,g);x0(h,Tl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:_.none()}).map(w=>{s.preventDefault(),mo.showMenuAt(d,{anchor:C},{menu:{markers:gg("normal")},data:w})})},KW={onLtr:()=>[rs,ms,ss,fs,Mn,xs,Bl,pC,hC,hT,gC,gT],onRtl:()=>[rs,ss,ms,Mn,fs,xs,Bl,pC,gC,gT,hC,hT]},YW=12,XW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},JW=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Ms(t.getWin(),qf.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},QW=t=>{const s=t.selection.getRng(),a=()=>{C2.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},lD=(t,s,a)=>{const i=iD(t,s,a);return{bubble:ni(0,a==="point"?YW:0,XW),layouts:KW,overrides:{maxWidthFunction:hR(),maxHeightFunction:Wf()},...i}},eZ=(t,s,a,i,d,g,h)=>{const C=lD(t,s,g);x0(a,Tl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:_.none()}).map(w=>{s.preventDefault();const E=h?ha.HighlightMenuAndItem:ha.HighlightNone;mo.showMenuWithinBounds(d,{anchor:C},{menu:{markers:gg("normal"),highlightOnOpen:E},data:w,type:"horizontal"},()=>_.some(dI(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(qR)})},RI=(t,s,a,i,d,g)=>{const h=Ga(),C=h.os.isiOS(),w=h.os.isMacOS(),E=h.os.isAndroid(),T=h.deviceType.isTouch(),R=()=>!(E||C||w&&T),B=()=>{const P=a();eZ(t,s,P,i,d,g,R())};if((w||C)&&g!=="node"){const P=()=>{QW(t),B()};JW(t,s)?P():(t.once("selectionchange",P),t.once("touchend",()=>t.off("selectionchange",P)))}else B()},DI=t=>Yt(t)?t==="|":t.type==="separator",uD={type:"separator"},QT=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Yt(t))return t;switch(t.type){case"separator":return uD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return Yt(i)?i:xe(i,QT)}};default:const a=t;return{type:"menuitem",...s(a),onAction:kt(a.onAction)}}},MI=(t,s)=>{if(s.length===0)return t;const i=Hp(t).filter(d=>!DI(d)).fold(()=>[],d=>[uD]);return t.concat(i).concat(s).concat([uD])},BI=(t,s,a)=>{const i=bo(s,(d,g)=>Xe(t,g.toLowerCase()).map(h=>{const C=h.update(a);if(Yt(C)&&Va(Ll(C)))return MI(d,C.split(" "));if(Sn(C)&&C.length>0){const w=xe(C,QT);return MI(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&DI(i[i.length-1])&&i.pop(),i},tZ=(t,s)=>s.ctrlKey&&!TI(t),nZ=t=>t.type==="longpress"||_n(t,"touches"),e_=(t,s)=>!nZ(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),NI=(t,s)=>e_(t,s)?t.selection.getStart(!0):s.target,oZ=(t,s)=>{const a=UW(t),i=e_(t,s)?"selection":"point";if(Va(a)){const d=NI(t,s);return Y2(ne.fromDom(d),a)?"node":i}else return i},sZ=(t,s,a)=>{const d=Ga().deviceType.isTouch,g=hr(mo.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Oe([zt("dismissContextMenu",[ve(zu(),(w,E)=>{ln.close(w),t.focus()})])])})),h=()=>mo.hide(g),C=w=>{if(TI(t)&&w.preventDefault(),tZ(t,w)||WW(t))return;const E=oZ(t,w),T=()=>{const B=NI(t,w),P=t.ui.registry.getAll(),F=_I(t);return BI(P.contextMenus,F,B)};(d()?RI:AI)(t,w,T,a,g,E)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",C)})},dD=Jc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),t_=t=>s=>s.translate(-t.left,-t.top),NC=t=>s=>s.translate(t.left,t.top),Gm=t=>(s,a)=>bo(t,(i,d)=>d(i),_o(s,a)),n_=(t,s,a)=>t.fold(Gm([NC(a),t_(s)]),Gm([t_(s)]),Gm([])),$0=(t,s,a)=>t.fold(Gm([NC(a)]),Gm([]),Gm([NC(s)])),PI=(t,s,a)=>t.fold(Gm([]),Gm([t_(a)]),Gm([NC(s),t_(a)])),rZ=(t,s,a,i,d,g)=>{const h=$0(t,d,g),C=$0(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},aZ=(t,s,a,i,d,g)=>{const h=$0(t,d,g),C=$0(s,d,g),w=Math.abs(h.left-C.left),E=Math.abs(h.top-C.top);return _o(w,E)},$I=(t,s,a)=>{const i=t.fold((d,g)=>({position:_.some("absolute"),left:_.some(d+"px"),top:_.some(g+"px")}),(d,g)=>({position:_.some("absolute"),left:_.some(d-a.left+"px"),top:_.some(g-a.top+"px")}),(d,g)=>({position:_.some("fixed"),left:_.some(d+"px"),top:_.some(g+"px")}));return{right:_.none(),bottom:_.none(),...i}},cZ=(t,s,a)=>t.fold((i,d)=>s_(i+s,d+a),(i,d)=>qm(i+s,d+a),(i,d)=>Ap(i+s,d+a)),o_=(t,s,a,i)=>{const d=(g,h)=>(C,w)=>{const E=g(s,a,i);return h(C.getOr(E.left),w.getOr(E.top))};return t.fold(d(PI,s_),d($0,qm),d(n_,Ap))},s_=dD.offset,qm=dD.absolute,Ap=dD.fixed,II=(t,s)=>{const a=To(t,s);return io(a)?NaN:parseInt(a,10)},iZ=(t,s)=>{const a=t.element,i=II(a,s.leftAttr),d=II(a,s.topAttr);return isNaN(i)||isNaN(d)?_.none():_.some(_o(i,d))},Rp=(t,s,a)=>{const i=t.element;Ue(i,s.leftAttr,a.left+"px"),Ue(i,s.topAttr,a.top+"px")},FI=(t,s)=>{const a=t.element;$o(a,s.leftAttr),$o(a,s.topAttr)},lZ=(t,s,a,i)=>iZ(t,s).fold(()=>a,d=>Ap(d.left+i.left,d.top+i.top)),uZ=(t,s,a,i,d,g)=>{const h=lZ(t,s,a,i),C=s.mustSnap?HI(t,s,h,d,g):mZ(t,s,h,d,g),w=n_(h,d,g);return Rp(t,s,w),C.fold(()=>({coord:Ap(w.left,w.top),extra:_.none()}),E=>({coord:E.output,extra:E.extra}))},dZ=(t,s)=>{FI(t,s)},LI=(t,s,a,i)=>Ys(t,d=>{const g=d.sensor;return rZ(s,g,d.range.left,d.range.top,a,i)?_.some({output:o_(d.output,s,a,i),extra:d.extra}):_.none()}),HI=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return LI(g,a,i,d).orThunk(()=>bo(g,(w,E)=>{const T=E.sensor,R=aZ(a,T,E.range.left,E.range.top,i,d);return w.deltas.fold(()=>({deltas:_.some(R),snap:_.some(E)}),B=>{const P=(R.left+R.top)/2,F=(B.left+B.top)/2;return P<=F?{deltas:_.some(R),snap:_.some(E)}:w})},{deltas:_.none(),snap:_.none()}).snap.map(w=>({output:o_(w.output,a,i,d),extra:w.extra})))},mZ=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return LI(g,a,i,d)},fZ=(t,s,a)=>({coord:o_(t.output,t.output,s,a),extra:t.extra});var gZ=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Wa(t.element),h=Vr(g),C=Bv(d),w=fZ(i,h,C),E=$I(w.coord,h,C);Me(d,E)}}});const mD="data-initial-z-index",hZ=t=>{Lc(t.element).filter(jn).each(s=>{Xs(s,mD).fold(()=>gn(s,"z-index"),a=>It(s,"z-index",a)),$o(s,mD)})},pZ=t=>{Lc(t.element).filter(jn).each(s=>{Js(s,"z-index").each(a=>{Ue(s,mD,a)}),It(s,"z-index",Zo(t.element,"z-index"))})},zI=(t,s)=>{t.getSystem().addToGui(s),pZ(s)},bZ=t=>{hZ(t),t.getSystem().removeFromGui(t)},VI=(t,s,a)=>t.getSystem().build(gu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var UI=ao("snaps",[be("getSnapPoints"),rn("onSensor"),be("leftAttr"),be("topAttr"),te("lazyViewport",zs),te("mustSnap",!1)]);const r_=[te("useFixed",$n),be("blockerClass"),te("getTarget",gt),te("onDrag",Z),te("repositionTarget",!0),te("onDrop",Z),Go("getBounds",zs),UI],vZ=t=>tf(Js(t,"left"),Js(t,"top"),Js(t,"position"),(s,a,i)=>(i==="fixed"?Ap:s_)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ia(t);return qm(s.left,s.top)}),PC=(t,s,a,i,d)=>{const g=d.bounds,h=$0(s,a,i),C=ti(h.left,g.x,g.x+g.width-d.width),w=ti(h.top,g.y,g.y+g.height-d.height),E=qm(C,w);return s.fold(()=>{const T=PI(E,a,i);return s_(T.left,T.top)},q(E),()=>{const T=n_(E,a,i);return Ap(T.left,T.top)})},yZ=(t,s,a,i,d,g,h)=>{const C=s.fold(()=>{const w=cZ(a,g.left,g.top),E=n_(w,i,d);return Ap(E.left,E.top)},w=>{const E=uZ(t,w,a,g,i,d);return E.extra.each(T=>{w.onSensor(t,T)}),E.coord});return PC(t,C,i,d,h)},CZ=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Wa(t.element),h=Vr(g),C=Bv(d),w=vZ(d),E=yZ(t,s.snaps,w,h,C,i,a),T=$I(E,h,C);Me(d,T)}s.onDrag(t,d,i)},a_=(t,s)=>({bounds:t.getBounds(),height:Ru(s.element),width:Ul(s.element)}),fD=(t,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>a_(s,t));g.each(C=>{CZ(t,s,h,C)})},WI=(t,s,a,i)=>{s.each(bZ),a.snaps.each(g=>{dZ(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},gD=t=>(s,a)=>{const i=d=>{a.setStartData(a_(s,d))};return Gn([ve(tm(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},wZ=t=>Gn([ve(ka(),t.forceDrop),ve(S1(),t.drop),ve(w1(),(s,a)=>{t.move(a.event)}),ve(Qd(),t.delayDrop)]);var SZ=Object.freeze({__proto__:null,getData:t=>_.from(_o(t.x,t.y)),getDelta:(t,s)=>_o(s.left-t.left,s.top-t.top)});const ZI=(t,s,a)=>[ve(ka(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>WI(i,_.some(E),t,s),C=vN(h,200),w={drop:h,delayDrop:C.schedule,forceDrop:h,move:R=>{C.cancel(),fD(i,t,s,SZ,R)}},E=VI(i,t.blockerClass,wZ(w));(()=>{a(i),zI(i,E)})()})],xZ=[...r_,Kn("dragger",{handlers:gD(ZI)})],EZ=t=>Gn([ve(ki(),t.forceDrop),ve(Lu(),t.drop),ve(Cw(),t.drop),ve(nh(),(s,a)=>{t.move(a.event)})]),TZ=t=>{const s=t[0];return _.some(_o(s.clientX,s.clientY))};var jI=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?TZ(a):_.none()},getDelta:(t,s)=>_o(s.left-t.left,s.top-t.top)});const GI=(t,s,a)=>{const i=Vn(),d=g=>{WI(g,i.get(),t,s),i.clear()};return[ve(ki(),(g,h)=>{h.stop();const C=()=>d(g),w={drop:C,delayDrop:Z,forceDrop:C,move:R=>{fD(g,t,s,jI,R)}},E=VI(g,t.blockerClass,EZ(w));i.set(E),(()=>{a(g),zI(g,E)})()}),ve(nh(),(g,h)=>{h.stop(),fD(g,t,s,jI,h.event)}),ve(Lu(),(g,h)=>{h.stop(),d(g)}),ve(Cw(),d)]},_Z=[...r_,Kn("dragger",{handlers:gD(GI)})],kZ=(t,s,a)=>[...ZI(t,s,a),...GI(t,s,a)],c_=[...r_,Kn("dragger",{handlers:gD(kZ)})];var OZ=Object.freeze({__proto__:null,mouse:xZ,touch:_Z,mouseOrTouch:c_}),AZ=Object.freeze({__proto__:null,init:()=>{let t=_.none(),s=_.none();const a=()=>{t=_.none(),s=_.none()},i=(w,E)=>{const T=t.map(R=>w.getDelta(R,E));return t=_.some(E),T},d=(w,E)=>w.getData(E).bind(T=>i(w,T)),g=w=>{s=_.some(w)},h=()=>s,C=q({});return Aa({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Og=Dw({branchKey:"mode",branches:OZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:_.from(t.extra)})},state:AZ,apis:gZ}),hD=40,i_=hD/2,qI=(t,s,a,i,d,g)=>t.fold(()=>Og.snap({sensor:qm(a-i_,i-i_),range:_o(d,g),output:qm(_.some(a),_.some(i)),extra:{td:s}}),h=>{const C=a-i_,w=i-i_,E=hD,T=hD,R=h.element.dom.getBoundingClientRect();return Og.snap({sensor:qm(C,w),range:_o(E,T),output:qm(_.some(a-R.width/2),_.some(i-R.height/2)),extra:{td:s}})}),KI=(t,s,a)=>{const i=(d,g)=>d.exists(h=>Fn(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},YI=t=>Tn(vr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Oe([Og.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),p0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),pD=(t,s)=>{const a=pt([]),i=pt([]),d=pt(!1),g=Vn(),h=Vn(),C=He=>{const pe=jc(He);return qI(P.getOpt(s),He,pe.x,pe.y,pe.width,pe.height)},w=()=>xe(a.get(),He=>C(He)),E=He=>{const pe=jc(He);return qI(F.getOpt(s),He,pe.right,pe.bottom,pe.width,pe.height)},T=()=>xe(i.get(),He=>E(He)),R=KI(w,g,He=>{h.get().each(pe=>{t.dispatch("TableSelectorChange",{start:He,finish:pe})})}),B=KI(T,h,He=>{g.get().each(pe=>{t.dispatch("TableSelectorChange",{start:pe,finish:He})})}),P=YI(R),F=YI(B),U=hr(P.asSpec()),oe=hr(F.asSpec()),W=(He,pe,rt,Je)=>{const yt=pe.dom.getBoundingClientRect();gn(He.element,"display");const dt=Ld(ne.fromDom(t.getBody())).dom.innerHeight,fn=rt(yt),un=Je(yt,dt);(fn||un)&&It(He.element,"display","none")},ee=(He,pe,rt,Je)=>{const yt=rt(pe);Og.snapTo(He,yt),W(He,pe,un=>un[Je]<0,(un,Jt)=>un[Je]>Jt)},J=He=>ee(U,He,C,"top"),ye=()=>g.get().each(J),ce=He=>ee(oe,He,E,"bottom"),Ae=()=>h.get().each(ce);if(Ga().deviceType.isTouch()){const He=pe=>xe(pe,ne.fromDom);t.on("TableSelectionChange",pe=>{d.get()||(vl(s,U),vl(s,oe),d.set(!0));const rt=ne.fromDom(pe.start),Je=ne.fromDom(pe.finish);g.set(rt),h.set(Je),_.from(pe.otherCells).each(yt=>{a.set(He(yt.upOrLeftCells)),i.set(He(yt.downOrRightCells)),J(rt),ce(Je)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ye(),Ae()}),t.on("TableSelectionClear",()=>{d.get()&&(su(U),su(oe),d.set(!1)),g.clear(),h.clear()})}};var XI=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const RZ=(t,s)=>{const a=_.from(To(t,"id")).getOrThunk(()=>{const i=qe("aria");return Ue(s,"id",i),i});Ue(t,"aria-describedby",a)},DZ=t=>{$o(t,"aria-describedby")},MZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",BZ=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(E,T,R)=>vr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":R}},components:[Ho(E)],action:B=>{t.focus(),t.selection.select(T),t.nodeChanged()},buttonBehaviours:Oe([sr.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",T.nodeName.toLowerCase()]),onShow:(B,P)=>{RZ(B.element,P.element)},onHide:B=>{DZ(B.element)}})}),Al.button(a.isDisabled),Es()])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ho(` ${d} `)]}),C=E=>bo(E,(T,R,B)=>{const P=g(R.name,R.element,B);return B===0?T.concat([P]):T.concat([h(),P])},[]),w=E=>{const T=[];let R=E.length;for(;R-- >0;){const B=E[R];if(B.nodeType===1&&!MZ(B)){const P=Y7(t,B);if(P.isDefaultPrevented()||T.push({name:P.name,element:B}),P.isPropagationStopped())break}}return T};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Oe([ct.config({mode:"flow",selector:"div[role=button]"}),Tt.config({disabled:a.isDisabled}),Es(),Yn.config({}),Bt.config({}),zt("elementPathEvents",[Jn((E,T)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ct.focusIn(E)),t.on("NodeChange",R=>{const B=w(R.parents),P=B.length>0?C(B):[];Bt.set(E,P)})})])]),components:[]}};var Ag;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Ag||(Ag={}));const NZ=(t,s,a,i,d)=>{const g={height:WT(i+s.top,Ax(t),n3(t))};return a===Ag.Both&&(g.width=WT(d+s.left,Jb(t),S2(t))),g},JI=(t,s,a)=>{const i=ne.fromDom(t.getContainer()),d=NZ(t,s,a,vs(i),la(i));ks(d,(g,h)=>{Zn(g)&&It(i,h,P0(g))}),q7(t)},PZ=t=>{const s=l3(t);return s===!1?Ag.None:s==="both"?Ag.Both:Ag.Vertical},l_=(t,s,a,i)=>{const g=_o(a*20,i*20);return JI(t,g,s),_.some(!0)},$Z=(t,s)=>{const a=PZ(t);if(a===Ag.None)return _.none();const i=a===Ag.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return _.some(oc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[Og.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>JI(t,h,a),blockerClass:"tox-blocker"}),ct.config({mode:"special",onLeft:()=>l_(t,a,-1,0),onRight:()=>l_(t,a,1,0),onUp:()=>l_(t,a,0,-1),onDown:()=>l_(t,a,0,1)}),Yn.config({}),Ot.config({}),sr.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},IZ=(t,s)=>{const a=(i,d,g)=>Bt.set(i,[Ho(s.translate(["{0} "+g,d[g]]))]);return vr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Oe([Al.button(s.isDisabled),Es(),Yn.config({}),Bt.config({}),Ke.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),zt("wordcount-events",[ei(i=>{const d=Ke.getValue(i),g=d.mode==="words"?"characters":"words";Ke.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Jn(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ke.getValue(i);Ke.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[wc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},FZ=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",XI.trim()])},behaviours:Oe([Ot.config({})])}]}),i=()=>{const C=pE("Alt+0"),w="Press {0} for help";return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ho(ai.translate([w,C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(IZ(t,s)),i3(t)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],w=S5(t),E=C5(t),T=i3(t)||t.hasPlugin("wordcount"),R=()=>{const B="tox-statusbar__text-container--flex-start",P="tox-statusbar__text-container--flex-end",F="tox-statusbar__text-container--space-around";if(w){const U="tox-statusbar__text-container-3-cols";return!T&&!E?[U,F]:T&&!E?[U,P]:[U,B]}return[T&&!E?P:B]};return E&&C.push(BZ(t,{},s)),w&&C.push(i()),T&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...R()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),w=$Z(t,s);return C.concat(w.toArray())})()}},QI=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),LZ=(t,s)=>{const a=t.inline,i=a?sI:lW,d=e0(t)?A0:f9,g=rI(),h=Vn(),C=Vn(),w=Vn(),B=Ga().deviceType.isTouch()?["tox-platform-touch"]:[],P=Im(t),F=np(t),U=Tn({dom:{tag:"div",classes:["tox-anchorbar"]}}),oe=Tn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),W=()=>g.mainUi.get().map(bt=>bt.outerContainer).bind(Xn.getHeader),ee=()=>Ut.fromOption(g.dialogUi.get().map(bt=>bt.sink),"UI has not been rendered"),J=()=>Ut.fromOption(g.popupUi.get().map(bt=>bt.sink),"(popup) UI has not been rendered"),ye=g.lazyGetInOuterOrDie("anchor bar",U.getOpt),ce=g.lazyGetInOuterOrDie("bottom anchor bar",oe.getOpt),Ae=g.lazyGetInOuterOrDie("toolbar",Xn.getToolbar),He=g.lazyGetInOuterOrDie("throbber",Xn.getThrobber),pe=r9({popup:J,dialog:ee},t,ye,ce),rt=()=>{const bt={attributes:{[sd]:P?od.BottomToTop:od.TopToBottom}},Pt=Xn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:pe.popup,onEscape:()=>{t.focus()}}),Hn=Xn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:pe.popup.shared.getSink,providers:pe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:$p=>{X7(t,$p)},type:F,lazyToolbar:Ae,lazyHeader:()=>W().getOrDie("Could not find header element"),...bt}),Cn=Xn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:pe.popup.shared.providers,onEscape:()=>{t.focus()},type:F}),sa=op(t),hi=Fx(t),wu=$x(t),Fr=x2(t),pi=Je(),el=sa||hi||wu,ic=()=>sa?[Cn]:hi?[Hn]:[],Rd=Fr?[pi,Pt]:[Pt];return Xn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(el?[]:["tox-editor-header--empty"]),...bt},components:Ht([wu?Rd:[],ic(),Qb(t)?[]:[U.asSpec()]]),sticky:e0(t),editor:t,sharedBackstage:pe.popup.shared})},Je=()=>Xn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),yt=()=>{const bt=Xn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Pt=Xn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[bt,Pt]}},dt=()=>{const bt=E2(t),Pt=Fn(Hr(),bt)&&Zo(bt,"display")==="grid",Hn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(B),attributes:{...ai.isRtl()?{dir:"rtl"}:{}}},behaviours:Oe([Gs.config({useFixed:()=>d.isDocked(W)})])},Cn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Gn([ve(Mi(),wu=>{It(wu.element,"width",document.body.clientWidth+"px")})])},sa=hr(Fo(Hn,Pt?Cn:{})),hi=AO(sa);return C.set(hi),{sink:sa,mothership:hi}},fn=()=>{const bt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(B),attributes:{...ai.isRtl()?{dir:"rtl"}:{}}},behaviours:Oe([Gs.config({useFixed:()=>d.isDocked(W),getBounds:()=>s.getPopupSinkBounds()})])},Pt=hr(bt),Hn=AO(Pt);return w.set(Hn),{sink:Pt,mothership:Hn}},un=()=>{const bt=rt(),Pt=yt(),Hn=Xn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:pe.popup}),Cn=Xn.parts.viewWrapper({backstage:pe.popup}),sa=y5(t)&&!a?_.some(FZ(t,pe.popup.shared.providers)):_.none(),hi=Ht([P?[]:[bt],a?[]:[Pt],P?[bt]:[]]),wu=Xn.parts.editorContainer({components:Ht([hi,a?[]:[oe.asSpec()]])}),Fr=Lx(t),pi={role:"application",...ai.isRtl()?{dir:"rtl"}:{},...Fr?{"aria-hidden":"true"}:{}},el=hr(Xn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(P?["tox-tinymce--toolbar-bottom"]:[]).concat(B),styles:{visibility:"hidden",...Fr?{opacity:"0",border:"0"}:{}},attributes:pi},components:[wu,...a?[]:[Cn,...sa.toArray()],Hn],behaviours:Oe([Es(),Tt.config({disableClass:"tox-tinymce--disabled"}),ct.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),ic=AO(el);return h.set(ic),{mothership:ic,outerContainer:el}},Jt=bt=>{const Pt=P0(jT(t)),Hn=P0(uW(t));return t.inline||(Au("div","width",Hn)&&It(bt.element,"width",Hn),Au("div","height",Pt)?It(bt.element,"height",Pt):It(bt.element,"height","400px")),Pt},Ne=bt=>{t.addShortcut("alt+F9","focus menubar",()=>{Xn.focusMenubar(bt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Xn.focusToolbar(bt)}),t.addCommand("ToggleToolbarDrawer",(Pt,Hn)=>{Hn!=null&&Hn.skipFocus?Xn.toggleToolbarDrawerWithoutFocusing(bt):Xn.toggleToolbarDrawer(bt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Xn.isToolbarDrawerToggled(bt))},st=bt=>{const{mainUi:Pt,popupUi:Hn,uiMotherships:Cn}=bt;Po(Dx(t),(L0,x_)=>{t.ui.registry.addGroupToolbarButton(x_,L0)});const{buttons:sa,menuItems:hi,contextToolbars:wu,sidebars:Fr,views:pi}=t.ui.registry.getAll(),el=f3(t),ic={menuItems:hi,menus:g3(t),menubar:r3(t),toolbar:el.getOrThunk(()=>Mx(t)),allowToolbarGroups:F===Rc.floating,buttons:sa,sidebar:Fr,views:pi};Ne(Pt.outerContainer),a9(t,Pt.mothership,Cn),d.setup(t,pe.popup.shared,W),zW(t,pe.popup),sZ(t,pe.popup.shared.getSink,pe.popup),T9(t),MG(t,He,pe.popup.shared),TW(t,wu,Hn.sink,{backstage:pe.popup}),pD(t,Hn.sink);const Rd=t.getElement(),$p=Jt(Pt.outerContainer),BD={targetNode:Rd,height:$p};return i.render(t,bt,ic,pe.popup,BD)},Lt=bt=>(w.set(bt.mothership),bt),xt=()=>{const bt=un(),Pt=dt(),Hn=mg(t)?fn():Lt(Pt);g.dialogUi.set(Pt),g.popupUi.set(Hn),g.mainUi.set(bt);const Cn={popupUi:Hn,dialogUi:Pt,mainUi:bt,uiMotherships:g.getUiMotherships()};return st(Cn)};return{popups:{backstage:pe.popup,getMothership:()=>QI("popups",w)},dialogs:{backstage:pe.dialog,getMothership:()=>QI("dialogs",C)},renderUI:xt}},eF=t=>t.dom.textContent,HZ=(t,s)=>{const a=Xs(t,"id").fold(()=>{const i=qe("dialog-label");return Ue(s,"id",i),i},gt);Ue(t,"aria-labelledby",a)},zZ=q([be("lazySink"),hn("dragBlockClass"),Go("getBounds",zs),te("useTabstopAt",ht),te("firstTabstop",0),te("eventOrder",{}),Ns("modalBehaviours",[ct]),Gr("onExecute"),Xl("onEscape")]),bD={sketch:gt},VZ=q([nc({name:"draghandle",overrides:(t,s)=>({behaviours:Oe([Og.config({mode:"mouse",getTarget:a=>Ql(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),or({schema:[be("dom")],name:"title"}),or({factory:bD,schema:[be("dom")],name:"close"}),or({factory:bD,schema:[be("dom")],name:"body"}),nc({factory:bD,schema:[be("dom")],name:"footer"}),kc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[te("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),te("components",[])],name:"blocker"})]),UZ=(t,s,a,i)=>{const d=Vn(),g=F=>{d.set(F);const U=t.lazySink(F).getOrDie(),oe=i.blocker(),W=U.getSystem().build({...oe,components:oe.components.concat([Mr(F)]),behaviours:Oe([Ot.config({}),zt("dialog-blocker-events",[Tf(Oi(),()=>{yu.isBlocked(F)?Z():ct.focusIn(F)})])])});vl(U,W),ct.focusIn(F)},h=F=>{d.clear(),Lc(F.element).each(U=>{F.getSystem().getByDom(U).each(oe=>{su(oe)})})},C=F=>Jr(F,t,"body"),w=F=>ke(F,t,"footer"),E=(F,U)=>{yu.block(F,U)},T=F=>{yu.unblock(F)},R=qe("modal-events"),B={...t.eventOrder,[Zr()]:[R].concat(t.eventOrder["alloy.system.attached"]||[])},P=Ga();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:w,setIdle:T,setBusy:E},eventOrder:B,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ps(t.modalBehaviours,[Bt.config({}),ct.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),yu.config({getRoot:d.get}),zt(R,[Jn(F=>{const U=Jr(F,t,"title").element,oe=eF(U);P.os.isMacOS()&&St(oe)?Ue(F.element,"aria-label",oe):HZ(F.element,U)})])])}},Is=Pr({name:"ModalDialog",configFields:zZ(),partFields:VZ(),factory:UZ,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),WZ=_t([cs,oE].concat(lp)),ZZ=vc,u_=[X3("button"),Wi,Yc("align","end",["start","end"]),H2,_l,gv("buttonType",["primary","secondary"])],vD=[...u_,Hm],Km=[Or("type",["submit","cancel","custom"]),...vD],jZ=[Or("type",["menu"]),bg,L2,Wi,Ka("items",WZ),...u_],yD=[...u_,Or("type",["togglebutton"]),L2,Wi,bg,Jo("active",!1)],d_=As("type",{submit:Km,cancel:Km,custom:Km,menu:jZ,togglebutton:yD}),GZ=[cs,Hm,Or("level",["info","warn","error","success"]),sB,te("url","")],qZ=_t(GZ),KZ=t=>[cs,t],YZ=[cs,Hm,_l,X3("button"),Wi,w7,gv("buttonType",["primary","secondary","toolbar"]),H2],XZ=_t(YZ),Pl=[cs,oE],$l=Pl.concat([rE]),JZ=Pl.concat([sE,_l]),QZ=_t(JZ),ej=vc,tj=$l.concat([iE("auto")]),nj=_t(tj),oj=mv([F2,Hm,sB]),sj=$l.concat([Ar("storageKey","default")]),rj=_t(sj),CD=je,wD=_t($l),f_=je,Dp=Pl.concat([Ar("tag","textarea"),ds("scriptId"),ds("scriptUrl"),al("onFocus"),V_("settings",void 0)]),g_=Pl.concat([Ar("tag","textarea"),qa("init")]),aj=eh(t=>Oo("customeditor.old",Ur(g_),t).orThunk(()=>Oo("customeditor.new",Ur(Dp),t))),tF=je,nF=_t($l),ij=Xd(),lj=t=>[cs,v1("columns"),t],uj=[cs,ds("html"),Yc("presets","presentation",["presentation","document"]),Go("onInit",Z),Jo("stretched",!1)],oF=_t(uj),sF=$l.concat([Jo("border",!1),Jo("sandboxed",!0),Jo("streamContent",!1),Jo("transparent",!0)]),SD=_t(sF),dj=je,mj=_t(Pl.concat([Ss("height")])),fj=_t([ds("url"),Jd("zoom"),Jd("cachedWidth"),Jd("cachedHeight")]),rF=$l.concat([Ss("inputMode"),Ss("placeholder"),Jo("maximized",!1),_l]),gj=_t(rF),hj=je,pj=t=>[cs,sE,t,Yc("align","start",["start","center","end"]),Ss("for")],xD=[Hm,F2],ED=[Hm,Ka("items",Cf("items",()=>aF))],aF=Jg([_t(xD),_t(ED)]),cF=$l.concat([Ka("items",aF),_l]),bj=_t(cF),vj=je,iF=$l.concat([mw("items",[Hm,F2]),wf("size",1),_l]),yj=_t(iF),Cj=je,Mp=$l.concat([Jo("constrain",!0),_l]),lF=_t(Mp),uF=_t([ds("width"),ds("height")]),h_=Pl.concat([sE,wf("min",0),wf("max",0)]),I0=_t(h_),p_=Pu,dF=[cs,Ka("header",je),Ka("cells",Gc(je))],b_=_t(dF),ac=$l.concat([Ss("placeholder"),Jo("maximized",!1),_l]),v_=_t(ac),mF=je,TD=[Or("type",["directory","leaf"]),oB,ds("id"),rl("menu",ET)],fF=_t(TD),Rg=TD.concat([Ka("children",Cf("children",()=>$u("type",{directory:wj,leaf:fF})))]),wj=_t(Rg),Sj=$u("type",{directory:wj,leaf:fF}),gF=[cs,Ka("items",Sj),al("onLeafAction"),al("onToggleExpand"),Xc("defaultExpandedIds",[],je),Ss("defaultSelectedId")],F0=_t(gF),y_=$l.concat([Yc("filetype","file",["image","media","file"]),_l,Ss("picker_text")]),hF=_t(y_),xj=_t([F2,K3]),_D=t=>ws("items","items",ol(),Gc(eh(s=>Oo(`Checking item of ${t}`,kD,s).fold(a=>Ut.error(Ti(a)),a=>Ut.value(a))))),kD=us(()=>$u("type",{alertbanner:qZ,bar:_t(KZ(_D("bar"))),button:XZ,checkbox:QZ,colorinput:rj,colorpicker:wD,dropzone:nF,grid:_t(lj(_D("grid"))),iframe:SD,input:gj,listbox:bj,selectbox:yj,sizeinput:lF,slider:I0,textarea:v_,urlinput:hF,customeditor:aj,htmlpanel:oF,imagepreview:mj,collection:nj,label:_t(pj(_D("label"))),table:b_,tree:F0,panel:Bp})),Ej=[cs,te("classes",[]),Ka("items",kD)],Bp=_t(Ej),KG=[X3("tab"),oB,Ka("items",kD)],Tj=[cs,mw("tabs",KG)],_j=_t(Tj),YG=vD,kj=d_,Oj=_t([ds("title"),vn("body",$u("type",{panel:Bp,tabpanel:_j})),Ar("size","normal"),Xc("buttons",[],kj),te("initialData",{}),Go("onAction",Z),Go("onChange",Z),Go("onSubmit",Z),Go("onClose",Z),Go("onCancel",Z),Go("onTabChange",Z)]),$C=t=>Oo("dialog",Oj,t),Aj=_t([Or("type",["cancel","custom"]),...YG]),Rj=_t([ds("title"),ds("url"),Jd("height"),Jd("width"),cl("buttons",Aj),Go("onAction",Z),Go("onCancel",Z),Go("onClose",Z),Go("onMessage",Z)]),pF=t=>Oo("dialog",Rj,t),OD=t=>So(t)?[t].concat(fe(V0(t),OD)):Sn(t)?fe(t,OD):[],XG=t=>Yt(t.type)&&Yt(t.name),e={checkbox:ej,colorinput:CD,colorpicker:f_,dropzone:ij,input:hj,iframe:dj,imagepreview:fj,selectbox:Cj,sizeinput:uF,slider:p_,listbox:vj,size:uF,textarea:mF,urlinput:xj,customeditor:tF,collection:oj,togglemenuitem:ZZ},n=t=>_.from(e[t.type]),o=t=>lo(OD(t),XG),r=t=>{const s=o(t),a=fe(s,i=>n(i).fold(()=>[],d=>[vn(i.name,d)]));return _t(a)},c=t=>{var s;const a=_e($C(t)),i=r(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},u={open:(t,s)=>{const a=c(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=_e(pF(s));return t(a)},redial:t=>c(t)};var b=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?Z4:qb)(i,h)})};return Gn([ve(Cc(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;po(g.channels,h)&&a(i,g.data)}}),Jn((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),x=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),O=[be("channel"),hn("renderComponents"),hn("updateState"),hn("initialData"),Jo("reuseDom",!0)],D=Object.freeze({__proto__:null,init:()=>{const t=pt(_.none()),s=()=>t.set(_.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const $=Us({fields:O,name:"reflecting",active:b,apis:x,state:D}),z=t=>{const s=[],a={};return ks(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Ut.error(s):Ut.value(a)},L=(t,s,a,i)=>{const d=Tn(Sp.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:xe(t.items,h=>S$(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Oe([ct.config({mode:"acyclic",useTabstopAt:he(S0)}),Yi.memento(d),iz(d,{postprocess:g=>z(g).fold(h=>(console.error(h),{}),gt)}),zt("dialog-body-panel",[ve(Oi(),(g,h)=>{g.getSystem().broadcastOn([JE],{newFocus:_.some(h.event.target)})})])])}},V=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Tx(t.action),behaviours:Ps(t.tabButtonBehaviours,[Ot.config({}),ct.config({mode:"execution",useSpace:!0,useEnter:!0}),Ke.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),K=ga({name:"TabButton",configFields:[te("uid",void 0),be("value"),ws("dom","dom",u1(()=>({attributes:{role:"tab",id:qe("aria"),"aria-selected":"false"}})),qc()),hn("action"),te("domModification",{}),Ns("tabButtonBehaviours",[Ot,ct,Ke]),be("view")],factory:V}),Q=q([be("tabs"),be("dom"),te("clickToDismiss",!1),Ns("tabbarBehaviours",[ze,ct]),hl(["tabClass","selectedClass"])]),X=Fb({factory:K,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{ze.dehighlight(i,d),ft(i,Tw(),{tabbar:i,button:d})},a=(i,d)=>{ze.highlight(i,d),ft(i,Ew(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=ze.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?Z:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),re=q([X]),we=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ps(t.tabbarBehaviours,[ze.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ue(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ue(g.element,"aria-selected","false")}}),ct.config({mode:"flow",getInitial:d=>ze.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),De=Pr({name:"Tabbar",configFields:Q(),partFields:re(),factory:we}),Ge=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Ps(t.tabviewBehaviours,[Bt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),ge=ga({name:"Tabview",configFields:[Ns("tabviewBehaviours",[Bt])],factory:Ge}),ue=q([te("selectFirst",!0),rn("onChangeTab"),rn("onDismissTab"),te("tabs",[]),Ns("tabSectionBehaviours",[])]),Ce=or({factory:De,schema:[be("dom"),jl("markers",[be("tabClass"),be("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),nt=or({factory:ge,name:"tabview"}),lt=q([Ce,nt]),qt=(t,s,a,i)=>{const d=h=>{const C=Ke.getValue(h);ke(h,t,"tabview").each(w=>{$t(t.tabs,T=>T.value===C).each(T=>{const R=T.view();Xs(h.element,"id").each(B=>{Ue(w.element,"aria-labelledby",B)}),Bt.set(w,R),t.onChangeTab(w,h,R)})})},g=(h,C)=>{ke(h,t,"tabbar").each(w=>{C(w).each(Uu)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fh(t.tabSectionBehaviours),events:Gn(Ht([t.selectFirst?[Jn((h,C)=>{g(h,ze.getFirst)})]:[],[ve(Ew(),(h,C)=>{const w=C.event.button;d(w)}),ve(Tw(),(h,C)=>{const w=C.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>ke(h,t,"tabview").map(C=>Bt.contents(C)).getOr([]),showTab:(h,C)=>{g(h,E=>{const T=ze.getCandidates(E);return $t(T,B=>Ke.getValue(B)===C).filter(B=>!ze.isHighlighted(E,B))})}}}},jt=Pr({name:"TabSection",configFields:ue(),partFields:lt(),factory:qt,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),wn=(t,s,a)=>xe(t,(i,d)=>{Bt.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Bt.set(a,[]),g.height}),Nn=t=>ya(Pg(t,(s,a)=>s>a?-1:s<a?1:0)),Vo=(t,s,a)=>{const i=Zp(t).dom,d=Ql(t,".tox-dialog-wrap").getOr(t),g=Zo(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=vs(s),E=s.dom.offsetLeft>=a.dom.offsetLeft+la(a)?Math.max(vs(a),C):C,T=parseInt(Zo(t,"margin-top"),10)||0,R=parseInt(Zo(t,"margin-bottom"),10)||0,P=vs(t)+T+R-E;return h-P},Cr=(t,s)=>{ya(t).each(a=>jt.showTab(s,a.value))},In=(t,s)=>{It(t,"height",s+"px"),It(t,"flex-basis",s+"px")},$e=(t,s,a)=>{Ql(t,'[role="dialog"]').each(i=>{xn(i,'[role="tablist"]').each(d=>{a.get().map(g=>(It(s,"height","0"),It(s,"flex-basis","0"),Math.min(g,Vo(i,s,d)))).each(g=>{In(s,g)})})})},at=t=>xn(t,'[role="tabpanel"]'),mn=t=>{const s=Vn();return{extraEvents:[Jn(d=>{const g=d.element;at(g).each(h=>{It(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const w=wn(t,h,C);Nn(w).fold(s.clear,s.set)}),$e(g,h,s),gn(h,"visibility"),Cr(t,d),requestAnimationFrame(()=>{$e(g,h,s)})})}),ve(Mi(),d=>{const g=d.element;at(g).each(h=>{$e(g,h,s)})}),ve(_N,(d,g)=>{const h=d.element;at(h).each(C=>{const w=Hi(Eo(C));It(C,"visibility","hidden");const E=Js(C,"height").map(B=>parseInt(B,10));gn(C,"height"),gn(C,"flex-basis");const T=C.dom.getBoundingClientRect().height;E.forall(B=>T>B)?(s.set(T),$e(h,C,s)):E.each(B=>{In(C,B)}),gn(C,"visibility"),w.each(Ya)})})],selectFirst:!1}},Ve="send-data-to-section",vt="send-data-to-view",Xt=(t,s,a,i)=>{const d=pt({}),g=T=>{const R=Ke.getValue(T),B=z(R).getOr({}),P=d.get(),F=Fo(P,B);d.set(F)},h=T=>{const R=d.get();Ke.setValue(T,R)},C=pt(null),w=xe(t.tabs,T=>({value:T.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ho(a.shared.providers.translate(T.title))],view:()=>[Sp.sketch(R=>({dom:{tag:"div",classes:["tox-form"]},components:xe(T.items,B=>S$(R,B,s,a,i)),formBehaviours:Oe([ct.config({mode:"acyclic",useTabstopAt:he(S0)}),zt("TabView.form.events",[Jn(h),ml(g)]),fa.config({channels:Iu([{key:Ve,value:{onReceive:g}},{key:vt,value:{onReceive:h}}])})])}))]})),E=mn(w);return jt.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(T,R,B)=>{const P=Ke.getValue(R);ft(T,TN,{name:P,oldName:C.get()}),C.set(P)},tabs:w,components:[jt.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[De.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Oe([Yn.config({})])}),jt.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:E.selectFirst,tabSectionBehaviours:Oe([zt("tabpanel",E.extraEvents),ct.config({mode:"acyclic"}),an.config({find:T=>ya(jt.getViewItems(T))}),xp(_.none(),T=>(T.getSystem().broadcastOn([Ve],{}),d.get()),(T,R)=>{d.set(R),T.getSystem().broadcastOn([vt],{})})])})},Ze=(t,s,a,i,d,g)=>{const h=E=>{const T=E.body;switch(T.type){case"tabpanel":return[Xt(T,E.initialData,i,g)];default:return[L(T,E.initialData,i,g)]}},C=(E,T)=>_.some({isTabPanel:()=>T.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(E=>({id:E})).getOr({}),...d?w:{}}},components:[],behaviours:Oe([Yi.childAt(0),$.config({channel:`${DP}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},Kt=(t,s,a,i,d,g)=>Ze(t,s,_.some(a),i,d,g),en=(t,s,a,i)=>{const d=Ze(t,s,_.none(),a,!1,i);return Is.parts.body(d)},Fs=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[kP(_.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Oe([Yn.config({}),Ot.config({})])})]}],behaviours:Oe([ct.config({mode:"acyclic",useTabstopAt:he(S0)})])};return Is.parts.body(s)},Rn=Yb.deviceType.isTouch(),gs=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),ui=(t,s)=>Is.parts.close(vr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Oe([Yn.config({})])})),Il=()=>Is.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),na=(t,s)=>Is.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:lu(`<p>${O3(s.translate(t))}</p>`)}]}]}),cc=t=>Is.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),di=(t,s)=>[gu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),gu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ha=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Is.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),_.some(!0)),useTabstopAt:g=>!S0(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:lu(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Rn?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Oe([Ot.config({}),zt("dialog-events",t.dialogEvents.concat([Tf(Oi(),(g,h)=>{yu.isBlocked(g)?Z():ct.focusIn(g)}),ve(nm(),(g,h)=>{g.getSystem().broadcastOn([JE],{newFocus:h.event.newFocus})})])),zt("scroll-lock",[Jn(()=>{qn(Hr(),d)}),ml(()=>{Ao(Hr(),d)})]),...t.extraBehaviours]),eventOrder:{[wc()]:["dialog-events"],[Zr()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Sc()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},mi=t=>vr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Oe([Yn.config({}),sr.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[oc("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Zt(s,yg)}}),ut=(t,s,a,i)=>{const d=g=>[Ho(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Oe([$.config({channel:`${RP}-${s}`,initialData:t,renderComponents:d})])}},cn=()=>({dom:lu('<div class="tox-dialog__draghandle"></div>')}),Ro=(t,s,a,i)=>gu.sketch({dom:lu('<div class="tox-dialog__header"></div>'),components:[ut(t,s,_.some(a),i),cn(),mi(i)],containerBehaviours:Oe([Og.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Li(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Yo=(t,s,a)=>{const i=Is.parts.title(ut(t,s,_.none(),a)),d=Is.parts.draghandle(cn()),g=Is.parts.close(mi(a)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return gu.sketch({dom:lu('<div class="tox-dialog__header"></div>'),components:h})},is=(t,s,a)=>Yo({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Ks=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:lu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Qo=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=xn(t().element,".tox-dialog__header").map(g=>vs(g));Is.setBusy(t(),(g,h)=>Ks(i.message,h,s,d))},onUnblock:()=>{Is.setIdle(t())}}),es="tox-dialog--fullscreen",Ir="tox-dialog--width-lg",fi="tox-dialog--width-md",Pc=t=>{switch(t){case"large":return _.some(Ir);case"medium":return _.some(fi);default:return _.none()}},Ji=(t,s)=>{const a=ne.fromDom(s.element.dom);Ra(a,es)||(Da(a,[Ir,fi]),Pc(t).each(i=>qn(a,i)))},gi=(t,s)=>{const a=ne.fromDom(t.element.dom),i=J_(a),d=$t(i,g=>g===Ir||g===fi).or(Pc(s));K_(a,[es,...d.toArray()])},Ym=(t,s,a)=>hr(Ha({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[qE({}),...t.extraBehaviours],onEscape:i=>{Zt(i,yg)},dialogEvents:s,eventOrder:{[Cc()]:[$.name(),fa.name()],[Zr()]:["scroll-lock",$.name(),"messages","dialog-events","alloy.base.behaviour"],[Sc()]:["alloy.base.behaviour","dialog-events","messages",$.name(),"scroll-lock"]}})),Dg=(t,s={})=>{const a=i=>{const d=xe(i.items,g=>{const h=Xe(s,g.name).getOr(pt(!1));return{...g,storage:h}});return{...i,items:d}};return xe(t,i=>i.type==="menu"?a(i):i)},Np=t=>bo(t,(s,a)=>a.type==="menu"?bo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),C_=(t,s)=>[_v(Oi(),AP),t(J2,(a,i,d,g)=>{Hi(Eo(g.element)).fold(Z,Th),s.onClose(),i.onClose()}),t(yg,(a,i,d,g)=>{i.onCancel(a),Zt(g,J2)}),ve(MO,(a,i)=>s.onUnblock()),ve(NE,(a,i)=>s.onBlock(i.event))],Xm=(t,s)=>{const a=(d,g)=>ve(d,(h,C)=>{i(h,(w,E)=>{g(t(),w,C.event,h)})}),i=(d,g)=>{$.getState(d).get().each(h=>{g(h,d)})};return[...C_(a,s),a(Sd,(d,g,h)=>{g.onAction(d,{name:h.name})})]},IC=(t,s,a)=>{const i=(g,h)=>ve(g,(C,w)=>{d(C,(E,T)=>{h(t(),E,w.event,C)})}),d=(g,h)=>{$.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...C_(i,s),i(h0,(g,h)=>h.onSubmit(g)),i(sc,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(Sd,(g,h,C,w)=>{const E=()=>w.getSystem().isConnected()?ct.focusIn(w):void 0,T=P=>X0(P,"disabled")||Xs(P,"aria-disabled").exists(F=>F==="true"),R=Eo(w.element),B=Hi(R);h.onAction(g,{name:C.name,value:C.value}),Hi(R).fold(E,P=>{T(P)||B.exists(F=>fc(P,F)&&T(F))?E():a().toOptional().filter(F=>!fc(F.element,P)).each(E)})}),i(TN,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),ml(g=>{const h=t();Ke.setValue(g,h.getData())})]},bF=(t,s)=>uT(t,t.type,s),oa=(t,s,a)=>$t(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),Pp=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=Qm(a,C=>C.align==="start"),d=(C,w)=>gu.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:xe(w,E=>E.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},AD=(t,s,a)=>{const i=(d,g)=>{const h=xe(g.buttons,w=>{const E=Tn(bF(w,a));return{name:w.name,align:w.align,memento:E}}),C=w=>oa(d,h,w);return _.some({lookupByName:C,footerButtons:h})};return{dom:lu('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Oe([$.config({channel:`${MP}-${s}`,initialData:t,updateState:i,renderComponents:Pp})])}},RD=(t,s,a)=>AD(t,s,a),Cu=(t,s,a)=>Is.parts.footer(AD(t,s,a)),Mg=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=an.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Sp.getField(i,s).orThunk(()=>t.getFooter().bind(h=>$.getState(h).get()).bind(h=>h.lookupByName(s)))}else return _.none()},ae=(t,s)=>{const a=t.getRoot();return $.getState(a).get().map(i=>_e(Oo("data",i.dataValidator,s))).getOr(s)},le=(t,s,a)=>{const i=F=>{const U=t.getRoot();U.getSystem().isConnected()&&F(U)},P={getData:()=>{const F=t.getRoot(),U=F.getSystem().isConnected()?t.getFormWrapper():F,oe=Ke.getValue(U),W=Po(a,ee=>ee.get());return{...oe,...W}},setData:F=>{i(U=>{const oe=P.getData(),W=Fo(oe,F),ee=ae(t,W),J=t.getFormWrapper();Ke.setValue(J,ee),ks(a,(ye,ce)=>{_n(W,ce)&&ye.set(W[ce])})})},setEnabled:(F,U)=>{Mg(t,F).each(U?Tt.enable:Tt.disable)},focus:F=>{Mg(t,F).each(Ot.focus)},block:F=>{if(!Yt(F))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(U=>{ft(U,NE,{message:F})})},unblock:()=>{i(F=>{Zt(F,MO)})},showTab:F=>{i(U=>{const oe=t.getBody();$.getState(oe).get().exists(ee=>ee.isTabPanel())&&an.getCurrent(oe).each(ee=>{jt.showTab(ee,F)})})},redial:F=>{i(U=>{const oe=t.getId(),W=s(F),ee=Dg(W.internalDialog.buttons,a);U.getSystem().broadcastOn([`${XE}-${oe}`],W),U.getSystem().broadcastOn([`${RP}-${oe}`],W.internalDialog),U.getSystem().broadcastOn([`${DP}-${oe}`],W.internalDialog),U.getSystem().broadcastOn([`${MP}-${oe}`],{...W.internalDialog,buttons:ee}),P.setData(W.initialData)})},close:()=>{i(F=>{Zt(F,J2)})},toggleFullscreen:t.toggleFullscreen};return P},Ie=(t,s,a)=>{const i=qe("dialog"),d=t.internalDialog,g=is(d.title,i,a),h=pt(d.size),C=J=>Mg(W,J),w=Pc(h.get()).toArray(),E=(J,ye)=>(h.set(ye.internalDialog.size),Ji(ye.internalDialog.size,J),_.some(ye)),T=en({body:d.body,initialData:d.initialData},i,a,C),R=Dg(d.buttons),B=Np(R),P=Rt(R.length!==0,Cu({buttons:R},i,a)),F=IC(()=>ee,Qo(()=>oe,a.shared.providers,s),a.shared.getSink),U={id:i,header:g,body:T,footer:P,extraClasses:w,extraBehaviours:[$.config({channel:`${XE}-${i}`,updateState:E,initialData:t})],extraStyles:{}},oe=Ym(U,F,a),W=(()=>{const J=()=>{const ce=Is.getBody(oe);return an.getCurrent(ce).getOr(ce)},ye=()=>{gi(oe,h.get())};return{getId:q(i),getRoot:q(oe),getBody:()=>Is.getBody(oe),getFooter:()=>Is.getFooter(oe),getFormWrapper:J,toggleFullscreen:ye}})(),ee=le(W,s.redial,B);return{dialog:oe,instanceApi:ee}},Re=(t,s,a,i=!1,d)=>{const g=qe("dialog"),h=qe("dialog-label"),C=qe("dialog-content"),w=t.internalDialog,E=rt=>Mg(He,rt),T=pt(w.size),R=Pc(T.get()).toArray(),B=(rt,Je)=>(T.set(Je.internalDialog.size),Ji(Je.internalDialog.size,rt),d(),_.some(Je)),P=Tn(Ro({title:w.title,draggable:!0},g,h,a.shared.providers)),F=Tn(Kt({body:w.body,initialData:w.initialData},g,C,a,i,E)),U=Dg(w.buttons),oe=Np(U),W=Rt(U.length!==0,Tn(RD({buttons:U},g,a))),ee=IC(()=>pe,{onBlock:rt=>{yu.block(ce,(Je,yt)=>{const dt=P.getOpt(ce).map(fn=>vs(fn.element));return Ks(rt.message,yt,a.shared.providers,dt)})},onUnblock:()=>{yu.unblock(ce)},onClose:()=>s.closeWindow()},a.shared.getSink),J="tox-dialog-inline",ye=Ga().os,ce=hr({dom:{tag:"div",classes:["tox-dialog",J,...R],attributes:{role:"dialog",...ye.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[Cc()]:[$.name(),fa.name()],[wc()]:["execute-on-form"],[Zr()]:["reflecting","execute-on-form"]},behaviours:Oe([ct.config({mode:"cyclic",onEscape:rt=>(Zt(rt,J2),_.some(!0)),useTabstopAt:rt=>!S0(rt)&&(Fc(rt)!=="button"||To(rt,"disabled")!=="disabled"),firstTabstop:1}),$.config({channel:`${XE}-${g}`,updateState:B,initialData:t}),Ot.config({}),zt("execute-on-form",ee.concat([Tf(Oi(),(rt,Je)=>{ct.focusIn(rt)}),ve(nm(),(rt,Je)=>{rt.getSystem().broadcastOn([JE],{newFocus:Je.event.newFocus})})])),yu.config({getRoot:()=>_.some(ce)}),Bt.config({}),qE({})]),components:[P.asSpec(),F.asSpec(),...W.map(rt=>rt.asSpec()).toArray()]}),Ae=()=>{gi(ce,T.get())},He={getId:q(g),getRoot:q(ce),getFooter:()=>W.map(rt=>rt.get(ce)),getBody:()=>F.get(ce),getFormWrapper:()=>{const rt=F.get(ce);return an.getCurrent(rt).getOr(rt)},toggleFullscreen:Ae},pe=le(He,s.redial,oe);return{dialog:ce,instanceApi:pe}};var wt=tinymce.util.Tools.resolve("tinymce.util.URI");const on=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!Yt(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{ft(C,NE,{message:h})})},unblock:()=>{s(h=>{Zt(h,MO)})},close:()=>{s(h=>{Zt(h,J2)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([lA],h)})}}},Do=["insertContent","setContent","execCommand","close","block","unblock"],Qi=t=>So(t)&&Do.indexOf(t.mceAction)!==-1,w_=t=>!Qi(t)&&So(t)&&_n(t,"mceAction"),Dj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=no(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},S_=(t,s,a,i)=>{const d=qe("dialog"),g=is(t.title,d,i),h=Fs(t),C=t.buttons.bind(J=>J.length===0?_.none():_.some(Cu({buttons:J},d,i))),w=Xm(()=>ee,Qo(()=>W,i.shared.providers,s)),E={...t.height.fold(()=>({}),J=>({height:J+"px","max-height":J+"px"})),...t.width.fold(()=>({}),J=>({width:J+"px","max-width":J+"px"}))},T=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],R=new wt(t.url,{base_uri:new wt(window.location.href)}),B=`${R.protocol}://${R.host}${R.port?":"+R.port:""}`,P=er(),F=(J,ye)=>_.some(ye),U=[$.config({channel:`${XE}-${d}`,updateState:F,initialData:t}),zt("messages",[Jn(()=>{const J=Yr(ne.fromDom(window),"message",ye=>{if(R.isSameOrigin(new wt(ye.raw.origin))){const ce=ye.raw.data;Qi(ce)?Dj(a,ee,ce):w_(ce)&&t.onMessage(ee,ce)}});P.set(J)}),ml(P.clear)]),fa.config({channels:{[lA]:{onReceive:(J,ye)=>{xn(J.element,"iframe").each(ce=>{const Ae=ce.dom.contentWindow;St(Ae)&&Ae.postMessage(ye,B)})}}}})],W=Ym({id:d,header:g,body:h,footer:C,extraClasses:T,extraBehaviours:U,extraStyles:E},w,i),ee=on(W);return{dialog:W,instanceApi:ee}},Jm=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Is.hide(E),d()},h=Tn(uT({name:"close-alert",text:"OK",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"cancel",t)),C=Il(),w=ui(g,s.providers),E=hr(Ha({lazySink:()=>s.getSink(),header:gs(C,w),body:na(i,s.providers),footer:_.some(cc(di([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ve(yg,g)],eventOrder:{}}));Is.show(E);const T=h.get(E);Ot.focus(T)}}},vF=t=>{const s=t.shared;return{open:(i,d)=>{const g=B=>{Is.hide(T),d(B)},h=Tn(uT({name:"yes",text:"Yes",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"submit",t)),C=uT({name:"no",text:"No",primary:!1,buttonType:_.some("secondary"),align:"end",enabled:!0,icon:_.none()},"cancel",t),w=Il(),E=ui(()=>g(!1),s.providers),T=hr(Ha({lazySink:()=>s.getSink(),header:gs(w,E),body:na(i,s.providers),footer:_.some(cc(di([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ve(yg,()=>g(!1)),ve(h0,()=>g(!0))],eventOrder:{}}));Is.show(T);const R=h.get(T);Ot.focus(R)}}},DD=(t,s)=>_e(Oo("data",s,t)),MD=t=>Y2(t,".tox-alert-dialog")||Y2(t,".tox-confirm-dialog"),yF=(t,s,a)=>s&&a?[]:[Co.config({contextual:{lazyContext:()=>_.some(jo(ne.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Fm(t,i.element).map(g=>({bounds:sp(g),optScrollEnv:_.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:ia(g.element).top})})).getOrThunk(()=>({bounds:zs(),optScrollEnv:_.none()}))})],Mj=t=>{const s=t.editor,a=e0(s),i=Jm(t.backstages.dialog),d=vF(t.backstages.dialog),g=(F,U,oe)=>{if(!io(U)){if(U.inline==="toolbar")return E(F,t.backstages.popup.shared.anchors.inlineDialog(),oe,U);if(U.inline==="bottom")return T(F,t.backstages.popup.shared.anchors.inlineBottomDialog(),oe,U);if(U.inline==="cursor")return E(F,t.backstages.popup.shared.anchors.cursor(),oe,U)}return w(F,oe)},h=(F,U)=>C(F,U),C=(F,U)=>{const oe=W=>{const ee=S_(W,{closeWindow:()=>{Is.hide(ee.dialog),U(ee.instanceApi)}},s,t.backstages.dialog);return Is.show(ee.dialog),ee.instanceApi};return u.openUrl(oe,F)},w=(F,U)=>{const oe=(W,ee,J)=>{const ye=ee,Ae=Ie({dataValidator:J,initialData:ye,internalDialog:W},{redial:u.redial,closeWindow:()=>{Is.hide(Ae.dialog),U(Ae.instanceApi)}},t.backstages.dialog);return Is.show(Ae.dialog),Ae.instanceApi.setData(ye),Ae.instanceApi};return u.open(oe,F)},E=(F,U,oe,W)=>{const ee=(J,ye,ce)=>{const Ae=DD(ye,ce),He=Vn(),pe=t.backstages.popup.shared.header.isPositionedAtTop(),rt={dataValidator:ce,initialData:Ae,internalDialog:J},Je=()=>He.on(un=>{mo.reposition(un),(!a||!pe)&&Co.refresh(un)}),yt=Re(rt,{redial:u.redial,closeWindow:()=>{He.on(mo.hide),s.off("ResizeEditor",Je),He.clear(),oe(yt.instanceApi)}},t.backstages.popup,W.ariaAttrs,Je),dt=hr(mo.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Oe([zt("window-manager-inline-events",[ve(zu(),(un,Jt)=>{Zt(yt.dialog,yg)})]),...yF(s,a,pe)]),isExtraPart:(un,Jt)=>MD(Jt)}));He.set(dt);const fn=()=>{const un=s.inline?Hr():ne.fromDom(s.getContainer()),Jt=jo(un);return _.some(Jt)};return mo.showWithinBounds(dt,Mr(yt.dialog),{anchor:U},fn),(!a||!pe)&&(Co.refresh(dt),s.on("ResizeEditor",Je)),yt.instanceApi.setData(Ae),ct.focusIn(yt.dialog),yt.instanceApi};return u.open(ee,F)},T=(F,U,oe,W)=>{const ee=(J,ye,ce)=>{const Ae=DD(ye,ce),He=Vn(),pe=t.backstages.popup.shared.header.isPositionedAtTop(),rt={dataValidator:ce,initialData:Ae,internalDialog:J},Je=()=>He.on(un=>{mo.reposition(un),Co.refresh(un)}),yt=Re(rt,{redial:u.redial,closeWindow:()=>{He.on(mo.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Je),He.clear(),oe(yt.instanceApi)}},t.backstages.popup,W.ariaAttrs,Je),dt=hr(mo.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Oe([zt("window-manager-inline-events",[ve(zu(),(un,Jt)=>{Zt(yt.dialog,yg)})]),Co.config({contextual:{lazyContext:()=>_.some(jo(ne.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:un=>Fm(s,un.element).map(Ne=>({bounds:sp(Ne),optScrollEnv:_.some({currentScrollTop:Ne.element.dom.scrollTop,scrollElmTop:ia(Ne.element).top})})).getOrThunk(()=>({bounds:zs(),optScrollEnv:_.none()}))})]),isExtraPart:(un,Jt)=>MD(Jt)}));He.set(dt);const fn=()=>t.backstages.popup.shared.getSink().toOptional().bind(un=>{const Jt=Fm(s,un.element),Ne=15,st=Jt.map(bt=>sp(bt)).getOr(zs()),Lt=jo(ne.fromDom(s.getContentAreaContainer())),xt=sv(Lt,st);return _.some(ko(xt.x,xt.y,xt.width,xt.height-Ne))});return mo.showWithinBounds(dt,Mr(yt.dialog),{anchor:U},fn),Co.refresh(dt),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Je),yt.instanceApi.setData(Ae),ct.focusIn(yt.dialog),yt.instanceApi};return u.open(ee,F)};return{open:g,openUrl:h,alert:(F,U)=>{i.open(F,U)},close:F=>{F.close()},confirm:(F,U)=>{d.open(F,U)}}},tn=t=>{i5(t),rL(t),EI(t)};var de=()=>{Gd.add("silver",t=>{tn(t);let s=()=>zs();const{dialogs:a,popups:i,renderUI:d}=LZ(t,{getPopupSinkBounds:()=>s()}),g=()=>{const E=d();return Fm(t,i.getMothership().element).each(R=>{s=()=>sp(R)}),E};JL.register(t,i.backstage.shared);const h=Mj({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),C=Vn(),w=()=>c7(t,{backstage:i.backstage},i.getMothership(),C);return{renderUI:g,getWindowManagerImpl:q(h),getNotificationManagerImpl:w}})};de()})();(function(){var to=tinymce.util.Tools.resolve("tinymce.ModelManager");const fo=(l,m,p)=>{var v;return p(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},go=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&fo(l,String,(p,v)=>v.isPrototypeOf(p))?"string":m},Bo=l=>m=>go(m)===l,wo=l=>m=>typeof m===l,zn=l=>m=>l===m,Pn=Bo("string"),Yt=Bo("object"),So=Bo("array"),_s=zn(null),Sn=wo("boolean"),co=zn(void 0),no=l=>l==null,io=l=>!no(l),dn=wo("function"),St=wo("number"),Ye=()=>{},Zn=(l,m)=>(...p)=>l(m.apply(null,p)),mt=(l,m)=>p=>l(m(p)),Z=l=>()=>l,kt=l=>l,Un=(l,m)=>l===m;function Vt(l,...m){return(...p)=>{const v=m.concat(p);return l.apply(null,v)}}const q=l=>m=>!l(m),gt=l=>()=>{throw new Error(l)},tt=l=>l(),Dt=Z(!1),he=Z(!0);class Y{constructor(m,p){this.tag=m,this.value=p}static some(m){return new Y(!0,m)}static none(){return Y.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Y.some(m(this.value)):Y.none()}bind(m){return this.tag?m(this.value):Y.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Y.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return io(m)?Y.some(m):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const Ls=Array.prototype.slice,$n=Array.prototype.indexOf,ht=Array.prototype.push,_=(l,m)=>$n.call(l,m),Uo=(l,m)=>_(l,m)>-1,Fe=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const S=l[p];if(m(S,p))return!0}return!1},ho=(l,m)=>{const p=[];for(let v=0;v<l;v++)p.push(m(v));return p},At=(l,m)=>{const p=l.length,v=new Array(p);for(let S=0;S<p;S++){const k=l[S];v[S]=m(k,S)}return v},Ee=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const S=l[p];m(S,p)}},po=(l,m)=>{for(let p=l.length-1;p>=0;p--){const v=l[p];m(v,p)}},va=(l,m)=>{const p=[],v=[];for(let S=0,k=l.length;S<k;S++){const M=l[S];(m(M,S)?p:v).push(M)}return{pass:p,fail:v}},ts=(l,m)=>{const p=[];for(let v=0,S=l.length;v<S;v++){const k=l[v];m(k,v)&&p.push(k)}return p},ra=(l,m,p)=>(po(l,(v,S)=>{p=m(p,v,S)}),p),xe=(l,m,p)=>(Ee(l,(v,S)=>{p=m(p,v,S)}),p),Qe=(l,m,p)=>{for(let v=0,S=l.length;v<S;v++){const k=l[v];if(m(k,v))return Y.some(k);if(p(k,v))break}return Y.none()},N=(l,m)=>Qe(l,m,Dt),Qm=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const S=l[p];if(m(S,p))return Y.some(p)}return Y.none()},lo=l=>{const m=[];for(let p=0,v=l.length;p<v;++p){if(!So(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);ht.apply(m,l[p])}return m},ps=(l,m)=>lo(At(l,m)),bo=(l,m)=>{for(let p=0,v=l.length;p<v;++p){const S=l[p];if(m(S,p)!==!0)return!1}return!0},O_=l=>{const m=Ls.call(l,0);return m.reverse(),m},$t=(l,m)=>{const p={};for(let v=0,S=l.length;v<S;v++){const k=l[v];p[String(k)]=m(k,v)}return p},oo=(l,m)=>{const p=Ls.call(l,0);return p.sort(m),p},Ht=(l,m)=>m>=0&&m<l.length?Y.some(l[m]):Y.none(),fe=l=>Ht(l,0),Tu=l=>Ht(l,l.length-1),Er=(l,m)=>{for(let p=0;p<l.length;p++){const v=m(l[p],p);if(v.isSome())return v}return Y.none()},Et=Object.keys,Bd=Object.hasOwnProperty,Wo=(l,m)=>{const p=Et(l);for(let v=0,S=p.length;v<S;v++){const k=p[v],M=l[k];m(M,k)}},Pg=(l,m)=>ns(l,(p,v)=>({k:v,v:m(p,v)})),ns=(l,m)=>{const p={};return Wo(l,(v,S)=>{const k=m(v,S);p[k.k]=k.v}),p},ya=l=>(m,p)=>{l[p]=m},Hp=(l,m,p,v)=>{Wo(l,(S,k)=>{(m(S,k)?p:v)(S,k)})},dc=(l,m)=>{const p={};return Hp(l,m,ya(p),Ye),p},Ys=(l,m)=>{const p=[];return Wo(l,(v,S)=>{p.push(m(v,S))}),p},No=l=>Ys(l,kt),zp=(l,m)=>ks(l,m)?Y.from(l[m]):Y.none(),ks=(l,m)=>Bd.call(l,m),Po=(l,m)=>ks(l,m)&&l[m]!==void 0&&l[m]!==null,ef=l=>{for(const m in l)if(Bd.call(l,m))return!1;return!0},Tr=typeof window<"u"?window:Function("return this;")(),Fl=(l,m)=>{let p=m??Tr;for(let v=0;v<l.length&&p!==void 0&&p!==null;++v)p=p[l[v]];return p},Ca=(l,m)=>{const p=l.split(".");return Fl(p,m)},Nd=(l,m)=>Ca(l,m),$g=(l,m)=>{const p=Nd(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Lr=Object.getPrototypeOf,V0=l=>$g("HTMLElement",l),Xe=l=>{const m=Ca("ownerDocument.defaultView",l);return Yt(l)&&(V0(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Lr(l).constructor.name))},_n=8,mc=9,za=11,Vp=1,Pd=3,xo=l=>l.dom.nodeName.toLowerCase(),_u=l=>l.dom.nodeType,tf=l=>m=>_u(m)===l,uo=l=>_u(l)===_n||xo(l)==="#comment",Rt=l=>wa(l)&&Xe(l.dom),wa=tf(Vp),$d=tf(Pd),Up=tf(mc),U0=tf(za),aa=l=>m=>wa(m)&&xo(m)===l,_r=(l,m,p)=>{if(Pn(p)||Sn(p)||St(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},bs=(l,m,p)=>{_r(l.dom,m,p)},tl=(l,m)=>{const p=l.dom;Wo(m,(v,S)=>{_r(p,S,v)})},Wp=(l,m)=>{Wo(m,(p,v)=>{p.fold(()=>{Mo(l,v)},S=>{_r(l.dom,v,S)})})},Ll=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},Va=(l,m)=>Y.from(Ll(l,m)),Mo=(l,m)=>{l.dom.removeAttribute(m)},Ic=l=>xe(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),nl=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return Hl(v.childNodes[0])},A_=(l,m)=>{const v=(m||document).createElement(l);return Hl(v)},R_=(l,m)=>{const v=(m||document).createTextNode(l);return Hl(v)},Hl=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},ne={fromHtml:nl,fromTag:A_,fromText:R_,fromDom:Hl,fromPoint:(l,m,p)=>Y.from(l.dom.elementFromPoint(m,p)).map(Hl)},Sa=(l,m)=>{const p=l.dom;if(p.nodeType!==Vp)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},nf=l=>l.nodeType!==Vp&&l.nodeType!==mc&&l.nodeType!==za||l.childElementCount===0,zC=(l,m)=>{const p=m===void 0?document:m.dom;return nf(p)?[]:At(p.querySelectorAll(l),ne.fromDom)},W0=(l,m)=>{const p=m===void 0?document:m.dom;return nf(p)?Y.none():Y.from(p.querySelector(l)).map(ne.fromDom)},vo=(l,m)=>l.dom===m.dom,Z0=(l,m)=>{const p=l.dom,v=m.dom;return p===v?!1:p.contains(v)},D_=Sa,Ig=l=>ne.fromDom(l.dom.ownerDocument),of=l=>Up(l)?l:Ig(l),ir=l=>ne.fromDom(of(l).dom.documentElement),ls=l=>ne.fromDom(of(l).dom.defaultView),zl=l=>Y.from(l.dom.parentNode).map(ne.fromDom),Fc=l=>Y.from(l.dom.parentElement).map(ne.fromDom),Id=(l,m)=>{const p=dn(m)?m:Dt;let v=l.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const k=v.parentNode,M=ne.fromDom(k);if(S.push(M),p(M)===!0)break;v=k}return S},Fg=l=>Y.from(l.dom.previousSibling).map(ne.fromDom),sf=l=>Y.from(l.dom.nextSibling).map(ne.fromDom),jn=l=>At(l.dom.childNodes,ne.fromDom),Ua=(l,m)=>{const p=l.dom.childNodes;return Y.from(p[m]).map(ne.fromDom)},M_=l=>Ua(l,0),Fd=(l,m)=>{zl(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},ku=(l,m)=>{sf(l).fold(()=>{zl(l).each(S=>{Xo(S,m)})},v=>{Fd(v,m)})},ca=(l,m)=>{M_(l).fold(()=>{Xo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Xo=(l,m)=>{l.dom.appendChild(m.dom)},B_=(l,m,p)=>{Ua(l,p).fold(()=>{Xo(l,m)},v=>{Fd(v,m)})},j0=(l,m)=>{Fd(l,m),Xo(m,l)},Fn=(l,m)=>{Ee(m,(p,v)=>{const S=v===0?l:m[v-1];ku(S,p)})},fc=(l,m)=>{Ee(m,p=>{Xo(l,p)})},Wa=l=>{l.dom.textContent="",Ee(jn(l),m=>{lr(m)})},lr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Zp=l=>{const m=jn(l);m.length>0&&Fn(l,m),lr(l)},Ld=(l,m)=>ne.fromDom(l.dom.cloneNode(m)),Lc=l=>Ld(l,!1),Hd=l=>Ld(l,!0),vi=(l,m)=>{const p=ne.fromTag(m),v=Ic(l);return tl(p,v),p},VC=(l,m)=>{const p=vi(l,m),v=jn(Hd(l));return fc(p,v),p},G0=(l,m)=>{const p=vi(l,m);ku(l,p);const v=jn(l);return fc(p,v),lr(l),p},UC=["tfoot","thead","tbody","colgroup"],Hc=l=>Uo(UC,l),Ou=(l,m)=>({rows:l,columns:m}),jp=(l,m)=>({row:l,column:m}),Gp=(l,m,p)=>({element:l,rowspan:m,colspan:p}),q0=(l,m,p,v)=>({element:l,rowspan:m,colspan:p,isNew:v}),K0=(l,m,p,v,S,k)=>({element:l,rowspan:m,colspan:p,row:v,column:S,isLocked:k}),Lg=(l,m,p)=>({element:l,cells:m,section:p}),WC=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),Eo=(l,m,p)=>({element:l,isNew:m,isLocked:p}),zc=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),N_=(l,m,p,v)=>({startRow:l,startCol:m,finishRow:p,finishCol:v}),Y0=(l,m,p)=>({element:l,colspan:m,column:p}),yi=(l,m)=>({element:l,columns:m}),P_=l=>U0(l)&&io(l.dom.host),qp=dn(Element.prototype.attachShadow)&&dn(Node.prototype.getRootNode),Hs=Z(qp),Hr=qp?l=>ne.fromDom(l.dom.getRootNode()):of,zd=l=>{const m=Hr(l);return P_(m)?Y.some(m):Y.none()},ZC=l=>ne.fromDom(l.dom.host),Ue=l=>{if(Hs()&&io(l.target)){const m=ne.fromDom(l.target);if(wa(m)&&jC(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return fe(p)}}return Y.from(l.target)},jC=l=>io(l.dom.shadowRoot),To=l=>{const m=$d(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return zd(ne.fromDom(m)).fold(()=>p.body.contains(m),mt(To,ZC))},Xs=()=>X0(ne.fromDom(document)),X0=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return ne.fromDom(m)},$o=(l,m,p)=>ts(Id(l,p),m),$_=(l,m)=>ts(jn(l),m),Hg=(l,m)=>{let p=[];return Ee(jn(l),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Hg(v,m))}),p},zg=(l,m,p)=>$o(l,v=>Sa(v,m),p),It=(l,m)=>$_(l,p=>Sa(p,m)),xa=(l,m)=>zC(m,l);var Me=(l,m,p,v,S)=>l(p,v)?Y.some(p):dn(S)&&S(p)?Y.none():m(p,v,S);const Zo=(l,m,p)=>{let v=l.dom;const S=dn(p)?p:Dt;for(;v.parentNode;){v=v.parentNode;const k=ne.fromDom(v);if(m(k))return Y.some(k);if(S(k))break}return Y.none()},Vg=(l,m,p)=>Me((S,k)=>k(S),Zo,l,m,p),Js=(l,m)=>{const p=S=>m(ne.fromDom(S));return N(l.dom.childNodes,p).map(ne.fromDom)},ur=(l,m)=>{const p=v=>{for(let S=0;S<v.childNodes.length;S++){const k=ne.fromDom(v.childNodes[S]);if(m(k))return Y.some(k);const M=p(v.childNodes[S]);if(M.isSome())return M}return Y.none()};return p(l.dom)},Au=(l,m,p)=>Zo(l,v=>Sa(v,m),p),gn=(l,m)=>Js(l,p=>Sa(p,m)),Vl=(l,m)=>W0(m,l),Qs=(l,m,p)=>Me((S,k)=>Sa(S,k),Au,l,m,p),rf=(l,m,p=Un)=>l.exists(v=>p(v,m)),vs=l=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(p);return m},Ru=(l,m)=>l!=null?m(l):Y.none(),J0=(l,m)=>l?Y.some(m):Y.none(),GC=(l,m)=>l.substring(m),_o=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,qC=(l,m)=>ia(l,m)?GC(l,m.length):l,kr=(l,m,p=0,v)=>{const S=l.indexOf(m,p);return S!==-1?co(v)?!0:S+m.length<=v:!1},ia=(l,m)=>_o(l,m,0),Ci=(l,m)=>_o(l,m,l.length-m.length),pn=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),la=l=>l.length>0,Ul=l=>{const m=parseFloat(l);return isNaN(m)?Y.none():Y.some(m)},af=l=>l.style!==void 0&&dn(l.style.getPropertyValue),Vc=(l,m,p)=>{if(!Pn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);af(l)&&l.style.setProperty(m,p)},Za=(l,m)=>{af(l)&&l.style.removeProperty(m)},yo=(l,m,p)=>{const v=l.dom;Vc(v,m,p)},Ug=(l,m)=>{const p=l.dom;Wo(m,(v,S)=>{Vc(p,S,v)})},Vd=(l,m)=>{const p=l.dom,S=window.getComputedStyle(p).getPropertyValue(m);return S===""&&!To(l)?cf(p,m):S},cf=(l,m)=>af(l)?l.style.getPropertyValue(m):"",lf=(l,m)=>{const p=l.dom,v=cf(p,m);return Y.from(v).filter(S=>S.length>0)},so=(l,m)=>{const p=l.dom;Za(p,m),rf(Va(l,"style").map(pn),"")&&Mo(l,"style")},Wl=(l,m)=>{const p=l.dom,v=m.dom;af(p)&&af(v)&&(v.style.cssText=p.style.cssText)},ys=(l,m,p=0)=>Va(l,m).map(v=>parseInt(v,10)).getOr(p),wi=(l,m)=>ys(l,m,1),Ud=l=>aa("col")(l)?ys(l,"span",1)>1:wi(l,"colspan")>1,Os=l=>wi(l,"rowspan")>1,Uc=(l,m)=>parseInt(Vd(l,m),10),uf=Z(10),Yp=Z(10),Wg=(l,m)=>Xp(l,m,he),Xp=(l,m,p)=>ps(jn(l),v=>Sa(v,m)?p(v)?[v]:[]:Xp(v,m,p)),df=(l,m,p=Dt)=>{if(p(m))return Y.none();if(Uo(l,xo(m)))return Y.some(m);const v=S=>Sa(S,"table")||p(S);return Au(m,l.join(","),v)},Jp=(l,m)=>df(["td","th"],l,m),Du=l=>Wg(l,"th,td"),Zg=l=>Sa(l,"colgroup")?It(l,"col"):ps(Qp(l),m=>It(m,"col")),Ea=(l,m)=>Qs(l,"table",m),Wd=l=>Wg(l,"tr"),Qp=l=>Ea(l).fold(Z([]),m=>It(m,"colgroup")),Zd=(l,m)=>At(l,p=>{if(xo(p)==="colgroup"){const v=At(Zg(p),S=>{const k=ys(S,"span",1);return Gp(S,1,k)});return Lg(p,v,"colgroup")}else{const v=At(Du(p),S=>{const k=ys(S,"rowspan",1),M=ys(S,"colspan",1);return Gp(S,k,M)});return Lg(p,v,m(p))}}),KC=l=>zl(l).map(m=>{const p=xo(m);return Hc(p)?p:"tbody"}).getOr("tbody"),jg=l=>{const m=Wd(l),v=[...Qp(l),...m];return Zd(v,KC)},YC=(l,m)=>Zd(l,()=>m),mf=l=>{let m=!1,p;return(...v)=>(m||(m=!0,p=l.apply(null,v)),p)},XC=(l,m,p,v)=>{const S=l.isiOS()&&/ipad/i.test(p)===!0,k=l.isiOS()&&!S,M=l.isiOS()||l.isAndroid(),I=M||v("(pointer:coarse)"),H=S||!k&&M&&v("(min-device-width:768px)"),G=k||M&&!H,se=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Te=!G&&!H&&!se;return{isiPad:Z(S),isiPhone:Z(k),isTablet:Z(H),isPhone:Z(G),isTouch:Z(I),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Z(se),isDesktop:Z(Te)}},ff=(l,m)=>{for(let p=0;p<l.length;p++){const v=l[p];if(v.test(m))return v}},I_=(l,m)=>{const p=ff(l,m);if(!p)return{major:0,minor:0};const v=S=>Number(m.replace(p,"$"+S));return ja(v(1),v(2))},j=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?Q0():I_(l,p)},Q0=()=>ja(0,0),ja=(l,m)=>({major:l,minor:m}),jd={nu:ja,detect:j,unknown:Q0},ID=(l,m)=>Er(m.brands,p=>{const v=p.brand.toLowerCase();return N(l,S=>{var k;return v===((k=S.brand)===null||k===void 0?void 0:k.toLowerCase())}).map(S=>({current:S.name,version:jd.nu(parseInt(p.version,10),0)}))}),JC=(l,m)=>{const p=String(m).toLowerCase();return N(l,v=>v.search(p))},Dn=(l,m)=>JC(l,m).map(p=>{const v=jd.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Si=(l,m)=>JC(l,m).map(p=>{const v=jd.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Ga=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,zr=l=>m=>kr(m,l),QC=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>kr(l,"edge/")&&kr(l,"chrome")&&kr(l,"safari")&&kr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ga],search:l=>kr(l,"chrome")&&!kr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>kr(l,"msie")||kr(l,"trident")},{name:"Opera",versionRegexes:[Ga,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:zr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:zr("firefox")},{name:"Safari",versionRegexes:[Ga,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(kr(l,"safari")||kr(l,"mobile/"))&&kr(l,"applewebkit")}],Gg=[{name:"Windows",search:zr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>kr(l,"iphone")||kr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:zr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:zr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:zr("linux"),versionRegexes:[]},{name:"Solaris",search:zr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:zr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:zr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gc={browsers:Z(QC),oses:Z(Gg)},qg="Edge",ev="Chromium",ew="IE",Wc="Opera",gf="Firefox",tv="Safari",hc=()=>dr({current:void 0,version:jd.unknown()}),dr=l=>{const m=l.current,p=l.version,v=S=>()=>m===S;return{current:m,version:p,isEdge:v(qg),isChromium:v(ev),isIE:v(ew),isOpera:v(Wc),isFirefox:v(gf),isSafari:v(tv)}},Mu={unknown:hc,nu:dr,edge:Z(qg),chromium:Z(ev),ie:Z(ew),opera:Z(Wc),firefox:Z(gf),safari:Z(tv)},hf="Windows",Zc="iOS",Vr="Android",e1="Linux",t1="macOS",n1="Solaris",o1="FreeBSD",xi="ChromeOS",s1=()=>tw({current:void 0,version:jd.unknown()}),tw=l=>{const m=l.current,p=l.version,v=S=>()=>m===S;return{current:m,version:p,isWindows:v(hf),isiOS:v(Zc),isAndroid:v(Vr),isMacOS:v(t1),isLinux:v(e1),isSolaris:v(n1),isFreeBSD:v(o1),isChromeOS:v(xi)}},F_={unknown:s1,nu:tw,windows:Z(hf),ios:Z(Zc),android:Z(Vr),linux:Z(e1),macos:Z(t1),solaris:Z(n1),freebsd:Z(o1),chromeos:Z(xi)},nw={detect:(l,m,p)=>{const v=gc.browsers(),S=gc.oses(),k=m.bind(H=>ID(v,H)).orThunk(()=>Dn(v,l)).fold(Mu.unknown,Mu.nu),M=Si(S,l).fold(F_.unknown,F_.nu),I=XC(M,k,l,p);return{browser:k,os:M,deviceType:I}}},nv=l=>window.matchMedia(l).matches;let pf=mf(()=>nw.detect(navigator.userAgent,Y.from(navigator.userAgentData),nv));const ov=()=>pf(),ko=(l,m)=>{const p=(I,H)=>{if(!St(H)&&!H.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+H);const G=I.dom;af(G)&&(G.style[l]=H+"px")},v=I=>{const H=m(I);if(H<=0||H===null){const G=Vd(I,l);return parseFloat(G)||0}return H},S=v,k=(I,H)=>xe(H,(G,se)=>{const Te=Vd(I,se),We=Te===void 0?0:parseInt(Te,10);return isNaN(We)?G:G+We},0);return{set:p,get:v,getOuter:S,aggregate:k,max:(I,H,G)=>{const se=k(I,G);return H>se?H-se:0}}},jo=(l,m)=>Ul(l).getOr(m),jc=(l,m,p)=>jo(Vd(l,m),p),sv=(l,m,p,v)=>{const S=jc(l,`padding-${p}`,0),k=jc(l,`padding-${v}`,0),M=jc(l,`border-${p}-width`,0),I=jc(l,`border-${v}-width`,0);return m-S-k-M-I},ow=(l,m)=>{const p=l.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:sv(l,v,"left","right")},zs=l=>jc(l,"height",l.dom.offsetHeight),pt=l=>jc(l,"width",l.dom.offsetWidth),Bu=l=>ow(l,"content-box"),sw=ko("width",l=>l.dom.offsetWidth),er=l=>sw.get(l),Vn=l=>sw.getOuter(l),Gd=Bu,rv=pt,r1=(l,m,p)=>{const v=l.cells,S=v.slice(0,m),k=v.slice(m),M=S.concat(p).concat(k);return Cs(l,M)},rw=(l,m,p)=>r1(l,m,[p]),Ut=(l,m,p)=>{const v=l.cells;v[m]=p},Cs=(l,m)=>zc(l.element,m,l.section,l.isNew),a1=(l,m)=>{const p=l.cells,v=At(p,m);return zc(l.element,v,l.section,l.isNew)},Ta=(l,m)=>l.cells[m],ua=(l,m)=>Ta(l,m).element,pc=l=>l.cells.length,tr=l=>{const m=va(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},da=(l,m,p)=>{const v=At(l.cells,p);return zc(m(l.element),v,l.section,!0)},bc="data-snooker-locked-cols",c1=l=>Va(l,bc).bind(m=>Y.from(m.match(/\d+/g))).map(m=>$t(m,he)),Io=l=>{const m=xe(tr(l).rows,(v,S)=>(Ee(S.cells,(k,M)=>{k.isLocked&&(v[M]=!0)}),v),{}),p=Ys(m,(v,S)=>parseInt(S,10));return oo(p)},av=(l,m)=>l+","+m,os=(l,m,p)=>Y.from(l.access[av(m,p)]),Nu=(l,m,p)=>{const v=qd(l,S=>p(m,S.element));return v.length>0?Y.some(v[0]):Y.none()},qd=(l,m)=>{const p=ps(l.all,v=>v.cells);return ts(p,m)},ro=l=>{const m={};let p=0;return Ee(l.cells,v=>{const S=v.colspan;ho(S,k=>{const M=p+k;m[M]=Y0(v.element,S,M)}),p+=S}),m},Zl=l=>{const m={},p=[],S=fe(l).map(Le=>Le.element).bind(Ea).bind(c1).getOr({});let k=0,M=0,I=0;const{pass:H,fail:G}=va(l,Le=>Le.section==="colgroup");Ee(G,Le=>{const Be=[];Ee(Le.cells,ot=>{let Se=0;for(;m[av(I,Se)]!==void 0;)Se++;const Pe=Po(S,Se.toString()),Ct=K0(ot.element,ot.rowspan,ot.colspan,I,Se,Pe);for(let ze=0;ze<ot.colspan;ze++)for(let yn=0;yn<ot.rowspan;yn++){const Bn=I+yn,kn=Se+ze,qs=av(Bn,kn);m[qs]=Ct,M=Math.max(M,kn+1)}Be.push(Ct)}),k++,p.push(Lg(Le.element,Be,Le.section)),I++});const{columns:se,colgroups:Te}=Tu(H).map(Le=>{const Be=ro(Le);return{colgroups:[yi(Le.element,No(Be))],columns:Be}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Ou(k,M),access:m,all:p,columns:se,colgroups:Te}},nn={fromTable:l=>{const m=jg(l);return Zl(m)},generate:Zl,getAt:os,findItem:Nu,filterItems:qd,justCells:l=>ps(l.all,m=>m.cells),justColumns:l=>No(l.columns),hasColumns:l=>Et(l.columns).length>0,getColumnAt:(l,m)=>Y.from(l.columns[m])},bf=(l,m=he)=>{const p=l.grid,v=ho(p.columns,kt),S=ho(p.rows,kt);return At(v,k=>l1(()=>ps(S,G=>nn.getAt(l,G,k).filter(se=>se.column===k).toArray()),G=>G.colspan===1&&m(G.element),()=>nn.getAt(l,0,k)))},l1=(l,m,p)=>{const v=l();return N(v,m).orThunk(()=>Y.from(v[0]).orThunk(p)).map(M=>M.element)},u1=l=>{const m=l.grid,p=ho(m.rows,kt),v=ho(m.columns,kt);return At(p,S=>l1(()=>ps(v,H=>nn.getAt(l,S,H).filter(G=>G.row===S).fold(Z([]),G=>[G])),H=>H.rowspan===1,()=>nn.getAt(l,S,0)))},L_=(l,m)=>{if(m<0||m>=l.length-1)return Y.none();const p=l[m].fold(()=>{const S=O_(l.slice(0,m));return Er(S,(k,M)=>k.map(I=>({value:I,delta:M+1})))},S=>Y.some({value:S,delta:0})),v=l[m+1].fold(()=>{const S=l.slice(m+1);return Er(S,(k,M)=>k.map(I=>({value:I,delta:M+1})))},S=>Y.some({value:S,delta:1}));return p.bind(S=>v.map(k=>{const M=k.delta+S.delta;return Math.abs(k.value-S.value)/M}))},aw=(l,m)=>p=>iv(p)==="rtl"?m:l,iv=l=>Vd(l,"direction")==="rtl"?"rtl":"ltr",vf=ko("height",l=>{const m=l.dom;return To(l)?m.getBoundingClientRect().height:m.offsetHeight}),d1=l=>vf.get(l),yf=l=>vf.getOuter(l),lv=zs,m1=(l,m)=>({left:l,top:m,translate:(v,S)=>m1(l+v,m+S)}),_a=m1,cw=l=>{const m=l.getBoundingClientRect();return _a(m.left,m.top)},Kg=(l,m)=>l!==void 0?l:m!==void 0?m:0,Yg=l=>{const m=l.dom.ownerDocument,p=m.body,v=m.defaultView,S=m.documentElement;if(p===l.dom)return _a(p.offsetLeft,p.offsetTop);const k=Kg(v==null?void 0:v.pageYOffset,S.scrollTop),M=Kg(v==null?void 0:v.pageXOffset,S.scrollLeft),I=Kg(S.clientTop,p.clientTop),H=Kg(S.clientLeft,p.clientLeft);return iw(l).translate(M-H,k-I)},iw=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?_a(v.offsetLeft,v.offsetTop):To(l)?cw(m):_a(0,0)},uv=(l,m)=>({row:l,y:m}),Kd=(l,m)=>({col:l,x:m}),f1=l=>Yg(l).left+Vn(l),mr=l=>Yg(l).left,g1=(l,m)=>Kd(l,mr(m)),lw=(l,m)=>Kd(l,f1(m)),h1=l=>Yg(l).top,Vs=(l,m)=>uv(l,h1(m)),Xg=(l,m)=>uv(l,h1(m)+yf(m)),us=(l,m,p)=>{if(p.length===0)return[];const v=At(p.slice(1),(k,M)=>k.map(I=>l(M,I))),S=p[p.length-1].map(k=>m(p.length-1,k));return v.concat([S])},dv=l=>-l,Ur={delta:kt,positions:l=>us(Vs,Xg,l),edge:h1},Jg=aw({delta:kt,edge:mr,positions:l=>us(g1,lw,l)},{delta:dv,edge:f1,positions:l=>us(lw,g1,l)}),p1={delta:(l,m)=>Jg(m).delta(l,m),positions:(l,m)=>Jg(m).positions(l,m),edge:l=>Jg(l).edge(l)},uw={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},mv=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),v="\\.",S=I=>`(?:${I})?`,M=`[+-]?(?:${["Infinity",l+v+S(l)+S(p),v+l+S(p),l+S(p)].join("|")})`;return new RegExp(`^(${M})(.*)$`)})(),qc=(l,m)=>Fe(m,p=>Fe(uw[p],v=>l===v)),sl=(l,m)=>Y.from(mv.exec(l)).bind(v=>{const S=Number(v[1]),k=v[2];return qc(k,m)?Y.some({value:S,unit:k}):Y.none()}),Pu=/(\d+(\.\d+)?)%/,je=/(\d+(\.\d+)?)px|em/,vc=aa("col"),fv=aa("tr"),Yd=(l,m,p)=>{const v=Fc(l).getOrThunk(()=>X0(Ig(l)));return m(l)/p(v)*100},Kc=(l,m)=>{yo(l,"width",m+"px")},Qg=(l,m)=>{yo(l,"width",m+"%")},$u=(l,m)=>{yo(l,"height",m+"px")},Xd=l=>{so(l,"height")},eh=l=>lv(l)+"px",Ei=(l,m,p,v)=>{const S=Ea(l).map(k=>{const M=p(k);return Math.floor(m/100*M)}).getOr(m);return v(l,S),S},dw=(l,m,p,v)=>{const S=parseFloat(l);return Ci(l,"%")&&xo(m)!=="table"?Ei(m,S,p,v):S},Oo=l=>{const m=eh(l);return m?dw(m,l,d1,$u):d1(l)},_e=(l,m,p)=>{const v=p(l),S=wi(l,m);return v/S},Wr=(l,m)=>lf(l,m).orThunk(()=>Va(l,m).map(p=>p+"px")),Ti=l=>Wr(l,"width"),As=l=>Wr(l,"height"),Cf=l=>Yd(l,er,Gd),ws=l=>vc(l)?er(l):rv(l),bn=l=>fv(l)?d1(l):_e(l,"rowspan",Oo),b1=l=>Ti(l).bind(p=>sl(p,["fixed","relative","empty"])),be=(l,m,p)=>{yo(l,"width",m+p)},vn=l=>er(l)+"px",v1=l=>d1(l)+"px",ds=l=>Yd(l,er,Gd)+"%",Or=l=>Ti(l).exists(m=>Pu.test(m)),H_=l=>Ti(l).exists(m=>je.test(m)),qa=l=>Ti(l).isNone(),z_=Z(Pu),jl=aa("col"),mw=l=>Ti(l).getOrThunk(()=>ws(l)+"px"),Ka=l=>As(l).getOrThunk(()=>bn(l)+"px"),hn=l=>At(nn.justColumns(l),m=>Y.from(m.element)),rl=l=>{const m=ov().browser,p=m.isChromium()||m.isFirefox();return jl(l)?p:!0},Jd=(l,m,p,v,S,k)=>l.filter(v).fold(()=>k(L_(p,m)),M=>S(M)),Ss=(l,m,p,v)=>{const S=bf(l),k=nn.hasColumns(l)?hn(l):S,M=[Y.some(p1.edge(m))].concat(At(p1.positions(S,m),H=>H.map(G=>G.x))),I=q(Ud);return At(k,(H,G)=>Jd(H,G,M,I,se=>{if(rl(se))return p(se);{const Te=Ru(S[G],kt);return Jd(Te,G,M,I,We=>v(Y.some(er(We))),v)}},v))},gv=l=>l.map(m=>m+"px").getOr(""),al=(l,m)=>Ss(l,m,mw,gv),cl=(l,m,p)=>Ss(l,m,Cf,v=>v.fold(()=>p.minCellWidth(),S=>S/p.pixelWidth()*100)),ao=(l,m,p)=>Ss(l,m,ws,v=>v.getOrThunk(p.minCellWidth)),hv=(l,m,p,v)=>{const S=u1(l),k=At(l.all,I=>Y.some(I.element)),M=[Y.some(Ur.edge(m))].concat(At(Ur.positions(S,m),I=>I.map(H=>H.y)));return At(k,(I,H)=>Jd(I,H,M,he,p,v))},te=(l,m)=>hv(l,m,bn,p=>p.getOrThunk(Yp)),yc=(l,m)=>hv(l,m,Ka,gv),wf=(l,m)=>()=>To(l)?m(l):parseFloat(lf(l,"width").getOr("0")),Ar=l=>{const m=wf(l,er),p=Z(0);return{width:m,pixelWidth:m,getWidths:(S,k)=>ao(S,l,k),getCellDelta:p,singleColumnWidth:Z([0]),minCellWidth:p,setElementWidth:Ye,adjustTableWidth:Ye,isRelative:!0,label:"none"}},Yc=l=>{const m=wf(l,H=>parseFloat(ds(H))),p=wf(l,er);return{width:m,pixelWidth:p,getWidths:(H,G)=>cl(H,l,G),getCellDelta:H=>H/p()*100,singleColumnWidth:(H,G)=>[100-H],minCellWidth:()=>uf()/p()*100,setElementWidth:Qg,adjustTableWidth:H=>{const G=m(),se=H/100*G,Te=G+se;Qg(l,Te)},isRelative:!0,label:"percent"}},Jo=l=>{const m=wf(l,er);return{width:m,pixelWidth:m,getWidths:(M,I)=>ao(M,l,I),getCellDelta:kt,singleColumnWidth:(M,I)=>[Math.max(uf(),M+I)-M],minCellWidth:uf,setElementWidth:Kc,adjustTableWidth:M=>{const I=m()+M;Kc(l,I)},isRelative:!1,label:"pixel"}},Go=(l,m)=>z_().exec(m)!==null?Yc(l):Jo(l),Xc={getTableSize:l=>Ti(l).fold(()=>Ar(l),p=>Go(l,p)),pixelSize:Jo,percentageSize:Yc,noneSize:Ar},pv=(l,m,p,v,S,k)=>({minRow:l,minCol:m,maxRow:p,maxCol:v,allCells:S,selectedCells:k}),bv=(l,m)=>{const p=l.grid.columns;let S=l.grid.rows,k=p,M=0,I=0;const H=[],G=[];return Wo(l.access,se=>{if(H.push(se),m(se)){G.push(se);const Te=se.row,We=Te+se.rowspan-1,Le=se.column,Be=Le+se.colspan-1;Te<S?S=Te:We>M&&(M=We),Le<k?k=Le:Be>I&&(I=Be)}}),pv(S,k,M,I,H,G)},Jc=(l,m,p)=>{const v=l[p].element,S=ne.fromTag("td");Xo(S,ne.fromTag("br")),(m?Xo:ca)(v,S)},vv=(l,m,p,v)=>{const S=ts(l,I=>I.section!=="colgroup"),k=m.grid.columns,M=m.grid.rows;for(let I=0;I<M;I++){let H=!1;for(let G=0;G<k;G++)I<p.minRow||I>p.maxRow||G<p.minCol||G>p.maxCol||(nn.getAt(m,I,G).filter(v).isNone()?Jc(S,H,I):H=!0)}},fw=(l,m,p,v)=>{Wo(p.columns,M=>{(M.column<m.minCol||M.column>m.maxCol)&&lr(M.element)});const S=ts(Wg(l,"tr"),M=>M.dom.childElementCount===0);Ee(S,lr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ee(Wg(l,"th,td"),M=>{Mo(M,"rowspan"),Mo(M,"colspan")}),Mo(l,bc),Mo(l,"data-snooker-col-series"),Xc.getTableSize(l).adjustTableWidth(v)},gw=(l,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=ao(m,l,p),k=xe(S,(G,se)=>G+se,0),H=xe(S.slice(v.minCol,v.maxCol+1),(G,se)=>G+se,0)/k*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(H)},hw=(l,m)=>{const p=We=>Sa(We.element,m),v=Hd(l),S=jg(v),k=Xc.getTableSize(l),M=nn.generate(S),I=bv(M,p),H="th:not("+m+"),td:not("+m+")",G=Xp(v,"th,td",We=>Sa(We,H));Ee(G,lr),vv(S,M,I,p);const se=nn.fromTable(l),Te=gw(l,se,k,I);return fw(v,I,M,Te),v},U_=" ",Iu=((l,m)=>{const p=k=>{if(!l(k))throw new Error("Can only get "+m+" value of a "+m+" node");return v(k).getOr("")},v=k=>l(k)?Y.from(k.dom.nodeValue):Y.none();return{get:p,getOption:v,set:(k,M)=>{if(!l(k))throw new Error("Can only set raw "+m+" value of a "+m+" node");k.dom.nodeValue=M}}})($d,"text"),th=l=>Iu.get(l),pw=l=>Iu.getOption(l),W_=(l,m)=>Iu.set(l,m),_i=l=>xo(l)==="img"?1:pw(l).fold(()=>jn(l).length,m=>m.length),y1=l=>pw(l).filter(m=>m.trim().length!==0||m.indexOf(U_)>-1).isSome(),xf=l=>Rt(l)&&Ll(l,"contenteditable")==="false",Fu=["img","br"],bw=l=>y1(l)||Uo(Fu,xo(l))||xf(l),Gl=l=>ur(l,bw),vw=l=>yw(l,bw),yw=(l,m)=>{const p=v=>{const S=jn(v);for(let k=S.length-1;k>=0;k--){const M=S[k];if(m(M))return Y.some(M);const I=p(M);if(I.isSome())return I}return Y.none()};return p(l)},Z_={scope:["row","col"]},C1=l=>()=>{const m=ne.fromTag("td",l.dom);return Xo(m,ne.fromTag("br",l.dom)),m},Rs=l=>()=>ne.fromTag("col",l.dom),ki=l=>()=>ne.fromTag("colgroup",l.dom),nh=l=>()=>ne.fromTag("tr",l.dom),Lu=(l,m,p)=>{const v=VC(l,m);return Wo(p,(S,k)=>{S===null?Mo(v,k):bs(v,k,S)}),v},Cw=l=>l,ka=(l,m,p)=>Gl(l).map(S=>{const k=p.join(","),M=zg(S,k,I=>vo(I,l));return ra(M,(I,H)=>{const G=Lc(H);return Xo(I,G),G},m)}).getOr(m),w1=(l,m)=>{Wo(Z_,(p,v)=>Va(l,v).filter(S=>Uo(p,S)).each(S=>bs(m,v,S)))},Qd=(l,m,p)=>{const v=(M,I)=>{Wl(M.element,I),so(I,"height"),M.colspan!==1&&so(I,"width")},S=M=>{const I=ne.fromTag(xo(M.element),m.dom),H=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),G=H.length>0?ka(M.element,I,H):I;return Xo(G,ne.fromTag("br")),v(M,I),w1(M.element,I),l(M.element,I),I};return{col:M=>{const I=ne.fromTag(xo(M.element),m.dom);return v(M,I),l(M.element,I),I},colgroup:ki(m),row:nh(m),cell:S,replace:Lu,colGap:Rs(m),gap:C1(m)}},S1=l=>({col:Rs(l),colgroup:ki(l),row:nh(l),cell:C1(l),replace:Cw,colGap:Rs(l),gap:C1(l)}),il=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,jn(ne.fromDom(v))},Oi=l=>At(l,ne.fromDom),ll=l=>m=>m.options.get(l),Qc="100%",oh=l=>{var m;const p=l.dom,v=(m=p.getParent(l.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:l.getBody();return Gd(ne.fromDom(v))+"px"},ul=(l,m)=>Cc(l)||!sh(l)?m:ql(l)?{...m,width:oh(l)}:{...m,width:Qc},Ef=(l,m)=>Cc(l)||sh(l)?m:ql(l)?{...m,width:oh(l)}:{...m,width:Qc},em=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=Uo(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=Uo(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},ww=l=>Y.from(l.options.get("table_clone_elements")),Ai=l=>{const m=l.options.get("object_resizing");return Uo(m.split(","),"table")},Sw=ll("table_header_type"),yv=ll("table_column_resizing"),Lo=l=>yv(l)==="preservetable",x1=l=>yv(l)==="resizetable",Ri=ll("table_sizing_mode"),Hu=l=>Ri(l)==="relative",ql=l=>Ri(l)==="fixed",Cc=l=>Ri(l)==="responsive",wc=ll("table_resize_bars"),sh=ll("table_style_by_css"),Di=ll("table_merge_content_on_paste"),fr=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Ef(l,p)},rh=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:ul(l,p)},Cv=ll("table_use_colgroups"),ah=l=>Qs(l,"[contenteditable]"),ch=(l,m=!1)=>To(l)?l.dom.isContentEditable:ah(l).fold(Z(m),p=>wv(p)==="true"),wv=l=>l.dom.contentEditable,tm=l=>ne.fromDom(l.getBody()),Mi=l=>m=>vo(m,tm(l)),Zr=l=>{Mo(l,"data-mce-style");const m=p=>Mo(p,"data-mce-style");Ee(Du(l),m),Ee(Zg(l),m),Ee(Wd(l),m)},Sc=l=>ne.fromDom(l.selection.getStart()),zu=l=>l.getBoundingClientRect().width,Sv=l=>l.getBoundingClientRect().height,nm=l=>(m,p)=>{const v=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return Y.from(v).filter(la)},xv=nm("width"),xw=nm("height"),Ew=l=>/^(\d+(\.\d+)?)%$/.test(l),Tw=l=>/^(\d+(\.\d+)?)px$/.test(l),Vu=l=>Vg(l,aa("table")).exists(ch),om=(l,m)=>{const p=m.column,v=m.column+m.colspan-1,S=m.row,k=m.row+m.rowspan-1;return p<=l.finishCol&&v>=l.startCol&&S<=l.finishRow&&k>=l.startRow},Zt=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,ft=(l,m)=>{let p=!0;const v=Vt(Zt,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let k=m.startCol;k<=m.finishCol;k++)p=p&&nn.getAt(l,S,k).exists(v);return p?Y.some(m):Y.none()},Uu=(l,m)=>N_(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),ih=(l,m,p)=>{const v=nn.findItem(l,m,vo),S=nn.findItem(l,p,vo);return v.bind(k=>S.map(M=>Uu(k,M)))},E1=(l,m,p)=>ih(l,m,p).bind(v=>ft(l,v)),Ev=(l,m,p,v)=>nn.findItem(l,m,vo).bind(S=>{const k=p>0?S.row+S.rowspan-1:S.row,M=v>0?S.column+S.colspan-1:S.column;return nn.getAt(l,k+p,M+v).map(H=>H.element)}),dl=(l,m,p)=>ih(l,m,p).map(v=>{const S=nn.filterItems(l,Vt(om,v));return At(S,k=>k.element)}),Gn=(l,m)=>{const p=(v,S)=>Z0(S,v);return nn.findItem(l,m,p).map(v=>v.element)},_w=(l,m,p)=>Ea(l).bind(v=>{const S=sm(v);return Ev(S,l,m,p)}),Tv=(l,m,p)=>{const v=sm(l);return dl(v,m,p)},T1=(l,m,p,v,S)=>{const k=sm(l),M=vo(l,p)?Y.some(m):Gn(k,m),I=vo(l,S)?Y.some(v):Gn(k,v);return M.bind(H=>I.bind(G=>dl(k,H,G)))},ve=(l,m,p)=>{const v=sm(l);return E1(v,m,p)},sm=nn.fromTable;var j_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Wu=()=>{const l=G=>ne.fromDom(G.dom.cloneNode(!1)),m=G=>of(G).dom,p=G=>wa(G)?xo(G)==="body"?!0:Uo(j_,xo(G)):!1,v=G=>wa(G)?Uo(["br","img","hr","input"],xo(G)):!1,S=G=>wa(G)&&Ll(G,"contenteditable")==="false",k=(G,se)=>G.dom.compareDocumentPosition(se.dom),M=(G,se)=>{const Te=Ic(G);tl(se,Te)},I=G=>{const se=xo(G);return Uo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],se)},H=G=>wa(G)?Va(G,"lang"):Y.none();return{up:Z({selector:Au,closest:Qs,predicate:Zo,all:Id}),down:Z({selector:xa,predicate:Hg}),styles:Z({get:Vd,getRaw:lf,set:yo,remove:so}),attrs:Z({get:Ll,set:bs,remove:Mo,copyTo:M}),insert:Z({before:Fd,after:ku,afterAll:Fn,append:Xo,appendAll:fc,prepend:ca,wrap:j0}),remove:Z({unwrap:Zp,remove:lr}),create:Z({nu:ne.fromTag,clone:l,text:ne.fromText}),query:Z({comparePosition:k,prevSibling:Fg,nextSibling:sf}),property:Z({children:jn,name:xo,parent:zl,document:m,isText:$d,isComment:uo,isElement:wa,isSpecial:I,getLanguage:H,getText:th,setText:W_,isBoundary:p,isEmptyTag:v,isNonEditable:S}),eq:vo,is:D_}};const G_=(l,m,p,v)=>{const S=p[0],k=p.slice(1);return v(l,m,S,k)},rm=(l,m,p)=>p.length>0?G_(l,m,p,_v):Y.none(),_v=(l,m,p,v)=>{const S=m(l,p);return ra(v,(k,M)=>{const I=m(l,M);return Bi(l,k,I)},S)},Bi=(l,m,p)=>m.bind(v=>p.filter(Vt(l.eq,v))),kv=(l,m)=>Vt(l.eq,m),Tf=(l,m,p,v=Dt)=>{const S=[m].concat(l.up().all(m)),k=[p].concat(l.up().all(p)),M=se=>Qm(se,v).fold(()=>se,We=>se.slice(0,We+1)),I=M(S),H=M(k),G=N(I,se=>Fe(H,kv(l,se)));return{firstpath:I,secondpath:H,shared:G}},Jn=rm,ml=Tf,kw=Wu(),ei=(l,m)=>Jn(kw,(p,v)=>l(v),m),Ov=(l,m,p)=>ml(kw,l,m,p),lh=l=>Au(l,"table"),_f=(l,m,p)=>{const v=S=>k=>p!==void 0&&p(k)||vo(k,S);return vo(l,m)?Y.some({boxes:Y.some([l]),start:l,finish:m}):lh(l).bind(S=>lh(m).bind(k=>{if(vo(S,k))return Y.some({boxes:Tv(S,l,m),start:l,finish:m});if(Z0(S,k)){const M=zg(m,"td,th",v(S)),I=M.length>0?M[M.length-1]:m;return Y.some({boxes:T1(S,l,S,m,k),start:l,finish:I})}else if(Z0(k,S)){const M=zg(l,"td,th",v(k)),I=M.length>0?M[M.length-1]:l;return Y.some({boxes:T1(k,l,S,m,k),start:l,finish:I})}else return Ov(l,m).shared.bind(M=>Qs(M,"table",p).bind(I=>{const H=zg(m,"td,th",v(I)),G=H.length>0?H[H.length-1]:m,se=zg(l,"td,th",v(I)),Te=se.length>0?se[se.length-1]:l;return Y.some({boxes:T1(I,l,S,m,k),start:Te,finish:G})}))}))},uh=(l,m)=>{const p=xa(l,m);return p.length>0?Y.some(p):Y.none()},Oa=(l,m)=>N(l,p=>Sa(p,m)),Ow=(l,m,p)=>Vl(l,m).bind(v=>Vl(l,p).bind(S=>ei(lh,[v,S]).map(k=>({first:v,last:S,table:k})))),dh=(l,m)=>Au(l,"table").bind(p=>Vl(p,m).bind(v=>_f(v,l).bind(S=>S.boxes.map(k=>({boxes:k,start:S.start,finish:S.finish}))))),Av=(l,m,p,v,S)=>Oa(l,S).bind(k=>_w(k,m,p).bind(M=>dh(M,v))),Zu=(l,m)=>uh(l,m),Rv=(l,m,p)=>Ow(l,m,p).bind(v=>{const S=H=>vo(l,H),k="thead,tfoot,tbody,table",M=Au(v.first,k,S),I=Au(v.last,k,S);return M.bind(H=>I.bind(G=>vo(H,G)?ve(v.table,v.first,v.last):Y.none()))}),Aw=kt,Dv=l=>{const m=(v,S)=>Va(v,S).exists(k=>parseInt(k,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&bo(l,p)?Y.some(l):Y.none()},Rw=(l,m,p)=>m.length<=1?Y.none():Rv(l,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Rr="data-mce-selected",Aa="td["+Rr+"],th["+Rr+"]",Oe="["+Rr+"]",_1="data-mce-first-selected",Us="td["+_1+"],th["+_1+"]",k1="data-mce-last-selected",Dw="td["+k1+"],th["+k1+"]",Qn=Oe,Kl={selected:Rr,selectedSelector:Aa,firstSelected:_1,firstSelectedSelector:Us,lastSelected:k1,lastSelectedSelector:Dw},O1=(l,m,p)=>({element:p,mergable:Rw(m,l,Kl),unmergable:Dv(l),selection:Aw(l)}),q_=(l,m,p)=>({element:l,clipboard:m,generators:p}),Yl=(l,m,p,v)=>({selection:Aw(l),clipboard:p,generators:v}),A1=l=>Ea(l).bind(m=>Zu(m,Kl.firstSelectedSelector)).fold(Z(l),m=>m[0]),Ni=l=>(m,p)=>{const v=xo(m),S=v==="col"||v==="colgroup"?A1(m):m;return Qs(S,l,p)},Mw=Ni("th,td,caption"),Mv=Ni("th,td"),qn=l=>Oi(l.model.table.getSelectedCells()),kf=l=>ts(qn(l),m=>Sa(m,Kl.selectedSelector)),Ao=l=>Ea(l[0]).map(m=>{const p=hw(m,Qn);return Zr(p),[p]}),Bw=(l,m)=>At(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),Ra=l=>At(l,m=>m.dom.innerText).join(""),Of=(l,m)=>{l.on("BeforeGetContent",p=>{const v=S=>{p.preventDefault(),Ao(S).each(k=>{p.content=p.format==="text"?Ra(k):Bw(l,k)})};if(p.selection===!0){const S=kf(l);S.length>=1&&v(S)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=qn(l);fe(v).each(S=>{Ea(S).each(k=>{const M=ts(il(p.content),H=>xo(H)!=="meta"),I=aa("table");if(Di(l)&&M.length===1&&I(M[0])){p.preventDefault();const H=ne.fromDom(l.getDoc()),G=S1(H),se=q_(S,M[0],G);m.pasteCells(k,se).each(()=>{l.focus()})}})})}})},Da=(l,m)=>({element:l,offset:m}),K_=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(v=>K_(l,v,p).orThunk(()=>Y.some(v))):Y.none(),Y_=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,X_=(l,m)=>{const p=K_(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return Da(p,Y_(l,p));const v=l.property().children(p);return v.length>0?X_(l,v[v.length-1]):Da(p,Y_(l,p))},J_=X_,Ds=Wu(),jr=l=>J_(Ds,l),mh=(l,m)=>{Ud(l)||b1(l).each(v=>{const S=v.value/2;be(l,S,v.unit),be(m,S,v.unit)})},ju=l=>At(l,Z(0)),Bv=(l,m,p,v,S)=>S(l.slice(0,m)).concat(v).concat(S(l.slice(p))),Af=l=>(m,p,v,S)=>{if(l(v)){const k=Math.max(S,m[p]-Math.abs(v)),M=Math.abs(k-m[p]);return v>=0?M:-M}else return v},fl=Af(l=>l<0),Rf=Af(he),am=()=>{const l=(I,H,G,se,Te)=>{const We=fl(I,H,se,Te);return Bv(I,H,G+1,[We,0],ju)},m=(I,H,G,se)=>{const Te=(100+G)/100,We=Math.max(se,(I[H]+G)/Te);return At(I,(Le,Be)=>(Be===H?We:Le/Te)-Le)},p=(I,H,G,se,Te,We)=>We?m(I,H,se,Te):l(I,H,G,se,Te);return{resizeTable:(I,H)=>I(H),clampTableDelta:fl,calcLeftEdgeDeltas:p,calcMiddleDeltas:(I,H,G,se,Te,We,Le)=>p(I,G,se,Te,We,Le),calcRightEdgeDeltas:(I,H,G,se,Te,We)=>{if(We)return m(I,G,se,Te);{const Le=fl(I,G,se,Te);return ju(I.slice(0,G)).concat([Le])}},calcRedestributedWidths:(I,H,G,se)=>{if(se){const We=(H+G)/H,Le=At(I,Be=>Be/We);return{delta:We*100-100,newSizes:Le}}else return{delta:G,newSizes:I}}}},Gu=()=>{const l=(M,I,H,G,se)=>{const Te=G>=0?H:I,We=Rf(M,Te,G,se);return Bv(M,I,H+1,[We,-We],ju)};return{resizeTable:(M,I,H)=>{H&&M(I)},clampTableDelta:(M,I,H,G,se)=>{if(se){if(H>=0)return H;{const Te=xe(M,(We,Le)=>We+Le-G,0);return Math.max(-Te,H)}}else return fl(M,I,H,G)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(M,I,H,G,se,Te)=>l(M,H,G,se,Te),calcRightEdgeDeltas:(M,I,H,G,se,Te)=>{if(Te)return ju(M);{const We=G/M.length;return At(M,Z(We))}},calcRedestributedWidths:(M,I,H,G)=>({delta:0,newSizes:M})}},gl=l=>nn.fromTable(l).grid,cm=aa("th"),im=l=>bo(l,m=>cm(m.element)),Q_=(l,m)=>l&&m?"sectionCells":l?"section":"cells",Nv=l=>{const m=l.section==="thead",p=rf(R1(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Q_(m,p)}:{type:"body"}},R1=l=>{const m=ts(l,p=>cm(p.element));return m.length===0?Y.some("td"):m.length===l.length?Y.some("th"):Y.none()},Nw=l=>{const m=At(l,S=>Nv(S).type),p=Uo(m,"header"),v=Uo(m,"footer");if(!p&&!v)return Y.some("body");{const S=Uo(m,"body");return p&&!S&&!v?Y.some("header"):!p&&!S&&v?Y.some("footer"):Y.none()}},Pv=l=>Er(l.all,m=>{const p=Nv(m);return p.type==="header"?Y.from(p.subType):Y.none()}),D1=(l,m,p)=>Eo(p(l.element,m),!0,l.isLocked),$v=(l,m)=>l.section!==m?zc(l.element,l.cells,m,l.isNew):l,M1=()=>({transformRow:$v,transformCell:(l,m,p)=>{const v=p(l.element,m),S=xo(v)!=="td"?G0(v,"td"):v;return Eo(S,l.isNew,l.isLocked)}}),Df=()=>({transformRow:$v,transformCell:D1}),B1=()=>({transformRow:(l,m)=>$v(l,m==="thead"?"tbody":m),transformCell:D1}),Pi={getTableSectionType:(l,m)=>{const p=nn.fromTable(l);switch(Pv(p).getOr(m)){case"section":return M1();case"sectionCells":return Df();case"cells":return B1()}},section:M1,sectionCells:Df,cells:B1,fallback:()=>({transformRow:kt,transformCell:D1})},Mf=(l,m,p,v)=>{p===v?Mo(l,m):bs(l,m,p)},Pw=(l,m,p)=>{Tu(It(l,m)).fold(()=>ca(l,p),v=>ku(v,p))},$w=(l,m)=>{const p=gn(l,m).getOrThunk(()=>{const v=ne.fromTag(m,Ig(l).dom);return m==="thead"?Pw(l,"caption,colgroup",v):m==="colgroup"?Pw(l,"caption",v):Xo(l,v),v});return Wa(p),p},N1=(l,m)=>{const p=[],v=[],S=Le=>At(Le,Be=>{Be.isNew&&p.push(Be.element);const ot=Be.element;return Wa(ot),Ee(Be.cells,Se=>{Se.isNew&&v.push(Se.element),Mf(Se.element,"colspan",Se.colspan,1),Mf(Se.element,"rowspan",Se.rowspan,1),Xo(ot,Se.element)}),ot}),k=Le=>ps(Le,Be=>At(Be.cells,ot=>(Mf(ot.element,"span",ot.colspan,1),ot.element))),M=(Le,Be)=>{const ot=$w(l,Be),Pe=(Be==="colgroup"?k:S)(Le);fc(ot,Pe)},I=Le=>{gn(l,Le).each(lr)},H=(Le,Be)=>{Le.length>0?M(Le,Be):I(Be)},G=[],se=[],Te=[],We=[];return Ee(m,Le=>{switch(Le.section){case"thead":G.push(Le);break;case"tbody":se.push(Le);break;case"tfoot":Te.push(Le);break;case"colgroup":We.push(Le);break}}),H(We,"colgroup"),H(G,"thead"),H(se,"tbody"),H(Te,"tfoot"),{newRows:p,newCells:v}},qu=l=>At(l,m=>{const p=Lc(m.element);return Ee(m.cells,v=>{const S=Hd(v.element);Mf(S,"colspan",v.colspan,1),Mf(S,"rowspan",v.rowspan,1),Xo(p,S)}),p}),tk=(l,m)=>At(l,p=>Ta(p,m)),Iv=(l,m)=>l[m],fh=(l,m)=>{if(l.length===0)return 0;const p=l[0];return Qm(l,S=>!m(p.element,S.element)).getOr(l.length)},nk=(l,m,p,v)=>{const S=Iv(l,m),k=S.section==="colgroup",M=fh(S.cells.slice(p),v),I=k?1:fh(tk(l.slice(m),p),v);return{colspan:M,rowspan:I}},P1=(l,m)=>{const p=At(l,S=>At(S.cells,Dt)),v=(S,k,M,I)=>{for(let H=S;H<S+M;H++)for(let G=k;G<k+I;G++)p[H][G]=!0};return At(l,(S,k)=>{const M=ps(S.cells,(I,H)=>{if(p[k][H]===!1){const G=nk(l,k,H,m);return v(k,H,G.rowspan,G.colspan),[q0(I.element,G.rowspan,G.colspan,I.isNew)]}else return[]});return WC(S.element,M,S.section,S.isNew)})},Bf=(l,m,p)=>{const v=[];Ee(l.colgroups,S=>{const k=[];for(let M=0;M<l.grid.columns;M++){const I=nn.getColumnAt(l,M).map(H=>Eo(H.element,p,!1)).getOrThunk(()=>Eo(m.colGap(),!0,!1));k.push(I)}v.push(zc(S.element,k,"colgroup",p))});for(let S=0;S<l.grid.rows;S++){const k=[];for(let H=0;H<l.grid.columns;H++){const G=nn.getAt(l,S,H).map(se=>Eo(se.element,p,se.isLocked)).getOrThunk(()=>Eo(m.gap(),!0,!1));k.push(G)}const M=l.all[S],I=zc(M.element,k,M.section,p);v.push(I)}return v},Iw=(l,m)=>Bf(l,m,!1),$1=l=>P1(l,vo),Fv=(l,m)=>Er(l.all,p=>N(p.cells,v=>vo(m,v.element))),Fw=(l,m,p)=>{const v=At(m.selection,k=>Jp(k).bind(M=>Fv(l,M)).filter(p)),S=vs(v);return J0(S.length>0,S)},gr=(l,m,p,v,S)=>(k,M,I,H)=>{const G=nn.fromTable(k),se=Y.from(H==null?void 0:H.section).getOrThunk(Pi.fallback);return m(G,M).map(We=>{const Le=Iw(G,I),Be=l(Le,We,vo,S(I),se),ot=Io(Be.grid),Se=$1(Be.grid);return{info:We,grid:Se,cursor:Be.cursor,lockedColumns:ot}}).bind(We=>{const Le=N1(k,We.grid),Be=Y.from(H==null?void 0:H.sizing).getOrThunk(()=>Xc.getTableSize(k)),ot=Y.from(H==null?void 0:H.resize).getOrThunk(Gu);return p(k,We.grid,We.info,{sizing:Be,resize:ot,section:se}),v(k),Mo(k,bc),We.lockedColumns.length>0&&bs(k,bc,We.lockedColumns.join(",")),Y.some({cursor:We.cursor,newRows:Le.newRows,newCells:Le.newCells})})},gh=(l,m)=>Jp(m.element).bind(p=>Fv(l,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Lv=(l,m)=>Fw(l,m,he).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Nf=(l,m)=>m.mergable,Lw=(l,m)=>m.unmergable,$i=(l,m)=>Fw(l,m,he),ma=(l,m)=>Fw(l,m,p=>!p.isLocked),Pf=(l,m)=>Fv(l,m).exists(p=>!p.isLocked),$f=(l,m)=>bo(m,p=>Pf(l,p)),hh=(l,m)=>Nf(l,m).filter(p=>$f(l,p.cells)),ok=(l,m)=>Lw(l,m).filter(p=>$f(l,p)),sk=(l,m,p,v)=>{const S=tr(l).rows;if(S.length===0)return l;for(let k=m.startRow;k<=m.finishRow;k++)for(let M=m.startCol;M<=m.finishCol;M++){const I=S[k],H=Ta(I,M).isLocked;Ut(I,M,Eo(v(),!1,H))}return l},lm=(l,m,p,v)=>{const S=tr(l).rows;let k=!0;for(let M=0;M<S.length;M++)for(let I=0;I<pc(S[0]);I++){const H=S[M],G=Ta(H,I),se=G.element,Te=p(se,m);Te&&!k?Ut(H,I,Eo(v(),!0,G.isLocked)):Te&&(k=!1)}return l},Ma=(l,m)=>xe(l,(p,v)=>Fe(p,S=>m(S.element,v.element))?p:p.concat([v]),[]),Hw=(l,m,p,v)=>(m>0&&m<l[0].cells.length&&Ee(l,S=>{const k=S.cells[m-1];let M=0;const I=v();for(;S.cells.length>m+M&&p(k.element,S.cells[m+M].element);)Ut(S,m+M,Eo(I,!0,S.cells[m+M].isLocked)),M++}),l),qo=(l,m,p,v)=>{const S=tr(l).rows;if(m>0&&m<S.length){const k=S[m-1].cells,M=Ma(k,p);Ee(M,I=>{let H=Y.none();for(let G=m;G<S.length;G++)for(let se=0;se<pc(S[0]);se++){const Te=S[G],We=Ta(Te,se);p(We.element,I.element)&&(H.isNone()&&(H=Y.some(v())),H.each(Be=>{Ut(Te,se,Eo(Be,!0,We.isLocked))}))}})}return l},um=l=>{const m=k=>k(l),p=Z(l),v=()=>S,S={tag:!0,inner:l,fold:(k,M)=>M(l),isValue:he,isError:Dt,map:k=>I1.value(k(l)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:k=>{k(l)},toOptional:()=>Y.some(l)};return S},Ba=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(v,S)=>v(l),isValue:Dt,isError:he,map:m,mapError:v=>I1.error(v(l)),bind:m,exists:Dt,forall:he,getOr:kt,or:kt,getOrThunk:tt,orThunk:tt,getOrDie:gt(String(l)),each:Ye,toOptional:Y.none};return p},I1={value:um,error:Ba,fromOption:(l,m)=>l.fold(()=>Ba(m),um)},If=(l,m,p)=>{if(l.row>=m.length||l.column>pc(m[0]))return I1.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),S=v[0].cells.slice(l.column),k=pc(p[0]),M=p.length;return I1.value({rowDelta:v.length-M,colDelta:S.length-k})},dm=(l,m)=>{const p=pc(l[0]),v=pc(m[0]);return{rowDelta:0,colDelta:p-v}},Ii=(l,m)=>{const p=l.length,v=m.length;return{rowDelta:p-v,colDelta:0}},Na=(l,m,p,v)=>{const S=m.section==="colgroup"?p.col:p.cell;return ho(l,k=>Eo(S(),!0,v(k)))},Hv=(l,m,p,v)=>{const S=l[l.length-1];return l.concat(ho(m,()=>{const k=S.section==="colgroup"?p.colgroup:p.row,M=da(S,k,kt),I=Na(M.cells.length,M,p,H=>ks(v,H.toString()));return Cs(M,I)}))},zv=(l,m,p,v)=>At(l,S=>{const k=Na(m,S,p,Dt);return r1(S,v,k)}),Vv=(l,m,p)=>At(l,v=>xe(p,(S,k)=>{const M=Na(1,v,m,he)[0];return rw(S,k,M)},v)),mm=(l,m,p)=>{const v=m.colDelta<0?zv:kt,S=m.rowDelta<0?Hv:kt,k=Io(l),M=pc(l[0]),I=Fe(k,se=>se===M-1),H=v(l,Math.abs(m.colDelta),p,I?M-1:M),G=Io(H);return S(H,Math.abs(m.rowDelta),p,$t(G,he))},rk=(l,m,p,v)=>{const S=Ta(l[m],p),k=Vt(v,S.element),M=l[m];return l.length>1&&pc(M)>1&&(p>0&&k(ua(M,p-1))||p<M.cells.length-1&&k(ua(M,p+1))||m>0&&k(ua(l[m-1],p))||m<l.length-1&&k(ua(l[m+1],p)))},fm=(l,m,p,v,S,k)=>{const M=l.row,I=l.column,H=p.length,G=pc(p[0]),se=M+H,Te=I+G+k.length,We=$t(k,he);for(let Le=M;Le<se;Le++){let Be=0;for(let ot=I;ot<Te;ot++){if(We[ot]){Be++;continue}rk(m,Le,ot,S)&&lm(m,ua(m[Le],ot),S,v.cell);const Se=ot-I-Be,Pe=Ta(p[Le-M],Se),Ct=Pe.element,ze=v.replace(Ct);Ut(m[Le],ot,Eo(ze,!0,Pe.isLocked))}}return m},hl=(l,m,p)=>{const v=pc(m[0]),S=tr(m).cols.length+l.row,k=ho(v-l.column,I=>I+l.column),M=N(k,I=>bo(p,H=>H!==I)).getOr(v-1);return{row:S,column:M}},ph=(l,m,p)=>ts(p,v=>v>=l.column&&v<=pc(m[0])+l.column),rn=(l,m,p,v,S)=>{const k=Io(m),M=hl(l,m,k),I=tr(p).rows,H=ph(M,I,k);return If(M,m,I).map(se=>{const Te={...se,colDelta:se.colDelta-H.length},We=mm(m,Te,v),Le=Io(We),Be=ph(M,I,Le);return fm(M,We,I,v,S,Be)})},Gr=(l,m,p,v,S)=>{Hw(m,l,S,v.cell);const k=Ii(p,m),M=mm(p,k,v),I=Ii(m,M),H=mm(m,I,v);return At(H,(G,se)=>r1(G,l,M[se].cells))},xc=(l,m,p,v,S)=>{qo(m,l,S,v.cell);const k=Io(m),M=dm(m,p),I={...M,colDelta:M.colDelta-k.length},H=mm(m,I,v),{cols:G,rows:se}=tr(H),Te=Io(H),We=dm(p,m),Le={...We,colDelta:We.colDelta+Te.length},Be=Vv(p,v,Te),ot=mm(Be,Le,v);return[...G,...se.slice(0,l),...ot,...se.slice(l,se.length)]},Xl=(l,m,p,v)=>da(l,S=>v(S,p),m),Kn=(l,m,p,v,S)=>{const{rows:k,cols:M}=tr(l),I=k.slice(0,m),H=k.slice(m),G=Xl(k[p],(se,Te)=>m>0&&m<k.length&&v(ua(k[m-1],Te),ua(k[m],Te))?Ta(k[m],Te):Eo(S(se.element,v),!0,se.isLocked),v,S);return[...M,...I,G,...H]},zw=(l,m,p,v,S,k,M)=>{if(p==="colgroup"||!v){const I=Ta(l,S);return Eo(M(I.element,k),!0,!1)}else return Ta(l,m)},F1=(l,m,p,v,S)=>At(l,k=>{const M=m>0&&m<pc(k)&&v(ua(k,m-1),ua(k,m)),I=zw(k,m,k.section,M,p,v,S);return rw(k,m,I)}),bh=(l,m)=>ps(l,p=>{const v=p.cells,S=ra(m,(k,M)=>M>=0&&M<k.length?k.slice(0,M).concat(k.slice(M+1)):k,v);return S.length>0?[zc(p.element,S,p.section,p.isNew)]:[]}),L1=(l,m,p)=>{const{rows:v,cols:S}=tr(l);return[...S,...v.slice(0,m),...v.slice(p+1)]},ak=(l,m,p,v)=>ua(l[m],p)!==void 0&&m>0&&v(ua(l[m-1],p),ua(l[m],p)),Co=(l,m,p)=>m>0&&p(ua(l,m-1),ua(l,m)),Uv=(l,m,p,v)=>ak(l,m,p,v)||Co(l[m],p,v),ck=(l,m)=>bo(m,kt)&&im(l.cells)?he:(v,S,k)=>!(xo(v.element)==="th"&&m[k]),ik=(l,m)=>bo(m,kt)&&im(l)?he:(v,S,k)=>!(xo(v.element)==="th"&&m[S]),Ff=(l,m,p,v)=>{const S=M=>M==="row"?Os(m):Ud(m),k=M=>S(M)?`${M}group`:M;return l?cm(m)?k(p):null:v&&cm(m)?k(p==="row"?"col":"row"):null},qe=(l,m)=>(p,v,S)=>Y.some(Ff(l,p.element,"col",m[S])),lk=(l,m)=>(p,v)=>Y.some(Ff(l,p.element,"row",m[v])),Vw=(l,m,p)=>Eo(p(l.element,m),!0,l.isLocked),H1=(l,m,p,v,S,k,M)=>{const I=H=>Fe(m,G=>p(H.element,G.element));return At(l,(H,G)=>a1(H,(se,Te)=>{if(I(se)){const We=M(se,G,Te)?S(se,p,v):se;return k(We,G,Te).each(Le=>{Wp(We.element,{scope:Y.from(Le)})}),We}else return se}))},Wv=(l,m,p)=>ps(l,(v,S)=>Uv(l,S,m,p)?[]:[Ta(v,m)]),uk=(l,m,p)=>{const v=l[m];return ps(v.cells,(S,k)=>Uv(l,m,k,p)?[]:[S])},vh=(l,m,p,v,S)=>{const k=tr(l).rows,M=ps(m,se=>Wv(k,se,v)),I=At(k,se=>im(se.cells)),H=ik(M,I),G=lk(p,I);return H1(l,M,v,S,Vw,G,H)},yh=(l,m,p,v,S,k,M)=>{const{cols:I,rows:H}=tr(l),G=H[m[0]],se=ps(m,Se=>uk(H,Se,S)),Te=At(G.cells,(Se,Pe)=>im(Wv(H,Pe,S))),We=[...H];Ee(m,Se=>{We[Se]=M.transformRow(H[Se],p)});const Le=[...I,...We],Be=ck(G,Te),ot=qe(v,Te);return H1(Le,se,S,k,M.transformCell,ot,Be)},gm=(l,m,p,v)=>{const S=tr(l).rows,k=At(m,M=>Ta(S[M.row],M.column));return H1(l,k,p,v,Vw,Y.none,he)},pl={generate:l=>{if(!So(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Ee(l,(v,S)=>{const k=Et(v);if(k.length!==1)throw new Error("one and only one name per case");const M=k[0],I=v[M];if(p[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!So(I))throw new Error("case arguments must be an array");m.push(M),p[M]=(...H)=>{const G=H.length;if(G!==I.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+I.length+" ("+I+"), got "+G);return{fold:(...Te)=>{if(Te.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Te.length);return Te[S].apply(null,H)},match:Te=>{const We=Et(Te);if(m.length!==We.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+We.join(","));if(!bo(m,Be=>Uo(We,Be)))throw new Error("Not all branches were specified when using match. Specified: "+We.join(", ")+`
Required: `+m.join(", "));return Te[M].apply(null,H)},log:Te=>{console.log(Te,{constructors:m,constructor:M,params:H})}}}}),p}},Jl={...pl.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Uw=(l,m)=>l.length===0?Jl.none():l.length===1?Jl.only(0):m===0?Jl.left(0,1):m===l.length-1?Jl.right(m-1,m):m>0&&m<l.length-1?Jl.middle(m-1,m,m+1):Jl.none(),Fi=(l,m,p,v,S)=>{const k=l.slice(0),M=Uw(l,m),I=Z(At(k,Z(0))),H=We=>v.singleColumnWidth(k[We],p),G=(We,Le)=>S.calcLeftEdgeDeltas(k,We,Le,p,v.minCellWidth(),v.isRelative),se=(We,Le,Be)=>S.calcMiddleDeltas(k,We,Le,Be,p,v.minCellWidth(),v.isRelative),Te=(We,Le)=>S.calcRightEdgeDeltas(k,We,Le,p,v.minCellWidth(),v.isRelative);return M.fold(I,H,G,se,Te)},Ww=(l,m,p)=>{let v=0;for(let S=l;S<m;S++)v+=p[S]!==void 0?p[S]:0;return v},Lf=(l,m)=>{const p=nn.justCells(l);return At(p,v=>{const S=Ww(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},mk=(l,m)=>{const p=nn.justColumns(l);return At(p,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},fk=(l,m)=>At(l.all,(p,v)=>({element:p.element,height:m[v]})),gk=l=>ra(l,(m,p)=>m+p,0),Zv=(l,m)=>nn.hasColumns(l)?mk(l,m):Lf(l,m),z1=(l,m,p)=>{const v=Zv(l,m);Ee(v,S=>{p.setElementWidth(S.element,S.width)})},Zw=(l,m,p,v,S)=>{const k=nn.fromTable(l),M=S.getCellDelta(m),I=S.getWidths(k,S),H=p===k.grid.columns-1,G=v.clampTableDelta(I,p,M,S.minCellWidth(),H),se=Fi(I,p,G,S,v),Te=At(se,(We,Le)=>We+I[Le]);z1(k,Te,S),v.resizeTable(S.adjustTableWidth,G,H)},jv=(l,m,p)=>{const v=nn.fromTable(l),S=te(v,l),k=At(S,(H,G)=>p===G?Math.max(m+H,Yp()):H),M=fk(v,k);Ee(M,H=>{$u(H.element,H.height)}),Ee(nn.justCells(v),H=>{Xd(H.element)});const I=gk(k);$u(l,I)},hk=(l,m,p,v,S)=>{const k=nn.generate(m),M=v.getWidths(k,v),I=v.pixelWidth(),{newSizes:H,delta:G}=S.calcRedestributedWidths(M,I,p.pixelDelta,v.isRelative);z1(k,H,v),v.adjustTableWidth(G)},Ch=(l,m,p,v)=>{const S=nn.generate(m),k=v.getWidths(S,v);z1(S,k,v)},Ku=l=>xe(l,(p,v)=>Fe(p,k=>k.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),Hf=aa("col"),V1=aa("colgroup"),Gv=l=>xo(l)==="tr"||V1(l),U1=l=>{const m=ys(l,"colspan",1),p=ys(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},qv=(l,m=U1)=>{const p=I=>Hf(I.element)?l.col(I):l.cell(I),v=I=>V1(I.element)?l.colgroup(I):l.row(I),S=I=>{if(Gv(I))return v({element:I});{const H=I,G=p(m(H));return k=Y.some({item:H,replacement:G}),G}};let k=Y.none();return{getOrInit:(I,H)=>k.fold(()=>S(I),G=>H(I,G.item)?G.replacement:S(I))}},Kv=l=>m=>{const p=[],v=(M,I)=>N(p,H=>I(H.item,M)),S=M=>{const I=l==="td"?{scope:null}:{},H=m.replace(M,l,I);return p.push({item:M,sub:H}),H};return{replaceOrInit:(M,I)=>{if(Gv(M)||Hf(M))return M;{const H=M;return v(H,I).fold(()=>S(H),G=>I(M,G.item)?G.sub:S(H))}}}},Yv=l=>Va(l,"scope").map(m=>m.substr(0,3)),Ws={modification:qv,transform:Kv,merging:l=>({unmerge:v=>{const S=Yv(v);return S.each(k=>bs(v,"scope",k)),()=>{const k=l.cell({element:v,colspan:1,rowspan:1});return so(k,"width"),so(v,"width"),S.each(M=>bs(k,"scope",M)),k}},merge:v=>{const S=()=>{const k=vs(At(v,Yv));if(k.length===0)return Y.none();{const M=k[0],I=["row","col"];return Fe(k,G=>G!==M&&Uo(I,G))?Y.none():Y.from(M)}};return so(v[0],"width"),S().fold(()=>Mo(v[0],"scope"),k=>bs(v[0],"scope",k+"group")),Z(v[0])}})},pk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Gw=(l,m)=>{const p=l.property().name(m);return Uo(["ol","ul"],p)},Yu=(l,m)=>{const p=l.property().name(m);return Uo(pk,p)},hm=(l,m)=>Uo(["br","img","hr","input"],l.property().name(m)),Xv=Wu(),ie=l=>Yu(Xv,l),bl=l=>Gw(Xv,l),bk=l=>hm(Xv,l),qw=l=>{const m=aa("br"),p=H=>bo(H,G=>m(G)||$d(G)&&th(G).trim().length===0),v=H=>xo(H)==="li"||Zo(H,bl).isSome(),S=H=>sf(H).map(G=>ie(G)?!0:bk(G)?xo(G)!=="img":!1).getOr(!1),k=H=>vw(H).bind(G=>{const se=S(G);return zl(G).map(Te=>se===!0||v(Te)||m(G)||ie(Te)&&!vo(H,Te)?[]:[ne.fromTag("br")])}).getOr([]),I=(()=>{const H=ps(l,G=>{const se=jn(G);return p(se)?[]:se.concat(k(G))});return H.length===0?[ne.fromTag("br")]:H})();Wa(l[0]),fc(l[0],I)},wh=l=>ch(l,!0),Ec=l=>{Du(l).length===0&&lr(l)},Sh=(l,m)=>({grid:l,cursor:m}),Kw=l=>Er(l,m=>Er(m.cells,p=>{const v=p.element;return J0(wh(v),v)})),Jv=(l,m,p)=>{var v,S;const k=tr(l).rows;return Y.from((S=(v=k[m])===null||v===void 0?void 0:v.cells[p])===null||S===void 0?void 0:S.element).filter(wh).orThunk(()=>Kw(k))},Dr=(l,m,p)=>{const v=Jv(l,m,p);return Sh(l,v)},W1=l=>xe(l,(p,v)=>Fe(p,k=>k.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),Yw=(l,m,p,v)=>{const S=m[0].row,k=W1(m),M=ra(k,(I,H)=>({grid:Kn(I.grid,S,H.row+I.delta,p,v.getOrInit),delta:I.delta+1}),{grid:l,delta:0}).grid;return Dr(M,S,m[0].column)},vk=(l,m,p,v)=>{const S=W1(m),k=S[S.length-1],M=k.row+k.rowspan,I=ra(S,(H,G)=>Kn(H,M,G.row,p,v.getOrInit),l);return Dr(I,M,m[0].column)},Xw=(l,m,p,v)=>{const S=m.details,k=Ku(S),M=k[0].column,I=ra(k,(H,G)=>({grid:F1(H.grid,M,G.column+H.delta,p,v.getOrInit),delta:H.delta+1}),{grid:l,delta:0}).grid;return Dr(I,S[0].row,M)},yk=(l,m,p,v)=>{const S=m.details,k=S[S.length-1],M=k.column+k.colspan,I=Ku(S),H=ra(I,(G,se)=>F1(G,M,se.column,p,v.getOrInit),l);return Dr(H,S[0].row,M)},Jw=(l,m,p,v)=>{const S=Ku(m),k=At(S,I=>I.column),M=vh(l,k,!0,p,v.replaceOrInit);return Dr(M,m[0].row,m[0].column)},Ck=(l,m,p,v)=>{const S=gm(l,m,p,v.replaceOrInit);return Dr(S,m[0].row,m[0].column)},wk=(l,m,p,v)=>{const S=Ku(m),k=At(S,I=>I.column),M=vh(l,k,!1,p,v.replaceOrInit);return Dr(M,m[0].row,m[0].column)},Qw=(l,m,p,v)=>{const S=gm(l,m,p,v.replaceOrInit);return Dr(S,m[0].row,m[0].column)},zf=(l,m)=>(p,v,S,k,M)=>{const I=W1(v),H=At(I,se=>se.row),G=yh(p,H,l,m,S,k.replaceOrInit,M);return Dr(G,v[0].row,v[0].column)},Sk=zf("thead",!0),eS=zf("tbody",!1),Ho=zf("tfoot",!1),Z1=(l,m,p,v)=>{const S=Ku(m.details),k=bh(l,At(S,I=>I.column)),M=k.length>0?k[0].cells.length-1:0;return Dr(k,S[0].row,Math.min(S[0].column,M))},tS=(l,m,p,v)=>{const S=W1(m),k=L1(l,S[0].row,S[S.length-1].row),M=Math.max(tr(k).rows.length-1,0);return Dr(k,Math.min(m[0].row,M),m[0].column)},nS=(l,m,p,v)=>{const S=m.cells;qw(S);const k=sk(l,m.bounds,p,v.merge(S));return Sh(k,Y.from(S[0]))},j1=(l,m,p,v)=>{const k=ra(m,(M,I)=>lm(M,I,p,v.unmerge(I)),l);return Sh(k,Y.from(m[0]))},hr=(l,m,p,v)=>{const k=((H,G)=>{const se=nn.fromTable(H);return Bf(se,G,!0)})(m.clipboard,m.generators),M=jp(m.row,m.column);return rn(M,l,k,m.generators,p).fold(()=>Sh(l,Y.some(m.element)),H=>Dr(H,m.row,m.column))},Mr=(l,m,p)=>{const v=YC(l,p.section),S=nn.generate(v);return Bf(S,m,!0)},oS=(l,m,p,v)=>{const S=tr(l).rows,k=m.cells[0].column,M=S[m.cells[0].row],I=Mr(m.clipboard,m.generators,M),H=Gr(k,l,I,m.generators,p);return Dr(H,m.cells[0].row,m.cells[0].column)},sS=(l,m,p,v)=>{const S=tr(l).rows,k=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,M=S[m.cells[0].row],I=Mr(m.clipboard,m.generators,M),H=Gr(k,l,I,m.generators,p);return Dr(H,m.cells[0].row,k)},Qv=(l,m,p,v)=>{const S=tr(l).rows,k=m.cells[0].row,M=S[k],I=Mr(m.clipboard,m.generators,M),H=xc(k,l,I,m.generators,p);return Dr(H,m.cells[0].row,m.cells[0].column)},rS=(l,m,p,v)=>{const S=tr(l).rows,k=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,M=S[m.cells[0].row],I=Mr(m.clipboard,m.generators,M),H=xc(k,l,I,m.generators,p);return Dr(H,k,m.cells[0].column)},aS=(l,m)=>{const p=nn.fromTable(l);return $i(p,m).bind(S=>{const k=S[S.length-1],M=S[0].column,I=k.column+k.colspan,H=lo(At(p.all,G=>ts(G.cells,se=>se.column>=M&&se.column<I)));return R1(H)}).getOr("")},ey=(l,m)=>{const p=nn.fromTable(l);return $i(p,m).bind(R1).getOr("")},ty=(l,m)=>{const p=nn.fromTable(l);return $i(p,m).bind(S=>{const k=S[S.length-1],M=S[0].row,I=k.row+k.rowspan,H=p.all.slice(M,I);return Nw(H)}).getOr("")},G1=(l,m,p,v)=>Ch(l,m,p,v.sizing),Ql=(l,m,p,v)=>hk(l,m,p,v.sizing,v.resize),qr=(l,m)=>Fe(m,p=>p.column===0&&p.isLocked),ny=(l,m)=>Fe(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),xn=(l,m)=>{const p=bf(l),v=Ku(m);return xe(v,(S,k)=>{const I=p[k.column].map(Vn).getOr(0);return S+I},0)},Li=l=>(m,p)=>$i(m,p).filter(v=>!(l?qr:ny)(m,v)).map(v=>({details:v,pixelDelta:xn(m,v)})),xh=(l,m)=>ma(l,m).map(p=>({details:p,pixelDelta:-xn(l,p)})),cS=l=>(m,p)=>Lv(m,p).filter(v=>!(l?qr:ny)(m,v.cells)),q1=Ws.transform("th"),K1=Ws.transform("td"),Xu=gr(Yw,$i,Ye,Ye,Ws.modification),Zs=gr(vk,$i,Ye,Ye,Ws.modification),Ju=gr(Xw,Li(!0),Ql,Ye,Ws.modification),oy=gr(yk,Li(!1),Ql,Ye,Ws.modification),iS=gr(Z1,xh,Ql,Ec,Ws.modification),xk=gr(tS,$i,Ye,Ec,Ws.modification),Vf=gr(Jw,ma,Ye,Ye,q1),sy=gr(wk,ma,Ye,Ye,K1),ry=gr(Sk,ma,Ye,Ye,q1),ay=gr(eS,ma,Ye,Ye,K1),cy=gr(Ho,ma,Ye,Ye,K1),et=gr(Ck,ma,Ye,Ye,q1),Eh=gr(Qw,ma,Ye,Ye,K1),iy=gr(nS,hh,G1,Ye,Ws.merging),Uf=gr(j1,ok,G1,Ye,Ws.merging),ti=gr(hr,gh,G1,Ye,Ws.modification),Ek=gr(oS,cS(!0),Ye,Ye,Ws.modification),js=gr(sS,cS(!1),Ye,Ye,Ws.modification),Tk=gr(Qv,Lv,Ye,Ye,Ws.modification),Qu=gr(rS,Lv,Ye,Ye,Ws.modification),ly=aS,lS=ey,pr=ty,ed=(l,m)=>l.dispatch("NewRow",{node:m}),Y1=(l,m)=>l.dispatch("NewCell",{node:m}),td=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},_k=(l,m,p,v,S)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:S})},kk=l=>{l.dispatch("TableSelectionClear")},ms=(l,m,p,v,S)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:S})},ss=(l,m,p,v,S)=>{l.dispatch("ObjectResized",{target:m,width:p,height:v,origin:S})},fs={structure:!1,style:!0},Mn={structure:!0,style:!1},xs={structure:!0,style:!0},rs=(l,m)=>Hu(l)?Xc.percentageSize(m):ql(l)?Xc.pixelSize(m):Xc.getTableSize(m),uy=(l,m,p)=>{const v=zo=>xo(tm(zo))==="table",S=zo=>!v(l)||gl(zo).rows>1,k=zo=>!v(l)||gl(zo).columns>1,M=ww(l),I=x1(l)?Ye:mh,H=zo=>{switch(Sw(l)){case"section":return Pi.section();case"sectionCells":return Pi.sectionCells();case"cells":return Pi.cells();default:return Pi.getTableSectionType(zo,"section")}},G=(zo,xl)=>xl.cursor.fold(()=>{const Gh=Du(zo);return fe(Gh).filter(To).map(Ia=>{p.clearSelectedCells(zo.dom);const Ft=l.dom.createRng();return Ft.selectNode(Ia.dom),l.selection.setRng(Ft),bs(Ia,"data-mce-selected","1"),Ft})},Gh=>{const Ia=jr(Gh),Ft=l.dom.createRng();return Ft.setStart(Ia.element.dom,Ia.offset),Ft.setEnd(Ia.element.dom,Ia.offset),l.selection.setRng(Ft),p.clearSelectedCells(zo.dom),Y.some(Ft)}),se=(zo,xl,Gh,Ia)=>(Ft,u2,d2=!1)=>{Zr(Ft);const Ub=ne.fromDom(l.getDoc()),px=Qd(Gh,Ub,M),Bm={sizing:rs(l,Ft),resize:x1(l)?am():Gu(),section:H(Ft)};return xl(Ft)?zo(Ft,u2,px,Bm).bind(iu=>{m.refresh(Ft.dom),Ee(iu.newRows,qh=>{ed(l,qh.dom)}),Ee(iu.newCells,qh=>{Y1(l,qh.dom)});const bx=G(Ft,iu);return To(Ft)&&(Zr(Ft),d2||td(l,Ft.dom,Ia)),bx.map(qh=>({rng:qh,effect:Ia}))}):Y.none()},Te=se(xk,S,Ye,Mn),We=se(iS,k,Ye,Mn),Le=se(Xu,he,Ye,Mn),Be=se(Zs,he,Ye,Mn),ot=se(Ju,he,I,Mn),Se=se(oy,he,I,Mn),Pe=se(iy,he,Ye,Mn),Ct=se(Uf,he,Ye,Mn),ze=se(Ek,he,Ye,Mn),yn=se(js,he,Ye,Mn),Bn=se(Tk,he,Ye,Mn),kn=se(Qu,he,Ye,Mn),qs=se(ti,he,Ye,xs),as=se(et,he,Ye,Mn),Sl=se(Eh,he,Ye,Mn),hd=se(Vf,he,Ye,Mn),pd=se(sy,he,Ye,Mn),En=se(ry,he,Ye,Mn),Qr=se(ay,he,Ye,Mn),ea=se(cy,he,Ye,Mn);return{deleteRow:Te,deleteColumn:We,insertRowsBefore:Le,insertRowsAfter:Be,insertColumnsBefore:ot,insertColumnsAfter:Se,mergeCells:Pe,unmergeCells:Ct,pasteColsBefore:ze,pasteColsAfter:yn,pasteRowsBefore:Bn,pasteRowsAfter:kn,pasteCells:qs,makeCellsHeader:as,unmakeCellsHeader:Sl,makeColumnsHeader:hd,unmakeColumnsHeader:pd,makeRowsHeader:En,makeRowsBody:Qr,makeRowsFooter:ea,getTableRowType:pr,getTableCellType:lS,getTableColType:ly}},X1=(l,m,p)=>{const v=ys(l,m,1);p===1||v<=1?Mo(l,m):bs(l,m,Math.min(p,v))},dy=(l,m)=>p=>{const v=p.column+p.colspan-1,S=p.column;return v>=l&&S<m},uS=(l,m,p)=>{if(nn.hasColumns(l)){const v=ts(nn.justColumns(l),dy(m,p)),S=At(v,M=>{const I=Hd(M.element);return X1(I,"span",p-m),I}),k=ne.fromTag("colgroup");return fc(k,S),[k]}else return[]},dS=(l,m,p)=>At(l.all,v=>{const S=ts(v.cells,dy(m,p)),k=At(S,I=>{const H=Hd(I.element);return X1(H,"colspan",p-m),H}),M=ne.fromTag("tr");return fc(M,k),M}),J1=(l,m)=>{const p=nn.fromTable(l);return ma(p,m).map(S=>{const k=S[S.length-1],M=S[0].column,I=k.column+k.colspan,H=uS(p,M,I),G=dS(p,M,I);return[...H,...G]})},Q1=(l,m,p)=>{const v=nn.fromTable(l);return $i(v,m).bind(k=>{const M=Bf(v,p,!1),H=tr(M).rows.slice(k[0].row,k[k.length-1].row+k[k.length-1].rowspan),G=ps(H,Te=>{const We=ts(Te.cells,Le=>!Le.isLocked);return We.length>0?[{...Te,cells:We}]:[]}),se=$1(G);return J0(se.length>0,se)}).map(k=>qu(k))},pm=pl.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),my=(l,m,p)=>{const v=p.substring(0,p.length-l.length),S=parseFloat(v);return v===S.toString()?m(S):pm.invalid(p)},bm={...pm,from:l=>Ci(l,"%")?my("%",pm.percent,l):Ci(l,"px")?my("px",pm.pixels,l):pm.invalid(l)},Ok=(l,m)=>At(l,p=>bm.from(p).fold(()=>p,S=>S/m*100+"%",S=>S+"%")),fa=(l,m,p)=>{const v=p/m;return At(l,S=>bm.from(S).fold(()=>S,M=>M*v+"px",M=>M/100*p+"px"))},VD=(l,m)=>{const p=l.fold(()=>Z(""),v=>{const S=v/m;return Z(S+"px")},()=>{const v=100/m;return Z(v+"%")});return ho(m,p)},Ak=(l,m,p)=>l.fold(()=>m,v=>fa(m,p,v),v=>Ok(m,p)),Ya=(l,m,p)=>{const v=bm.from(p),S=bo(l,k=>k==="0px")?VD(v,l.length):Ak(v,l,m);return Kr(S)},Th=(l,m)=>l.length===0?m:ra(l,(p,v)=>bm.from(v).fold(Z(0),kt,kt)+p,0),_h=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},Hi=(l,m)=>bm.from(l).fold(Z(l),p=>p+m+"px",p=>p+m+"%"),Kr=l=>{if(l.length===0)return l;const m=ra(l,(v,S)=>{const k=bm.from(S).fold(()=>({value:S,remainder:0}),M=>_h(M,"px"),M=>({value:M+"%",remainder:0}));return{output:[k.value].concat(v.output),remainder:v.remainder+k.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Hi(p[p.length-1],Math.round(m.remainder))])},nd=bm.from,fy=(l,m,p)=>{Ee(m,v=>{const S=l.slice(v.column,v.colspan+v.column),k=Th(S,uf());yo(v.element,"width",k+p)})},eb=(l,m,p)=>{Ee(m,(v,S)=>{const k=Th([l[S]],uf());yo(v.element,"width",k+p)})},mS=(l,m,p)=>{Ee(p,v=>{so(v.element,"height")}),Ee(m,(v,S)=>{yo(v.element,"height",l[S])})},vm=l=>nd(l).fold(Z("px"),Z("px"),Z("%")),gy=(l,m,p)=>{const v=nn.fromTable(l),S=v.all,k=nn.justCells(v),M=nn.justColumns(v);m.each(I=>{const H=vm(I),G=er(l),se=al(v,l),Te=Ya(se,G,I);nn.hasColumns(v)?eb(Te,M,H):fy(Te,k,H),yo(l,"width",I)}),p.each(I=>{const H=d1(l),G=yc(v,l),se=Ya(G,H,I);mS(se,S,k),yo(l,"height",I)})},hy=Or,fS=H_,gS=qa,kh=l=>{Mo(l,"width"),Mo(l,"height")},ym=l=>{const m=ds(l);gy(l,Y.some(m),Y.none()),kh(l)},py=l=>{const m=vn(l);gy(l,Y.some(m),Y.none()),kh(l)},by=l=>{const m=v1(l);gy(l,Y.none(),Y.some(m)),kh(l)},hS=l=>{so(l,"width");const m=Zg(l),p=m.length>0?m:Du(l);Ee(p,v=>{so(v,"width"),kh(v)}),kh(l)},pS={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Rk=()=>ne.fromTag("th"),tb=()=>ne.fromTag("td"),bS=()=>ne.fromTag("col"),Dk=(l,m,p,v)=>{const S=ne.fromTag("tr");for(let k=0;k<l;k++){const M=v<m||k<p?Rk():tb();k<p&&bs(M,"scope","row"),v<m&&bs(M,"scope","col"),Xo(M,ne.fromTag("br")),Xo(S,M)}return S},vS=l=>{const m=ne.fromTag("colgroup");return ho(l,()=>Xo(m,bS())),m},Oh=(l,m,p,v)=>ho(l,S=>Dk(m,p,v,S)),Mk=(l,m,p,v,S,k=pS)=>{const M=ne.fromTag("table"),I=S!=="cells";Ug(M,k.styles),tl(M,k.attributes),k.colGroups&&Xo(M,vS(m));const H=Math.min(l,p);if(I&&p>0){const Le=ne.fromTag("thead");Xo(M,Le);const ot=Oh(p,m,S==="sectionCells"?H:0,v);fc(Le,ot)}const G=ne.fromTag("tbody");Xo(M,G);const se=I?l-H:l,We=Oh(se,m,I?0:p,v);return fc(G,We),M},yS=l=>l.dom.innerHTML,Yr=l=>{const m=ne.fromTag("div"),p=ne.fromDom(l.dom.cloneNode(!0));return Xo(m,p),yS(m)},vy=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},yy=(l,m)=>{Vl(m,"td,th").each(Vt(vy,l))},Cy=(l,m)=>{Ee(xa(m,"tr"),p=>{ed(l,p.dom),Ee(xa(p,"th,td"),v=>{Y1(l,v.dom)})})},nb=l=>Pn(l)&&l.indexOf("%")!==-1,Bk=(l,m,p,v,S)=>{const k=rh(l),M={styles:k,attributes:fr(l),colGroups:Cv(l)};return l.undoManager.ignore(()=>{const I=Mk(p,m,S,v,Sw(l),M);bs(I,"data-mce-id","__mce");const H=Yr(I);l.insertContent(H),l.addVisual()}),Vl(tm(l),'table[data-mce-id="__mce"]').map(I=>(ql(l)?py(I):Cc(l)?hS(I):(Hu(l)||nb(k.width))&&ym(I),Zr(I),Mo(I,"data-mce-id"),Cy(l,I),yy(l,I),I.dom)).getOrNull()},Nk=(l,m,p,v={})=>{const S=k=>St(k)&&k>0;if(S(m)&&S(p)){const k=v.headerRows||0,M=v.headerColumns||0;return Bk(l,p,m,M,k)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var ob=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const CS="x-tinymce/dom-table-",wy=CS+"rows",Sy=CS+"columns",Ah=l=>{const m=ob.FakeClipboardItem(l);ob.write([m])},xy=l=>{var m;const p=(m=ob.read())!==null&&m!==void 0?m:[];return Er(p,v=>Y.from(v.getType(l)))},wS=l=>{xy(l).isSome()&&ob.clear()},SS=l=>{l.fold(Pk,m=>Ah({[wy]:m}))},xS=()=>xy(wy),Pk=()=>wS(wy),ES=l=>{l.fold(_S,m=>Ah({[Sy]:m}))},TS=()=>xy(Sy),_S=()=>wS(Sy),sb=l=>Mw(Sc(l),Mi(l)).filter(Vu),Wf=l=>Mv(Sc(l),Mi(l)).filter(Vu),kS=(l,m)=>{const p=Mi(l),v=()=>sb(l).each(Se=>{Ea(Se,p).filter(q(p)).each(Pe=>{const Ct=ne.fromText("");if(ku(Pe,Ct),lr(Pe),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const ze=l.dom.createRng();ze.setStart(Ct.dom,0),ze.setEnd(Ct.dom,0),l.selection.setRng(ze),l.nodeChanged()}})}),S=Se=>sb(l).each(Pe=>{Cc(l)||ql(l)||Hu(l)||Ea(Pe,p).each(ze=>{Se==="relative"&&!hy(ze)?ym(ze):Se==="fixed"&&!fS(ze)?py(ze):Se==="responsive"&&!gS(ze)&&hS(ze),Zr(ze),td(l,ze.dom,Mn)})}),k=Se=>Ea(Se,p),M=Se=>Wf(l).bind(Pe=>k(Pe).map(Ct=>Se(Ct,Pe))),I=(Se,Pe)=>{M(Ct=>{l.formatter.toggle("tableclass",{value:Pe},Ct.dom),td(l,Ct.dom,fs)})},H=(Se,Pe)=>{M(Ct=>{const ze=qn(l),Bn=bo(ze,kn=>l.formatter.match("tablecellclass",{value:Pe},kn.dom))?l.formatter.remove:l.formatter.apply;Ee(ze,kn=>Bn("tablecellclass",{value:Pe},kn.dom)),td(l,Ct.dom,fs)})},G=()=>{sb(l).each(Se=>{Ea(Se,p).each(Pe=>{gn(Pe,"caption").fold(()=>{const Ct=ne.fromTag("caption");Xo(Ct,ne.fromText("Caption")),B_(Pe,Ct,0),l.selection.setCursorLocation(Ct.dom,0)},Ct=>{aa("caption")(Se)&&W0("td",Pe).each(ze=>l.selection.setCursorLocation(ze.dom,0)),lr(Ct)}),td(l,Pe.dom,Mn)})})},se=Se=>{l.focus()},Te=(Se,Pe=!1)=>M((Ct,ze)=>{const yn=O1(qn(l),Ct,ze);Se(Ct,yn,Pe).each(se)}),We=()=>M((Se,Pe)=>{const Ct=O1(qn(l),Se,Pe),ze=Qd(Ye,ne.fromDom(l.getDoc()),Y.none());return Q1(Se,Ct,ze)}),Le=()=>M((Se,Pe)=>{const Ct=O1(qn(l),Se,Pe);return J1(Se,Ct)}),Be=(Se,Pe)=>Pe().each(Ct=>{const ze=At(Ct,yn=>Hd(yn));M((yn,Bn)=>{const kn=S1(ne.fromDom(l.getDoc())),qs=Yl(qn(l),Bn,ze,kn);Se(yn,qs).each(se)})}),ot=Se=>(Pe,Ct)=>zp(Ct,"type").each(ze=>{Te(Se(ze),Ct.no_events)});Wo({mceTableSplitCells:()=>Te(m.unmergeCells),mceTableMergeCells:()=>Te(m.mergeCells),mceTableInsertRowBefore:()=>Te(m.insertRowsBefore),mceTableInsertRowAfter:()=>Te(m.insertRowsAfter),mceTableInsertColBefore:()=>Te(m.insertColumnsBefore),mceTableInsertColAfter:()=>Te(m.insertColumnsAfter),mceTableDeleteCol:()=>Te(m.deleteColumn),mceTableDeleteRow:()=>Te(m.deleteRow),mceTableCutCol:()=>Le().each(Se=>{ES(Se),Te(m.deleteColumn)}),mceTableCutRow:()=>We().each(Se=>{SS(Se),Te(m.deleteRow)}),mceTableCopyCol:()=>Le().each(Se=>ES(Se)),mceTableCopyRow:()=>We().each(Se=>SS(Se)),mceTablePasteColBefore:()=>Be(m.pasteColsBefore,TS),mceTablePasteColAfter:()=>Be(m.pasteColsAfter,TS),mceTablePasteRowBefore:()=>Be(m.pasteRowsBefore,xS),mceTablePasteRowAfter:()=>Be(m.pasteRowsAfter,xS),mceTableDelete:v,mceTableCellToggleClass:H,mceTableToggleClass:I,mceTableToggleCaption:G,mceTableSizingMode:(Se,Pe)=>S(Pe),mceTableCellType:ot(Se=>Se==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:ot(Se=>Se==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:ot(Se=>{switch(Se){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Se,Pe)=>l.addCommand(Pe,Se)),l.addCommand("mceInsertTable",(Se,Pe)=>{Nk(l,Pe.rows,Pe.columns,Pe.options)}),l.addCommand("mceTableApplyCellStyle",(Se,Pe)=>{const Ct=Bn=>"tablecell"+Bn.toLowerCase().replace("-","");if(!Yt(Pe))return;const ze=ts(qn(l),Vu);if(ze.length===0)return;const yn=dc(Pe,(Bn,kn)=>l.formatter.has(Ct(kn))&&Pn(Bn));ef(yn)||(Wo(yn,(Bn,kn)=>{const qs=Ct(kn);Ee(ze,as=>{Bn===""?l.formatter.remove(qs,{value:null},as.dom,!0):l.formatter.apply(qs,{value:Bn},as.dom)})}),k(ze[0]).each(Bn=>td(l,Bn.dom,fs)))})},$k=(l,m)=>{const p=Mi(l),v=S=>Mv(Sc(l)).bind(k=>Ea(k,p).map(M=>{const I=O1(qn(l),M,k);return S(M,I)})).getOr("");Wo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,k)=>l.addQueryValueHandler(k,S))},rb=pl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ik=(l,m,p,v)=>l.fold(m,p,v),ni=l=>l.fold(kt,kt,kt),ab=rb.before,cb=rb.on,ib=rb.after,Xr={before:ab,on:cb,after:ib,cata:Ik,getStart:ni},sd={create:(l,m)=>({selection:l,kill:m})},Fk=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},rd=(l,m)=>{const p=l.document.createRange();return Rh(p,m),p},Rh=(l,m)=>l.selectNodeContents(m.dom),Lk=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,v)=>{l.setStart(p.dom,v)},p=>{l.setStartAfter(p.dom)})},Hk=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,v)=>{l.setEnd(p.dom,v)},p=>{l.setEndAfter(p.dom)})},OS=(l,m,p)=>{const v=l.document.createRange();return Lk(v,m),Hk(v,p),v},lb=(l,m,p,v,S)=>{const k=l.document.createRange();return k.setStart(m.dom,p),k.setEnd(v.dom,S),k},ub=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),zk=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?Y.some(p).map(ub):Y.none()},Dh=pl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ey=(l,m,p)=>m(ne.fromDom(p.startContainer),p.startOffset,ne.fromDom(p.endContainer),p.endOffset),Vk=(l,m)=>m.match({domRange:p=>({ltr:Z(p),rtl:Y.none}),relative:(p,v)=>({ltr:mf(()=>OS(l,p,v)),rtl:mf(()=>Y.some(OS(l,v,p)))}),exact:(p,v,S,k)=>({ltr:mf(()=>lb(l,p,v,S,k)),rtl:mf(()=>Y.some(lb(l,S,k,p,v)))})}),Ty=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>Dh.rtl(ne.fromDom(S.endContainer),S.endOffset,ne.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>Ey(l,Dh.ltr,p)):Ey(l,Dh.ltr,p)},_y=(l,m)=>{const p=Vk(l,m);return Ty(l,p)},db=(l,m)=>_y(l,m).match({ltr:(v,S,k,M)=>{const I=l.document.createRange();return I.setStart(v.dom,S),I.setEnd(k.dom,M),I},rtl:(v,S,k,M)=>{const I=l.document.createRange();return I.setStart(k.dom,M),I.setEnd(v.dom,S),I}});Dh.ltr,Dh.rtl;const Cm={create:(l,m,p,v)=>({start:l,soffset:m,finish:p,foffset:v})},ky={create:(l,m,p,v)=>({start:Xr.on(l,m),finish:Xr.on(p,v)})},RS=(l,m)=>{const p=db(l,m);return Cm.create(ne.fromDom(p.startContainer),p.startOffset,ne.fromDom(p.endContainer),p.endOffset)},mb=ky.create,Wk=(l,m,p,v,S,k,M)=>vo(p,S)&&v===k?Y.none():Qs(p,"td,th",m).bind(I=>Qs(S,"td,th",m).bind(H=>ad(l,m,I,H,M))),ad=(l,m,p,v,S)=>vo(p,v)?Y.none():_f(p,v,m).bind(k=>{const M=k.boxes.getOr([]);return M.length>1?(S(l,M,k.start,k.finish),Y.some(sd.create(Y.some(mb(p,0,p,_i(p))),!0))):Y.none()}),UD=(l,m,p,v,S)=>{const k=M=>(S.clearBeforeUpdate(p),S.selectRange(p,M.boxes,M.start,M.finish),M.boxes);return Av(v,l,m,S.firstSelectedSelector,S.lastSelectedSelector).map(k)},Zf=(l,m)=>({item:l,mode:m}),fb=(l,m,p,v=jf)=>l.property().parent(m).map(S=>Zf(S,v)),jf=(l,m,p,v=Gf)=>p.sibling(l,m).map(S=>Zf(S,v)),Gf=(l,m,p,v=Gf)=>{const S=l.property().children(m);return p.first(S).map(M=>Zf(M,v))},Zk=[{current:fb,next:jf,fallback:Y.none()},{current:jf,next:Gf,fallback:Y.some(fb)},{current:Gf,next:Gf,fallback:Y.some(jf)}],DS=(l,m,p,v,S=Zk)=>N(S,M=>M.current===p).bind(M=>M.current(l,m,v,M.next).orThunk(()=>M.fallback.bind(I=>DS(l,m,I,v)))),eu={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?Y.some(p[p.length-1]):Y.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?Y.some(p[0]):Y.none()})},Oy=(l,m,p,v,S,k)=>DS(l,m,v,S).bind(I=>k(I.item)?Y.none():p(I.item)?Y.some(I.item):Oy(l,I.item,p,I.mode,S,k)),Ay=(l,m,p,v)=>Oy(l,m,p,jf,eu.left(),v),Gk=(l,m,p,v)=>Oy(l,m,p,jf,eu.right(),v),Ry=l=>m=>l.property().children(m).length===0,MS=(l,m,p)=>NS(l,m,Ry(l),p),BS=(l,m,p)=>qf(l,m,Ry(l),p),NS=Ay,qf=Gk,hb=Wu(),wm=(l,m)=>MS(hb,l,m),tu=(l,m)=>BS(hb,l,m),Mh=(l,m,p)=>NS(hb,l,m,p),Kf=(l,m,p)=>qf(hb,l,m,p),qk=(l,m,p)=>Zo(l,m,p).isSome(),zi=pl.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Xa=(l,m,p)=>{const v=l.getRect(m),S=l.getRect(p);return S.right>v.left&&S.left<v.right},pb=l=>Qs(l,"tr"),Sm={...zi,verify:(l,m,p,v,S,k,M)=>Qs(v,"td,th",M).bind(I=>Qs(m,"td,th",M).map(H=>vo(I,H)?vo(v,I)&&_i(I)===S?k(H):zi.none("in same cell"):ei(pb,[I,H]).fold(()=>Xa(l,H,I)?zi.success():k(H),G=>k(H)))).getOr(zi.none("default")),cata:(l,m,p,v,S)=>l.fold(m,p,v,S)},Yf=(l,m,p,v)=>({parent:l,children:m,element:p,index:v}),Xf=l=>zl(l).bind(m=>{const p=jn(m);return br(p,l).map(v=>Yf(m,p,l,v))}),br=(l,m)=>Qm(l,Vt(vo,m)),bb=aa("br"),xm=(l,m,p)=>m(l,p).bind(v=>$d(v)&&th(v).trim().length===0?xm(v,m,p):Y.some(v)),vb=(l,m,p)=>p.traverse(m).orThunk(()=>xm(m,p.gather,l)).map(p.relative),PS=(l,m)=>Ua(l,m).filter(bb).orThunk(()=>Ua(l,m-1).filter(bb)),Dy=(l,m,p,v)=>PS(m,p).bind(S=>v.traverse(S).fold(()=>xm(S,v.gather,l).map(v.relative),k=>Xf(k).map(M=>Xr.on(M.parent,M.index)))),yb=(l,m,p,v)=>(bb(m)?vb(l,m,v):Dy(l,m,p,v)).map(k=>({start:k,finish:k})),Ms=l=>Sm.cata(l,m=>Y.none(),()=>Y.none(),m=>Y.some(Da(m,0)),m=>Y.some(Da(m,_i(m)))),Cb=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),oi=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),My=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),By=l=>l.top,nu=l=>l.bottom,$S=(l,m,p)=>p>=0&&p<_i(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):Y.none(),cd=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),wb=(l,m)=>Y.some(l.getRect(m)),Sb=(l,m,p)=>wa(m)?wb(l,m).map(cd):$d(m)?$S(l,m,p).map(cd):Y.none(),Ny=(l,m)=>wa(m)?wb(l,m).map(cd):$d(m)?l.getRangedRect(m,0,m,_i(m)).map(cd):Y.none(),Em=5,Jf=100,nr=pl.generate([{none:[]},{retry:["caret"]}]),IS=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Py=(l,m,p)=>Vg(m,ie).fold(Dt,v=>Ny(l,v).exists(S=>IS(p,S))),$y=(l,m,p,v,S)=>{const k=Cb(S,Em);return Math.abs(p.bottom-v.bottom)<1||p.top>S.bottom?nr.retry(k):p.top===S.bottom?nr.retry(Cb(S,1)):Py(l,m,S)?nr.retry(My(k,Em,0)):nr.none()},Iy={point:By,adjuster:(l,m,p,v,S)=>{const k=oi(S,Em);return Math.abs(p.top-v.top)<1||p.bottom<S.top?nr.retry(k):p.bottom===S.top?nr.retry(oi(S,1)):Py(l,m,S)?nr.retry(My(k,Em,0)):nr.none()},move:oi,gather:wm},LS={point:nu,adjuster:$y,move:Cb,gather:tu},HS=(l,m,p)=>l.elementFromPoint(m,p).filter(v=>xo(v)==="table").isSome(),Ja=(l,m,p,v,S)=>ou(l,m,p,m.move(v,Em),S),ou=(l,m,p,v,S)=>S===0?Y.some(v):HS(l,v.left,m.point(v))?Ja(l,m,p,v,S-1):l.situsFromPoint(v.left,m.point(v)).bind(k=>k.start.fold(Y.none,M=>Ny(l,M).bind(I=>m.adjuster(l,M,I,p,v).fold(Y.none,H=>ou(l,m,p,H,S-1))).orThunk(()=>Y.some(v)),Y.none)),zS=(l,m,p)=>l.point(m)>p.getInnerHeight()?Y.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?Y.some(-l.point(m)):Y.none(),Tm=(l,m,p)=>{const v=l.move(p,Em),S=ou(m,l,p,v,Jf).getOr(v);return zS(l,S,m).fold(()=>m.situsFromPoint(S.left,l.point(S)),k=>(m.scrollBy(0,k),m.situsFromPoint(S.left,l.point(S)-k)))},Br={tryUp:Vt(Tm,Iy),tryDown:Vt(Tm,LS),getJumpSize:Z(Em)},Pa=20,Nr=(l,m,p)=>l.getSelection().bind(v=>yb(m,v.finish,v.foffset,p).fold(()=>Y.some(Da(v.finish,v.foffset)),S=>{const k=l.fromSitus(S),M=Sm.verify(l,v.finish,v.foffset,k.finish,k.foffset,p.failure,m);return Ms(M)})),Qa=(l,m,p,v,S,k)=>k===0?Y.none():_m(l,m,p,v,S).bind(M=>{const I=l.fromSitus(M),H=Sm.verify(l,p,v,I.finish,I.foffset,S.failure,m);return Sm.cata(H,()=>Y.none(),()=>Y.some(M),G=>vo(p,G)&&v===0?xb(l,p,v,oi,S):Qa(l,m,G,0,S,k-1),G=>vo(p,G)&&v===_i(G)?xb(l,p,v,Cb,S):Qa(l,m,G,_i(G),S,k-1))}),xb=(l,m,p,v,S)=>Sb(l,m,p).bind(k=>ec(l,S,v(k,Br.getJumpSize()))),ec=(l,m,p)=>{const v=ov().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,p):Y.none()},_m=(l,m,p,v,S)=>Sb(l,p,v).bind(k=>ec(l,S,k)),Yk=(l,m,p)=>Nr(l,m,p).bind(v=>Qa(l,m,v.element,v.offset,p,Pa).map(l.fromSitus)),VS=(l,m)=>qk(l,p=>zl(p).exists(v=>vo(v,m))),Xk=(l,m,p,v,S)=>Qs(v,"td,th",m).bind(k=>Qs(k,"table",m).bind(M=>VS(S,M)?Yk(l,m,p).bind(I=>Qs(I.finish,"td,th",m).map(H=>({start:k,finish:H,range:I}))):Y.none())),US=(l,m,p,v,S,k)=>k(v,m).orThunk(()=>Xk(l,m,p,v,S).map(M=>{const I=M.range;return sd.create(Y.some(mb(I.start,I.soffset,I.finish,I.foffset)),!0)})),WS=(l,m)=>Qs(l,"tr",m).bind(p=>Qs(p,"table",m).bind(v=>{const S=xa(v,"tr");return vo(p,S[0])?Mh(v,k=>vw(k).isSome(),m).map(k=>{const M=_i(k);return sd.create(Y.some(mb(k,M,k,M)),!0)}):Y.none()})),Fy=(l,m)=>Qs(l,"tr",m).bind(p=>Qs(p,"table",m).bind(v=>{const S=xa(v,"tr");return vo(p,S[S.length-1])?Kf(v,k=>Gl(k).isSome(),m).map(k=>sd.create(Y.some(mb(k,0,k,0)),!0)):Y.none()})),Ly=(l,m,p,v,S,k,M)=>Xk(l,p,v,S,k).bind(I=>ad(m,p,I.start,I.finish,M)),Gs=l=>{let m=l;return{get:()=>m,set:S=>{m=S}}},Hy=l=>{const m=Gs(Y.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(Y.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:I=>{p(),m.set(Y.some(I))}}},id=()=>{const l=Hy(Ye);return{...l,on:p=>l.get().each(p)}},Qf=(l,m)=>Qs(l,"td,th",m),zy=l=>Fc(l).exists(ch),Eb=(l,m,p,v)=>{const S=id(),k=S.clear,M=se=>{S.on(Te=>{v.clearBeforeUpdate(m),Qf(se.target,p).each(We=>{_f(Te,We,p).each(Le=>{const Be=Le.boxes.getOr([]);if(Be.length===1){const ot=Be[0],Se=wv(ot)==="false",Pe=rf(ah(se.target),ot,vo);Se&&Pe&&(v.selectRange(m,Be,ot,ot),l.selectContents(ot))}else Be.length>1&&(v.selectRange(m,Be,Le.start,Le.finish),l.selectContents(We))})})})};return{clearstate:k,mousedown:se=>{v.clear(m),Qf(se.target,p).filter(zy).each(S.set)},mouseover:se=>{M(se)},mouseup:se=>{M(se),k()}}},Bh={traverse:sf,gather:tu,relative:Xr.before,retry:Br.tryDown,failure:Sm.failedDown},Vy={traverse:Fg,gather:wm,relative:Xr.before,retry:Br.tryUp,failure:Sm.failedUp},eg=l=>m=>m===l,Uy=eg(38),vl=eg(40),km=l=>l>=37&&l<=40,ZS={isBackward:eg(37),isForward:eg(39)},su={isBackward:eg(39),isForward:eg(37)},tc=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return _a(p,v)},jS=(l,m,p)=>{const S=(p!==void 0?p.dom:document).defaultView;S&&S.scrollBy(l,m)},yl=pl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Om=l=>yl.exact(l.start,l.soffset,l.finish,l.foffset),Wy=l=>l.match({domRange:m=>ne.fromDom(m.startContainer),relative:(m,p)=>Xr.getStart(m),exact:(m,p,v,S)=>m}),Tb=yl.domRange,GS=yl.relative,Jk=yl.exact,Qk=l=>{const m=Wy(l);return ls(m)},qS=Cm.create,ld={domRange:Tb,relative:GS,exact:Jk,exactFromRange:Om,getWin:Qk,range:qS},tg=(l,m,p)=>{var v,S;return Y.from((S=(v=l.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,p)).bind(k=>{if(k.offsetNode===null)return Y.none();const M=l.dom.createRange();return M.setStart(k.offsetNode,k.offset),M.collapse(),Y.some(M)})},Nh=(l,m,p)=>{var v,S;return Y.from((S=(v=l.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,p))},e4=(()=>document.caretPositionFromPoint?tg:document.caretRangeFromPoint?Nh:Y.none)(),t4=(l,m,p)=>{const v=ne.fromDom(l.document);return e4(v,m,p).map(S=>Cm.create(ne.fromDom(S.startContainer),S.startOffset,ne.fromDom(S.endContainer),S.endOffset))},ng=(l,m)=>{const p=xo(l);return p==="input"?Xr.after(l):Uo(["br","img"],p)?m===0?Xr.before(l):Xr.after(l):Xr.on(l,m)},Zy=(l,m)=>{const p=l.fold(Xr.before,ng,Xr.after),v=m.fold(Xr.before,ng,Xr.after);return ld.relative(p,v)},_b=(l,m,p,v)=>{const S=ng(l,m),k=ng(p,v);return ld.relative(S,k)},jy=(l,m,p,v)=>{const k=Ig(l).dom.createRange();return k.setStart(l.dom,m),k.setEnd(p.dom,v),k},Gy=(l,m,p,v)=>{const S=jy(l,m,p,v),k=vo(l,p)&&m===v;return S.collapsed&&!k},og=l=>Y.from(l.getSelection()),qy=(l,m)=>{og(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},sg=(l,m,p,v,S)=>{const k=lb(l,m,p,v,S);qy(l,k)},Ky=(l,m,p,v,S,k)=>{m.collapse(p.dom,v),m.extend(S.dom,k)},ln=(l,m)=>_y(l,m).match({ltr:(p,v,S,k)=>{sg(l,p,v,S,k)},rtl:(p,v,S,k)=>{og(l).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(p.dom,v,S.dom,k);else if(M.extend)try{Ky(l,M,p,v,S,k)}catch{sg(l,S,k,p,v)}else sg(l,S,k,p,v)})}}),Cl=(l,m,p,v,S)=>{const k=_b(m,p,v,S);ln(l,k)},Am=(l,m,p)=>{const v=Zy(m,p);ln(l,v)},Ph=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return Y.some(Cm.create(ne.fromDom(m.startContainer),m.startOffset,ne.fromDom(p.endContainer),p.endOffset))}else return Y.none()},Yy=l=>{if(l.anchorNode===null||l.focusNode===null)return Ph(l);{const m=ne.fromDom(l.anchorNode),p=ne.fromDom(l.focusNode);return Gy(m,l.anchorOffset,p,l.focusOffset)?Y.some(Cm.create(m,l.anchorOffset,p,l.focusOffset)):Ph(l)}},ru=(l,m,p=!0)=>{const S=(p?rd:Fk)(l,m);qy(l,S)},Xy=l=>og(l).filter(m=>m.rangeCount>0).bind(Yy),kb=l=>Xy(l).map(m=>ld.exact(m.start,m.soffset,m.finish,m.foffset)),Jy=(l,m)=>{const p=db(l,m);return zk(p)},Qy=(l,m,p)=>t4(l,m,p),Rm=l=>{og(l).each(m=>m.removeAllRanges())},Ob=l=>({elementFromPoint:(Se,Pe)=>ne.fromPoint(ne.fromDom(l.document),Se,Pe),getRect:Se=>Se.dom.getBoundingClientRect(),getRangedRect:(Se,Pe,Ct,ze)=>{const yn=ld.exact(Se,Pe,Ct,ze);return Jy(l,yn)},getSelection:()=>kb(l).map(Se=>RS(l,Se)),fromSitus:Se=>{const Pe=ld.relative(Se.start,Se.finish);return RS(l,Pe)},situsFromPoint:(Se,Pe)=>Qy(l,Se,Pe).map(Ct=>ky.create(Ct.start,Ct.soffset,Ct.finish,Ct.foffset)),clearSelection:()=>{Rm(l)},collapseSelection:(Se=!1)=>{kb(l).each(Pe=>Pe.fold(Ct=>Ct.collapse(Se),(Ct,ze)=>{const yn=Se?Ct:ze;Am(l,yn,yn)},(Ct,ze,yn,Bn)=>{const kn=Se?Ct:yn,qs=Se?ze:Bn;Cl(l,kn,qs,kn,qs)}))},setSelection:Se=>{Cl(l,Se.start,Se.soffset,Se.finish,Se.foffset)},setRelativeSelection:(Se,Pe)=>{Am(l,Se,Pe)},selectNode:Se=>{ru(l,Se,!1)},selectContents:Se=>{ru(l,Se)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>tc(ne.fromDom(l.document)).top,scrollBy:(Se,Pe)=>{jS(Se,Pe,ne.fromDom(l.document))}}),Dm=(l,m)=>({rows:l,cols:m}),Ab=(l,m,p,v)=>{const S=Ob(l),k=Eb(S,m,p,v);return{clearstate:k.clearstate,mousedown:k.mousedown,mouseover:k.mouseover,mouseup:k.mouseup}},KS=l=>Vg(l,Rt).exists(ch),rg=(l,m)=>KS(l)||KS(m),Rb=(l,m,p,v)=>{const S=Ob(l),k=()=>(v.clear(m),Y.none());return{keydown:(H,G,se,Te,We,Le)=>{const Be=H.raw,ot=Be.which,Se=Be.shiftKey===!0;return uh(m,v.selectedSelector).fold(()=>(km(ot)&&!Se&&v.clearBeforeUpdate(m),km(ot)&&Se&&!rg(G,Te)?Y.none:vl(ot)&&Se?Vt(Ly,S,m,p,Bh,Te,G,v.selectRange):Uy(ot)&&Se?Vt(Ly,S,m,p,Vy,Te,G,v.selectRange):vl(ot)?Vt(US,S,p,Bh,Te,G,Fy):Uy(ot)?Vt(US,S,p,Vy,Te,G,WS):Y.none),Ct=>{const ze=yn=>()=>Er(yn,kn=>UD(kn.rows,kn.cols,m,Ct,v)).fold(()=>Ow(m,v.firstSelectedSelector,v.lastSelectedSelector).map(kn=>{const qs=vl(ot)||Le.isForward(ot)?Xr.after:Xr.before;return S.setRelativeSelection(Xr.on(kn.first,0),qs(kn.table)),v.clear(m),sd.create(Y.none(),!0)}),kn=>Y.some(sd.create(Y.none(),!0)));return km(ot)&&Se&&!rg(G,Te)?Y.none:vl(ot)&&Se?ze([Dm(1,0)]):Uy(ot)&&Se?ze([Dm(-1,0)]):Le.isBackward(ot)&&Se?ze([Dm(0,-1),Dm(-1,0)]):Le.isForward(ot)&&Se?ze([Dm(0,1),Dm(1,0)]):km(ot)&&!Se?k:Y.none})()},keyup:(H,G,se,Te,We)=>uh(m,v.selectedSelector).fold(()=>{const Le=H.raw,Be=Le.which;return Le.shiftKey===!0&&km(Be)&&rg(G,Te)?Wk(m,p,G,se,Te,We,v.selectRange):Y.none()},Y.none)}},n4=(l,m,p,v)=>{const S=Ob(l);return(k,M)=>{v.clearBeforeUpdate(m),_f(k,M,p).each(I=>{const H=I.boxes.getOr([]);v.selectRange(m,H,I.start,I.finish),S.selectContents(M),S.collapseSelection()})}},Db=(l,m)=>{const p=Ll(l,m);return p===void 0||p===""?[]:p.split(" ")},au=(l,m,p)=>{const S=Db(l,m).concat([p]);return bs(l,m,S.join(" ")),!0},o4=(l,m,p)=>{const v=ts(Db(l,m),S=>S!==p);return v.length>0?bs(l,m,v.join(" ")):Mo(l,m),!1},$h=l=>l.dom.classList!==void 0,Tc=l=>Db(l,"class"),Bs=(l,m)=>au(l,"class",m),s4=(l,m)=>o4(l,"class",m),Vi=(l,m)=>{$h(l)?l.dom.classList.add(m):Bs(l,m)},r4=l=>{($h(l)?l.dom.classList:Tc(l)).length===0&&Mo(l,"class")},YS=(l,m)=>{$h(l)?l.dom.classList.remove(m):s4(l,m),r4(l)},Ih=(l,m)=>$h(l)&&l.dom.classList.contains(m),ag=(l,m)=>{Ee(m,p=>{YS(l,p)})},XS=l=>m=>{Vi(m,l)},JS=l=>m=>{ag(m,l)},QS={byClass:l=>{const m=XS(l.selected),p=JS([l.selected,l.lastSelected,l.firstSelected]),v=k=>{const M=xa(k,l.selectedSelector);Ee(M,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(k,M,I,H)=>{v(k),Ee(M,m),Vi(I,l.firstSelected),Vi(H,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const v=H=>{Mo(H,l.selected),Mo(H,l.firstSelected),Mo(H,l.lastSelected)},S=H=>{bs(H,l.selected,"1")},k=H=>{M(H),p()},M=H=>{const G=xa(H,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ee(G,v)};return{clearBeforeUpdate:M,clear:k,selectRange:(H,G,se,Te)=>{k(H),Ee(G,S),bs(se,l.firstSelected,"1"),bs(Te,l.lastSelected,"1"),m(G,se,Te)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},ex=(l,m,p,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return p(l.elements)}},Ke=()=>({tag:"none"}),Ns=l=>({tag:"multiple",elements:l}),Fh=l=>({tag:"single",element:l}),Ps=(l,m,p)=>({get:()=>Zu(l(),p).fold(()=>m().fold(Ke,Fh),Ns)}),_c=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),v=$1(p);return ps(v,S=>{const k=S.cells.slice(0,m[m.length-1].column+1);return At(k,M=>M.element)})},e2=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),v=$1(p);return ps(v,S=>{const k=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return At(k,M=>M.element)})},Mm=(l,m,p)=>{const v=nn.fromTable(l);return $i(v,m).map(k=>{const M=Bf(v,p,!1),{rows:I}=tr(M),H=_c(I,k),G=e2(I,k);return{upOrLeftCells:H,downOrRightCells:G}})},Mb=(l,m,p,v,S,k,M)=>({target:l,x:m,y:p,stop:v,prevent:S,kill:k,raw:M}),ud=l=>{const m=ne.fromDom(Ue(l).getOr(l.target)),p=()=>l.stopPropagation(),v=()=>l.preventDefault(),S=Zn(v,p);return Mb(m,l.clientX,l.clientY,p,v,S,l)},Lh=(l,m)=>p=>{l(p)&&m(ud(p))},tx=(l,m,p,v,S)=>{const k=Lh(p,v);return l.dom.addEventListener(m,k,S),{unbind:Vt(c4,l,m,k,S)}},a4=(l,m,p,v)=>tx(l,m,p,v,!1),c4=(l,m,p,v)=>{l.dom.removeEventListener(m,p,v)},i4=he,dd=(l,m,p)=>a4(l,m,i4,p),Hh=ud,zh=l=>!Ih(ne.fromDom(l.target),"ephox-snooker-resizer-bar"),Bb=(l,m)=>{const p=Ps(()=>ne.fromDom(l.getBody()),()=>Mv(Sc(l),Mi(l)),Kl.selectedSelector),v=(H,G,se)=>{Ea(G).each(We=>{const Le=At(H,Ct=>Ct.dom),Be=ww(l),ot=Qd(Ye,ne.fromDom(l.getDoc()),Be),Se=qn(l),Pe=Mm(We,{selection:Se},ot).map(Ct=>Pg(Ct,ze=>At(ze,yn=>yn.dom))).getOrUndefined();_k(l,Le,G.dom,se.dom,Pe)})},S=()=>kk(l),k=QS.byAttr(Kl,v,S);return l.on("init",H=>{const G=l.getWin(),se=tm(l),Te=Mi(l),We=()=>{const En=l.selection,Qr=ne.fromDom(En.getStart()),ea=ne.fromDom(En.getEnd());ei(Ea,[Qr,ea]).fold(()=>k.clear(se),Ye)},Le=Ab(G,se,Te,k),Be=Rb(G,se,Te,k),ot=n4(G,se,Te,k),Se=En=>En.raw.shiftKey===!0;l.on("TableSelectorChange",En=>ot(En.start,En.finish));const Pe=(En,Qr)=>{Se(En)&&(Qr.kill&&En.kill(),Qr.selection.each(ea=>{const Oc=ld.relative(ea.start,ea.finish),Ac=db(G,Oc);l.selection.setRng(Ac)}))},Ct=En=>{const Qr=Hh(En);if(Qr.raw.shiftKey&&km(Qr.raw.which)){const ea=l.selection.getRng(),Oc=ne.fromDom(ea.startContainer),Ac=ne.fromDom(ea.endContainer);Be.keyup(Qr,Oc,ea.startOffset,Ac,ea.endOffset).each(Qt=>{Pe(Qr,Qt)})}},ze=En=>{const Qr=Hh(En);m.hide();const ea=l.selection.getRng(),Oc=ne.fromDom(ea.startContainer),Ac=ne.fromDom(ea.endContainer),Qt=aw(ZS,su)(ne.fromDom(l.selection.getStart()));Be.keydown(Qr,Oc,ea.startOffset,Ac,ea.endOffset,Qt).each(zo=>{Pe(Qr,zo)}),m.show()},yn=En=>En.button===0,Bn=En=>En.buttons===void 0?!0:(En.buttons&1)!==0,kn=En=>{Le.clearstate()},qs=En=>{yn(En)&&zh(En)&&Le.mousedown(Hh(En))},as=En=>{Bn(En)&&zh(En)&&Le.mouseover(Hh(En))},Sl=En=>{yn(En)&&zh(En)&&Le.mouseup(Hh(En))},pd=(()=>{const En=Gs(ne.fromDom(se)),Qr=Gs(0);return{touchEnd:Oc=>{const Ac=ne.fromDom(Oc.target);if(aa("td")(Ac)||aa("th")(Ac)){const Qt=En.get(),zo=Qr.get();vo(Qt,Ac)&&Oc.timeStamp-zo<300&&(Oc.preventDefault(),ot(Ac,Ac))}En.set(Ac),Qr.set(Oc.timeStamp)}}})();l.on("dragstart",kn),l.on("mousedown",qs),l.on("mouseover",as),l.on("mouseup",Sl),l.on("touchend",pd.touchEnd),l.on("keyup",Ct),l.on("keydown",ze),l.on("NodeChange",We)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Kl.firstSelected),l.serializer.addTempAttr(Kl.lastSelected)}),{getSelectedCells:()=>ex(p.get(),Z([]),H=>At(H,G=>G.dom),H=>[H.dom]),clearSelectedCells:H=>k.clear(ne.fromDom(H))}},$a=l=>{let m=[];return{bind:k=>{if(k===void 0)throw new Error("Event bind error: undefined handler");m.push(k)},unbind:k=>{m=ts(m,M=>M!==k)},trigger:(...k)=>{const M={};Ee(l,(I,H)=>{M[I]=k[H]}),Ee(m,I=>{I(M)})}}},wl=l=>{const m=Pg(l,v=>({bind:v.bind,unbind:v.unbind})),p=Pg(l,v=>v.trigger);return{registry:m,trigger:p}},md=(l,m)=>{let p=null;const v=()=>{_s(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...k)=>{v(),p=setTimeout(()=>{p=null,l.apply(null,k)},m)}}},fd=l=>l.slice(0).sort(),l4=(l,m)=>{throw new Error("All required keys ("+fd(l).join(", ")+") were not specified. Specified keys were: "+fd(m).join(", ")+".")},Nb=l=>{throw new Error("Unsupported keys for object: "+fd(l).join(", "))},Pb=(l,m)=>{if(!So(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ee(m,p=>{if(!Pn(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},u4=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+fd(l).join(", ")+") were not.")},d4=l=>{const m=fd(l);N(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},m4=(l,m)=>f4(l,m,{validate:dn,label:"function"}),f4=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Pb("required",m),d4(m),v=>{const S=Et(v);bo(m,I=>Uo(S,I))||l4(m,S),l(m,S);const M=ts(m,I=>!p.validate(v[I],I));return M.length>0&&u4(M,p.label),v}},nx=(l,m)=>{const p=ts(m,v=>!Uo(l,v));p.length>0&&Nb(p)},$b=l=>m4(nx,l),g4=$b(["compare","extract","mutate","sink"]),Ib=$b(["element","start","stop","destroy"]),or=$b(["forceDrop","drop","move","delayDrop"]),kc=()=>{let l=Y.none();const m=()=>{l=Y.none()},p=(k,M)=>{const I=l.map(H=>k.compare(H,M));return l=Y.some(M),I},v=(k,M)=>{M.extract(k).each(H=>{p(M,H).each(se=>{S.trigger.move(se)})})},S=wl({move:$a(["info"])});return{onEvent:v,reset:m,events:S.registry}},nc=()=>{const l=wl({move:$a(["info"])});return{onEvent:Ye,reset:Ye,events:l.registry}},Fb=()=>{const l=nc(),m=kc();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(I,H)=>{p.onEvent(I,H)},events:m.events}},Lb=(l,m,p)=>{let v=!1;const S=wl({start:$a([]),stop:$a([])}),k=Fb(),M=()=>{Be.stop(),k.isOn()&&(k.off(),S.trigger.stop())},I=md(M,200),H=Se=>{Be.start(Se),k.on(),S.trigger.start()},G=Se=>{I.cancel(),k.onEvent(Se,m)};k.events.move.bind(Se=>{m.mutate(l,Se.info)});const se=()=>{v=!0},Te=()=>{v=!1},We=()=>v,Le=Se=>(...Pe)=>{v&&Se.apply(null,Pe)},Be=m.sink(or({forceDrop:M,drop:Le(M),move:Le(G),delayDrop:Le(I.throttle)}),p),ot=()=>{Be.destroy()};return{element:Be.element,go:H,on:se,off:Te,isActive:We,destroy:ot,events:S.registry}},ox=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},sx=ox("ephox-dragster").resolve,n2=l=>{const m={layerClass:sx("blocker"),...l},p=ne.fromTag("div");return bs(p,"role","presentation"),Ug(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vi(p,sx("blocker")),Vi(p,m.layerClass),{element:Z(p),destroy:()=>{lr(p)}}};var Hb=g4({compare:(l,m)=>_a(m.left-l.left,m.top-l.top),extract:l=>Y.some(_a(l.x,l.y)),sink:(l,m)=>{const p=n2(m),v=dd(p.element(),"mousedown",l.forceDrop),S=dd(p.element(),"mouseup",l.drop),k=dd(p.element(),"mousemove",l.move),M=dd(p.element(),"mouseout",l.delayDrop),I=()=>{p.destroy(),S.unbind(),k.unbind(),M.unbind(),v.unbind()},H=se=>{Xo(se,p.element())},G=()=>{lr(p.element())};return Ib({element:p.element,start:H,stop:G,destroy:I})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const o2=(l,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:Hb;return Lb(l,v,m)},Jr=ox("ephox-snooker").resolve,cx=()=>{const l=wl({drag:$a(["xDelta","yDelta"])});return{mutate:(p,v)=>{l.trigger.drag(p,v)},events:l.registry}},s2=()=>{const l=wl({drag:$a(["xDelta","yDelta","target"])});let m=Y.none();const p=cx();return p.events.drag.bind(k=>{m.each(M=>{l.trigger.drag(k.xDelta,k.yDelta,M)})}),{assign:k=>{m=Y.some(k)},get:()=>m,mutate:p.mutate,events:l.registry}},Vh=(l,m,p,v,S)=>{const k=ne.fromTag("div");return Ug(k,{position:"absolute",left:m-v/2+"px",top:p+"px",height:S+"px",width:v+"px"}),tl(k,{"data-column":l,role:"presentation"}),k},Uh=(l,m,p,v,S)=>{const k=ne.fromTag("div");return Ug(k,{position:"absolute",left:m+"px",top:p-S/2+"px",height:S+"px",width:v+"px"}),tl(k,{"data-row":l,role:"presentation"}),k},zb=Jr("resizer-bar"),Wh=Jr("resizer-rows"),ix=Jr("resizer-cols"),lx=7,r2=(l,m)=>ps(l.all,(p,v)=>m(p.element)?[v]:[]),a2=(l,m)=>{const p=[];return ho(l.grid.columns,v=>{nn.getColumnAt(l,v).map(k=>k.element).forall(m)&&p.push(v)}),ts(p,v=>{const S=nn.filterItems(l,k=>k.column===v);return bo(S,k=>m(k.element))})},cu=l=>{const m=xa(l.parent(),"."+zb);Ee(m,lr)},c2=(l,m,p)=>{const v=l.origin();Ee(m,S=>{S.each(k=>{const M=p(v,k);Vi(M,zb),Xo(l.parent(),M)})})},ux=(l,m,p,v)=>{c2(l,m,(S,k)=>{const M=Vh(k.col,k.x-S.left,p.top-S.top,lx,v);return Vi(M,ix),M})},b4=(l,m,p,v)=>{c2(l,m,(S,k)=>{const M=Uh(k.row,p.left-S.left,k.y-S.top,v,lx);return Vi(M,Wh),M})},v4=(l,m,p,v,S)=>{const k=Yg(p),M=m.isResizable,I=v.length>0?Ur.positions(v,p):[],H=I.length>0?r2(l,M):[],G=ts(I,(Le,Be)=>Fe(H,ot=>Be===ot));b4(m,G,k,Vn(p));const se=S.length>0?p1.positions(S,p):[],Te=se.length>0?a2(l,M):[],We=ts(se,(Le,Be)=>Fe(Te,ot=>Be===ot));ux(m,We,k,yf(p))},dx=(l,m)=>{if(cu(l),l.isResizable(m)){const p=nn.fromTable(m),v=u1(p),S=bf(p);v4(p,l,m,v,S)}},ga=(l,m)=>{const p=xa(l.parent(),"."+zb);Ee(p,m)},Pr=l=>{ga(l,m=>{yo(m,"display","none")})},cg=l=>{ga(l,m=>{yo(m,"display","block")})},GD=l=>Ih(l,Wh),y4=l=>Ih(l,ix),i2=Jr("resizer-bar-dragging"),an=l=>{const m=s2(),p=o2(m,{});let v=Y.none();const S=(Be,ot)=>Y.from(Ll(Be,ot));m.events.drag.bind(Be=>{S(Be.target,"data-row").each(ot=>{const Se=Uc(Be.target,"top");yo(Be.target,"top",Se+Be.yDelta+"px")}),S(Be.target,"data-column").each(ot=>{const Se=Uc(Be.target,"left");yo(Be.target,"left",Se+Be.xDelta+"px")})});const k=(Be,ot)=>{const Se=Uc(Be,ot),Pe=ys(Be,"data-initial-"+ot,0);return Se-Pe};p.events.stop.bind(()=>{m.get().each(Be=>{v.each(ot=>{S(Be,"data-row").each(Se=>{const Pe=k(Be,"top");Mo(Be,"data-initial-top"),Le.trigger.adjustHeight(ot,Pe,parseInt(Se,10))}),S(Be,"data-column").each(Se=>{const Pe=k(Be,"left");Mo(Be,"data-initial-left"),Le.trigger.adjustWidth(ot,Pe,parseInt(Se,10))}),dx(l,ot)})})});const M=(Be,ot)=>{Le.trigger.startAdjust(),m.assign(Be),bs(Be,"data-initial-"+ot,Uc(Be,ot)),Vi(Be,i2),yo(Be,"opacity","0.2"),p.go(l.parent())},I=dd(l.parent(),"mousedown",Be=>{GD(Be.target)&&M(Be.target,"top"),y4(Be.target)&&M(Be.target,"left")}),H=Be=>vo(Be,l.view()),G=Be=>Qs(Be,"table",H).filter(ch),se=dd(l.view(),"mouseover",Be=>{G(Be.target).fold(()=>{To(Be.target)&&cu(l)},ot=>{p.isActive()&&(v=Y.some(ot),dx(l,ot))})}),Te=()=>{I.unbind(),se.unbind(),p.destroy(),cu(l)},We=Be=>{dx(l,Be)},Le=wl({adjustHeight:$a(["table","delta","row"]),adjustWidth:$a(["table","delta","column"]),startAdjust:$a([])});return{destroy:Te,refresh:We,on:p.on,off:p.off,hideBars:Vt(Pr,l),showBars:Vt(cg,l),events:Le.registry}},mx={create:(l,m,p)=>{const v=Ur,S=p1,k=an(l),M=wl({beforeResize:$a(["table","type"]),afterResize:$a(["table","type"]),startDrag:$a([])});return k.events.adjustHeight.bind(I=>{const H=I.table;M.trigger.beforeResize(H,"row");const G=v.delta(I.delta,H);jv(H,G,I.row),M.trigger.afterResize(H,"row")}),k.events.startAdjust.bind(I=>{M.trigger.startDrag()}),k.events.adjustWidth.bind(I=>{const H=I.table;M.trigger.beforeResize(H,"col");const G=S.delta(I.delta,H),se=p(H);Zw(H,G,I.column,m,se),M.trigger.afterResize(H,"col")}),{on:k.on,off:k.off,refreshBars:k.refresh,hideBars:k.hideBars,showBars:k.showBars,destroy:k.destroy,events:M.registry}}},Zh={only:(l,m)=>{const p=Up(l)?ir(l):l;return{parent:Z(p),view:Z(l),origin:Z(_a(0,0)),isResizable:m}},detached:(l,m,p)=>{const v=()=>Yg(m);return{parent:Z(m),view:Z(l),origin:v,isResizable:p}},body:(l,m,p)=>({parent:Z(m),view:Z(l),origin:Z(_a(0,0)),isResizable:p})},C4=()=>{const l=ne.fromTag("div");return Ug(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Xo(Xs(),l),l},w4=(l,m)=>l.inline?Zh.body(ne.fromDom(l.getBody()),C4(),m):Zh.only(ne.fromDom(l.getDoc()),m),S4=(l,m)=>{l.inline&&lr(m.parent())},Vb=l=>io(l)&&l.nodeName==="TABLE",jh="bar-",gx=l=>Ll(l,"data-mce-resize")!=="false",YD=l=>{const m=nn.fromTable(l);nn.hasColumns(m)||Ee(Du(l),p=>{const v=Vd(p,"width");yo(p,"width",v),Mo(p,"width")})},ig=l=>ia(l,"corner-"),l2=l=>qC(l,"corner-"),XD=l=>{const m=id(),p=id(),v=id();let S,k,M,I;const H=Pe=>rs(l,Pe),G=()=>Lo(l)?Gu():am(),se=Pe=>gl(Pe).columns,Te=Pe=>gl(Pe).rows,We=(Pe,Ct,ze,yn)=>{const Bn=l2(Ct),kn=Ci(Bn,"e"),qs=ia(Bn,"n");if(k===""&&ym(Pe),I===""&&by(Pe),ze!==S&&k!==""){yo(Pe,"width",k);const as=G(),Sl=H(Pe),hd=Lo(l)||kn?se(Pe)-1:0;Zw(Pe,ze-S,hd,as,Sl)}else if(Ew(k)){const as=parseFloat(k.replace("%","")),Sl=ze*as/S;yo(Pe,"width",Sl+"%")}if(Tw(k)&&YD(Pe),yn!==M&&I!==""){yo(Pe,"height",I);const as=qs?0:Te(Pe)-1;jv(Pe,yn-M,as)}},Le=()=>{p.on(Pe=>{Pe.destroy()}),v.on(Pe=>{S4(l,Pe)})};return l.on("init",()=>{const Pe=w4(l,gx);if(v.set(Pe),Ai(l)&&wc(l)){const Ct=G(),ze=mx.create(Pe,Ct,H);ze.on(),ze.events.startDrag.bind(yn=>{m.set(l.selection.getRng())}),ze.events.beforeResize.bind(yn=>{const Bn=yn.table.dom;ms(l,Bn,zu(Bn),Sv(Bn),jh+yn.type)}),ze.events.afterResize.bind(yn=>{const Bn=yn.table,kn=Bn.dom;Zr(Bn),m.on(qs=>{l.selection.setRng(qs),l.focus()}),ss(l,kn,zu(kn),Sv(kn),jh+yn.type),l.undoManager.add()}),p.set(ze)}}),l.on("ObjectResizeStart",Pe=>{const Ct=Pe.target;if(Vb(Ct)){const ze=ne.fromDom(Ct);Ee(l.dom.select(".mce-clonedresizable"),yn=>{l.dom.addClass(yn,"mce-"+yv(l)+"-columns")}),!fS(ze)&&ql(l)?py(ze):!hy(ze)&&Hu(l)&&ym(ze),gS(ze)&&ia(Pe.origin,jh)&&ym(ze),S=Pe.width,k=Cc(l)?"":xv(l,Ct).getOr(""),M=Pe.height,I=xw(l,Ct).getOr("")}}),l.on("ObjectResized",Pe=>{const Ct=Pe.target;if(Vb(Ct)){const ze=ne.fromDom(Ct),yn=Pe.origin;ig(yn)&&We(ze,yn,Pe.width,Pe.height),Zr(ze),td(l,ze.dom,fs)}}),l.on("SwitchMode",()=>{p.on(Pe=>{l.mode.isReadOnly()?Pe.hideBars():Pe.showBars()})}),l.on("dragstart dragend",Pe=>{p.on(Ct=>{Pe.type==="dragstart"?(Ct.hideBars(),Ct.off()):(Ct.on(),Ct.showBars())})}),l.on("remove",()=>{Le()}),{refresh:Pe=>{p.on(Ct=>Ct.refreshBars(ne.fromDom(Pe)))},hide:()=>{p.on(Pe=>Pe.hideBars())},show:()=>{p.on(Pe=>Pe.showBars())}}},hx=l=>{em(l);const m=XD(l),p=Bb(l,m),v=uy(l,m,p);return kS(l,v),$k(l,v),Of(l,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},x4=l=>({table:hx(l)});var Tt=()=>{to.add("dom",x4)};Tt()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>'}});(function(){const to=mt=>{let Z=mt;return{get:()=>Z,set:Vt=>{Z=Vt}}};var fo=tinymce.util.Tools.resolve("tinymce.PluginManager"),go=tinymce.util.Tools.resolve("tinymce.Env");const Bo=mt=>mt.dispatch("ResizeEditor"),wo=mt=>Z=>Z.options.get(mt),zn=mt=>{const Z=mt.options.register;Z("autoresize_overflow_padding",{processor:"number",default:1}),Z("autoresize_bottom_margin",{processor:"number",default:50})},Pn=wo("min_height"),Yt=wo("max_height"),So=wo("autoresize_overflow_padding"),_s=wo("autoresize_bottom_margin"),Sn=mt=>mt.plugins.fullscreen&&mt.plugins.fullscreen.isFullscreen(),co=(mt,Z)=>{const kt=mt.getBody();kt&&(kt.style.overflowY=Z?"":"hidden",Z||(kt.scrollTop=0))},no=(mt,Z,kt,Un)=>{var Vt;const q=parseInt((Vt=mt.getStyle(Z,kt,Un))!==null&&Vt!==void 0?Vt:"",10);return isNaN(q)?0:q},io=mt=>{if((mt==null?void 0:mt.type.toLowerCase())==="setcontent"){const Z=mt;return Z.selection===!0||Z.paste===!0}else return!1},dn=(mt,Z,kt,Un)=>{var Vt;const q=mt.dom,gt=mt.getDoc();if(!gt)return;if(Sn(mt)){co(mt,!0);return}const tt=gt.documentElement,Dt=Un?Un():So(mt),he=(Vt=Pn(mt))!==null&&Vt!==void 0?Vt:mt.getElement().offsetHeight;let Y=he;const Ls=no(q,tt,"margin-top",!0),$n=no(q,tt,"margin-bottom",!0);let ht=tt.offsetHeight+Ls+$n+Dt;ht<0&&(ht=0);const _=mt.getContainer().offsetHeight,Uo=mt.getContentAreaContainer().offsetHeight,Fe=_-Uo;ht+Fe>he&&(Y=ht+Fe);const ho=Yt(mt);ho&&Y>ho?(Y=ho,co(mt,!0)):co(mt,!1);const At=Z.get();if(At.set&&(mt.dom.setStyles(mt.getDoc().documentElement,{"min-height":0}),mt.dom.setStyles(mt.getBody(),{"min-height":"inherit"})),Y!==At.totalHeight&&(ht-Dt!==At.contentHeight||!At.set)){const Ee=Y-At.totalHeight;if(q.setStyle(mt.getContainer(),"height",Y+"px"),Z.set({totalHeight:Y,contentHeight:ht,set:!0}),Bo(mt),go.browser.isSafari()&&(go.os.isMacOS()||go.os.isiOS())){const po=mt.getWin();po.scrollTo(po.pageXOffset,po.pageYOffset)}mt.hasFocus()&&io(kt)&&mt.selection.scrollIntoView(),(go.browser.isSafari()||go.browser.isChromium())&&Ee<0&&dn(mt,Z,kt,Un)}},St=(mt,Z)=>{const kt=()=>_s(mt);mt.on("init",Un=>{const Vt=So(mt),q=mt.dom;q.setStyles(mt.getDoc().documentElement,{height:"auto"}),go.browser.isEdge()||go.browser.isIE()?q.setStyles(mt.getBody(),{paddingLeft:Vt,paddingRight:Vt,"min-height":0}):q.setStyles(mt.getBody(),{paddingLeft:Vt,paddingRight:Vt}),dn(mt,Z,Un,kt)}),mt.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Un=>{dn(mt,Z,Un,kt)})},Ye=(mt,Z)=>{mt.addCommand("mceAutoResize",()=>{dn(mt,Z)})};var Zn=()=>{fo.add("autoresize",mt=>{if(zn(mt),mt.options.isSet("resize")||mt.options.set("resize",!1),!mt.inline){const Z=to({totalHeight:0,contentHeight:0,set:!1});Ye(mt,Z),St(mt,Z)}})};Zn()})();var z0=(to=>(to[to.Normal=1]="Normal",to[to.Expand=2]="Expand",to[to.Simple=3]="Simple",to[to.Continue=4]="Continue",to[to.Change1=5]="Change1",to[to.Change2=6]="Change2",to[to.Change3=7]="Change3",to))(z0||{});const Su="<!--INSERT-HERE-->",IK=HC({__name:"record-editor",props:{modelValue:{default:""},autoresize:{type:Boolean,default:!0},options:{default:()=>({})}},emits:["content","rewrite"],setup(to,{expose:fo,emit:go}){const Bo=to,wo=cK(),zn=iK(),Pn=kF(),Yt=lK(),So=Vj(),_s=Uq("chatModel"),Sn=Eu("");let co=Fq({html:!0,breaks:!0,typographer:!0,linkify:!0,lineNumbers:!0});const no=Eu(-1),io=Eu("vue-tinymce-"+ +new Date+((Math.random()*1e3).toFixed(0)+"")),dn=vq({selector:"#"+io.value,menubar:!1,statusbar:!1,plugins:[Bo.autoresize?"autoresize":""],toolbar:[{name:"styles",items:["styles"]},{name:"formatting",items:["h1","h2","h3","bold","italic","underline","forecolor","backcolor"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"custom",items:["customBtn1","customBtn2","customBtn3","customBtn4"]},{name:"history",items:["undo","redo"]}],toolbar_mode:"sliding",toolbar_sticky:!0,font_formats:"Arial=arial,helvetica,sans-serif; 宋体=SimSun; 微软雅黑=Microsoft Yahei; Impact=impact,chicago;",branding:!1,language:"zh_CN",language_url:"/tinymce/langs/zh_CN.js",skin:"oxide",skin_url:"/tinymce/skins/ui/oxide",content_css:"/tinymce/skins/content/default/content.css",content_style:"body {font-family: Arial; font-size: 14px; color: #333;}",image_dimensions:!1,setup(tt){tt.ui.registry.addContextToolbar("textselection",{predicate:()=>!tt.selection.isCollapsed(),items:"h1 h2 h3 bold italic underline forecolor backcolor customBtn1 customBtn2 customBtn3 customBtn4",position:"selection",scope:"node"}),tt.ui.registry.addButton("customBtn1",{text:"扩写",tooltip:"消耗"+_s.value.price+Pn.getTokenUnit,onAction:()=>{if(tt.selection.isCollapsed())return Lp.msgError("请选择文本");Zn(z0.Expand,tt.selection.getContent()),tt.insertContent(tt.selection.getContent()+`${Su}`),tt.insertContent(tt.selection.getContent()+"<p></p>"),no.value=Sn.value.indexOf(Su)}}),tt.ui.registry.addMenuButton("customBtn2",{text:"改写",tooltip:"消耗"+_s.value.price+Pn.getTokenUnit,fetch:Dt=>{const he=[{type:"menuitem",text:"正式得体",tooltip:"消耗"+_s.value.price+Pn.getTokenUnit,onAction:()=>{if(tt.selection.isCollapsed())return Lp.msgError("请选择文本");Zn(z0.Change1,tt.selection.getContent()),tt.insertContent(tt.selection.getContent()+`${Su}`),tt.insertContent(tt.selection.getContent()+"<p></p>"),no.value=Sn.value.indexOf(Su)}},{type:"menuitem",text:"严肃庄重",onAction:()=>{if(tt.selection.isCollapsed())return Lp.msgError("请选择文本");Zn(z0.Change2,tt.selection.getContent()),tt.insertContent(tt.selection.getContent()+`${Su}`),tt.insertContent(tt.selection.getContent()+"<p></p>"),no.value=Sn.value.indexOf(Su)}},{type:"menuitem",text:"轻松",onAction:()=>{if(tt.selection.isCollapsed())return Lp.msgError("请选择文本");Zn(z0.Change3,tt.selection.getContent()),tt.insertContent(tt.selection.getContent()+`${Su}`),tt.insertContent(tt.selection.getContent()+"<p></p>"),no.value=Sn.value.indexOf(Su)}}];Dt(he)}}),tt.ui.registry.addButton("customBtn3",{text:"简写",tooltip:"消耗"+_s.value.price+Pn.getTokenUnit,onAction:()=>{if(tt.selection.isCollapsed())return Lp.msgError("请选择文本");Zn(z0.Simple,tt.selection.getContent()),tt.insertContent(tt.selection.getContent()+`${Su}`),tt.insertContent(tt.selection.getContent()+"<p></p>"),no.value=Sn.value.indexOf(Su)}}),tt.ui.registry.addButton("customBtn4",{text:"续写",tooltip:"消耗"+_s.value.price+Pn.getTokenUnit,onAction:()=>{const Dt=tt.selection.isCollapsed()?tt.getContent():tt.selection.getContent();Zn(z0.Continue,Dt),tt.insertContent(tt.selection.getContent()+`${Su}`),tt.insertContent(tt.selection.getContent()+"<p></p>"),no.value=Sn.value.indexOf(Su)}}),tt.on("Change",()=>{setTimeout(()=>{go("content",Sn.value)},100)})},...Bo.options});let St;const Ye=Eu(""),Zn=(tt,Dt)=>{St=gK({other_id:wo.query.modelId,question:Dt,type:2,creation_type:tt,model:_s.value.id}),St.addEventListener("close",async()=>{mt(),Yt.getUser()}),St.addEventListener("error",async he=>{var Y;if(mt(),((Y=he.data)==null?void 0:Y.code)===1100){Pn.getIsShowRecharge?(await Lp.confirm(`${Pn.getTokenUnit}数量已用完，请前往充值`),zn.push("/user/recharge")):Lp.msgError(`${Pn.getTokenUnit}数量已用完。请联系客服增加`);return}he.errorType==="connectError"&&Lp.msgError("请求失败，请重试")}),St.addEventListener("chat",({data:he})=>{const{data:Y}=he;if(Y)if(no.value!==-1){Ye.value+=Y;const Ls=co==null?void 0:co.render(Hj(Ye.value));Sn.value=Vt(Sn.value,no.value,Ls)}else Sn.value+=Y}),St.addEventListener("finish",({data:he})=>{const{data:Y}=he;if(Y)if(no.value!==-1){Ye.value+=Y;const Ls=co==null?void 0:co.render(Hj(Ye.value));Sn.value=Vt(Sn.value,no.value,Ls)}else Sn.value+=Y})},mt=()=>{no.value=-1,Ye.value="",kt.value="",Un.value=""},Z=()=>{St==null||St.removeEventListener("close"),St==null||St.removeEventListener("chat"),St==null||St.removeEventListener("error"),St==null||St.removeEventListener("finish"),St==null||St.abort()},kt=Eu(""),Un=Eu("");function Vt(tt,Dt,he){return(!kt.value||!Un.value)&&(kt.value=tt.substring(0,Dt),Un.value=tt.substring(Dt+Su.length)),kt.value+he+Un.value}const q=async()=>{var Dt;await yq();const tt=(Dt=So.value)==null?void 0:Dt.getEditor();setTimeout(()=>{const he=tt.selection.isCollapsed()?tt.getContent():tt.selection.getContent();Zn(z0.Continue,he),tt.focus(),no.value=-1,tt.selection.isCollapsed()&&(tt.selection.select(tt.getBody(),!0),tt.insertContent(tt.selection.getContent()+"<p></p>"))},100)},gt=()=>Wt(Sn.value);return Zj(()=>Bo.modelValue,tt=>{Sn.value=co==null?void 0:co.render(Hj(tt))},{immediate:!0}),Wq(()=>{Z()}),Zq(()=>{gq.remove("#"+io.value)}),bq(()=>{gq.init(dn)}),fo({continuation:q,getContent:gt}),(tt,Dt)=>(eo(),Sr("div",null,[ba(Wt(uK),{"api-key":"rrsqwlunlutrzwrtd864sti95kxkc2bft4kb5z667yzo17lr",modelValue:Wt(Sn),"onUpdate:modelValue":Dt[0]||(Dt[0]=he=>jj(Sn)?Sn.value=he:null),init:Wt(dn),id:Wt(io),ref_key:"tinyMceEditorRef",ref:So},null,8,["modelValue","init","id"])]))}});const FK={class:""},LK={class:"mr-auto line-clamp-1 text-lg font-medium"},HK={class:"flex items-center flex-none mt-[10px]"},zK={class:"text-xs text-tx-secondary mr-auto"},VK=HC({__name:"record-item",props:{typing:{type:Boolean,default:!1},title:{default:""},time:{default:""},content:{default:""},showCopy:{type:Boolean,default:!0},autoresize:{type:Boolean,default:!0},showRewrite:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},showVoice:{type:Boolean,default:!1},recordId:{default:0},index:{default:0},edit:{type:Boolean},modelName:{default:""}},emits:["content","copy","rewrite","refresh"],setup(to,{emit:fo}){const go=to,Bo=kF(),wo=Eu(),zn=Eu(!1);Zj(()=>go.edit,dn=>{dn&&(zn.value=!0)},{immediate:!0});const Pn=async()=>{try{zn.value=!0,await yq(),wo.value.continuation()}catch{}},Yt=async()=>{try{await hK({id:go.recordId,content:wo.value.getContent()}),fo("refresh"),zn.value=!1}catch{}},So=async()=>{try{await Lp.confirm("确定删除该记录？"),await pK({id:go.recordId}),fo("refresh")}catch{}},_s=async()=>(await bK({records_id:go.recordId,content:go.index})).file,{play:Sn,audioPlaying:co,pause:no,audioLoading:io}=fK();return(dn,St)=>{const Ye=Iq,Zn=hq,mt=PK,Z=Cq,kt=Gj;return eo(),Sr("div",{class:Ng(["create-record-item",{"!pt-2":Wt(zn)}])},[Wj(xr("div",null,[xr("div",FK,[xr("div",LK,$D(dn.title),1),dn.modelName&&Wt(Bo).getChatConfig.is_show_model?(eo(),bi(Ye,{key:0,class:"mt-2",type:"success",style:{"--el-tag-border-color":"transparent"}},{default:cr(()=>[xu($D(dn.modelName),1)]),_:1})):$c("",!0)]),xr("div",{class:"mt-[10px] overflow-hidden",style:jq({height:dn.autoresize?"":"calc(100vh - 340px)"})},[ba(Zn,{content:dn.content,lineClamp:8,class:Ng({"wait-typing":dn.typing&&!dn.content,typing:dn.typing&&dn.content})},null,8,["content","class"])],4)],512),[[pq,!Wt(zn)]]),ba(mt,null,{default:cr(()=>[Wt(zn)?(eo(),bi(IK,{key:0,class:Ng({"record-editor":!dn.autoresize}),autoresize:dn.autoresize,"model-value":dn.content,ref_key:"recordEditorRef",ref:wo,onContent:St[0]||(St[0]=Un=>fo("content",Un))},null,8,["class","autoresize","model-value"])):$c("",!0)]),_:1}),xr("div",HK,[xr("div",zK,$D(dn.time),1),dn.showVoice?(eo(),Sr(H0,{key:0},[Wt(co)?(eo(),bi(kt,{key:0,round:"",size:"small",color:"#fff",onClick:Bg(Wt(no),["stop"])},{icon:cr(()=>[ba(Z,{name:"local-icon-audio_voice"})]),default:cr(()=>[xu(" 停止 ")]),_:1},8,["onClick"])):(eo(),bi(kt,{key:1,round:"",size:"small",color:"#fff",loading:Wt(io),onClick:St[1]||(St[1]=Bg(Un=>Wt(Sn)(_s),["stop"]))},{icon:cr(()=>[ba(Z,{name:"local-icon-audio_voice"})]),default:cr(()=>[xu(" 朗读 ")]),_:1},8,["loading"]))],64)):$c("",!0),dn.showRewrite?(eo(),bi(kt,{key:1,round:"",size:"small",color:"#fff",onClick:Bg(Pn,["stop"])},{default:cr(()=>[xu(" 续写 ")]),_:1},8,["onClick"])):$c("",!0),dn.showRewrite?(eo(),bi(kt,{key:2,round:"",size:"small",color:"#fff",onClick:St[2]||(St[2]=Bg(Un=>fo("rewrite"),["stop"]))},{default:cr(()=>[xu(" 重写 ")]),_:1})):$c("",!0),dn.showCopy?(eo(),bi(kt,{key:3,round:"",size:"small",color:"#fff",onClick:St[3]||(St[3]=Bg(Un=>fo("copy",dn.content),["stop"]))},{default:cr(()=>[xu(" 复制 ")]),_:1})):$c("",!0),Wt(zn)?(eo(),bi(kt,{key:4,round:"",size:"small",color:"#fff",onClick:St[4]||(St[4]=Bg(Un=>zn.value=!1,["stop"]))},{default:cr(()=>[xu(" 取消 ")]),_:1})):$c("",!0),Wt(zn)?(eo(),bi(kt,{key:5,round:"",size:"small",type:"primary",onClick:Bg(Yt,["stop"])},{default:cr(()=>[xu(" 保存 ")]),_:1},8,["onClick"])):$c("",!0),Wt(zn)?$c("",!0):(eo(),bi(kt,{key:6,round:"",size:"small",color:"#fff",onClick:St[5]||(St[5]=Bg(Un=>zn.value=!0,["stop"]))},{default:cr(()=>[xu(" 编辑 ")]),_:1})),Wt(zn)?$c("",!0):(eo(),bi(kt,{key:7,round:"",size:"small",color:"#fff",onClick:Bg(So,["stop"])},{default:cr(()=>[xu(" 删除 ")]),_:1},8,["onClick"]))])],2)}}});const UK=wq(VK,[["__scopeId","data-v-c73305ad"]]);const WK={class:"h-full flex flex-col"},ZK={class:"flex items-center pb-[16px]"},jK={class:"text-lg flex-1 min-w-0 font-medium"},GK=xr("span",{class:"ml-[10px]"},"复制",-1),qK={class:"flex-1 min-h-0"},KK={class:"pt-[16px]"},YK=HC({__name:"record-preview",props:{title:{default:""},time:{default:""},content:{default:""},overflow:{type:Boolean,default:!1}},emits:["copy"],setup(to,{expose:fo,emit:go}){kF();const Bo=Eu(!1);return fo({open:()=>{Bo.value=!0}}),(zn,Pn)=>{const Yt=yK,So=Cq,_s=Gj,Sn=hq,co=Uj,no=NK;return eo(),bi(no,{ref:"drawerRef",modelValue:Wt(Bo),"onUpdate:modelValue":Pn[1]||(Pn[1]=io=>jj(Bo)?Bo.value=io:null),title:"创作详情",direction:"rtl",class:"record-preview-drawer",size:"50%","append-to-body":""},{default:cr(()=>[xr("div",WK,[xr("div",ZK,[xr("div",jK,[ba(Yt,{content:zn.title},null,8,["content"])]),ba(_s,{link:"",onClick:Pn[0]||(Pn[0]=io=>go("copy",zn.content))},{default:cr(()=>[ba(So,{name:"el-icon-DocumentCopy",size:18}),GK]),_:1})]),xr("div",qK,[ba(co,null,{default:cr(()=>[xr("div",KK,[ba(Sn,{content:zn.content},null,8,["content"])])]),_:1})])])]),_:1},8,["modelValue"])}}});const qj=to=>(Gq("data-v-8f24cad8"),to=to(),qq(),to),XK={class:"flex flex-col h-full creation-result flex-1 min-w-0"},JK={class:"rounded-[12px] pt-4 pl-4"},QK={class:"flex flex-col items-center gap-1 p-2"},eY={class:"text-xl"},tY={class:"flex-1 min-h-0 h-full"},nY={key:1,class:"h-full flex flex-col items-center justify-center py-[100px]"},oY=qj(()=>xr("img",{class:"w-[120px] h-[120px]",src:Sq,alt:""},null,-1)),sY=qj(()=>xr("div",{class:"my-[16px] font-medium"}," AI创作结果会在显示这里，现在你只需要 ",-1)),rY=qj(()=>xr("div",{class:"text-tx-regular text-sm"},[xu(" 1. 在左侧填好必要的信息，填写越详细，结果越准确哦 "),xr("br"),xu(" 2.点击智能创作按钮，静待AI妙笔生花，一般在10秒内搞定 ")],-1)),aY=[oY,sY,rY],cY={"infinite-scroll-distance":"50",class:"h-full px-[16px] pt-[16px]"},iY={key:1,class:"h-full flex flex-col items-center justify-center py-[100px]"},lY=HC({__name:"create-results",props:{current:{},loading:{type:Boolean},currentCreationHistory:{},pageInfo:{}},emits:["update:current","load","clean","rewrite","refresh"],setup(to,{emit:fo}){const go=to,Bo=dK(go,"current",fo),wo=Eu(),zn=Vj(),Pn=Vj(),Yt=kF(),{copy:So}=xK(),_s=async St=>{await So(St)},Sn=vq({title:"",content:""}),co=(St,Ye,Zn)=>{go.currentCreationHistory.length&&(go.currentCreationHistory[St].reply[Ye]=Zn)},no=(St,Ye)=>{var Zn;Sn.title=St,Sn.content=Ye,(Zn=zn.value)==null||Zn.open()},{height:io}=mK(Pn);Zj(io,St=>{var Ye,Zn,mt;if(go.loading){const Z=(Zn=(Ye=wo.value)==null?void 0:Ye.wrapRef)==null?void 0:Zn.offsetHeight;(mt=wo.value)==null||mt.setScrollTop(Z)}});const dn=()=>{fo("load")};return(St,Ye)=>{const Zn=$q,mt=UK,Z=Gj,kt=vK,Un=YK,Vt=EK;return eo(),Sr("div",XK,[xr("div",JK,[ba(Zn,{modelValue:Wt(Bo),"onUpdate:modelValue":Ye[0]||(Ye[0]=q=>jj(Bo)?Bo.value=q:null),block:!1,class:"segmented !p-[8px] !rounded-[12px] !bg-[#f7f7f7] dark:!bg-page",options:[{name:"本次创作结果",value:"current"},{name:"历史创作结果",value:"history"}]},{default:cr(({item:q,index:gt})=>[xr("div",QK,[xr("div",eY,$D(q.name),1)])]),_:1},8,["modelValue"])]),xr("div",tY,[Wt(Bo)==="current"?(eo(),Sr(H0,{key:0},[St.currentCreationHistory.length?(eo(),bi(Wt(Uj),{key:0,ref_key:"scrollbarRef",ref:wo},{default:cr(()=>[St.currentCreationHistory.length?(eo(),Sr("div",{key:0,ref_key:"currentCreationHistoryRef",ref:Pn,class:"px-[16px] pt-[16px]"},[(eo(!0),Sr(H0,null,_F(St.currentCreationHistory,(q,gt)=>(eo(),Sr(H0,{key:gt},[(eo(!0),Sr(H0,null,_F(q.reply,(tt,Dt)=>(eo(),bi(mt,{key:Dt,class:"mb-[16px]",content:tt,typing:St.loading,time:q.create_time,title:q.title,"record-id":q.id,edit:!0,autoresize:!1,"show-rewrite":!!q.extra&&!St.loading,"model-name":q.model,onCopy:_s,onRewrite:he=>fo("rewrite",q),onRefresh:Ye[1]||(Ye[1]=he=>fo("refresh")),onContent:he=>co(gt,Dt,he)},null,8,["content","typing","time","title","record-id","show-rewrite","model-name","onRewrite","onContent"]))),128))],64))),128))],512)):$c("",!0)]),_:1},512)):(eo(),Sr("div",nY,aY))],64)):(eo(),Sr(H0,{key:1},[St.pageInfo.lists.length?(eo(),bi(Wt(Uj),{key:0,class:"h-full"},{default:cr(()=>[Wj((eo(),Sr("div",cY,[xr("div",null,[ba(Z,{onClick:Ye[2]||(Ye[2]=q=>fo("clean"))},{default:cr(()=>[xu(" 清空记录")]),_:1})]),(eo(!0),Sr(H0,null,_F(St.pageInfo.lists,q=>(eo(),Sr("div",{key:q.id,class:"mt-[16px]"},[(eo(!0),Sr(H0,null,_F(q.reply,(gt,tt)=>(eo(),Sr("div",{key:tt,class:"mb-[16px]"},[ba(mt,{class:"cursor-pointer",content:gt,time:q.create_time,title:q.title,overflow:!0,"show-rewrite":!!q.extra,"show-voice":Wt(Yt).getIsVoiceOpen,"record-id":q.id,"model-name":q.model,index:tt,onClick:Dt=>no(q.title,gt),onCopy:_s,onRewrite:Dt=>fo("rewrite",q),onRefresh:Ye[3]||(Ye[3]=Dt=>fo("refresh"))},null,8,["content","time","title","show-rewrite","show-voice","record-id","model-name","index","onClick","onRewrite"])]))),128))]))),128))])),[[Vt,dn]])]),_:1})):(eo(),Sr("div",iY,[ba(kt,{image:Wt(Sq)},null,8,["image"])]))],64))]),ba(Un,{ref_key:"createRecordPreviewRef",ref:zn,content:Wt(Sn).content,title:Wt(Sn).title,onCopy:_s},null,8,["content","title"])])}}});const uY=wq(lY,[["__scopeId","data-v-8f24cad8"]]),RY=Object.freeze(Object.defineProperty({__proto__:null,default:uY},Symbol.toStringTag,{value:"Module"}));export{uY as C,PK as _,z0 as a,RY as c};
