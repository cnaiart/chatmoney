import{_ as k}from"./index.vue.7f39d825.js";import{E as D}from"./el-upload.5844c619.js";import{_ as U}from"./index.f647f618.js";import{E as $}from"./index.6c069afb.js";import{a as F,am as N,v as M}from"./entry.dfbfd4fd.js";import"./el-progress.8f5e9f30.js";/* empty css                  */import{k as j,al as A,s as w,a as x,b as H,n as C,l as J,E as L,u as o,H as r,I as m,J as d,$ as P,U as T,V as b,N as X,X as c,R as f,_ as Y,Y as V,e as q,ag as G,ah as K}from"./swiper-vue.2eb6bd20.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";const Q=t=>(G("data-v-6025f73c"),t=t(),K(),t),W={key:0},Z={class:"flex"},ee={key:0,class:"el-upload flex-col bg-fill-lighter"},te=Q(()=>d("div",{class:"text-tx-secondary mt-[2px]"},"添加视频",-1)),ae={key:1,class:"imgContiner relative"},oe=["src"],le=j({__name:"index",props:{modelValue:{type:String,default:""},excludeDomain:{type:Boolean,default:!1},canClose:{type:Boolean,default:!0},size:{type:String,default:"100px"}},emits:["change","update:modelValue"],setup(t,{emit:h}){const u=t;A(a=>({"4c5b0256":t.size}));const{getImageUrl:z}=F(),_=w(),n=x(!1),y=x(!1);H(n,a=>{a?C(()=>{var e;(e=_.value)==null||e.play()}):C(()=>{var e;(e=_.value)==null||e.pause()})});const p=x(!1),l=J({get(){return u.excludeDomain?z(u.modelValue):u.modelValue},set(a){h("update:modelValue",a)}}),v=w(),R=async({raw:a})=>{var e,i;try{p.value=!0;const s=await N("video",{file:a});p.value=!1,l.value=u.excludeDomain?s.url:s.uri,h("change",s.uri),(e=v.value)==null||e.clearFiles()}catch{p.value=!1,(i=v.value)==null||i.clearFiles()}};return L(()=>{y.value=!0}),(a,e)=>{const i=k,s=k,S=D,E=U,I=$,B=M;return o(y)?(r(),m("div",W,[d("div",Z,[P((r(),T(S,{"element-loading-text":"上传中...",ref_key:"uploadRef",ref:v,class:"avatar-uploader flex","show-file-list":!1,limit:1,"on-change":R,"auto-upload":!1,accept:".wmv,.avi,.mpg,.mpeg,.3gp,.mov,.mp4,.flv,.rmvb,.mkv"},{default:b(()=>[X(a.$slots,"default",{},()=>[o(l)?f("",!0):(r(),m("div",ee,[c(i,{name:"el-icon-Plus",size:20}),te])),o(l)?(r(),m("div",ae,[d("div",{class:"border border-solid border-br-light rounded-[6px] relative cursor-pointer",style:Y({width:t.size,height:t.size})},[d("video",{class:"rounded-lg w-full h-full",src:o(l)},null,8,oe),d("div",{class:"z-[10px] absolute left-1/2 top-1/2 translate-x-[-50%] translate-y-[-50%] rounded-full w-5 h-5 flex justify-center items-center bg-[rgba(0,0,0,0.3)]",onClick:e[0]||(e[0]=V(g=>n.value=!0,["stop"]))},[c(s,{name:"el-icon-CaretRight",size:18,color:"#fff"})])],4),t.canClose?(r(),m("div",{key:0,class:"icon absolute top-[-10px] right-[-10px] text-tx-secondary",onClick:e[1]||(e[1]=V(g=>l.value="",["stop"]))},[c(i,{size:"20",name:"el-icon-CircleCloseFilled"})])):f("",!0)])):f("",!0)],!0)]),_:3})),[[B,o(p)]])]),c(I,{modelValue:o(n),"onUpdate:modelValue":e[2]||(e[2]=g=>q(n)?n.value=g:null),width:"740px",title:"视频预览"},{default:b(()=>[c(E,{ref_key:"playerRef",ref:_,src:o(l),width:"100%",height:"450px"},null,8,["src"])]),_:1},8,["modelValue"])])):f("",!0)}}});const fe=O(le,[["__scopeId","data-v-6025f73c"]]);export{fe as _};
