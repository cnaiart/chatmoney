import{j as A,d as R,v as F}from"./entry.dfbfd4fd.js";import{E as L,a as O}from"./el-select.b7a2650e.js";import{E as z,a as H}from"./el-table-column.ac121129.js";import{_ as J}from"./index.vue.c62cb732.js";import{_ as X}from"./index.vue.e0bcb29b.js";/* empty css               *//* empty css                     *//* empty css                  *//* empty css                    *//* empty css                 */import"./el-tooltip.4ed993c7.js";import{u as Z}from"./usePaging.b2b97b82.js";import{_ as G}from"./reply-popup.vue.bb015bbd.js";import{_ as K}from"./correct-popup.vue.7a361c45.js";import{o as M,q as Q,s as W}from"./robot.b9f1d754.js";import{k as Y,A as ee,r as te,s as $,a as oe,b as ae,H as d,I as v,J as i,X as e,V as a,a7 as _,u as l,$ as ne,U as le,Z as V,e as se}from"./swiper-vue.2eb6bd20.js";const ie={class:"p-main h-full flex flex-col"},ce={class:"flex justify-between"},re={class:"flex"},pe=i("div",{class:"pt-[6px] px-[10px]"},"问题反馈",-1),de={class:"flex-1 min-h-0"},_e={class:"flex items-center"},me=["onClick"],fe=["onClick"],ue={key:1},he={class:"flex justify-end mt-4"},Pe=Y({__name:"record",props:{appId:{}},setup(E){const g=E,{appId:C}=ee(g),m=te({robot_id:C,is_feedback:-1}),f=$(),u=$(),y=n=>{f.value.open(n,"查看回复")},B=n=>{f.value.open(n,"反馈内容")},{pager:r,getLists:p,resetPage:D}=Z({fetchFun:M,params:m}),h=oe([]),S=n=>{h.value=n.map(o=>o.id)},w=async n=>{await A.confirm("确定要删除？"),await Q({ids:n,robot_id:C.value}),p()},I=async n=>{var o;await W(n),(o=u.value)==null||o.close()};return p(),ae(()=>g.appId,()=>{D()}),(n,o)=>{const P=R,k=L,j=O,s=z,T=J,b=R,N=H,U=X,q=F;return d(),v("div",ie,[i("div",ce,[e(P,{disabled:l(h).length<=0,class:"!mb-4",onClick:o[0]||(o[0]=t=>w(l(h)))},{default:a(()=>[_(" 批量删除 ")]),_:1},8,["disabled"]),i("div",re,[pe,e(j,{modelValue:l(m).is_feedback,"onUpdate:modelValue":o[1]||(o[1]=t=>l(m).is_feedback=t),style:{width:"240px"},onChange:l(p)},{default:a(()=>[e(k,{label:"全部",value:-1}),e(k,{label:"未反馈",value:0}),e(k,{label:"已反馈",value:1})]),_:1},8,["modelValue","onChange"])])]),i("div",de,[ne((d(),le(N,{height:"100%",size:"large",data:l(r).lists,onSelectionChange:S},{default:a(()=>[e(s,{type:"selection",width:"55"}),e(s,{label:"ID",prop:"id","min-width":"80"}),e(s,{label:"用户信息","min-width":"180"},{default:a(({row:t})=>{var c;return[i("div",_e,[i("span",null,V((c=t.user)==null?void 0:c.nickname),1)])]}),_:1}),e(s,{label:"提问",prop:"ask","min-width":"300"},{default:a(({row:t})=>[e(T,{content:t.ask,line:2,teleported:!0,effect:"light"},null,8,["content"])]),_:1}),e(s,{label:"回答",prop:"answer","min-width":"300"},{default:a(({row:t})=>[i("span",{class:"line-clamp-2 cursor-pointer",onClick:c=>y(t.reply)},V(t.reply),9,me)]),_:1}),e(s,{label:"用户内容",prop:"feedback","min-width":"100"},{default:a(({row:t})=>[t.feedback?(d(),v("span",{key:0,class:"line-clamp-2 cursor-pointer text-primary",onClick:c=>B(t.feedback)},"反馈内容",8,fe)):(d(),v("span",ue,"-"))]),_:1}),e(s,{label:"提问时间",prop:"create_time","min-width":"180","show-tooltip-when-overflow":""}),e(s,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[e(b,{type:"primary",link:"",onClick:c=>{var x;return(x=l(u))==null?void 0:x.open(t)}},{default:a(()=>[_(" 修正 ")]),_:2},1032,["onClick"]),e(b,{type:"primary",link:"",onClick:c=>y(t.reply)},{default:a(()=>[_(" 查看回复 ")]),_:2},1032,["onClick"]),e(b,{type:"danger",link:"",onClick:c=>w([t.id])},{default:a(()=>[_(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,l(r).loading]])]),i("div",he,[e(U,{modelValue:l(r),"onUpdate:modelValue":o[2]||(o[2]=t=>se(r)?r.value=t:null),onChange:l(p)},null,8,["modelValue","onChange"])]),e(G,{ref_key:"popRef",ref:f},null,512),e(K,{ref_key:"correctRef",ref:u,onConfirm:I},null,512)])}}});export{Pe as _};
