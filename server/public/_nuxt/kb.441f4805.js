import{a as F,E as H}from"./el-tabs.2ed630c1.js";import{_ as C}from"./index.vue.7f39d825.js";import{E as J}from"./el-image-viewer.d5621b18.js";import{E as O}from"./index.17567b0d.js";import{h as X,m as Y,a as Z,j as b}from"./entry.dfbfd4fd.js";/* empty css                     */import{k as G,a as E,r as I,s as Q,E as W,H as n,I as l,J as e,X as s,V as $,u as c,$ as ee,S as D,aj as te,R as _,U as oe,n as v,Y as w,Z as k,ag as se,ah as ae}from"./swiper-vue.2eb6bd20.js";import{_ as ie}from"./addPop.vue.ebfb64ce.js";import{_ as ne}from"./tologin.vue.2e7a83df.js";import{r as re,b as le}from"./my_database.3adef370.js";import{u as ce}from"./recharge.97d70211.js";import{E as pe}from"./index.a258b1c6.js";import{_ as me}from"./_plugin-vue_export-helper.c27b6911.js";import"./strings.ceb81673.js";import"./index.15b778d4.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./index.883ed08b.js";import"./castArray.c741e965.js";import"./_baseClone.20563df6.js";import"./_getTag.83294aff.js";import"./index.828bffd0.js";import"./index.8ad94f19.js";import"./isUndefined.aa0326a0.js";import"./dropdown.cd5c481a.js";import"./index.5054c8b8.js";import"./el-select.b7a2650e.js";import"./index.e979a1ab.js";import"./isEqual.0df0ab2c.js";import"./_baseIteratee.5e0c38c1.js";import"./index.071e9281.js";import"./el-collapse.1527f898.js";import"./index.93ec1a3c.js";/* empty css               *//* empty css                  */import"./index.e94bc8a7.js";import"./index.6c069afb.js";import"./use-dialog.7d399731.js";import"./refs.cabac943.js";/* empty css                  */import"./useQuery.ba65a97e.js";import"./index.b46f9587.js";import"./el-upload.5844c619.js";import"./el-progress.8f5e9f30.js";import"./cloneDeep.4e82bacf.js";import"./el-form-item.4ed993c7.js";/* empty css                   *//* empty css                */const y=m=>(se("data-v-84898f5a"),m=m(),ae(),m),de={class:"h-full flex flex-col"},_e={class:"px-[20px] py-[16px] mt-[-8px]"},fe={class:"flex-1 min-h-0"},ue={key:0,class:"flex flex-wrap px-[20px]","infinite-scroll-distance":"50"},xe=y(()=>e("div",{class:"mt-[10px]"},"新增知识库",-1)),he=["onClick"],ge={class:"flex relative"},be=["onClick"],ve={class:"ml-1 text-sm"},we={key:0,class:"kb-btns absolute bottom-0 left-0 w-full flex bg-[rgba(0,0,0,0.4)] py-[6px] text-white"},ke=["onClick"],ye=y(()=>e("span",{class:"ml-1"}," 编辑 ",-1)),Se=["onClick"],Ce=y(()=>e("span",{class:"ml-1"}," 删除 ",-1)),Ee={class:"px-[15px] py-[12px]"},Ie={class:"text-[18px] truncate"},$e={class:"flex items-center mt-[10px]"},De={class:"text-info flex-1 min-w-0 truncate"},Ne={key:1},Le=G({__name:"kb",setup(m){const N=X(),r=Y(),L=ce(),R=Z(),f=E({type:"0"});I({show:!1,num:0,kbId:0,isOwner:!1});const d=E(!1),u=Q(),t=I({pageNo:1,count:0,pageSize:15,lists:[]}),V=async()=>{t.pageNo=1,await v(),await p()},p=async()=>{const a=await re({...f.value,page_no:t.pageNo,page_size:t.pageSize});t.count=a.count,t.pageNo===1&&(t.lists=[]),t.lists.push(...a.lists)},j=()=>{r.isLogin&&t.count>=t.pageNo*t.pageSize&&(t.pageNo++,p())},z=async()=>{if(r.userInfo.kb_num<=0){R.getIsShowRecharge?(await b.confirm("知识库数量已用完，请前往充值"),L.toggleShow(!0)):b.msgError("知识库数量已用完。请联系客服增加");return}if(!r.isLogin)return r.toggleShowLogin();d.value=!0,await v(),u.value.open()},B=async a=>{d.value=!0,await v(),u.value.open({id:a})},P=async(a,i)=>{await b.confirm(`确认删除 ${i} 吗？`),await le({id:a}),p()},S=(a,i)=>{N.push(`/application/kb/detail?id=${a}&type=${i}`)};return W(()=>{p()}),(a,i)=>{const x=F,T=H,U=C,K=J,h=C,M=O,q=pe;return n(),l(D,null,[e("div",de,[e("div",_e,[s(T,{modelValue:c(f).type,"onUpdate:modelValue":i[0]||(i[0]=o=>c(f).type=o),class:"demo-tabs",onTabChange:V},{default:$(()=>[s(x,{label:"全部知识库",name:"0"}),s(x,{label:"我的知识库",name:"1"}),s(x,{label:"共享给我",name:"2"})]),_:1},8,["modelValue"])]),e("div",fe,[s(M,null,{default:$(()=>[c(r).isLogin?ee((n(),l("div",ue,[e("div",{class:"sm:w-[200px] w-full bg-body rounded-[12px] overflow-hidden cursor-pointer mr-[20px] flex-none mb-[20px] flex flex-col items-center justify-center min-h-[150px]",onClick:z},[s(U,{name:"el-icon-Plus",size:24}),xe]),(n(!0),l(D,null,te(c(t).lists,(o,A)=>(n(),l("div",{key:A,class:"kb-item sm:w-[200px] w-full bg-body rounded-[12px] overflow-hidden cursor-pointer mr-[20px] flex-none mb-[20px]",onClick:g=>S(o.id,"dataStudy")},[e("div",ge,[s(K,{src:o.image,class:"w-full h-[160px]",fit:"cover"},null,8,["src"]),e("div",{class:"bg-[rgba(0,0,0,0.4)] text-white absolute px-1 right-[10px] top-[10px] rounded flex items-center",onClick:w(g=>S(o.id,"teamData"),["stop"])},[s(h,{name:"el-icon-User"}),e("span",ve,k(o.team_people),1)],8,be),o.is_super?(n(),l("div",we,[e("div",{class:"flex flex-1 items-center justify-center",onClick:w(g=>B(o.id),["stop"])},[s(h,{name:"el-icon-Edit"}),ye],8,ke),e("div",{class:"flex flex-1 items-center justify-center",onClick:w(g=>P(o.id,o.name),["stop"])},[s(h,{name:"el-icon-Delete"}),Ce],8,Se)])):_("",!0)]),e("div",Ee,[e("div",Ie,k(o.name),1),e("div",$e,[e("div",De,k(o.intro||"这个知识库还没介绍呢～"),1)])])],8,he))),128))])),[[q,j]]):_("",!0),c(r).isLogin?_("",!0):(n(),l("div",Ne,[s(ne)]))]),_:1})])]),c(d)?(n(),oe(ie,{key:0,ref_key:"popRef",ref:u,onSuccess:i[1]||(i[1]=()=>{d.value=!1,p()})},null,512)):_("",!0)],64)}}});const It=me(Le,[["__scopeId","data-v-84898f5a"]]);export{It as default};
