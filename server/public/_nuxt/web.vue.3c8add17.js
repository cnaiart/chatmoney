import{E as q}from"./el-page-header.a55518b4.js";import{d as J,v as M,j as O}from"./entry.dfbfd4fd.js";import{E as X,a as Z}from"./el-table-column.ac121129.js";import{_ as G}from"./index.vue.7f39d825.js";import{E as K,a as Q,b as W}from"./el-dropdown.b4c59a57.js";import{_ as Y}from"./index.vue.e0bcb29b.js";/* empty css                   *//* empty css                    *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip.4ed993c7.js";import{u as ee}from"./useCopy.5611cfa5.js";import{u as te}from"./usePaging.b2b97b82.js";import{_ as ae}from"./create-share.vue.91c25dc8.js";import{_ as oe}from"./usage-settings.vue.86a14f39.js";import ne from"./poster.d8f5ef3e.js";import{w as se,y as ie,A as le,z as re,x as pe}from"./robot.b9f1d754.js";import{k as me,s as b,r as C,A as de,b as ce,H as $,I as _e,X as a,J as c,V as o,a7 as l,$ as ue,u as r,U as fe,Z as ye,e as ke,O as he,S as we}from"./swiper-vue.2eb6bd20.js";const ge={class:"mt-4"},ve=c("div",{class:"text-xs text-tx-secondary"}," 可以直接分享该模型给其他用户去进行对话，对方无需登录即可直接进行对话。注意，这个功能会消耗你账号的问答条数。请保管好链接和密码。 ",-1),be={class:"mt-4"},Ce={class:"flex items-center"},$e={class:"flex justify-end mt-4"},Me=me({__name:"web",props:{appId:{}},emits:["back"],setup(x,{emit:R}){const w=x,{copy:E}=ee(),k=b(),u=b(),p=C({show:!1,url:"",apikey:"",shareId:""}),{appId:S}=de(w),f=C({robot_id:S,type:1}),{pager:_,getLists:m}=te({fetchFun:se,params:f});m();const I=async e=>{await O.confirm("确定删除？"),await pe({id:e,type:f.type}),m()},P=(e,t)=>{switch(e){case"edit":v(t);break;case"delete":I(t.id);break;case"usage":D(t);break;case"preview":V(t);break}},g=e=>`${location.origin}/chat/${e.apikey} #${e.name} ${e.secret?`密码: ${e.secret}`:""}`,V=async e=>{const t=g(e);window.open(t,"_blank")},v=e=>{var s;let t=null;e&&(t={id:e.id,name:e.name,password:e.secret}),(s=k.value)==null||s.open(t)},B=async(e,t)=>{var s;await(t=="add"?ie({...e,...f}):le({id:e.id,name:e.name,password:e.password})),(s=k.value)==null||s.close(),m()},U=async e=>{const t=g(e);await E(t)},D=e=>{var t,s;(t=u.value)==null||t.open(),(s=u.value)==null||s.setFormData(e)},L=async e=>{var t;await re({...e,...f}),(t=u.value)==null||t.close(),m()},T=e=>{p.show=!0,p.url=e.share_bg,p.apikey=e.apikey,p.shareId=e.id};return ce(()=>w.appId,()=>{m()}),(e,t)=>{const s=q,i=J,d=X,A=G,y=K,F=Q,N=W,j=Z,z=Y,H=M;return $(),_e(we,null,[a(s,{content:"发布网页/朋友圈海报",onBack:t[0]||(t[0]=n=>R("back"))}),c("div",ge,[a(i,{class:"mb-4",type:"primary",onClick:t[1]||(t[1]=n=>v())},{default:o(()=>[l(" 创建链接 ")]),_:1}),ve]),c("div",be,[ue(($(),fe(j,{data:r(_).lists,size:"large"},{default:o(()=>[a(d,{label:"apikey",prop:"apikey","min-width":"200"}),a(d,{label:"分享名称",prop:"name","min-width":"180","show-tooltip-when-overflow":""}),a(d,{label:"访问密码",prop:"secret","min-width":"120"}),a(d,{label:"对话模式","min-width":"120"},{default:o(({row:n})=>[c("div",null,ye(n.chat_type==1?"文本对话":"形象对话"),1)]),_:1}),a(d,{label:"最后使用时间",prop:"use_time","min-width":"180"}),a(d,{label:"操作",width:"220",fixed:"right"},{default:o(({row:n})=>[c("div",Ce,[a(i,{type:"primary",link:"",onClick:h=>T(n)},{default:o(()=>[l(" 生成海报 ")]),_:2},1032,["onClick"]),a(i,{type:"primary",link:"",onClick:h=>U(n)},{default:o(()=>[l(" 复制链接 ")]),_:2},1032,["onClick"]),a(N,{class:"ml-[10px]",onCommand:h=>P(h,n)},{dropdown:o(()=>[a(F,null,{default:o(()=>[a(y,{command:"edit"},{default:o(()=>[a(i,{type:"primary",link:""},{default:o(()=>[l(" 编辑 ")]),_:1})]),_:1}),a(y,{command:"preview"},{default:o(()=>[a(i,{type:"primary",link:""},{default:o(()=>[l(" 预览 ")]),_:1})]),_:1}),a(y,{command:"usage"},{default:o(()=>[a(i,{type:"primary",link:""},{default:o(()=>[l(" 用量设置 ")]),_:1})]),_:1}),a(y,{command:"delete"},{default:o(()=>[a(i,{type:"danger",link:""},{default:o(()=>[l(" 删除 ")]),_:1})]),_:1})]),_:1})]),default:o(()=>[a(i,{type:"primary",link:""},{default:o(()=>[l(" 更多 "),a(A,{name:"el-icon-ArrowDown"})]),_:1})]),_:2},1032,["onCommand"])])]),_:1})]),_:1},8,["data"])),[[H,r(_).loading]]),c("div",$e,[a(z,{modelValue:r(_),"onUpdate:modelValue":t[2]||(t[2]=n=>ke(_)?_.value=n:null),onChange:r(m)},null,8,["modelValue","onChange"])])]),a(ae,{ref_key:"createShareRef",ref:k,isShowChatType:!0,onConfirm:B},null,512),a(oe,{ref_key:"usageSettingsRef",ref:u,onConfirm:L},null,512),a(ne,he(r(p),{show:r(p).show,"onUpdate:show":t[3]||(t[3]=n=>r(p).show=n),onUpdate:t[4]||(t[4]=n=>r(m)())}),null,16,["show"])],64)}}});export{Me as _};
