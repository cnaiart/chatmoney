import{_ as z}from"./index.vue.7f39d825.js";import{E as T}from"./index.8ad94f19.js";import{E as j,d as B,d0 as R,j as D}from"./entry.dfbfd4fd.js";import"./el-tooltip.4ed993c7.js";/* empty css                  */import{useImageEditor as F}from"./useImageEditor.3a7ec5d6.js";import{E as U}from"./index.6c069afb.js";import{k as $,a as c,H as J,I as L,X as l,V as d,J as s,u as e,T as h,e as b,n as N,ag as A,ah as H}from"./swiper-vue.2eb6bd20.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import"./isUndefined.aa0326a0.js";import"./DrawingTool.cac1dd22.js";import"./use-dialog.7d399731.js";import"./refs.cabac943.js";const X=n=>(A("data-v-2043d927"),n=n(),H(),n),q={class:"locality-draw-popup"},G=X(()=>s("div",{class:"w-full text-left"},[s("div",{class:"text-base font-medium"},"MJ 局部重绘 设置"),s("div",{class:"text-xs text-tx-secondary"},"局部重绘")],-1)),K={class:"flex justify-center"},P={class:"w-[940px] h-[500px]"},Q={class:"dialog-footer flex items-center mt-6 mb-4 px-10 cursor-pointer"},W={class:"flex flex-1 items-center"},Y={class:"flex h-full items-end flex-1 rounded-sm overflow-hidden"},Z={class:"flex items-center w-full min-h-full px-[6px] bg-page rounded-full"},ee=$({__name:"image-editor",props:{drawFunc:{type:Function}},emits:["success"],setup(n,{expose:k,emit:C}){const E=n,{initCanvas:I,changeTool:v,currentTool:x,onMouseDown:g,onMouseMove:_,onMouseUp:p,captureCombinedSelections:M,undo:y,clearState:V}=F({async onData(a){try{console.log("result",a),await E.drawFunc({...w.value,image_mask:a,prompt:r.value},"inpaint"),C("success"),i.value=!1}finally{u.value=!1}}}),i=c(!1),r=c(""),u=c(!1),w=c(),S=()=>{if(r.value.trim()===""){D.msgError("请输入重绘描述");return}u.value=!0,M()};return k({open:async a=>{i.value=!0,w.value=a,await N(),I("locality-canvas",a.image)}}),(a,o)=>{const m=z,f=T;return J(),L("div",q,[l(e(U),{modelValue:e(i),"onUpdate:modelValue":o[8]||(o[8]=t=>b(i)?i.value=t:null),width:"980px",class:"!rounded-[12px]",center:!0,draggable:!0,"destroy-on-close":!0,"close-on-click-modal":!1,onClose:e(V)},{header:d(()=>[G]),default:d(()=>[s("div",K,[s("div",P,[s("canvas",{id:"locality-canvas",width:"940",height:"500",onMousedown:o[0]||(o[0]=(...t)=>e(g)&&e(g)(...t)),onMousemove:o[1]||(o[1]=(...t)=>e(_)&&e(_)(...t)),onMouseup:o[2]||(o[2]=(...t)=>e(p)&&e(p)(...t)),onMouseleave:o[3]||(o[3]=(...t)=>e(p)&&e(p)(...t))},null,32)])]),s("div",Q,[l(f,{effect:"dark",content:"矩形工具",placement:"top"},{default:d(()=>[s("div",{class:h(["flex justify-center items-center w-[43px] h-[43px] bg-page rounded-full mr-2 hover:bg-primary hover:text-white",[e(x)==="rect"?"bg-primary text-white":""]]),onClick:o[4]||(o[4]=t=>e(v)("RECT"))},[l(m,{name:"local-icon-rect",size:"24"})],2)]),_:1}),l(f,{effect:"dark",content:"套索工具",placement:"top"},{default:d(()=>[s("div",{class:h(["flex justify-center items-center w-[43px] h-[43px] bg-page rounded-full mr-2 hover:bg-primary hover:text-white",[e(x)==="lasso"?"bg-primary text-white":""]]),onClick:o[5]||(o[5]=t=>e(v)("LASSO"))},[l(m,{name:"local-icon-lasso",size:"24"})],2)]),_:1}),l(f,{effect:"dark",content:"返回上一步",placement:"top"},{default:d(()=>[s("div",{class:"flex justify-center items-center w-[43px] h-[43px] bg-page rounded-full mr-2 hover:bg-primary hover:text-white",onClick:o[6]||(o[6]=(...t)=>e(y)&&e(y)(...t))},[l(m,{name:"local-icon-back",size:"24"})])]),_:1}),s("div",W,[s("div",Y,[s("div",Z,[l(e(j),{modelValue:e(r),"onUpdate:modelValue":o[7]||(o[7]=t=>b(r)?r.value=t:null),"input-style":{"border-radius":"50px",backgroundColor:"var(--el-bg-color-page)"},class:"min-h-full py-[6px]",placeholder:"请输入重绘描述 [推荐英文]",type:"textarea",autosize:{maxRows:3},resize:"none"},null,8,["modelValue","input-style"]),l(e(B),{loading:e(u),type:"primary",icon:e(R),circle:!0,onClick:S},null,8,["loading","icon"])])])])])]),_:1},8,["modelValue","onClose"])])}}});const ve=O(ee,[["__scopeId","data-v-2043d927"]]);export{ve as default};
