import{_ as V,a as j}from"./display.vue.4d052b4e.js";import{E as D}from"./index.17567b0d.js";import{u as U,_ as F}from"./player.a8689b22.js";import{_ as G}from"./index.vue.7f39d825.js";import{m as H,v as J}from"./entry.dfbfd4fd.js";/* empty css                     */import{b as X}from"./music.f06b2c3d.js";import{E as Z}from"./index.a258b1c6.js";import{k as q,s as w,a as N,r as A,E as K,b as O,j as Q,H as a,I as n,J as o,S as W,aj as Y,$ as R,u as r,X as p,V as tt,R as et,T as st,Z as ot,ag as it,ah as at}from"./swiper-vue.2eb6bd20.js";import{_ as nt}from"./_plugin-vue_export-helper.c27b6911.js";import"./el-image-viewer.d5621b18.js";import"./throttle.d40f833a.js";import"./debounce.8cbe4cfc.js";import"./position.4bcf7430.js";import"./index.8ad94f19.js";import"./isUndefined.aa0326a0.js";import"./el-tooltip.4ed993c7.js";/* empty css                  */import"./download.f61d7233.js";import"./el-select.b7a2650e.js";import"./index.e979a1ab.js";import"./strings.ceb81673.js";import"./isEqual.0df0ab2c.js";import"./_getTag.83294aff.js";import"./_baseIteratee.5e0c38c1.js";import"./index.071e9281.js";import"./castArray.c741e965.js";/* empty css               */import"./task_reward.d02f9b86.js";import"./index.e94bc8a7.js";import"./index.6c069afb.js";import"./use-dialog.7d399731.js";import"./refs.cabac943.js";/* empty css                  */import"./useLockFn.619a13da.js";import"./el-slider.211113d2.js";import"./el-input-number.a67590b7.js";import"./index.91e71ce7.js";const v=m=>(it("data-v-1898024f"),m=m(),at(),m),ct={class:"h-full bg-body rounded-[12px] p-[16px] flex flex-col"},lt=v(()=>o("div",{class:"text-2xl font-bold border-b border-solid border-br-light pb-[16px]"}," 生成记录 ",-1)),rt={class:"flex-1 min-h-0 flex flex-col"},pt={class:"category-lists"},mt=["onClick"],dt={class:"flex-1 min-h-0"},_t={key:0,class:"h-full flex flex-col"},ut={class:"flex-1 min-h-0 flex"},ft={class:"flex-1 min-w-0 h-full"},gt={"infinite-scroll-distance":"50"},ht={class:"mt-[16px]"},vt={key:1,class:"h-full flex flex-col items-center justify-center"},yt={class:"text-tx-secondary"},xt=v(()=>o("div",{class:"my-[10px]"},"当前还没有音乐哦",-1)),St=v(()=>o("div",{class:"text-tx-secondary text-sm"}," 在左侧输入描述，创建你的作品吧！ ",-1)),bt=q({__name:"index",setup(m,{expose:T}){H();const i=w(),k=[{name:"全部",type:-1},{name:"生成中",type:1},{name:"生成成功",type:2},{name:"生成失败",type:3}],{getMusic:y,currentId:u,pause:I}=U(),d=N(-1),t=A({pageNo:1,count:0,pageSize:15,loading:!0,lists:[]}),f=w(),x=N(0),z=async()=>{clearTimeout(f.value);const s=t.lists.filter(e=>e.status===1).map(e=>e.id);s.length>0&&(f.value=setTimeout(()=>{h()},6e3)),s.length!==x.value&&y(),x.value=s.length},g=async()=>{try{const s=await X({status:d.value,page_no:t.pageNo,page_size:t.pageSize});t.count=s.count,t.pageNo===1&&(t.lists=[]),t.lists.push(...s.lists)}catch{}finally{t.loading=!1,z()}};y();const B=()=>{t.count>=t.pageNo*t.pageSize&&(t.pageNo++,g())},h=async()=>{t.pageSize=t.pageNo*t.pageSize,t.pageNo=1,await g()},S=async()=>{t.loading=!0,t.pageSize=15,t.pageNo=1,await g()},b=()=>{const s=t.lists.find(e=>e.status===2);s&&(u.value=s.id)},C=async s=>{I(),d.value=s,u.value=-1,await S(),b()};return T({refresh:async()=>{d.value=-1,await h(),i.value.setScrollTop(0)}}),K(async()=>{await S(),b()}),O(u,s=>{if(i.value){const e=document.getElementById(`music-item-${s}`);if(!e)return;const c=e==null?void 0:e.getBoundingClientRect(),l=i.value.wrapRef.getBoundingClientRect();c.top<l.top&&i.value.setScrollTop(e==null?void 0:e.offsetTop),c.bottom>l.bottom&&i.value.setScrollTop((e==null?void 0:e.offsetTop)-l.height+c.height)}}),Q(()=>{clearTimeout(f.value)}),(s,e)=>{const c=V,l=D,E=j,M=F,L=G,$=Z,P=J;return a(),n("div",ct,[lt,o("div",rt,[o("div",pt,[(a(),n(W,null,Y(k,(_,wt)=>o("div",{key:_.type},[o("div",{class:st(["category-item bg-white",{"is-active":r(d)===_.type}]),onClick:Nt=>C(_.type)},ot(_.name),11,mt)])),64))]),R((a(),n("div",dt,[r(t).lists.length?(a(),n("div",_t,[o("div",ut,[o("div",ft,[p(l,{ref_key:"scrollBarRef",ref:i},{default:tt(()=>[R((a(),n("div",gt,[p(c,{"music-list":r(t).lists,onUpdate:h},null,8,["music-list"])])),[[$,B]])]),_:1},512)]),p(E)]),o("div",ht,[p(M,{ref:"musicPlayerRef",class:"bg-page rounded-[12px]"},null,512)])])):r(t).loading?et("",!0):(a(),n("div",vt,[o("div",yt,[p(L,{size:45,name:"local-icon-music1"})]),xt,St]))])),[[P,r(t).loading]])])])}}});const re=nt(bt,[["__scopeId","data-v-1898024f"]]);export{re as default};
